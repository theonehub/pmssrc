2025-06-07 03:11:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:11:39 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:11:39 [INFO] uvicorn.error:83 - _serve(): Started server process [20174]
2025-06-07 03:11:39 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:11:39 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:11:39 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:11:58 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:11:58 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:11:58 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:11:58 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:11:58 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:11:58 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:11:58 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:11:58 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:11:58 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:11:58 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:11:58 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:11:58 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:11:58 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:11:58 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:11:58 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:11:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:11:59 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:11:59 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 03:11:59 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 03:11:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59758 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:12:00 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:12:00 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:12:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59756 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 500
2025-06-07 03:12:00 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dataclass_type', 'loc': ('response', 0), 'msg': 'Input should be a dictionary or an instance of ReimbursementResponseDTO', 'input': ReimbursementSummaryDTO(request_id='25bf0b6c-74f3-457a-beac-e328b4920ce4', employee_id='EMP003', reimbursement_type_name='Travel(Intr)', amount=Decimal('20000.0'), status='draft', submitted_at=None, final_amount=None), 'ctx': {'class_name': 'ReimbursementResponseDTO'}}

2025-06-07 03:12:00 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:12:00 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:12:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59758 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:12:00 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:12:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59792 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 500
2025-06-07 03:12:00 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dataclass_type', 'loc': ('response', 0), 'msg': 'Input should be a dictionary or an instance of ReimbursementResponseDTO', 'input': ReimbursementSummaryDTO(request_id='25bf0b6c-74f3-457a-beac-e328b4920ce4', employee_id='EMP003', reimbursement_type_name='Travel(Intr)', amount=Decimal('20000.0'), status='draft', submitted_at=None, final_amount=None), 'ctx': {'class_name': 'ReimbursementResponseDTO'}}

2025-06-07 03:13:47 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:13:47 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:13:47 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:13:47 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:13:47 [INFO] uvicorn.error:93 - _serve(): Finished server process [20174]
2025-06-07 03:13:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:13:57 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:13:57 [INFO] uvicorn.error:83 - _serve(): Started server process [20215]
2025-06-07 03:13:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:13:57 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:13:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:14:00 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:14:00 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:14:00 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:14:00 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:14:00 [INFO] uvicorn.error:93 - _serve(): Finished server process [20215]
2025-06-07 03:14:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:14:10 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:14:10 [INFO] uvicorn.error:83 - _serve(): Started server process [20232]
2025-06-07 03:14:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:14:10 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:14:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:14:11 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:14:11 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:14:11 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:14:11 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:14:11 [INFO] uvicorn.error:93 - _serve(): Finished server process [20232]
2025-06-07 03:14:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:14:21 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:14:21 [INFO] uvicorn.error:83 - _serve(): Started server process [20249]
2025-06-07 03:14:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:14:21 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:14:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:14:41 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Not enough segments
2025-06-07 03:14:41 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Not enough segments
2025-06-07 03:14:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61061 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 401
2025-06-07 03:14:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61114 - "GET /docs HTTP/1.1" 200
2025-06-07 03:15:22 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:15:22 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:15:22 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:15:22 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:15:22 [INFO] uvicorn.error:93 - _serve(): Finished server process [20249]
2025-06-07 03:15:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:15:32 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:15:32 [INFO] uvicorn.error:83 - _serve(): Started server process [20455]
2025-06-07 03:15:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:15:32 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:15:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:15:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61325 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 403
2025-06-07 03:15:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61346 - "GET /api/v2/reimbursements/requests/pending HTTP/1.1" 403
2025-06-07 03:15:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61349 - "GET /api/v2/reimbursements/requests/approved HTTP/1.1" 403
2025-06-07 03:16:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61766 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:16:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61769 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:16:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61771 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:16:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61772 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:16:39 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:16:39 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:16:39 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:16:39 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:16:39 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:16:39 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:16:39 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:16:39 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:16:39 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:16:39 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:16:39 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:16:39 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:16:39 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:16:39 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:16:39 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:16:39 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:16:39 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:16:40 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 03:16:40 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 03:16:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61769 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:16:40 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:16:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61766 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:16:40 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:16:40 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:16:40 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:16:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61772 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:16:40 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:16:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61769 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:17:05 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:17:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:17:05 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:17:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61972 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:17:05 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:17:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:17:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61970 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:17:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61972 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:17:05 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:17:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:17:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:17:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61974 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:18:41 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:18:42 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:18:42 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:18:42 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:18:42 [INFO] uvicorn.error:93 - _serve(): Finished server process [20455]
2025-06-07 03:18:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:18:55 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:18:55 [INFO] uvicorn.error:83 - _serve(): Started server process [20523]
2025-06-07 03:18:55 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:18:55 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:18:55 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:18:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:19:08 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:19:08 [INFO] uvicorn.error:83 - _serve(): Started server process [20551]
2025-06-07 03:19:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:19:08 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:19:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:19:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:19:20 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:19:20 [INFO] uvicorn.error:83 - _serve(): Started server process [20567]
2025-06-07 03:19:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:19:20 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:19:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:19:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:19:34 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:19:34 [INFO] uvicorn.error:83 - _serve(): Started server process [20586]
2025-06-07 03:19:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:19:34 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:19:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:19:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:19:46 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:19:46 [INFO] uvicorn.error:83 - _serve(): Started server process [20606]
2025-06-07 03:19:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:19:46 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:19:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:19:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:20:02 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:20:02 [INFO] uvicorn.error:83 - _serve(): Started server process [20621]
2025-06-07 03:20:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:20:02 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:20:02 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:20:02 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:20:02 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:20:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:20:02 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:20:02 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:20:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:20:02 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:20:02 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:20:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:20:02 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:20:02 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:20:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:20:03 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:20:03 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:20:03 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:20:03 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:20:03 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:20:03 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:20:03 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:20:03 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:20:03 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:20:03 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:20:03 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:20:03 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:20:03 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:20:03 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:20:03 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:20:03 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:20:03 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:20:03 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:20:03 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:20:03 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:20:03 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:20:03 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:20:04 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 03:20:04 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 03:20:04 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:20:04 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:20:43 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:20:43 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:20:43 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:20:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63337 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:20:43 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:20:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63335 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:20:43 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:20:43 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:20:43 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:20:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63337 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:20:43 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:20:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63340 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:24:38 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:24:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:24:38 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:24:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64805 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:24:38 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:24:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:24:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64803 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:24:38 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:24:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:24:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64811 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:24:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:24:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64805 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:26:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49429 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:26:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49431 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:26:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49433 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:26:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49435 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:26:56 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:26:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:26:56 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:26:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49437 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:26:56 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:26:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:26:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49429 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:26:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49435 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:26:56 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:26:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:26:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:26:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49437 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:31:16 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:31:16 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:31:16 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:31:16 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:31:16 [INFO] uvicorn.error:93 - _serve(): Finished server process [20621]
2025-06-07 03:31:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:31:29 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:31:29 [INFO] uvicorn.error:83 - _serve(): Started server process [21068]
2025-06-07 03:31:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:31:29 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:31:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:31:35 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:31:35 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:31:35 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:31:35 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:31:35 [INFO] uvicorn.error:93 - _serve(): Finished server process [21068]
2025-06-07 03:31:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:31:44 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:31:44 [INFO] uvicorn.error:83 - _serve(): Started server process [21083]
2025-06-07 03:31:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:31:44 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:31:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:31:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:31:54 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:31:54 [INFO] uvicorn.error:83 - _serve(): Started server process [21096]
2025-06-07 03:31:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:31:54 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:31:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:31:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51578 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 403
2025-06-07 03:34:22 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:34:22 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:34:22 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:34:22 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:34:22 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:34:22 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:34:22 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:34:22 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:34:22 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:34:22 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:34:22 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:34:22 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:34:22 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:34:22 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:34:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:34:22 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:34:23 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:34:24 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 03:34:24 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 03:34:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52470 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:34:24 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:34:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:34:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52468 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:34:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52512 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:34:24 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:34:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:34:25 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:34:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52470 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:35:12 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:35:12 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:35:12 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:35:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52969 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:35:12 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:35:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52967 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:35:12 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:35:12 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:35:12 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:35:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52969 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:35:13 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:35:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52967 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:36:06 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:36:06 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:36:06 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:36:06 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:36:06 [INFO] uvicorn.error:93 - _serve(): Finished server process [21096]
2025-06-07 03:36:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:36:17 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:36:17 [INFO] uvicorn.error:83 - _serve(): Started server process [21308]
2025-06-07 03:36:17 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:36:17 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:36:17 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:36:31 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:36:31 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:36:31 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:36:31 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:36:31 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:36:31 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:36:32 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:36:32 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:36:32 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:36:32 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:36:32 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:36:32 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:36:32 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:36:32 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:36:32 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:36:32 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:36:32 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:36:33 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 03:36:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 03:36:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53488 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:36:33 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:36:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53486 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:36:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53681 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:36:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53683 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:36:56 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:36:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:36:56 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:36:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53683 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:36:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:36:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53681 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:39:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54845 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 403
2025-06-07 03:42:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55954 - "OPTIONS /reimbursements/pending HTTP/1.1" 200
2025-06-07 03:42:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55956 - "OPTIONS /reimbursements/approved HTTP/1.1" 200
2025-06-07 03:42:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55959 - "OPTIONS /reimbursements/pending HTTP/1.1" 200
2025-06-07 03:42:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55960 - "OPTIONS /reimbursements/approved HTTP/1.1" 200
2025-06-07 03:42:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55959 - "GET /reimbursements/pending HTTP/1.1" 404
2025-06-07 03:42:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55956 - "GET /reimbursements/approved HTTP/1.1" 404
2025-06-07 03:42:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55959 - "GET /reimbursements/pending HTTP/1.1" 404
2025-06-07 03:42:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55956 - "GET /reimbursements/approved HTTP/1.1" 404
2025-06-07 03:47:39 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:47:39 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:47:39 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:47:39 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:47:39 [INFO] uvicorn.error:93 - _serve(): Finished server process [21308]
2025-06-07 03:47:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:47:56 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:47:56 [INFO] uvicorn.error:83 - _serve(): Started server process [21533]
2025-06-07 03:47:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:47:56 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:47:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:47:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:47:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:47:59 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:47:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:47:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [21533]
2025-06-07 03:48:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:48:27 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:48:27 [INFO] uvicorn.error:83 - _serve(): Started server process [21550]
2025-06-07 03:48:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:48:27 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:48:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:48:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:48:42 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:48:42 [INFO] uvicorn.error:83 - _serve(): Started server process [21563]
2025-06-07 03:48:42 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:48:42 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:48:42 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:48:48 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:48:48 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:48:48 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:48:48 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:48:48 [INFO] uvicorn.error:93 - _serve(): Finished server process [21563]
2025-06-07 03:49:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:49:12 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:49:12 [INFO] uvicorn.error:83 - _serve(): Started server process [21574]
2025-06-07 03:49:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:49:12 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:49:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:49:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:50:04 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:50:04 [INFO] uvicorn.error:83 - _serve(): Started server process [21582]
2025-06-07 03:50:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:50:04 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:50:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:50:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:50:26 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:50:26 [INFO] uvicorn.error:83 - _serve(): Started server process [21606]
2025-06-07 03:50:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:50:26 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:50:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:50:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:50:49 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:50:49 [INFO] uvicorn.error:83 - _serve(): Started server process [21631]
2025-06-07 03:50:49 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:50:49 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:50:49 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:50:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58947 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:50:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58948 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:51:35 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:51:35 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:51:35 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:51:35 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:51:35 [INFO] uvicorn.error:93 - _serve(): Finished server process [21631]
2025-06-07 03:51:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:52:01 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:52:01 [INFO] uvicorn.error:83 - _serve(): Started server process [21646]
2025-06-07 03:52:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:52:01 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:52:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:52:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:52:16 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:52:16 [INFO] uvicorn.error:83 - _serve(): Started server process [21660]
2025-06-07 03:52:16 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:52:16 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:52:16 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:01:09 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:01:09 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:01:09 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:01:09 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:01:09 [INFO] uvicorn.error:93 - _serve(): Finished server process [21660]
2025-06-07 04:01:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:01:23 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:01:23 [INFO] uvicorn.error:83 - _serve(): Started server process [21827]
2025-06-07 04:01:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:01:23 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:01:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:01:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62172 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:01:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62174 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:01:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62177 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:01:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62178 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:01:23 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:01:23 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:01:23 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:01:23 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:01:23 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:01:23 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:01:23 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:01:23 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:01:23 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:01:23 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:01:23 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:01:23 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:01:23 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:01:23 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:01:23 [INFO] app.infrastructure.services.reimbursement_service_impl:502 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:01:24 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:01:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:01:24 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:01:24 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:01:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 04:01:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62172 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:01:24 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:01:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:01:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 04:01:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62178 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:01:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62227 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:01:25 [INFO] app.infrastructure.services.reimbursement_service_impl:502 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:01:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62178 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:01:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62502 - "OPTIONS /api/v2/reimbursements/requests/with-file HTTP/1.1" 200
2025-06-07 04:01:50 [INFO] app.api.controllers.reimbursement_controller:201 - create_reimbursement_request_with_file(): Creating reimbursement request with file for employee: EMP003 in organisation: localhost
2025-06-07 04:01:50 [INFO] app.infrastructure.services.reimbursement_service_impl:240 - create_reimbursement_request(): Creating reimbursement request for employee: EMP003 in organisation: localhost
2025-06-07 04:01:50 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:83 - execute(): Creating reimbursement request for employee: EMP003 by system
2025-06-07 04:01:50 [ERROR] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:303 - _send_notifications(): Failed to send notifications: 'EmailNotificationService' object has no attribute 'send_employee_notification'
2025-06-07 04:01:50 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:106 - execute(): Successfully created reimbursement request: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 04:01:50 [INFO] app.infrastructure.services.reimbursement_service_impl:248 - create_reimbursement_request(): Successfully created reimbursement request: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 04:01:50 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: receipts/localhost/377de0c9-0d37-4d51-8a8d-87226c1c597b.png
2025-06-07 04:01:50 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: 99caa3d8-c9c5-4e97-8118-c34424b20f25 in organisation: localhost
2025-06-07 04:01:51 [ERROR] app.infrastructure.services.reimbursement_service_impl:442 - attach_receipt_to_request(): Error attaching receipt to reimbursement request 99caa3d8-c9c5-4e97-8118-c34424b20f25 in organisation localhost: Reimbursement request not found: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 04:01:51 [ERROR] app.api.controllers.reimbursement_controller:233 - create_reimbursement_request_with_file(): Error creating reimbursement request with file for employee EMP003 in organisation localhost: Reimbursement request not found: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 04:01:51 [ERROR] app.api.routes.reimbursement_routes_v2:141 - create_reimbursement_request_with_file(): Error creating reimbursement request with file: 500: Internal server error
2025-06-07 04:01:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62502 - "POST /api/v2/reimbursements/requests/with-file HTTP/1.1" 500
2025-06-07 04:03:19 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:03:19 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:03:19 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:03:19 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:03:19 [INFO] uvicorn.error:93 - _serve(): Finished server process [21827]
2025-06-07 04:03:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:03:29 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:03:29 [INFO] uvicorn.error:83 - _serve(): Started server process [21881]
2025-06-07 04:03:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:03:29 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:03:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:03:42 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:03:42 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:03:42 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:03:42 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:03:42 [INFO] uvicorn.error:93 - _serve(): Finished server process [21881]
2025-06-07 04:03:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:03:51 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:03:51 [INFO] uvicorn.error:83 - _serve(): Started server process [21898]
2025-06-07 04:03:51 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:03:51 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:03:51 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:05:09 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:05:09 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:05:09 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:05:09 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:05:09 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:05:09 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:05:09 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:05:09 [INFO] app.api.controllers.reimbursement_controller:201 - create_reimbursement_request_with_file(): Creating reimbursement request with file for employee: EMP003 in organisation: localhost
2025-06-07 04:05:09 [INFO] app.infrastructure.services.reimbursement_service_impl:240 - create_reimbursement_request(): Creating reimbursement request for employee: EMP003 in organisation: localhost
2025-06-07 04:05:09 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:83 - execute(): Creating reimbursement request for employee: EMP003 by system
2025-06-07 04:05:11 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:05:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:05:11 [ERROR] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:303 - _send_notifications(): Failed to send notifications: 'EmailNotificationService' object has no attribute 'send_employee_notification'
2025-06-07 04:05:11 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:106 - execute(): Successfully created reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 04:05:11 [INFO] app.infrastructure.services.reimbursement_service_impl:248 - create_reimbursement_request(): Successfully created reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 04:05:11 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: receipts/localhost/21d290f1-0099-40b5-9698-1981f67d29a1.png
2025-06-07 04:05:11 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d in organisation: localhost
2025-06-07 04:05:11 [WARNING] app.infrastructure.services.reimbursement_service_impl:429 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:05:11 [WARNING] app.infrastructure.services.reimbursement_service_impl:429 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:05:12 [ERROR] app.infrastructure.services.reimbursement_service_impl:434 - attach_receipt_to_request(): Reimbursement request not found after retries: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 04:05:12 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 1
2025-06-07 04:05:12 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d in organisation: localhost
2025-06-07 04:05:12 [WARNING] app.infrastructure.services.reimbursement_service_impl:429 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:05:12 [WARNING] app.infrastructure.services.reimbursement_service_impl:429 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:05:12 [ERROR] app.infrastructure.services.reimbursement_service_impl:434 - attach_receipt_to_request(): Reimbursement request not found after retries: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 04:05:12 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 2
2025-06-07 04:05:12 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d in organisation: localhost
2025-06-07 04:05:12 [WARNING] app.infrastructure.services.reimbursement_service_impl:429 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:05:13 [WARNING] app.infrastructure.services.reimbursement_service_impl:429 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:05:13 [ERROR] app.infrastructure.services.reimbursement_service_impl:434 - attach_receipt_to_request(): Reimbursement request not found after retries: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 04:05:13 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 3
2025-06-07 04:05:13 [INFO] app.infrastructure.services.reimbursement_service_impl:495 - get_reimbursement_request_by_id(): Getting reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d in organisation: localhost
2025-06-07 04:05:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63842 - "POST /api/v2/reimbursements/requests/with-file HTTP/1.1" 200
2025-06-07 04:05:13 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:05:13 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:05:13 [INFO] app.infrastructure.services.reimbursement_service_impl:519 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:05:13 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 3 reimbursement requests for employee: EMP003
2025-06-07 04:05:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63842 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:05:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63886 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:05:49 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:05:49 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:05:49 [INFO] app.infrastructure.services.reimbursement_service_impl:519 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:05:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64124 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:05:49 [INFO] app.infrastructure.services.reimbursement_service_impl:519 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:05:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64124 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:05:49 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 3 reimbursement requests for employee: EMP003
2025-06-07 04:05:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64122 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:05:49 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:05:49 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:05:50 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 3 reimbursement requests for employee: EMP003
2025-06-07 04:05:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64124 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:08:49 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:08:49 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:08:49 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:08:49 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:08:49 [INFO] uvicorn.error:93 - _serve(): Finished server process [21898]
2025-06-07 04:08:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:09:01 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:09:01 [INFO] uvicorn.error:83 - _serve(): Started server process [22052]
2025-06-07 04:09:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:09:01 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:09:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:09:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:09:11 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:09:11 [INFO] uvicorn.error:83 - _serve(): Started server process [22072]
2025-06-07 04:09:11 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:09:11 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:09:11 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:10:06 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:10:06 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:10:06 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:10:06 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:10:06 [INFO] uvicorn.error:93 - _serve(): Finished server process [22072]
2025-06-07 04:10:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:10:20 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:10:20 [INFO] uvicorn.error:83 - _serve(): Started server process [22132]
2025-06-07 04:10:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:10:20 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:10:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:10:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:10:48 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:10:48 [INFO] uvicorn.error:83 - _serve(): Started server process [22171]
2025-06-07 04:10:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:10:48 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:10:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:13:32 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:13:32 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:13:32 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:13:32 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:13:32 [INFO] uvicorn.error:93 - _serve(): Finished server process [22171]
2025-06-07 04:13:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:13:45 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:13:45 [INFO] uvicorn.error:83 - _serve(): Started server process [22240]
2025-06-07 04:13:45 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:13:45 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:13:45 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:13:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50411 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:13:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50413 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:13:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50416 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:13:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50417 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:13:50 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:13:50 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:13:50 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:13:50 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:13:50 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:13:50 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:13:50 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:13:50 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:13:50 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:13:50 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:13:50 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:13:50 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:13:50 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:13:50 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:13:50 [INFO] app.infrastructure.services.reimbursement_service_impl:523 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:13:50 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:13:50 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:13:51 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:13:51 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:13:51 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 3 reimbursement requests for employee: EMP003
2025-06-07 04:13:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50411 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:13:51 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:13:51 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:13:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50413 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:13:51 [INFO] app.infrastructure.services.reimbursement_service_impl:523 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:13:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50411 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:13:51 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 3 reimbursement requests for employee: EMP003
2025-06-07 04:13:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50417 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:14:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50593 - "OPTIONS /api/v2/reimbursements/requests/with-file HTTP/1.1" 200
2025-06-07 04:14:13 [INFO] app.api.controllers.reimbursement_controller:201 - create_reimbursement_request_with_file(): Creating reimbursement request with file for employee: EMP003 in organisation: localhost
2025-06-07 04:14:13 [INFO] app.infrastructure.services.reimbursement_service_impl:240 - create_reimbursement_request(): Creating reimbursement request for employee: EMP003 in organisation: localhost
2025-06-07 04:14:13 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:83 - execute(): Creating reimbursement request for employee: EMP003 by system
2025-06-07 04:14:13 [ERROR] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:303 - _send_notifications(): Failed to send notifications: 'EmailNotificationService' object has no attribute 'send_employee_notification'
2025-06-07 04:14:13 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:106 - execute(): Successfully created reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 04:14:13 [INFO] app.infrastructure.services.reimbursement_service_impl:248 - create_reimbursement_request(): Successfully created reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 04:14:13 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: receipts/localhost/1d4e0f9c-56a6-4aff-89a9-7a3cf3ba0c51.png
2025-06-07 04:14:13 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 in organisation: localhost
2025-06-07 04:14:13 [INFO] app.infrastructure.services.reimbursement_service_impl:420 - attach_receipt_to_request(): Receipt details - file_path: receipts/localhost/1d4e0f9c-56a6-4aff-89a9-7a3cf3ba0c51.png, file_name: Screenshot 2025-05-07 at 4.27.23 PM.png, file_size: 30918, uploaded_by: EMP003
2025-06-07 04:14:14 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:14:14 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:14:14 [ERROR] app.infrastructure.services.reimbursement_service_impl:437 - attach_receipt_to_request(): Reimbursement request not found after retries: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 04:14:14 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 1
2025-06-07 04:14:14 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 in organisation: localhost
2025-06-07 04:14:14 [INFO] app.infrastructure.services.reimbursement_service_impl:420 - attach_receipt_to_request(): Receipt details - file_path: receipts/localhost/1d4e0f9c-56a6-4aff-89a9-7a3cf3ba0c51.png, file_name: Screenshot 2025-05-07 at 4.27.23 PM.png, file_size: 30918, uploaded_by: EMP003
2025-06-07 04:14:14 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:14:14 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:14:14 [ERROR] app.infrastructure.services.reimbursement_service_impl:437 - attach_receipt_to_request(): Reimbursement request not found after retries: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 04:14:14 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 2
2025-06-07 04:14:15 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 in organisation: localhost
2025-06-07 04:14:15 [INFO] app.infrastructure.services.reimbursement_service_impl:420 - attach_receipt_to_request(): Receipt details - file_path: receipts/localhost/1d4e0f9c-56a6-4aff-89a9-7a3cf3ba0c51.png, file_name: Screenshot 2025-05-07 at 4.27.23 PM.png, file_size: 30918, uploaded_by: EMP003
2025-06-07 04:14:15 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:14:15 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:14:15 [ERROR] app.infrastructure.services.reimbursement_service_impl:437 - attach_receipt_to_request(): Reimbursement request not found after retries: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 04:14:15 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 3
2025-06-07 04:14:15 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - get_reimbursement_request_by_id(): Getting reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 in organisation: localhost
2025-06-07 04:14:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50593 - "POST /api/v2/reimbursements/requests/with-file HTTP/1.1" 200
2025-06-07 04:14:15 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:14:15 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:14:15 [INFO] app.infrastructure.services.reimbursement_service_impl:523 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:14:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50599 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:14:15 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 4 reimbursement requests for employee: EMP003
2025-06-07 04:14:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50593 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:16:00 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:16:00 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:16:00 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:16:00 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:16:00 [INFO] uvicorn.error:93 - _serve(): Finished server process [22240]
2025-06-07 04:16:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:16:10 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:16:10 [INFO] uvicorn.error:83 - _serve(): Started server process [22271]
2025-06-07 04:16:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:16:10 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:16:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:18:47 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:18:47 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:18:47 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:18:47 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:18:47 [INFO] uvicorn.error:93 - _serve(): Finished server process [22271]
2025-06-07 04:18:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:19:00 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:19:00 [INFO] uvicorn.error:83 - _serve(): Started server process [22420]
2025-06-07 04:19:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:19:00 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:19:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:19:24 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:19:24 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:19:24 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:19:24 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:19:24 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:19:24 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:19:24 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:19:24 [INFO] app.api.controllers.reimbursement_controller:201 - create_reimbursement_request_with_file(): Creating reimbursement request with file for employee: EMP003 in organisation: localhost
2025-06-07 04:19:24 [INFO] app.infrastructure.services.reimbursement_service_impl:240 - create_reimbursement_request(): Creating reimbursement request for employee: EMP003 in organisation: localhost
2025-06-07 04:19:24 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:83 - execute(): Creating reimbursement request for employee: EMP003 by system
2025-06-07 04:19:25 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:19:25 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:19:25 [ERROR] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:303 - _send_notifications(): Failed to send notifications: 'EmailNotificationService' object has no attribute 'send_employee_notification'
2025-06-07 04:19:25 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:106 - execute(): Successfully created reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 04:19:25 [INFO] app.infrastructure.services.reimbursement_service_impl:248 - create_reimbursement_request(): Successfully created reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 04:19:25 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: receipts/localhost/eacf0267-5faf-4ed8-b845-b4154b56610c.png
2025-06-07 04:19:25 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6 in organisation: localhost
2025-06-07 04:19:25 [INFO] app.infrastructure.services.reimbursement_service_impl:420 - attach_receipt_to_request(): Receipt details - file_path: receipts/localhost/eacf0267-5faf-4ed8-b845-b4154b56610c.png, file_name: Screenshot 2025-05-07 at 4.37.07 PM.png, file_size: 37752, uploaded_by: EMP003
2025-06-07 04:19:25 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:19:25 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:19:26 [ERROR] app.infrastructure.services.reimbursement_service_impl:437 - attach_receipt_to_request(): Reimbursement request not found after retries: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 04:19:26 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 1
2025-06-07 04:19:26 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6 in organisation: localhost
2025-06-07 04:19:26 [INFO] app.infrastructure.services.reimbursement_service_impl:420 - attach_receipt_to_request(): Receipt details - file_path: receipts/localhost/eacf0267-5faf-4ed8-b845-b4154b56610c.png, file_name: Screenshot 2025-05-07 at 4.37.07 PM.png, file_size: 37752, uploaded_by: EMP003
2025-06-07 04:19:26 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:19:26 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:19:26 [ERROR] app.infrastructure.services.reimbursement_service_impl:437 - attach_receipt_to_request(): Reimbursement request not found after retries: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 04:19:26 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 2
2025-06-07 04:19:26 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6 in organisation: localhost
2025-06-07 04:19:26 [INFO] app.infrastructure.services.reimbursement_service_impl:420 - attach_receipt_to_request(): Receipt details - file_path: receipts/localhost/eacf0267-5faf-4ed8-b845-b4154b56610c.png, file_name: Screenshot 2025-05-07 at 4.37.07 PM.png, file_size: 37752, uploaded_by: EMP003
2025-06-07 04:19:26 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:19:26 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:19:27 [ERROR] app.infrastructure.services.reimbursement_service_impl:437 - attach_receipt_to_request(): Reimbursement request not found after retries: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 04:19:27 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 3
2025-06-07 04:19:27 [INFO] app.infrastructure.services.reimbursement_service_impl:533 - get_reimbursement_request_by_id(): Getting reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6 in organisation: localhost
2025-06-07 04:19:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52343 - "POST /api/v2/reimbursements/requests/with-file HTTP/1.1" 200
2025-06-07 04:19:27 [INFO] app.infrastructure.services.reimbursement_service_impl:591 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:19:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:19:27 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:19:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 5 reimbursement requests for employee: EMP003
2025-06-07 04:19:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52343 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:19:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52380 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:20:43 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:20:43 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:20:43 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:20:43 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:20:43 [INFO] uvicorn.error:93 - _serve(): Finished server process [22420]
2025-06-07 04:20:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:20:54 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:20:54 [INFO] uvicorn.error:83 - _serve(): Started server process [22447]
2025-06-07 04:20:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:20:54 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:20:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:21:15 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:21:16 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:21:16 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:21:16 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:21:16 [INFO] uvicorn.error:93 - _serve(): Finished server process [22447]
2025-06-07 04:21:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:21:25 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:21:25 [INFO] uvicorn.error:83 - _serve(): Started server process [22477]
2025-06-07 04:21:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:21:25 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:21:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:21:48 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:21:48 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:21:48 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:21:48 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:21:48 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:21:48 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:21:48 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:21:48 [INFO] app.api.controllers.reimbursement_controller:201 - create_reimbursement_request_with_file(): Creating reimbursement request with file for employee: EMP003 in organisation: localhost
2025-06-07 04:21:48 [INFO] app.infrastructure.services.reimbursement_service_impl:240 - create_reimbursement_request(): Creating reimbursement request for employee: EMP003 in organisation: localhost
2025-06-07 04:21:48 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:83 - execute(): Creating reimbursement request for employee: EMP003 by system
2025-06-07 04:21:49 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:21:49 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:21:49 [ERROR] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:303 - _send_notifications(): Failed to send notifications: 'EmailNotificationService' object has no attribute 'send_employee_notification'
2025-06-07 04:21:49 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:106 - execute(): Successfully created reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 04:21:49 [INFO] app.infrastructure.services.reimbursement_service_impl:248 - create_reimbursement_request(): Successfully created reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 04:21:49 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: receipts/localhost/65743128-d561-46a0-b401-0197cc33c377.png
2025-06-07 04:21:49 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 04:21:49 [INFO] app.infrastructure.services.reimbursement_service_impl:420 - attach_receipt_to_request(): Receipt details - file_path: receipts/localhost/65743128-d561-46a0-b401-0197cc33c377.png, file_name: Screenshot 2025-04-26 at 3.41.43 PM.png, file_size: 187670, uploaded_by: EMP003
2025-06-07 04:21:49 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:21:49 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:21:50 [WARNING] app.infrastructure.services.reimbursement_service_impl:462 - attach_receipt_to_request(): Entity not found after retries, proceeding with direct MongoDB update
2025-06-07 04:21:50 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - attach_receipt_to_request(): Trying direct MongoDB update as fallback...
2025-06-07 04:21:50 [INFO] app.infrastructure.services.reimbursement_service_impl:489 - attach_receipt_to_request(): Successfully attached receipt via direct MongoDB update: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 04:21:50 [INFO] app.infrastructure.services.reimbursement_service_impl:490 - attach_receipt_to_request(): Modified count: 1, Matched count: 1
2025-06-07 04:21:50 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 04:21:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53390 - "POST /api/v2/reimbursements/requests/with-file HTTP/1.1" 200
2025-06-07 04:21:50 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:21:50 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:21:50 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:21:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53415 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:21:51 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:21:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53390 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:24:02 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 04:26:40 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:26:40 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:26:40 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:26:40 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:26:40 [INFO] uvicorn.error:93 - _serve(): Finished server process [22477]
2025-06-07 04:26:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:26:50 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:26:50 [INFO] uvicorn.error:83 - _serve(): Started server process [22536]
2025-06-07 04:26:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:26:50 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:26:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:26:55 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:26:55 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:26:55 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:26:55 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:26:55 [INFO] uvicorn.error:93 - _serve(): Finished server process [22536]
2025-06-07 04:27:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:27:08 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:27:08 [INFO] uvicorn.error:83 - _serve(): Started server process [22551]
2025-06-07 04:27:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:27:08 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:27:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:27:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:27:43 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:27:43 [INFO] uvicorn.error:83 - _serve(): Started server process [22590]
2025-06-07 04:27:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:27:43 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:27:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:27:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55618 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:27:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55620 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:27:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55622 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:27:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55624 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:28:01 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:28:01 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:28:01 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:28:01 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:28:01 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:28:01 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:28:01 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:28:01 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:28:01 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:28:01 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:28:01 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:28:01 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:28:01 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:28:01 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:28:01 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:28:01 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:28:02 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:28:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55834 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:28:03 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:28:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:28:03 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:28:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55834 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:28:04 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:28:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55832 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:28:04 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:28:04 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:28:04 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:28:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55834 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56099 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56099 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55869 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:28:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:28:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56099 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:32:43 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:32:43 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:32:43 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:32:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57678 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:32:43 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:32:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57676 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:33:11 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:33:11 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:33:11 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:33:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57904 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:33:12 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:33:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57902 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:35:36 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:35:36 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:35:36 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:35:36 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:35:36 [INFO] uvicorn.error:93 - _serve(): Finished server process [22590]
2025-06-07 04:35:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:35:47 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:35:47 [INFO] uvicorn.error:83 - _serve(): Started server process [22918]
2025-06-07 04:35:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:35:47 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:35:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:37:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59483 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 403
2025-06-07 04:37:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59483 - "GET /favicon.ico HTTP/1.1" 404
2025-06-07 04:45:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61798 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:45:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61800 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:45:47 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:45:47 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:45:47 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:45:47 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:45:47 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:45:47 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:45:48 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:45:48 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:45:48 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:45:48 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:45:48 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:45:48 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:45:48 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:45:48 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:45:48 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:45:48 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:45:48 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:45:49 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:45:49 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:45:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61800 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:45:49 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:45:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61798 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:45:58 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:45:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:45:58 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:45:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61947 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:45:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:45:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61945 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:47:37 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:47:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:47:37 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:47:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62582 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:47:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:47:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62581 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:48:27 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:48:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:48:27 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:48:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62958 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:48:27 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:48:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62958 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:48:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:48:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62956 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:48:28 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:48:28 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:48:28 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:48:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62958 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:48:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62958 - "OPTIONS /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 200
2025-06-07 04:48:29 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 04:48:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62958 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 04:48:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62979 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 403
2025-06-07 04:49:27 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:49:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:49:27 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:49:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63402 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:49:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:49:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62960 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:49:29 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:49:29 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:49:29 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:49:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63402 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:49:29 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:49:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62960 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:51:44 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:51:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:51:44 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:51:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64280 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:51:45 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:51:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64278 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:52:55 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:52:55 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:52:55 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:52:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64849 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:52:55 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:52:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64851 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:52:55 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:52:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64847 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:52:55 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:52:55 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:52:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:52:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64851 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:53:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64948 - "OPTIONS /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 200
2025-06-07 04:53:07 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 04:53:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64948 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 04:53:34 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 04:53:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65131 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 04:53:55 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:53:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:53:56 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:53:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65291 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:53:56 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:53:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65291 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:53:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:53:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65289 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:53:56 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:53:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:53:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:53:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65291 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:54:10 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 04:54:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65293 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 04:54:52 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:54:52 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:54:52 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:54:52 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:54:52 [INFO] uvicorn.error:93 - _serve(): Finished server process [22918]
2025-06-07 04:54:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:55:04 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:55:04 [INFO] uvicorn.error:83 - _serve(): Started server process [23434]
2025-06-07 04:55:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:55:04 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:55:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:55:05 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:55:05 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:55:05 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:55:05 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:55:05 [INFO] uvicorn.error:93 - _serve(): Finished server process [23434]
2025-06-07 04:55:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:55:16 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:55:16 [INFO] uvicorn.error:83 - _serve(): Started server process [23451]
2025-06-07 04:55:16 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:55:16 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:55:16 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:55:37 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:55:37 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:55:37 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:55:37 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:55:37 [INFO] uvicorn.error:93 - _serve(): Finished server process [23451]
2025-06-07 04:55:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:55:47 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:55:47 [INFO] uvicorn.error:83 - _serve(): Started server process [23470]
2025-06-07 04:55:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:55:47 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:55:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:55:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49673 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:55:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49675 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:55:59 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:55:59 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:55:59 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:55:59 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:55:59 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:55:59 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:55:59 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:55:59 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:55:59 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:55:59 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:55:59 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:55:59 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:55:59 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:55:59 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:55:59 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:56:00 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:56:00 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:56:00 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:56:00 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:56:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49675 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:56:00 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:56:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49706 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:56:01 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:56:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49673 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:56:01 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:56:01 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:56:01 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:56:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49706 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:56:28 [INFO] app.api.routes.reimbursement_routes_v2:541 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 04:56:28 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 04:56:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49877 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 04:58:00 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:58:00 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:58:00 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:58:00 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:58:00 [INFO] uvicorn.error:93 - _serve(): Finished server process [23470]
2025-06-07 04:58:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:58:13 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:58:13 [INFO] uvicorn.error:83 - _serve(): Started server process [23524]
2025-06-07 04:58:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:58:13 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:58:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:58:43 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:58:43 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:58:43 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:58:43 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:58:43 [INFO] uvicorn.error:93 - _serve(): Finished server process [23524]
2025-06-07 04:58:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:58:59 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:58:59 [INFO] uvicorn.error:83 - _serve(): Started server process [23558]
2025-06-07 04:58:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:58:59 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:58:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:59:14 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:59:14 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:59:14 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:59:14 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:59:14 [INFO] uvicorn.error:93 - _serve(): Finished server process [23558]
2025-06-07 04:59:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:59:30 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:59:30 [INFO] uvicorn.error:83 - _serve(): Started server process [23580]
2025-06-07 04:59:30 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:59:30 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:59:30 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:59:30 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:59:30 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:59:30 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:59:30 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:59:30 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:59:30 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:59:30 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:59:30 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:59:30 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:59:30 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:59:30 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:59:30 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:59:30 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:59:30 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:59:30 [INFO] app.infrastructure.services.reimbursement_service_impl:565 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:59:30 [INFO] app.infrastructure.services.reimbursement_service_impl:599 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:59:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:59:31 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:59:31 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:59:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51044 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:59:31 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:59:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51042 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:00:06 [INFO] app.api.routes.reimbursement_routes_v2:541 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:00:06 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:00:06 [INFO] app.infrastructure.services.reimbursement_service_impl:539 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:00:06 [WARNING] app.infrastructure.services.reimbursement_service_impl:542 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:00:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51326 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:00:57 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:00:57 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:00:57 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:00:57 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:00:57 [INFO] uvicorn.error:93 - _serve(): Finished server process [23580]
2025-06-07 05:01:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:01:08 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:01:08 [INFO] uvicorn.error:83 - _serve(): Started server process [23636]
2025-06-07 05:01:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:01:08 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:01:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:01:17 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:01:17 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:01:17 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:01:17 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:01:17 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:01:17 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:01:17 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:01:17 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:01:17 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:01:17 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:01:17 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:01:17 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:01:17 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:01:17 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:01:17 [INFO] app.infrastructure.services.reimbursement_service_impl:599 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:01:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:01:18 [INFO] app.infrastructure.services.reimbursement_service_impl:565 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:01:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51827 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:01:18 [INFO] app.infrastructure.services.reimbursement_service_impl:565 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:01:18 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:01:18 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:01:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51827 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:01:18 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:01:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51825 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:01:19 [INFO] app.infrastructure.services.reimbursement_service_impl:599 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:01:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:01:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:01:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51827 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:01:23 [INFO] app.api.routes.reimbursement_routes_v2:541 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:01:23 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:01:23 [INFO] app.infrastructure.services.reimbursement_service_impl:539 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:01:23 [WARNING] app.infrastructure.services.reimbursement_service_impl:542 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:01:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51827 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:01:53 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:01:54 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:01:54 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:01:54 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:01:54 [INFO] uvicorn.error:93 - _serve(): Finished server process [23636]
2025-06-07 05:01:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:02:04 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:02:04 [INFO] uvicorn.error:83 - _serve(): Started server process [23660]
2025-06-07 05:02:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:02:04 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:02:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:02:23 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:02:23 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:02:23 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:02:23 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:02:23 [INFO] uvicorn.error:93 - _serve(): Finished server process [23660]
2025-06-07 05:02:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:02:31 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:02:31 [INFO] uvicorn.error:83 - _serve(): Started server process [23681]
2025-06-07 05:02:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:02:31 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:02:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:02:37 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:02:37 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:02:37 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:02:37 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:02:37 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:02:37 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:02:37 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:02:37 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:02:37 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:02:37 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:02:37 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:02:37 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:02:37 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:02:37 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:02:37 [INFO] app.infrastructure.services.reimbursement_service_impl:602 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:02:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:02:38 [INFO] app.infrastructure.services.reimbursement_service_impl:568 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:02:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52510 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:02:39 [INFO] app.infrastructure.services.reimbursement_service_impl:568 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:02:39 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:02:39 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:02:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52510 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:02:39 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:02:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52508 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:02:39 [INFO] app.infrastructure.services.reimbursement_service_impl:602 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:02:39 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:02:39 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:02:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52510 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:02:41 [INFO] app.api.routes.reimbursement_routes_v2:541 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:02:41 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:02:41 [INFO] app.infrastructure.services.reimbursement_service_impl:537 - get_reimbursement_request_by_id(): Repository type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:02:41 [INFO] app.infrastructure.services.reimbursement_service_impl:538 - get_reimbursement_request_by_id(): Repository.reimbursements type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:02:41 [INFO] app.infrastructure.services.reimbursement_service_impl:539 - get_reimbursement_request_by_id(): Repository.reimbursements.get_by_id method: <bound method MongoDBReimbursementRepository.get_by_id of <app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository object at 0x114143390>>
2025-06-07 05:02:41 [INFO] app.infrastructure.services.reimbursement_service_impl:542 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:02:41 [WARNING] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:02:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52510 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:07:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54313 - "OPTIONS /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 200
2025-06-07 05:07:18 [INFO] app.api.routes.reimbursement_routes_v2:541 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:07:18 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:07:18 [INFO] app.infrastructure.services.reimbursement_service_impl:537 - get_reimbursement_request_by_id(): Repository type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:07:18 [INFO] app.infrastructure.services.reimbursement_service_impl:538 - get_reimbursement_request_by_id(): Repository.reimbursements type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:07:18 [INFO] app.infrastructure.services.reimbursement_service_impl:539 - get_reimbursement_request_by_id(): Repository.reimbursements.get_by_id method: <bound method MongoDBReimbursementRepository.get_by_id of <app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository object at 0x114143390>>
2025-06-07 05:07:18 [INFO] app.infrastructure.services.reimbursement_service_impl:542 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:07:18 [WARNING] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:07:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54313 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:07:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:07:54 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:07:54 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:07:54 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:07:54 [INFO] uvicorn.error:93 - _serve(): Finished server process [23681]
2025-06-07 05:07:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:08:10 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:08:10 [INFO] uvicorn.error:83 - _serve(): Started server process [23750]
2025-06-07 05:08:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:08:10 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:08:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:08:20 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:08:20 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:08:20 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:08:20 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:08:20 [INFO] uvicorn.error:93 - _serve(): Finished server process [23750]
2025-06-07 05:08:28 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:08:34 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:08:34 [INFO] uvicorn.error:83 - _serve(): Started server process [23788]
2025-06-07 05:08:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:08:34 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:08:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:08:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54834 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:08:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54835 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:08:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54837 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:08:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54839 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:08:34 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:08:34 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:08:34 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:08:34 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:08:34 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:08:34 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:08:34 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:08:34 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:08:34 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:08:34 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:08:34 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:08:34 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:08:34 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:08:34 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:08:34 [INFO] app.infrastructure.services.reimbursement_service_impl:588 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:08:35 [INFO] app.infrastructure.services.reimbursement_service_impl:622 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:08:35 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:08:36 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:08:36 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:08:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54835 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:08:36 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:08:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54834 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:08:36 [INFO] app.infrastructure.services.reimbursement_service_impl:588 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:08:36 [INFO] app.infrastructure.services.reimbursement_service_impl:622 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:08:36 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:08:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54839 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:08:36 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:08:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54835 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:08:40 [INFO] app.api.routes.reimbursement_routes_v2:541 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:562 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:08:40 [WARNING] app.infrastructure.services.reimbursement_service_impl:565 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:08:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54835 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:10:44 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:10:44 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:10:44 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:10:44 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:10:44 [INFO] uvicorn.error:93 - _serve(): Finished server process [23788]
2025-06-07 05:10:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:11:00 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:11:00 [INFO] uvicorn.error:83 - _serve(): Started server process [23863]
2025-06-07 05:11:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:11:00 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:11:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:11:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56091 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 05:11:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56094 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 05:11:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56096 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 05:11:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56097 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 05:11:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56091 - "GET /api/v2/reimbursements/approved HTTP/1.1" 404
2025-06-07 05:11:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56099 - "GET /api/v2/reimbursements/pending HTTP/1.1" 404
2025-06-07 05:11:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56091 - "GET /api/v2/reimbursements/approved HTTP/1.1" 404
2025-06-07 05:11:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56099 - "GET /api/v2/reimbursements/pending HTTP/1.1" 404
2025-06-07 05:11:17 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Signature verification failed.
2025-06-07 05:11:17 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Signature verification failed.
2025-06-07 05:11:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56123 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 401
2025-06-07 05:11:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56262 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-07 05:11:42 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:11:56 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:11:58 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:11:58 [INFO] uvicorn.error:83 - _serve(): Started server process [24281]
2025-06-07 05:11:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:11:58 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:11:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:12:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56304 - "POST /api/v2/auth/login HTTP/1.1" 422
2025-06-07 05:12:11 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: admin @ localhost
2025-06-07 05:12:12 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:12:12 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:12:12 [ERROR] app.api.controllers.auth_controller:173 - login(): Login error: 'NoneType' object is not subscriptable
2025-06-07 05:12:12 [ERROR] app.api.routes.auth_routes_v2:83 - login(): Login error for user admin: 'NoneType' object is not subscriptable
2025-06-07 05:12:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56306 - "POST /api/v2/auth/login HTTP/1.1" 500
2025-06-07 05:13:31 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:13:32 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:13:32 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:13:32 [ERROR] app.api.controllers.auth_controller:173 - login(): Login error: 'NoneType' object is not subscriptable
2025-06-07 05:13:32 [ERROR] app.api.routes.auth_routes_v2:83 - login(): Login error for user superadmin: 'NoneType' object is not subscriptable
2025-06-07 05:13:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56460 - "POST /api/v2/auth/login HTTP/1.1" 500
2025-06-07 05:15:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:15:07 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:15:07 [INFO] uvicorn.error:83 - _serve(): Started server process [24767]
2025-06-07 05:15:07 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:15:07 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:15:07 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:15:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56835 - "GET /health HTTP/1.1" 404
2025-06-07 05:15:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56837 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 403
2025-06-07 05:15:44 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:15:44 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:15:44 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:15:44 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:15:44 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:15:44 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:15:45 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:15:45 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:15:45 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:15:45 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:15:45 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:15:45 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:15:45 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:15:45 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:15:45 [INFO] app.infrastructure.services.reimbursement_service_impl:613 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:15:45 [INFO] app.infrastructure.services.reimbursement_service_impl:647 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:15:45 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:15:46 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:15:46 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:15:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56894 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:15:46 [INFO] app.infrastructure.services.reimbursement_service_impl:613 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:15:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56894 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:15:46 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:15:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56892 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:15:47 [INFO] app.infrastructure.services.reimbursement_service_impl:647 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:15:47 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:15:47 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:15:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56894 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:15:49 [INFO] app.api.routes.reimbursement_routes_v2:541 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:15:49 [WARNING] app.infrastructure.services.reimbursement_service_impl:590 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:15:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56894 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:16:04 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:16:04 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:16:04 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:16:04 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:16:04 [INFO] uvicorn.error:93 - _serve(): Finished server process [24767]
2025-06-07 05:16:10 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:16:16 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:16:16 [INFO] uvicorn.error:83 - _serve(): Started server process [24843]
2025-06-07 05:16:16 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:16:16 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:16:16 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:16:16 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:16:16 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:16:16 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:16:17 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:16:17 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:16:17 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:16:17 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:16:17 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:16:17 [ERROR] app.api.routes.reimbursement_routes_v2:581 - debug_check_request(): DEBUG: Error checking request: MongoDBConnector.connect() missing 1 required positional argument: 'connection_string'
2025-06-07 05:16:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56997 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:16:27 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:16:27 [ERROR] app.api.routes.reimbursement_routes_v2:581 - debug_check_request(): DEBUG: Error checking request: MongoDBConnector.connect() missing 1 required positional argument: 'connection_string'
2025-06-07 05:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56999 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:16:39 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:16:39 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:16:39 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:16:39 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:16:39 [INFO] uvicorn.error:93 - _serve(): Finished server process [24843]
2025-06-07 05:16:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:16:50 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:16:50 [INFO] uvicorn.error:83 - _serve(): Started server process [24911]
2025-06-07 05:16:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:16:50 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:16:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:16:54 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:17:00 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:17:00 [INFO] uvicorn.error:83 - _serve(): Started server process [24932]
2025-06-07 05:17:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:17:00 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:17:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:17:00 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:17:00 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:17:00 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:17:00 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:17:00 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:17:00 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:17:00 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:17:00 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:17:30 [ERROR] app.api.routes.reimbursement_routes_v2:579 - debug_check_request(): DEBUG: Error checking request: localhost:27017: [Errno 61] Connection refused (configured timeouts: socketTimeoutMS: 20000.0ms, connectTimeoutMS: 20000.0ms), Timeout: 30s, Topology Description: <TopologyDescription id: 68437df4501c59bbf5b816fc, topology_type: Unknown, servers: [<ServerDescription ('localhost', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('localhost:27017: [Errno 61] Connection refused (configured timeouts: socketTimeoutMS: 20000.0ms, connectTimeoutMS: 20000.0ms)')>]>
2025-06-07 05:17:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57058 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:17:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57304 - "OPTIONS /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 200
2025-06-07 05:17:54 [INFO] app.api.routes.reimbursement_routes_v2:594 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:17:54 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:17:56 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:17:56 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:17:56 [WARNING] app.infrastructure.services.reimbursement_service_impl:590 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:17:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57304 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:18:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:18:22 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:18:22 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:18:22 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:18:22 [INFO] uvicorn.error:93 - _serve(): Finished server process [24932]
2025-06-07 05:18:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:18:34 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:18:34 [INFO] uvicorn.error:83 - _serve(): Started server process [25009]
2025-06-07 05:18:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:18:34 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:18:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:18:34 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:18:34 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:18:34 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:18:35 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:18:35 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:18:35 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:18:35 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:18:35 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:18:35 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:18:35 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:18:35 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:18:35 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:18:35 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:18:35 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:18:35 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:18:35 [ERROR] app.api.routes.reimbursement_routes_v2:579 - debug_check_request(): DEBUG: Error checking request: object NoneType can't be used in 'await' expression
2025-06-07 05:18:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57495 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:18:58 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:18:58 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:18:58 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:18:58 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:18:58 [INFO] uvicorn.error:93 - _serve(): Finished server process [25009]
2025-06-07 05:19:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:19:09 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:19:09 [INFO] uvicorn.error:83 - _serve(): Started server process [25040]
2025-06-07 05:19:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:19:09 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:19:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:19:09 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:19:09 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:19:09 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:19:09 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:19:09 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:19:09 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:19:09 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:19:09 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:19:09 [ERROR] app.api.routes.reimbursement_routes_v2:596 - debug_check_request(): DEBUG: Error checking request: CurrentUser.__init__() got an unexpected keyword argument 'employee_id'
2025-06-07 05:19:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57523 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:19:27 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:19:27 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:19:27 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:19:27 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:19:27 [INFO] uvicorn.error:93 - _serve(): Finished server process [25040]
2025-06-07 05:19:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:19:40 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:19:40 [INFO] uvicorn.error:83 - _serve(): Started server process [25070]
2025-06-07 05:19:40 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:19:40 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:19:40 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:19:40 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:19:40 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:19:40 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:19:40 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:19:40 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:19:40 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:19:40 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:19:40 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:19:40 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:19:41 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:19:41 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:19:41 [WARNING] app.infrastructure.services.reimbursement_service_impl:590 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:558 - debug_check_request(): DEBUG: Service returned: False
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:568 - debug_check_request(): DEBUG: All document IDs in database:
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: draft
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:19:42 [INFO] app.api.routes.reimbursement_routes_v2:582 - debug_check_request(): DEBUG: Found by request_id: True
2025-06-07 05:19:42 [INFO] app.api.routes.reimbursement_routes_v2:583 - debug_check_request(): DEBUG: Found by reimbursement_id: True
2025-06-07 05:19:42 [INFO] app.api.routes.reimbursement_routes_v2:584 - debug_check_request(): DEBUG: Found by _id: False
2025-06-07 05:19:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57542 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:20:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:20:54 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:20:54 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:20:54 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:20:54 [INFO] uvicorn.error:93 - _serve(): Finished server process [25070]
2025-06-07 05:21:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:21:09 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:21:09 [INFO] uvicorn.error:83 - _serve(): Started server process [25148]
2025-06-07 05:21:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:21:09 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:21:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:21:11 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:21:11 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:21:11 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:21:11 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:21:11 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:21:11 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:21:11 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:21:11 [INFO] app.api.routes.reimbursement_routes_v2:612 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:11 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:21:12 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:21:12 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:586 - get_reimbursement_request_by_id(): About to call repository.reimbursements.get_by_id with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, hostname: localhost
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:588 - get_reimbursement_request_by_id(): Repository.reimbursements type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:592 - get_reimbursement_request_by_id(): Repository call completed successfully. Entity: False
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:597 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:21:12 [WARNING] app.infrastructure.services.reimbursement_service_impl:600 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57869 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:21:15 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:586 - get_reimbursement_request_by_id(): About to call repository.reimbursements.get_by_id with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, hostname: localhost
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:588 - get_reimbursement_request_by_id(): Repository.reimbursements type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:592 - get_reimbursement_request_by_id(): Repository call completed successfully. Entity: False
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:597 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:21:16 [WARNING] app.infrastructure.services.reimbursement_service_impl:600 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:558 - debug_check_request(): DEBUG: Service returned: False
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:568 - debug_check_request(): DEBUG: All document IDs in database:
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: draft
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:582 - debug_check_request(): DEBUG: Found by request_id: True
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:583 - debug_check_request(): DEBUG: Found by reimbursement_id: True
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:584 - debug_check_request(): DEBUG: Found by _id: False
2025-06-07 05:21:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57916 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:21:50 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:21:50 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:21:50 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:21:50 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:21:50 [INFO] uvicorn.error:93 - _serve(): Finished server process [25148]
2025-06-07 05:21:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:22:01 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:22:01 [INFO] uvicorn.error:83 - _serve(): Started server process [25231]
2025-06-07 05:22:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:22:01 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:22:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:22:02 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:22:02 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:22:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:22:02 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:22:02 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:22:02 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:22:02 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:22:02 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:22:02 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:22:02 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:22:02 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:586 - get_reimbursement_request_by_id(): About to call repository.reimbursements.get_by_id with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, hostname: localhost
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:588 - get_reimbursement_request_by_id(): Repository.reimbursements type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:592 - get_reimbursement_request_by_id(): Repository call completed successfully. Entity: False
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:597 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:22:03 [WARNING] app.infrastructure.services.reimbursement_service_impl:600 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:558 - debug_check_request(): DEBUG: Service returned: False
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:568 - debug_check_request(): DEBUG: All document IDs in database:
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: draft
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:582 - debug_check_request(): DEBUG: Found by request_id: True
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:583 - debug_check_request(): DEBUG: Found by reimbursement_id: True
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:584 - debug_check_request(): DEBUG: Found by _id: False
2025-06-07 05:22:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58115 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:22:55 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:22:55 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:22:55 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:22:55 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:22:55 [INFO] uvicorn.error:93 - _serve(): Finished server process [25231]
2025-06-07 05:23:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:23:09 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:23:09 [INFO] uvicorn.error:83 - _serve(): Started server process [25328]
2025-06-07 05:23:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:23:09 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:23:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:23:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:23:19 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:23:19 [INFO] uvicorn.error:83 - _serve(): Started server process [25342]
2025-06-07 05:23:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:23:19 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:23:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:23:19 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:23:19 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:23:19 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:23:19 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:23:19 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:23:19 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:23:19 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:23:19 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:23:19 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:23:20 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:23:20 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:586 - get_reimbursement_request_by_id(): About to call repository.reimbursements.get_by_id with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, hostname: localhost
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:588 - get_reimbursement_request_by_id(): Repository.reimbursements type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:592 - get_reimbursement_request_by_id(): Repository call completed successfully. Entity: False
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:597 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:23:21 [WARNING] app.infrastructure.services.reimbursement_service_impl:600 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:558 - debug_check_request(): DEBUG: Service returned: False
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:568 - debug_check_request(): DEBUG: All document IDs in database:
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: draft
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:582 - debug_check_request(): DEBUG: Found by request_id: True
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:583 - debug_check_request(): DEBUG: Found by reimbursement_id: True
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:584 - debug_check_request(): DEBUG: Found by _id: False
2025-06-07 05:23:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58406 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:24:05 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:24:05 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:24:05 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:24:05 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:24:05 [INFO] uvicorn.error:93 - _serve(): Finished server process [25342]
2025-06-07 05:24:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:24:19 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:24:19 [INFO] uvicorn.error:83 - _serve(): Started server process [25403]
2025-06-07 05:24:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:24:19 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:24:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:24:19 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:24:19 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:24:19 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:24:19 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:24:19 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:24:19 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:24:19 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:24:19 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:24:19 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:24:20 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:24:20 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:586 - get_reimbursement_request_by_id(): About to call repository.reimbursements.get_by_id with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, hostname: localhost
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:588 - get_reimbursement_request_by_id(): Repository.reimbursements type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:592 - get_reimbursement_request_by_id(): Repository call completed successfully. Entity: False
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:597 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:24:21 [WARNING] app.infrastructure.services.reimbursement_service_impl:600 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:558 - debug_check_request(): DEBUG: Service returned: False
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:568 - debug_check_request(): DEBUG: All document IDs in database:
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: draft
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:582 - debug_check_request(): DEBUG: Found by request_id: True
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:583 - debug_check_request(): DEBUG: Found by reimbursement_id: True
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:584 - debug_check_request(): DEBUG: Found by _id: False
2025-06-07 05:24:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58610 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:25:13 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:25:13 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:25:13 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:25:13 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:25:13 [INFO] uvicorn.error:93 - _serve(): Finished server process [25403]
2025-06-07 05:25:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:25:27 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:25:27 [INFO] uvicorn.error:83 - _serve(): Started server process [25470]
2025-06-07 05:25:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:25:27 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:25:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:25:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58970 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:25:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58972 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:25:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58974 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:25:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58976 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:25:27 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:25:27 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:25:27 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:25:27 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:25:27 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:25:27 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:25:27 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:25:27 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:25:27 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:25:27 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:25:27 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:25:27 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:25:27 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:25:27 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:25:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:25:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:25:27 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:25:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58972 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:25:28 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:25:28 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:25:28 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:25:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58976 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:25:28 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:25:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58970 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:25:29 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:25:29 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:25:29 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:25:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58976 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:25:32 [INFO] app.api.routes.reimbursement_routes_v2:612 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:586 - get_reimbursement_request_by_id(): About to call repository.reimbursements.get_by_id with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, hostname: localhost
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:588 - get_reimbursement_request_by_id(): Repository.reimbursements type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:592 - get_reimbursement_request_by_id(): Repository call completed successfully. Entity: False
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:597 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:25:33 [WARNING] app.infrastructure.services.reimbursement_service_impl:600 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:25:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58976 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:25:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59113 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-07 05:25:47 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:25:48 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:25:48 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:25:48 [ERROR] app.api.controllers.auth_controller:173 - login(): Login error: 'NoneType' object is not subscriptable
2025-06-07 05:25:48 [ERROR] app.api.routes.auth_routes_v2:83 - login(): Login error for user superadmin: 'NoneType' object is not subscriptable
2025-06-07 05:25:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59113 - "POST /api/v2/auth/login HTTP/1.1" 500
2025-06-07 05:26:57 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:26:57 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:26:57 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:26:57 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:26:57 [INFO] uvicorn.error:93 - _serve(): Finished server process [25470]
2025-06-07 05:27:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:27:09 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:27:09 [INFO] uvicorn.error:83 - _serve(): Started server process [25516]
2025-06-07 05:27:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:27:09 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:27:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:27:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59538 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-07 05:27:09 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: emp003 @ localhost
2025-06-07 05:27:10 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:27:10 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:27:10 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: emp003
2025-06-07 05:27:10 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$gHiCgdCJbSRnoeGtzPMs4./cpUqt.p3NlXpYRZE8W5/LrWyou4R42
2025-06-07 05:27:10 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-07 05:27:10 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-07 05:27:10 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: EMP003
2025-06-07 05:27:10 [INFO] app.api.controllers.auth_controller:165 - login(): User emp003 logged in successfully
2025-06-07 05:27:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59540 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-07 05:27:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59540 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-07 05:27:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59538 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-07 05:27:11 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:27:11 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:27:11 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:27:11 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:27:11 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:27:11 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:27:11 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:27:12 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:27:12 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:27:12 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:27:12 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:27:12 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:27:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59540 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-07 05:27:12 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:27:12 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:27:12 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:27:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59538 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-07 05:27:17 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:27:17 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:27:18 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:27:18 [WARNING] app.api.controllers.auth_controller:118 - login(): User superadmin not found in database
2025-06-07 05:27:18 [ERROR] app.api.controllers.auth_controller:178 - login(): Login error: Invalid username or password
2025-06-07 05:27:18 [WARNING] app.api.routes.auth_routes_v2:80 - login(): Login failed for user superadmin: Invalid username or password
2025-06-07 05:27:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59634 - "POST /api/v2/auth/login HTTP/1.1" 400
2025-06-07 05:27:25 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:27:26 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:27:26 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:27:26 [WARNING] app.api.controllers.auth_controller:118 - login(): User superadmin not found in database
2025-06-07 05:27:26 [ERROR] app.api.controllers.auth_controller:178 - login(): Login error: Invalid username or password
2025-06-07 05:27:26 [WARNING] app.api.routes.auth_routes_v2:80 - login(): Login failed for user superadmin: Invalid username or password
2025-06-07 05:27:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59668 - "POST /api/v2/auth/login HTTP/1.1" 400
2025-06-07 05:29:00 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:29:01 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:31:21 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:31:21 [WARNING] app.api.controllers.auth_controller:118 - login(): User superadmin not found in database
2025-06-07 05:31:21 [ERROR] app.api.controllers.auth_controller:178 - login(): Login error: Invalid username or password
2025-06-07 05:31:21 [WARNING] app.api.routes.auth_routes_v2:80 - login(): Login failed for user superadmin: Invalid username or password
2025-06-07 05:31:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:31:22 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:31:22 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:31:22 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:31:22 [INFO] uvicorn.error:93 - _serve(): Finished server process [25516]
2025-06-07 05:31:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:31:32 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:31:32 [INFO] uvicorn.error:83 - _serve(): Started server process [25617]
2025-06-07 05:31:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:31:32 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:31:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:31:32 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:31:33 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:31:40 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:31:40 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-07 05:31:40 [ERROR] app.api.controllers.auth_controller:178 - login(): Login error: 'password_hash'
2025-06-07 05:31:40 [ERROR] app.api.routes.auth_routes_v2:83 - login(): Login error for user superadmin: 'password_hash'
2025-06-07 05:31:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60150 - "POST /api/v2/auth/login HTTP/1.1" 500
2025-06-07 05:31:59 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:31:59 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:33:00 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:33:05 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-07 05:33:05 [ERROR] app.api.controllers.auth_controller:178 - login(): Login error: 'password_hash'
2025-06-07 05:33:05 [ERROR] app.api.routes.auth_routes_v2:83 - login(): Login error for user superadmin: 'password_hash'
2025-06-07 05:33:58 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:33:59 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:34:04 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:34:04 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-07 05:34:04 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-07 05:34:04 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-07 05:34:04 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-07 05:34:04 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-07 05:34:04 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-07 05:34:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60303 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-07 05:34:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60303 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-07 05:34:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60320 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-07 05:34:05 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:34:05 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:34:05 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:34:05 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:34:05 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:34:05 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:34:05 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:34:06 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:34:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:34:06 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:34:06 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:34:06 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:34:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60322 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-07 05:34:06 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:34:06 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:34:06 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:34:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60322 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-07 05:34:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60396 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 05:34:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60398 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 05:34:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60401 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 05:34:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60402 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 05:34:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60396 - "GET /api/v2/reimbursements/approved HTTP/1.1" 404
2025-06-07 05:34:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60404 - "GET /api/v2/reimbursements/pending HTTP/1.1" 404
2025-06-07 05:34:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60396 - "GET /api/v2/reimbursements/approved HTTP/1.1" 404
2025-06-07 05:34:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60404 - "GET /api/v2/reimbursements/pending HTTP/1.1" 404
2025-06-07 05:34:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60466 - "GET /api/v2/reimbursements/pending HTTP/1.1" 404
2025-06-07 05:34:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60468 - "GET /api/v2/reimbursements/approved HTTP/1.1" 404
2025-06-07 05:34:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60468 - "GET /api/v2/reimbursements/approved HTTP/1.1" 404
2025-06-07 05:34:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60472 - "GET /api/v2/reimbursements/pending HTTP/1.1" 404
2025-06-07 05:35:58 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:35:58 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:35:58 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:35:58 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:35:58 [INFO] uvicorn.error:93 - _serve(): Finished server process [25617]
2025-06-07 05:36:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:36:10 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:36:10 [INFO] uvicorn.error:83 - _serve(): Started server process [25693]
2025-06-07 05:36:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:36:10 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:36:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:36:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60785 - "GET /api/v2/reimbursements/pending HTTP/1.1" 403
2025-06-07 05:36:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60807 - "GET /api/v2/reimbursements/approved HTTP/1.1" 403
2025-06-07 05:36:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60809 - "GET /docs HTTP/1.1" 200
2025-06-07 05:36:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60811 - "GET /openapi.json HTTP/1.1" 200
2025-06-07 05:36:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60813 - "GET /openapi.json HTTP/1.1" 200
2025-06-07 05:38:08 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 05:38:08 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:38:08 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:38:08 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:38:08 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 05:38:08 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:38:08 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:38:08 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:38:09 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:38:09 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:38:09 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:38:09 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:38:09 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:38:09 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:38:09 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:38:09 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:38:09 [ERROR] app.api.routes.reimbursement_routes_v2:284 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
status
  Value error, Status must be one of: draft, submitted, under_review, approved, rejected, cancelled, paid [type=value_error, input_value='pending', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-07 05:38:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60875 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 05:38:09 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:38:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 05:38:09 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 05:38:09 [ERROR] app.api.routes.reimbursement_routes_v2:284 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
status
  Value error, Status must be one of: draft, submitted, under_review, approved, rejected, cancelled, paid [type=value_error, input_value='pending', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-07 05:38:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60881 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 05:38:10 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:38:10 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:38:10 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 05:38:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60877 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 05:38:10 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 05:38:10 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:38:10 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 05:38:10 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 05:38:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60877 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 09:39:22 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1046, in connect
    conn.hello()
    ~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 255, in hello
    return self._hello(None, None)
           ~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 297, in _hello
    doc = self.command("admin", cmd, publish_events=False, exhaust_allowed=awaitable)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 11:05:32 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 513, in _configured_socket_interface
    ssl_sock = ssl_context.wrap_socket(sock, server_hostname=host)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 455, in wrap_socket
    return self.sslsocket_class._create(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sock=sock,
        ^^^^^^^^^^
    ...<5 lines>...
        session=session
        ^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1076, in _create
    self.do_handshake()
    ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1372, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
TimeoutError: _ssl.c:1011: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 527, in _configured_socket_interface
    _raise_connection_failure(address, exc, "SSL handshake failed: ", timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: _ssl.c:1011: The handshake operation timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 11:05:47 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 135, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 11:17:38 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 11:17:38 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 11:17:38 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 11:17:38 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 11:17:38 [INFO] uvicorn.error:93 - _serve(): Finished server process [25693]
2025-06-07 11:17:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:17:50 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:17:50 [INFO] uvicorn.error:83 - _serve(): Started server process [26232]
2025-06-07 11:17:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:17:50 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:17:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:17:54 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:18:00 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:18:00 [INFO] uvicorn.error:83 - _serve(): Started server process [26254]
2025-06-07 11:18:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:18:00 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:18:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:18:13 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 11:18:13 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 11:18:13 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 11:18:13 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 11:18:13 [INFO] uvicorn.error:93 - _serve(): Finished server process [26254]
2025-06-07 11:18:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:18:26 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:18:26 [INFO] uvicorn.error:83 - _serve(): Started server process [26271]
2025-06-07 11:18:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:18:26 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:18:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:18:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:18:38 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:18:38 [INFO] uvicorn.error:83 - _serve(): Started server process [26298]
2025-06-07 11:18:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:18:38 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:18:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:18:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63251 - "GET /api/v2/reimbursements/pending HTTP/1.1" 403
2025-06-07 11:41:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63652 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 11:41:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63654 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 11:41:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63657 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 11:41:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63658 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 11:41:11 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:41:11 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:41:11 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 11:41:11 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 11:41:11 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 11:41:11 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 11:41:11 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 11:41:11 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 11:41:11 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 11:41:11 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 11:41:11 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 11:41:11 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 11:41:11 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 11:41:11 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 11:41:11 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 11:41:11 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 11:41:11 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 11:41:11 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 11:41:11 [ERROR] app.api.routes.reimbursement_routes_v2:284 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
status
  Value error, Status must be one of: draft, submitted, under_review, approved, rejected, cancelled, paid [type=value_error, input_value='pending', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-07 11:41:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63652 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 11:41:11 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:41:11 [ERROR] app.api.routes.reimbursement_routes_v2:284 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
status
  Value error, Status must be one of: draft, submitted, under_review, approved, rejected, cancelled, paid [type=value_error, input_value='pending', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-07 11:41:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63652 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 11:41:12 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 11:41:12 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 11:41:12 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 11:41:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63660 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 11:41:12 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:41:12 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 11:41:12 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 11:41:12 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 11:41:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63660 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 11:41:16 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 11:41:16 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 11:41:16 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 11:41:16 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 11:41:16 [INFO] uvicorn.error:93 - _serve(): Finished server process [26298]
2025-06-07 11:41:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:41:26 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:41:26 [INFO] uvicorn.error:83 - _serve(): Started server process [26546]
2025-06-07 11:41:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:41:26 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:41:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:42:40 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:42:40 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:42:40 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 11:42:40 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 11:42:40 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 11:42:40 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 11:42:40 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 11:42:40 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 11:42:40 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 11:42:40 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 11:42:40 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 11:42:40 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 11:42:40 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 11:42:40 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 11:42:40 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 11:42:40 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 11:42:40 [ERROR] app.api.routes.reimbursement_routes_v2:284 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
status
  Value error, Status must be one of: draft, submitted, under_review, approved, rejected, cancelled, paid [type=value_error, input_value='pending', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-07 11:42:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63730 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 11:42:40 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 11:42:40 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 11:42:41 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:42:41 [ERROR] app.api.routes.reimbursement_routes_v2:284 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
status
  Value error, Status must be one of: draft, submitted, under_review, approved, rejected, cancelled, paid [type=value_error, input_value='pending', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-07 11:42:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63736 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 11:42:44 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 11:42:44 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 11:42:45 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 11:42:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63732 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 11:42:45 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:42:45 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 11:42:45 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 11:42:45 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 11:42:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63732 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 11:44:01 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 11:44:01 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 11:44:01 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 11:44:01 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 11:44:01 [INFO] uvicorn.error:93 - _serve(): Finished server process [26546]
2025-06-07 11:44:06 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:44:46 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:44:46 [INFO] uvicorn.error:83 - _serve(): Started server process [26594]
2025-06-07 11:44:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:44:46 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:44:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:44:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:44:57 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:44:57 [INFO] uvicorn.error:83 - _serve(): Started server process [26638]
2025-06-07 11:44:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:44:57 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:44:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:44:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64130 - "GET /api/v2/reimbursements/pending HTTP/1.1" 403
2025-06-07 11:45:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64156 - "GET /api/v2/reimbursements/requests/pending HTTP/1.1" 403
2025-06-07 11:45:14 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 11:45:14 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 11:45:14 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 11:45:14 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 11:45:14 [INFO] uvicorn.error:93 - _serve(): Finished server process [26638]
2025-06-07 11:45:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:45:25 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:45:25 [INFO] uvicorn.error:83 - _serve(): Started server process [26678]
2025-06-07 11:45:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:45:25 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:45:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:45:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:45:37 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:45:37 [INFO] uvicorn.error:83 - _serve(): Started server process [26702]
2025-06-07 11:45:37 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:45:37 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:45:37 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:45:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64175 - "GET /api/v2/reimbursements/approved HTTP/1.1" 403
2025-06-07 11:45:37 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:45:37 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:45:37 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 11:45:37 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 11:45:37 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 11:45:37 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 11:45:37 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 11:45:37 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 11:45:37 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 11:45:37 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 11:45:37 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 11:45:37 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 11:45:37 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 11:45:37 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 11:45:37 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 11:45:37 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 11:45:37 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 11:45:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 11:45:38 [ERROR] app.api.routes.reimbursement_routes_v2:308 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
page_size
  Input should be less than or equal to 100 [type=less_than_equal, input_value=1000, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/less_than_equal
2025-06-07 11:45:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64193 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 11:45:38 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:45:38 [ERROR] app.api.routes.reimbursement_routes_v2:308 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
page_size
  Input should be less than or equal to 100 [type=less_than_equal, input_value=1000, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/less_than_equal
2025-06-07 11:45:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64193 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 11:45:38 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 11:45:38 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 11:45:39 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 11:45:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64195 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 11:45:39 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:45:39 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 11:45:39 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 11:45:39 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 11:45:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64193 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:01:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50208 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:01:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50210 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:01:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50212 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:01:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50213 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:01:18 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:01:18 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:01:18 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:01:18 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:01:30 [ERROR] app.api.routes.reimbursement_routes_v2:308 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
page_size
  Input should be less than or equal to 100 [type=less_than_equal, input_value=1000, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/less_than_equal
2025-06-07 12:01:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50217 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 12:01:30 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:01:30 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:01:30 [ERROR] app.api.routes.reimbursement_routes_v2:308 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
page_size
  Input should be less than or equal to 100 [type=less_than_equal, input_value=1000, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/less_than_equal
2025-06-07 12:01:30 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:01:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:01:33 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:01:34 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:03:40 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 12:03:40 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 12:03:40 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 12:03:40 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 12:03:40 [INFO] uvicorn.error:93 - _serve(): Finished server process [26702]
2025-06-07 12:03:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 12:03:52 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 12:03:52 [INFO] uvicorn.error:83 - _serve(): Started server process [26837]
2025-06-07 12:03:52 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 12:03:52 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 12:03:52 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 12:03:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 12:04:03 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 12:04:03 [INFO] uvicorn.error:83 - _serve(): Started server process [26856]
2025-06-07 12:04:03 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 12:04:03 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 12:04:03 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 12:04:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50651 - "GET /api/v2/reimbursements/pending HTTP/1.1" 403
2025-06-07 12:04:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50678 - "GET /api/v2/reimbursements/requests/pending HTTP/1.1" 403
2025-06-07 12:17:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50967 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:17:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50969 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:17:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50971 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:17:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50973 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:17:13 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:17:13 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:17:13 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 12:17:13 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 12:17:13 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 12:17:13 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 12:17:13 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 12:17:13 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 12:17:13 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 12:17:13 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 12:17:13 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 12:17:13 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 12:17:13 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 12:17:13 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 12:17:13 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 12:17:13 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 12:17:13 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:17:13 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:17:23 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:17:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:17:29 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:17:29 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:17:29 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:17:29 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:17:32 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:17:32 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:17:34 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 12:17:34 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 12:17:34 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:18:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:18:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:18:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:18:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:18:36 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:18:36 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:18:36 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:18:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:18:37 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:18:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:18:53 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:18:53 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:18:53 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:18:53 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:18:54 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:20:00 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:20:00 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:20:00 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:20:00 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:20:05 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:20:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51415 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:20:05 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:20:05 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:20:05 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:20:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51415 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:20:05 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:20:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51413 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:20:05 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:20:05 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:20:06 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:20:06 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:20:06 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:20:06 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:20:06 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:20:06 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:20:06 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:20:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51413 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:20:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51516 - "OPTIONS /reimbursements/undefined/status HTTP/1.1" 200
2025-06-07 12:20:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51516 - "PUT /reimbursements/undefined/status HTTP/1.1" 404
2025-06-07 12:21:44 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 12:21:44 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 12:21:44 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 12:21:44 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 12:21:44 [INFO] uvicorn.error:93 - _serve(): Finished server process [26856]
2025-06-07 12:21:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 12:21:58 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 12:21:58 [INFO] uvicorn.error:83 - _serve(): Started server process [27080]
2025-06-07 12:21:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 12:21:58 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 12:21:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 12:23:39 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:23:39 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:23:39 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 12:23:39 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 12:23:39 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 12:23:39 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 12:23:39 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 12:23:39 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 12:23:40 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 12:23:40 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 12:23:40 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 12:23:40 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 12:23:40 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 12:23:40 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 12:23:40 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 12:23:40 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:23:40 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 12:23:40 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:23:41 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:23:41 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:23:42 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 12:23:42 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 12:23:42 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:23:42 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:23:42 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:23:42 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:23:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51779 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:23:42 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:23:42 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:23:42 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:23:42 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:23:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51778 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:24:56 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:24:56 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:24:56 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:24:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:24:56 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:24:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:24:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:24:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52101 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:24:56 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:24:56 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:24:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:24:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:24:56 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:24:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:24:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:24:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52101 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:24:57 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:24:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52100 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:24:57 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:24:57 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:24:57 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:24:57 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:24:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52100 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:25:30 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:25:30 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:25:30 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:25:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:25:30 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:25:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:25:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:25:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52316 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:25:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:25:30 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:25:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:25:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:25:30 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:25:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:25:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:25:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52314 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:25:56 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:25:56 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:25:56 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:25:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:25:56 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:25:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:25:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:25:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52484 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:25:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:25:56 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:25:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:25:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:25:58 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:25:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:25:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:25:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52482 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:26:20 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:26:20 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:26:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:26:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:26:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:26:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52647 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:26:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:26:21 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:26:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:26:21 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:26:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:26:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52645 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:26:21 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:26:21 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:26:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:26:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:26:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:26:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52647 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:26:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:26:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:26:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:26:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:26:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:26:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52645 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:26:57 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:26:57 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:26:57 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:26:57 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:26:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:26:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52891 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:26:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:26:57 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:26:57 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:26:57 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:26:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:26:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52895 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:26:58 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:26:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52889 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:26:58 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:26:58 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:26:58 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:26:58 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:26:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52889 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:27:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52956 - "OPTIONS /api/v2/reimbursements/25bf0b6c-74f3-457a-beac-e328b4920ce4/status HTTP/1.1" 200
2025-06-07 12:27:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52956 - "PUT /api/v2/reimbursements/25bf0b6c-74f3-457a-beac-e328b4920ce4/status HTTP/1.1" 404
2025-06-07 12:28:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53509 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:28:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53511 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:28:08 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:28:08 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:28:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:28:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:28:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:28:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:28:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:28:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53513 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:28:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:28:09 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:28:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:28:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:28:09 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:28:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:28:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:28:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53509 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:28:20 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:28:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:28:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:28:21 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:28:21 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:28:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:28:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:28:21 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:28:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:28:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:28:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53596 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:28:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:28:21 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:28:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:28:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:28:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53594 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:28:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53664 - "GET /api/v2/reimbursements/pending HTTP/1.1" 403
2025-06-07 12:29:24 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:29:24 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:29:24 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:29:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:29:24 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:29:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:29:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:29:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54074 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:29:24 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:29:24 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:29:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:29:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:29:24 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:29:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:29:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:29:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54074 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:29:25 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:29:25 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:29:25 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:29:25 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:29:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54072 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:29:25 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:29:25 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:29:25 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:29:25 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:29:25 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:29:25 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:29:26 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:29:26 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:29:26 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:29:26 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:29:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54074 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:29:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54160 - "OPTIONS /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 200
2025-06-07 12:29:36 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:29:37 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 12:29:37 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 12:29:37 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 12:29:37 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 12:29:37 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 12:29:37 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 12:29:37 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 12:29:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54162 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 13:25:44 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 96, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 13:25:44 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 135, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 13:26:46 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 13:26:46 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 13:28:08 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 513, in _configured_socket_interface
    ssl_sock = ssl_context.wrap_socket(sock, server_hostname=host)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 455, in wrap_socket
    return self.sslsocket_class._create(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sock=sock,
        ^^^^^^^^^^
    ...<5 lines>...
        session=session
        ^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1076, in _create
    self.do_handshake()
    ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1372, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
TimeoutError: _ssl.c:1011: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 527, in _configured_socket_interface
    _raise_connection_failure(address, exc, "SSL handshake failed: ", timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: _ssl.c:1011: The handshake operation timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 13:28:24 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 96, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 13:28:56 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:21:26 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1046, in connect
    conn.hello()
    ~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 255, in hello
    return self._hello(None, None)
           ~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 297, in _hello
    doc = self.command("admin", cmd, publish_events=False, exhaust_allowed=awaitable)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 14:21:26 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1046, in connect
    conn.hello()
    ~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 255, in hello
    return self._hello(None, None)
           ~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 297, in _hello
    doc = self.command("admin", cmd, publish_events=False, exhaust_allowed=awaitable)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 14:21:32 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 135, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 14:21:38 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1046, in connect
    conn.hello()
    ~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 255, in hello
    return self._hello(None, None)
           ~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 297, in _hello
    doc = self.command("admin", cmd, publish_events=False, exhaust_allowed=awaitable)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 14:21:45 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1046, in connect
    conn.hello()
    ~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 255, in hello
    return self._hello(None, None)
           ~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 297, in _hello
    doc = self.command("admin", cmd, publish_events=False, exhaust_allowed=awaitable)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 14:21:47 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 513, in _configured_socket_interface
    ssl_sock = ssl_context.wrap_socket(sock, server_hostname=host)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 455, in wrap_socket
    return self.sslsocket_class._create(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sock=sock,
        ^^^^^^^^^^
    ...<5 lines>...
        session=session
        ^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1076, in _create
    self.do_handshake()
    ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1372, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
TimeoutError: _ssl.c:1011: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 527, in _configured_socket_interface
    _raise_connection_failure(address, exc, "SSL handshake failed: ", timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: _ssl.c:1011: The handshake operation timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:21:52 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 513, in _configured_socket_interface
    ssl_sock = ssl_context.wrap_socket(sock, server_hostname=host)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 455, in wrap_socket
    return self.sslsocket_class._create(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sock=sock,
        ^^^^^^^^^^
    ...<5 lines>...
        session=session
        ^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1076, in _create
    self.do_handshake()
    ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1372, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
TimeoutError: _ssl.c:1011: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 527, in _configured_socket_interface
    _raise_connection_failure(address, exc, "SSL handshake failed: ", timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: _ssl.c:1011: The handshake operation timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:21:56 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:21:58 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:28:09 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 96, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 14:28:15 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 135, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 14:28:15 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1046, in connect
    conn.hello()
    ~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 255, in hello
    return self._hello(None, None)
           ~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 297, in _hello
    doc = self.command("admin", cmd, publish_events=False, exhaust_allowed=awaitable)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 14:28:20 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:39:48 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 513, in _configured_socket_interface
    ssl_sock = ssl_context.wrap_socket(sock, server_hostname=host)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 455, in wrap_socket
    return self.sslsocket_class._create(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sock=sock,
        ^^^^^^^^^^
    ...<5 lines>...
        session=session
        ^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1076, in _create
    self.do_handshake()
    ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1372, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
TimeoutError: _ssl.c:1011: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 527, in _configured_socket_interface
    _raise_connection_failure(address, exc, "SSL handshake failed: ", timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: _ssl.c:1011: The handshake operation timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:39:49 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:39:50 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:39:56 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1046, in connect
    conn.hello()
    ~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 255, in hello
    return self._hello(None, None)
           ~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 297, in _hello
    doc = self.command("admin", cmd, publish_events=False, exhaust_allowed=awaitable)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 15:44:41 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 135, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 15:44:41 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1046, in connect
    conn.hello()
    ~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 255, in hello
    return self._hello(None, None)
           ~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 297, in _hello
    doc = self.command("admin", cmd, publish_events=False, exhaust_allowed=awaitable)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 15:44:43 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 96, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 15:48:32 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 15:48:32 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 15:48:32 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 15:48:32 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 15:48:32 [INFO] uvicorn.error:93 - _serve(): Finished server process [27080]
2025-06-07 15:48:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 15:48:53 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 15:48:53 [INFO] uvicorn.error:83 - _serve(): Started server process [27716]
2025-06-07 15:48:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 15:48:53 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 15:48:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 15:56:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62731 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-07 15:56:05 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 15:56:07 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 15:56:07 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 15:56:07 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-07 15:56:07 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-07 15:56:07 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-07 15:56:07 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-07 15:56:07 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-07 15:56:07 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-07 15:56:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62731 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-07 15:56:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62731 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-07 15:56:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62733 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-07 15:56:07 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 15:56:07 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 15:56:07 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 15:56:07 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 15:56:07 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 15:56:07 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 15:56:07 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 15:56:08 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 15:56:08 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 15:56:08 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 15:56:08 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 15:56:08 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 15:56:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62748 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-07 15:56:08 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 15:56:08 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 15:56:08 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 15:56:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62733 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-07 15:56:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62853 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 15:56:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62856 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 15:56:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62858 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 15:56:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62859 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 15:56:19 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 15:56:19 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 15:56:19 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 15:56:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 15:56:19 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 15:56:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 15:56:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 15:56:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62853 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 15:56:19 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 15:56:19 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 15:56:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 15:56:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 15:56:19 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 15:56:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 15:56:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 15:56:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62859 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 15:56:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 15:56:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62861 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 15:56:20 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 15:56:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 15:56:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 15:56:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 15:56:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62861 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 16:02:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63665 - "OPTIONS /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 200
2025-06-07 16:02:41 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:03:33 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:04:56 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:06:24 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:09:21 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:09:21 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:09:21 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:09:21 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:09:46 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:09:58 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:09:58 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:09:58 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:16:45 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 16:16:45 [INFO] uvicorn.error:305 - _wait_tasks_to_complete(): Waiting for background tasks to complete. (CTRL+C to force quit)
2025-06-07 16:16:46 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:16:46 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:16:46 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:16:46 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:16:46 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 16:16:46 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 16:16:46 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 16:16:46 [INFO] uvicorn.error:93 - _serve(): Finished server process [27716]
2025-06-07 16:16:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 16:16:57 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 16:16:57 [INFO] uvicorn.error:83 - _serve(): Started server process [28001]
2025-06-07 16:16:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 16:16:57 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 16:16:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 16:16:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64076 - "OPTIONS /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 200
2025-06-07 16:16:57 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:16:57 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 16:16:57 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 16:16:57 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 16:16:57 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 16:16:57 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 16:16:57 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 16:16:57 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 16:16:57 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:16:57 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:16:57 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:17:23 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 16:17:23 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 16:22:15 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:22:15 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:22:15 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:22:15 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:24:54 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:24:54 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:24:54 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:24:54 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:38:18 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 16:38:18 [INFO] uvicorn.error:305 - _wait_tasks_to_complete(): Waiting for background tasks to complete. (CTRL+C to force quit)
2025-06-07 16:38:18 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:38:18 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:38:18 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:38:18 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:38:18 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 16:38:18 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 16:38:18 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 16:38:18 [INFO] uvicorn.error:93 - _serve(): Finished server process [28001]
2025-06-07 16:38:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 16:38:27 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 16:38:27 [INFO] uvicorn.error:83 - _serve(): Started server process [28186]
2025-06-07 16:38:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 16:38:27 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 16:38:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 16:39:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64788 - "OPTIONS /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 200
2025-06-07 16:39:15 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:39:15 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 16:39:15 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 16:39:15 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 16:39:15 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 16:39:15 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 16:39:15 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 16:39:15 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 16:39:15 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:39:15 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:39:15 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:39:34 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 16:39:35 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 16:39:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 16:39:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:39:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 16:39:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 16:39:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:39:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 16:39:35 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:39:35 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:39:35 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:39:35 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:40:26 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:40:26 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:40:26 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:40:26 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:40:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 16:40:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:40:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 16:40:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 16:40:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:40:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 16:40:33 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:40:33 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:40:33 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:40:33 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:40:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64971 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 16:41:13 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:41:13 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:41:13 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:41:13 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:41:19 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 16:41:19 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:41:19 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 16:41:19 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 16:41:19 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:41:19 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 16:43:05 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:43:05 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:43:05 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:43:05 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:43:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65134 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 16:43:05 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 16:43:06 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 16:43:06 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 16:43:06 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 16:43:06 [INFO] uvicorn.error:93 - _serve(): Finished server process [28186]
2025-06-07 16:43:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 16:43:16 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 16:43:16 [INFO] uvicorn.error:83 - _serve(): Started server process [28292]
2025-06-07 16:43:16 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 16:43:16 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 16:43:16 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 16:43:37 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:43:37 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 16:43:37 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 16:43:37 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 16:43:37 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 16:43:37 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 16:43:37 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 16:43:37 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 16:43:37 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:43:37 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:43:37 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:43:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 16:43:38 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 16:43:38 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 16:43:38 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:43:38 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 16:43:38 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 16:43:38 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:43:38 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 16:43:59 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'ReimbursementType' object has no attribute 'code'
2025-06-07 16:43:59 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'ReimbursementType' object has no attribute 'code'
2025-06-07 16:43:59 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'ReimbursementType' object has no attribute 'code'
2025-06-07 16:43:59 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 16:43:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65228 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 16:44:22 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:44:22 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:44:22 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:44:22 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:44:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 16:44:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:44:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 16:44:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 16:44:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:44:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 16:46:29 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'ReimbursementType' object has no attribute 'code'
2025-06-07 16:46:29 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'ReimbursementType' object has no attribute 'code'
2025-06-07 16:46:29 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'ReimbursementType' object has no attribute 'code'
2025-06-07 16:46:29 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 16:46:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65327 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 16:46:29 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 16:46:29 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 16:46:29 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 16:46:29 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 16:46:29 [INFO] uvicorn.error:93 - _serve(): Finished server process [28292]
2025-06-07 16:46:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 16:46:38 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 16:46:38 [INFO] uvicorn.error:83 - _serve(): Started server process [28388]
2025-06-07 16:46:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 16:46:38 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 16:46:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 16:47:02 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:47:02 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 16:47:02 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 16:47:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 16:47:02 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 16:47:02 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 16:47:02 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 16:47:02 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 16:47:02 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:47:02 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:47:02 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:47:02 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 16:47:03 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 16:47:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 16:47:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:47:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 16:47:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 16:47:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:47:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 16:47:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 42727c34-956a-4078-8405-9b2a4f826adb, organisation_id: localhost
2025-06-07 16:47:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 42727c34-956a-4078-8405-9b2a4f826adb
2025-06-07 16:47:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: False
2025-06-07 16:47:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:267 - get_by_id(): [REPOSITORY] Not found with 'request_id', trying 'reimbursement_id'
2025-06-07 16:47:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] Second query result: False
2025-06-07 16:47:11 [WARNING] app.infrastructure.repositories.mongodb_reimbursement_repository:278 - get_by_id(): [REPOSITORY] No document found for request_id: 42727c34-956a-4078-8405-9b2a4f826adb
2025-06-07 16:48:20 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement type '42727c34-956a-4078-8405-9b2a4f826adb' not found
2025-06-07 16:48:20 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement type '42727c34-956a-4078-8405-9b2a4f826adb' not found
2025-06-07 16:48:20 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement type '42727c34-956a-4078-8405-9b2a4f826adb' not found
2025-06-07 16:48:20 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement type '42727c34-956a-4078-8405-9b2a4f826adb' not found
2025-06-07 16:48:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49153 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 16:48:29 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:48:29 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:48:29 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:48:29 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:48:29 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 16:48:29 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:48:29 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 16:48:29 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 16:48:29 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:48:29 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 16:48:49 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 42727c34-956a-4078-8405-9b2a4f826adb, organisation_id: localhost
2025-06-07 16:48:49 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 42727c34-956a-4078-8405-9b2a4f826adb
2025-06-07 16:48:49 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: False
2025-06-07 16:48:49 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:267 - get_by_id(): [REPOSITORY] Not found with 'request_id', trying 'reimbursement_id'
2025-06-07 16:48:49 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] Second query result: False
2025-06-07 16:48:49 [WARNING] app.infrastructure.repositories.mongodb_reimbursement_repository:278 - get_by_id(): [REPOSITORY] No document found for request_id: 42727c34-956a-4078-8405-9b2a4f826adb
2025-06-07 16:48:49 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement type '42727c34-956a-4078-8405-9b2a4f826adb' not found
2025-06-07 16:48:49 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement type '42727c34-956a-4078-8405-9b2a4f826adb' not found
2025-06-07 16:48:49 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement type '42727c34-956a-4078-8405-9b2a4f826adb' not found
2025-06-07 16:48:49 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement type '42727c34-956a-4078-8405-9b2a4f826adb' not found
2025-06-07 17:00:07 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:00:07 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:00:07 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:00:07 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:00:07 [INFO] uvicorn.error:93 - _serve(): Finished server process [28388]
2025-06-07 17:00:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:00:22 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:00:22 [INFO] uvicorn.error:83 - _serve(): Started server process [28490]
2025-06-07 17:00:22 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:00:22 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:00:22 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:01:04 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:01:04 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:01:04 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:01:04 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:01:04 [INFO] uvicorn.error:93 - _serve(): Finished server process [28490]
2025-06-07 17:01:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:01:15 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:01:15 [INFO] uvicorn.error:83 - _serve(): Started server process [28529]
2025-06-07 17:01:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:01:15 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:01:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:01:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:01:23 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:01:23 [INFO] uvicorn.error:83 - _serve(): Started server process [28544]
2025-06-07 17:01:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:01:23 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:01:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:01:25 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:01:25 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:01:25 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:01:25 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:01:25 [INFO] uvicorn.error:93 - _serve(): Finished server process [28544]
2025-06-07 17:01:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:01:34 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:01:34 [INFO] uvicorn.error:83 - _serve(): Started server process [28557]
2025-06-07 17:01:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:01:34 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:01:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:02:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51033 - "OPTIONS /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 200
2025-06-07 17:02:06 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:02:06 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:02:06 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:02:06 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:02:06 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:02:06 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:02:06 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:02:06 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:02:06 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:02:06 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:02:06 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 17:02:06 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 17:02:07 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:02:07 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:02:07 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:02:07 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:02:07 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:02:07 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:02:07 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:02:11 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:02:11 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:02:11 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:02:11 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 17:02:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51033 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 17:04:40 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:04:40 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:04:40 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:04:43 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 17:04:51 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 17:04:51 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:04:51 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:04:51 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:04:51 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:04:51 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:05:29 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:05:29 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:05:29 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:05:29 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 17:06:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:06:21 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:06:21 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:06:21 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:06:21 [INFO] uvicorn.error:93 - _serve(): Finished server process [28557]
2025-06-07 17:06:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:06:31 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:06:31 [INFO] uvicorn.error:83 - _serve(): Started server process [28624]
2025-06-07 17:06:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:06:31 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:06:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:06:43 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:06:43 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:06:43 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:06:43 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:06:43 [INFO] uvicorn.error:93 - _serve(): Finished server process [28624]
2025-06-07 17:06:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:06:53 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:06:53 [INFO] uvicorn.error:83 - _serve(): Started server process [28640]
2025-06-07 17:06:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:06:53 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:06:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:06:53 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:06:53 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:06:53 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:06:53 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:06:53 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:06:53 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:06:53 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:06:53 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:06:53 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:06:53 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:07:04 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 17:07:08 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 17:07:09 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:07:09 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:07:09 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:07:09 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:07:09 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:07:09 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:07:09 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:07:42 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:07:42 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:07:42 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:07:42 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 17:08:02 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:08:02 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:08:02 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:08:02 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:08:02 [INFO] uvicorn.error:93 - _serve(): Finished server process [28640]
2025-06-07 17:08:06 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:08:12 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:08:12 [INFO] uvicorn.error:83 - _serve(): Started server process [28692]
2025-06-07 17:08:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:08:12 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:08:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:08:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:08:23 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:08:23 [INFO] uvicorn.error:83 - _serve(): Started server process [28705]
2025-06-07 17:08:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:08:23 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:08:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:08:23 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:08:23 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:08:23 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:08:23 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:08:23 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:08:23 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:08:23 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:08:23 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:08:23 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:08:23 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:08:26 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 17:08:36 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 17:08:37 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:08:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:08:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:08:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:08:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:08:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:08:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:08:59 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 17:09:53 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'decimal.Decimal' object has no attribute 'amount'
2025-06-07 17:09:53 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'amount'
2025-06-07 17:09:53 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'amount'
2025-06-07 17:09:53 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 17:10:24 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:10:24 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:10:24 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:10:26 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 17:10:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 17:10:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:10:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:10:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:10:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:10:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:10:32 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'decimal.Decimal' object has no attribute 'amount'
2025-06-07 17:10:32 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'amount'
2025-06-07 17:10:32 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'amount'
2025-06-07 17:10:32 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 17:10:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51951 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 17:12:17 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:12:17 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:12:17 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:12:17 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:12:17 [INFO] uvicorn.error:93 - _serve(): Finished server process [28705]
2025-06-07 17:12:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:12:31 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:12:31 [INFO] uvicorn.error:83 - _serve(): Started server process [28785]
2025-06-07 17:12:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:12:31 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:12:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:12:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:12:40 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:12:40 [INFO] uvicorn.error:83 - _serve(): Started server process [28805]
2025-06-07 17:12:40 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:12:40 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:12:40 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:13:34 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:13:34 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:13:34 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:13:34 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:13:34 [INFO] uvicorn.error:93 - _serve(): Finished server process [28805]
2025-06-07 17:13:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:13:48 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:13:48 [INFO] uvicorn.error:83 - _serve(): Started server process [28912]
2025-06-07 17:13:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:13:48 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:13:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:13:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:13:57 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:13:57 [INFO] uvicorn.error:83 - _serve(): Started server process [28927]
2025-06-07 17:13:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:13:57 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:13:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:15:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:15:21 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:15:21 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:15:21 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:15:21 [INFO] uvicorn.error:93 - _serve(): Finished server process [28927]
2025-06-07 17:15:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:15:31 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:15:31 [INFO] uvicorn.error:83 - _serve(): Started server process [29040]
2025-06-07 17:15:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:15:31 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:15:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:15:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52749 - "OPTIONS /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 200
2025-06-07 17:15:57 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:15:57 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:15:57 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:15:57 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:15:57 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:15:57 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:15:57 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:15:57 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:15:57 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:15:57 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:15:57 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 17:15:57 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 17:15:58 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:15:58 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:15:58 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:15:58 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:15:58 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:15:58 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:15:58 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:15:58 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Can only approve submitted or under review reimbursements
2025-06-07 17:15:58 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Can only approve submitted or under review reimbursements
2025-06-07 17:15:58 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Can only approve submitted or under review reimbursements
2025-06-07 17:15:58 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 17:15:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52749 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 17:16:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52751 - "OPTIONS /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/approve HTTP/1.1" 200
2025-06-07 17:16:22 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:16:22 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:16:22 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:16:22 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 by superadmin
2025-06-07 17:16:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, organisation_id: localhost
2025-06-07 17:16:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:16:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:16:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at', 'receipt']
2025-06-07 17:16:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:16:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:16:22 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'Reimbursement' object has no attribute 'request_id'
2025-06-07 17:16:22 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: 'Reimbursement' object has no attribute 'request_id'
2025-06-07 17:16:22 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: 'Reimbursement' object has no attribute 'request_id'
2025-06-07 17:16:22 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 17:16:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52848 - "PUT /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/approve HTTP/1.1" 500
2025-06-07 17:16:41 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:16:41 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:16:41 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:16:41 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 by superadmin
2025-06-07 17:16:41 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, organisation_id: localhost
2025-06-07 17:16:41 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:16:41 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:16:41 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at', 'receipt']
2025-06-07 17:16:41 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:16:41 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:16:41 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'Reimbursement' object has no attribute 'request_id'
2025-06-07 17:16:41 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: 'Reimbursement' object has no attribute 'request_id'
2025-06-07 17:16:41 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: 'Reimbursement' object has no attribute 'request_id'
2025-06-07 17:16:41 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 17:16:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52909 - "PUT /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/approve HTTP/1.1" 500
2025-06-07 17:17:31 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:17:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:17:31 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:17:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:17:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [29040]
2025-06-07 17:17:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:17:42 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:17:42 [INFO] uvicorn.error:83 - _serve(): Started server process [29082]
2025-06-07 17:17:42 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:17:42 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:17:42 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:18:35 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:18:35 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:18:35 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:18:35 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:18:35 [INFO] uvicorn.error:93 - _serve(): Finished server process [29082]
2025-06-07 17:18:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:18:53 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:18:53 [INFO] uvicorn.error:83 - _serve(): Started server process [29135]
2025-06-07 17:18:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:18:53 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:18:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:18:53 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:18:53 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:18:53 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:18:53 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:18:53 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:18:53 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:18:53 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:18:53 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:18:53 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:18:53 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:18:53 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 by superadmin
2025-06-07 17:18:53 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, organisation_id: localhost
2025-06-07 17:18:55 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:18:55 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:18:55 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:18:55 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:18:55 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at', 'receipt']
2025-06-07 17:18:55 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:18:55 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:18:55 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:246 - _persist_entity(): Failed to persist entity: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:18:55 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:18:55 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:18:55 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:18:55 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:18 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:19:18 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:19:18 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:19:18 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 by superadmin
2025-06-07 17:19:18 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, organisation_id: localhost
2025-06-07 17:19:18 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:19:18 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:19:18 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at', 'receipt']
2025-06-07 17:19:18 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:19:18 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:19:18 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:246 - _persist_entity(): Failed to persist entity: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:18 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:18 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:18 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:18 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53279 - "PUT /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/approve HTTP/1.1" 500
2025-06-07 17:19:25 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:19:25 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:19:25 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:19:25 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 by superadmin
2025-06-07 17:19:25 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, organisation_id: localhost
2025-06-07 17:19:25 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:19:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:19:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at', 'receipt']
2025-06-07 17:19:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:19:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:19:26 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:246 - _persist_entity(): Failed to persist entity: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:26 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:26 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:26 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:26 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53298 - "PUT /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/approve HTTP/1.1" 500
2025-06-07 17:21:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:21:21 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:21:21 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:21:21 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:21:21 [INFO] uvicorn.error:93 - _serve(): Finished server process [29135]
2025-06-07 17:21:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:21:32 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:21:32 [INFO] uvicorn.error:83 - _serve(): Started server process [29224]
2025-06-07 17:21:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:21:32 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:21:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:21:41 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:21:41 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:21:41 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:21:41 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:21:41 [INFO] uvicorn.error:93 - _serve(): Finished server process [29224]
2025-06-07 17:21:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:21:52 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:21:52 [INFO] uvicorn.error:83 - _serve(): Started server process [29247]
2025-06-07 17:21:52 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:21:52 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:21:52 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:21:56 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:21:56 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:21:56 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:21:56 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:21:56 [INFO] uvicorn.error:93 - _serve(): Finished server process [29247]
2025-06-07 17:22:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:22:08 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:22:08 [INFO] uvicorn.error:83 - _serve(): Started server process [29262]
2025-06-07 17:22:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:22:08 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:22:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:22:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:22:19 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:22:19 [INFO] uvicorn.error:83 - _serve(): Started server process [29277]
2025-06-07 17:22:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:22:19 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:22:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:24:09 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:24:09 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:24:09 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:24:09 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:24:09 [INFO] uvicorn.error:93 - _serve(): Finished server process [29277]
2025-06-07 17:24:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:24:17 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:24:17 [INFO] uvicorn.error:83 - _serve(): Started server process [29372]
2025-06-07 17:24:17 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:24:17 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:24:17 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:25:02 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:25:02 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:25:02 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:25:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:25:02 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:25:02 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:25:02 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:25:02 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:25:02 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:25:02 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:25:02 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 by superadmin
2025-06-07 17:25:02 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, organisation_id: localhost
2025-06-07 17:25:03 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:25:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:25:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:25:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:277 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:25:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:285 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at', 'receipt']
2025-06-07 17:25:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:286 - get_by_id(): [REPOSITORY] Document request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:25:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:288 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:25:18 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:324 - _send_notifications(): Failed to send notifications: 'EmailNotificationService' object has no attribute 'send_employee_notification'
2025-06-07 17:25:18 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:107 - execute(): Successfully approved reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:25:18 [INFO] app.infrastructure.services.reimbursement_service_impl:310 - approve_reimbursement_request(): Successfully approved reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:25:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53952 - "PUT /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/approve HTTP/1.1" 200
2025-06-07 17:26:35 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:26:35 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:26:35 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:26:35 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:26:35 [INFO] uvicorn.error:93 - _serve(): Finished server process [29372]
2025-06-07 17:26:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:26:49 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:26:49 [INFO] uvicorn.error:83 - _serve(): Started server process [29419]
2025-06-07 17:26:49 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:26:49 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:26:49 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:27:24 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:27:24 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:27:24 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:27:24 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:27:24 [INFO] uvicorn.error:93 - _serve(): Finished server process [29419]
2025-06-07 17:27:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:27:38 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:27:38 [INFO] uvicorn.error:83 - _serve(): Started server process [29453]
2025-06-07 17:27:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:27:38 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:27:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:28:10 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:28:10 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:28:10 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:28:10 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:28:10 [INFO] uvicorn.error:93 - _serve(): Finished server process [29453]
2025-06-07 17:28:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:28:20 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:28:20 [INFO] uvicorn.error:83 - _serve(): Started server process [29493]
2025-06-07 17:28:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:28:20 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:28:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:28:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54666 - "OPTIONS /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/approve HTTP/1.1" 200
2025-06-07 17:28:24 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:28:24 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:28:24 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:28:24 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:28:24 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:28:24 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:28:24 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:28:24 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:28:24 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:28:24 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:28:24 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 by superadmin
2025-06-07 17:28:24 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, organisation_id: localhost
2025-06-07 17:28:26 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:28:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:28:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:28:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:277 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:28:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:285 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at', 'receipt', 'approval']
2025-06-07 17:28:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:286 - get_by_id(): [REPOSITORY] Document request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:28:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:288 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:28:26 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request is in 'approved' status and cannot be approved
2025-06-07 17:28:26 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: Reimbursement request is in 'approved' status and cannot be approved
2025-06-07 17:28:26 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: Reimbursement request is in 'approved' status and cannot be approved
2025-06-07 17:28:26 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request is in 'approved' status and cannot be approved
2025-06-07 17:28:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54666 - "PUT /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/approve HTTP/1.1" 500
2025-06-07 17:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54668 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54748 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54750 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:28:37 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:28:37 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: approved
2025-06-07 17:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54748 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:28:37 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: approved
2025-06-07 17:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54748 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 4 reimbursement requests with status: submitted
2025-06-07 17:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54668 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:28:37 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:28:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:28:38 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:28:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:28:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 4 reimbursement requests with status: submitted
2025-06-07 17:28:38 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:28:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:28:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:28:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54668 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:29:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54754 - "OPTIONS /api/v2/reimbursements/requests/be525f5b-cb31-4f20-a853-192f7b248e12/approve HTTP/1.1" 200
2025-06-07 17:29:27 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:29:27 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 in organisation: localhost
2025-06-07 17:29:27 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 in organisation: localhost
2025-06-07 17:29:27 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 by superadmin
2025-06-07 17:29:27 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] get_by_id called with request_id: be525f5b-cb31-4f20-a853-192f7b248e12, organisation_id: localhost
2025-06-07 17:29:27 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 17:29:27 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:277 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:29:27 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:285 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:29:27 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:286 - get_by_id(): [REPOSITORY] Document request_id: be525f5b-cb31-4f20-a853-192f7b248e12, reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 17:29:27 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:288 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:29:41 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:305 - _send_notifications(): Failed to send notifications: 'SimpleUser' object has no attribute 'get'
2025-06-07 17:29:41 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:107 - execute(): Successfully approved reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 17:29:41 [INFO] app.infrastructure.services.reimbursement_service_impl:310 - approve_reimbursement_request(): Successfully approved reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 17:29:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54754 - "PUT /api/v2/reimbursements/requests/be525f5b-cb31-4f20-a853-192f7b248e12/approve HTTP/1.1" 200
2025-06-07 17:31:30 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:31:30 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:31:30 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:31:30 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:31:30 [INFO] uvicorn.error:93 - _serve(): Finished server process [29493]
2025-06-07 17:31:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:31:43 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:31:43 [INFO] uvicorn.error:83 - _serve(): Started server process [29547]
2025-06-07 17:31:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:31:43 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:31:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:32:42 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Signature verification failed.
2025-06-07 17:32:42 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Signature verification failed.
2025-06-07 17:32:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55368 - "PUT /api/v2/reimbursements/requests/be525f5b-cb31-4f20-a853-192f7b248e12/approve HTTP/1.1" 401
2025-06-07 17:34:10 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:34:10 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:34:10 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:34:10 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:34:10 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:34:10 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:34:10 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:34:10 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:34:10 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 in organisation: localhost
2025-06-07 17:34:10 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 in organisation: localhost
2025-06-07 17:34:10 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 by superadmin
2025-06-07 17:34:10 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] get_by_id called with request_id: be525f5b-cb31-4f20-a853-192f7b248e12, organisation_id: localhost
2025-06-07 17:34:11 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:34:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:34:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 17:34:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:277 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:34:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:285 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at', 'approval']
2025-06-07 17:34:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:286 - get_by_id(): [REPOSITORY] Document request_id: be525f5b-cb31-4f20-a853-192f7b248e12, reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 17:34:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:288 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:34:11 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request is in 'approved' status and cannot be approved
2025-06-07 17:34:11 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request be525f5b-cb31-4f20-a853-192f7b248e12 in organisation localhost: Reimbursement request is in 'approved' status and cannot be approved
2025-06-07 17:34:11 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request be525f5b-cb31-4f20-a853-192f7b248e12 in organisation localhost: Reimbursement request is in 'approved' status and cannot be approved
2025-06-07 17:34:11 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request is in 'approved' status and cannot be approved
2025-06-07 17:34:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55385 - "PUT /api/v2/reimbursements/requests/be525f5b-cb31-4f20-a853-192f7b248e12/approve HTTP/1.1" 500
2025-06-07 17:34:44 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:34:44 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:34:44 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:34:44 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:34:44 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 2 reimbursement requests with status: approved
2025-06-07 17:34:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55488 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:34:44 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:34:44 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 3 reimbursement requests with status: submitted
2025-06-07 17:34:44 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 2 reimbursement requests with status: approved
2025-06-07 17:34:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55488 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:34:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55487 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:34:44 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:34:44 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:34:44 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 3 reimbursement requests with status: submitted
2025-06-07 17:34:44 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:34:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55487 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:35:06 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:35:06 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:35:06 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:35:06 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:35:06 [INFO] uvicorn.error:93 - _serve(): Finished server process [29547]
2025-06-07 17:35:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:35:20 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:35:20 [INFO] uvicorn.error:83 - _serve(): Started server process [29718]
2025-06-07 17:35:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:35:20 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:35:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:38:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55684 - "OPTIONS /api/v2/reimbursements/requests/99caa3d8-c9c5-4e97-8118-c34424b20f25/approve HTTP/1.1" 200
2025-06-07 17:38:00 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:00 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:38:00 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:38:00 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:38:00 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:38:00 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:38:00 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:38:00 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:38:00 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 99caa3d8-c9c5-4e97-8118-c34424b20f25 in organisation: localhost
2025-06-07 17:38:00 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 99caa3d8-c9c5-4e97-8118-c34424b20f25 in organisation: localhost
2025-06-07 17:38:00 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 99caa3d8-c9c5-4e97-8118-c34424b20f25 by superadmin
2025-06-07 17:38:00 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25, organisation_id: localhost
2025-06-07 17:38:01 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:38:01 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:38:02 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 17:38:02 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:277 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:38:02 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:285 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:38:02 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:286 - get_by_id(): [REPOSITORY] Document request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25, reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 17:38:02 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:288 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:38:02 [INFO] app.infrastructure.services.notification_service:798 - _send_email(): EMAIL TO: ishagarg10@outlook.com
2025-06-07 17:38:02 [INFO] app.infrastructure.services.notification_service:799 - _send_email(): SUBJECT: Reimbursement Request Approved: Travel(Intr)
2025-06-07 17:38:02 [INFO] app.infrastructure.services.notification_service:800 - _send_email(): BODY: 
            Dear Isha Agarwal,
            
            Your reimbursement request has been approved:
            
            Type: Travel(Intr)
            Amount: ₹15,000.00
            Status: Approved
            
Comments: a
            
            Best regards,
            Finance Team
            
2025-06-07 17:38:02 [INFO] app.infrastructure.services.notification_service:656 - send_reimbursement_notification(): Reimbursement notification sent to ishagarg10@outlook.com
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:107 - execute(): Successfully approved reimbursement request: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 17:38:02 [INFO] app.infrastructure.services.reimbursement_service_impl:310 - approve_reimbursement_request(): Successfully approved reimbursement request: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 17:38:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55684 - "PUT /api/v2/reimbursements/requests/99caa3d8-c9c5-4e97-8118-c34424b20f25/approve HTTP/1.1" 200
2025-06-07 17:38:02 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:02 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:02 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:38:02 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:38:02 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 2 reimbursement requests with status: submitted
2025-06-07 17:38:02 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:38:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55684 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 3 reimbursement requests with status: approved
2025-06-07 17:38:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55686 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:38:08 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:08 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:38:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:38:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 3 reimbursement requests with status: approved
2025-06-07 17:38:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55763 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:38:08 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 2 reimbursement requests with status: submitted
2025-06-07 17:38:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:38:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:38:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55761 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:38:08 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:38:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 3 reimbursement requests with status: approved
2025-06-07 17:38:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55763 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:38:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 2 reimbursement requests with status: submitted
2025-06-07 17:38:09 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:38:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:38:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55770 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:38:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55774 - "OPTIONS /api/v2/reimbursements/requests/0c66d439-35f7-4cab-8bfc-5c828d1f894d/approve HTTP/1.1" 200
2025-06-07 17:38:16 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:16 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d in organisation: localhost
2025-06-07 17:38:16 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d in organisation: localhost
2025-06-07 17:38:16 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d by superadmin
2025-06-07 17:38:16 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d, organisation_id: localhost
2025-06-07 17:38:16 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 17:38:17 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:277 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:38:17 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:285 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:38:17 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:286 - get_by_id(): [REPOSITORY] Document request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d, reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 17:38:17 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:288 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:38:17 [INFO] app.infrastructure.services.notification_service:798 - _send_email(): EMAIL TO: ishagarg10@outlook.com
2025-06-07 17:38:17 [INFO] app.infrastructure.services.notification_service:799 - _send_email(): SUBJECT: Reimbursement Request Approved: Travel(Intr)
2025-06-07 17:38:17 [INFO] app.infrastructure.services.notification_service:800 - _send_email(): BODY: 
            Dear Isha Agarwal,
            
            Your reimbursement request has been approved:
            
            Type: Travel(Intr)
            Amount: ₹15,000.00
            Status: Approved
            
Comments: av
            
            Best regards,
            Finance Team
            
2025-06-07 17:38:17 [INFO] app.infrastructure.services.notification_service:656 - send_reimbursement_notification(): Reimbursement notification sent to ishagarg10@outlook.com
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:107 - execute(): Successfully approved reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 17:38:17 [INFO] app.infrastructure.services.reimbursement_service_impl:310 - approve_reimbursement_request(): Successfully approved reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 17:38:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55774 - "PUT /api/v2/reimbursements/requests/0c66d439-35f7-4cab-8bfc-5c828d1f894d/approve HTTP/1.1" 200
2025-06-07 17:38:17 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:17 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:17 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:38:17 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:38:17 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: submitted
2025-06-07 17:38:17 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:38:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55774 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 4 reimbursement requests with status: approved
2025-06-07 17:38:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55776 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:38:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55778 - "OPTIONS /api/v2/reimbursements/requests/cc594cb0-fafa-4081-856d-4c6dd58f4fb6/approve HTTP/1.1" 200
2025-06-07 17:38:23 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:23 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6 in organisation: localhost
2025-06-07 17:38:23 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6 in organisation: localhost
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6 by superadmin
2025-06-07 17:38:23 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] get_by_id called with request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6, organisation_id: localhost
2025-06-07 17:38:23 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 17:38:23 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:277 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:38:23 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:285 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:38:23 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:286 - get_by_id(): [REPOSITORY] Document request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6, reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 17:38:23 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:288 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:38:23 [INFO] app.infrastructure.services.notification_service:798 - _send_email(): EMAIL TO: ishagarg10@outlook.com
2025-06-07 17:38:23 [INFO] app.infrastructure.services.notification_service:799 - _send_email(): SUBJECT: Reimbursement Request Approved: Travel(Intr)
2025-06-07 17:38:23 [INFO] app.infrastructure.services.notification_service:800 - _send_email(): BODY: 
            Dear Isha Agarwal,
            
            Your reimbursement request has been approved:
            
            Type: Travel(Intr)
            Amount: ₹12,000.00
            Status: Approved
            
Comments: as
            
            Best regards,
            Finance Team
            
2025-06-07 17:38:23 [INFO] app.infrastructure.services.notification_service:656 - send_reimbursement_notification(): Reimbursement notification sent to ishagarg10@outlook.com
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:107 - execute(): Successfully approved reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 17:38:23 [INFO] app.infrastructure.services.reimbursement_service_impl:310 - approve_reimbursement_request(): Successfully approved reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 17:38:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55778 - "PUT /api/v2/reimbursements/requests/cc594cb0-fafa-4081-856d-4c6dd58f4fb6/approve HTTP/1.1" 200
2025-06-07 17:38:23 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:23 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:23 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:38:23 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:38:23 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: submitted
2025-06-07 17:38:23 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:38:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55778 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: approved
2025-06-07 17:38:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55780 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55869 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-07 17:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55871 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-07 17:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55873 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 17:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55873 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 17:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55873 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 17:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55871 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 17:39:08 [WARNING] app.api.routes.public_holiday_routes_v2:37 - get_public_holiday_controller(): Could not get public holiday controller from container: PublicHolidayController.__init__() got an unexpected keyword argument 'public_holiday_service'
2025-06-07 17:39:08 [WARNING] app.api.controllers.public_holiday_controller:69 - __init__(): PublicHolidayController initialized without all required use cases
2025-06-07 17:39:08 [INFO] app.api.routes.public_holiday_routes_v2:76 - get_public_holidays(): Getting public holidays with filters: year=None, month=None
2025-06-07 17:39:08 [INFO] app.api.controllers.public_holiday_controller:90 - get_public_holidays(): Getting public holidays with filters
2025-06-07 17:39:08 [WARNING] app.api.controllers.public_holiday_controller:112 - get_public_holidays(): Get use case not available, returning empty list
2025-06-07 17:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55869 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 17:39:08 [WARNING] app.api.routes.public_holiday_routes_v2:37 - get_public_holiday_controller(): Could not get public holiday controller from container: PublicHolidayController.__init__() got an unexpected keyword argument 'public_holiday_service'
2025-06-07 17:39:08 [WARNING] app.api.controllers.public_holiday_controller:69 - __init__(): PublicHolidayController initialized without all required use cases
2025-06-07 17:39:08 [INFO] app.api.routes.public_holiday_routes_v2:76 - get_public_holidays(): Getting public holidays with filters: year=None, month=None
2025-06-07 17:39:08 [INFO] app.api.controllers.public_holiday_controller:90 - get_public_holidays(): Getting public holidays with filters
2025-06-07 17:39:08 [WARNING] app.api.controllers.public_holiday_controller:112 - get_public_holidays(): Get use case not available, returning empty list
2025-06-07 17:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55871 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 17:39:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55871 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-07 17:39:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55869 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-07 17:39:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55873 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 17:39:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55873 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 17:39:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55869 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 17:39:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55873 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 17:39:11 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 17:39:11 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-07 17:39:11 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:272 - list_with_filters(): Error retrieving filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 17:39:11 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:291 - count_with_filters(): Error counting filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 17:39:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55871 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 17:39:11 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 17:39:11 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-07 17:39:11 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:272 - list_with_filters(): Error retrieving filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 17:39:11 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:291 - count_with_filters(): Error counting filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 17:39:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55871 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 17:44:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56695 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 17:44:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56696 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 17:44:18 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 17:44:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56698 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 17:44:18 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 17:44:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56698 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 17:44:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56698 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 17:44:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56695 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 17:44:21 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 17:44:21 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: superadmin
2025-06-07 17:44:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56696 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 17:44:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 0 reimbursement requests for employee: superadmin
2025-06-07 17:44:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56711 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 17:44:21 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 17:44:21 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: superadmin
2025-06-07 17:44:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56696 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 17:44:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 0 reimbursement requests for employee: superadmin
2025-06-07 17:44:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56711 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 17:44:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56742 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:44:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56743 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:44:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56745 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:44:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56747 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:44:27 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:44:27 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:44:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:44:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:44:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: submitted
2025-06-07 17:44:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:44:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56742 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:44:27 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:44:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: approved
2025-06-07 17:44:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56749 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:44:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:44:27 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:44:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: submitted
2025-06-07 17:44:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:44:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56742 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:44:28 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: approved
2025-06-07 17:44:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56747 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:45:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56899 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 17:45:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56899 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 17:45:48 [WARNING] app.api.routes.public_holiday_routes_v2:37 - get_public_holiday_controller(): Could not get public holiday controller from container: PublicHolidayController.__init__() got an unexpected keyword argument 'public_holiday_service'
2025-06-07 17:45:48 [WARNING] app.api.controllers.public_holiday_controller:69 - __init__(): PublicHolidayController initialized without all required use cases
2025-06-07 17:45:48 [INFO] app.api.routes.public_holiday_routes_v2:76 - get_public_holidays(): Getting public holidays with filters: year=None, month=None
2025-06-07 17:45:48 [INFO] app.api.controllers.public_holiday_controller:90 - get_public_holidays(): Getting public holidays with filters
2025-06-07 17:45:48 [WARNING] app.api.controllers.public_holiday_controller:112 - get_public_holidays(): Get use case not available, returning empty list
2025-06-07 17:45:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56901 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 17:45:48 [WARNING] app.api.routes.public_holiday_routes_v2:37 - get_public_holiday_controller(): Could not get public holiday controller from container: PublicHolidayController.__init__() got an unexpected keyword argument 'public_holiday_service'
2025-06-07 17:45:48 [WARNING] app.api.controllers.public_holiday_controller:69 - __init__(): PublicHolidayController initialized without all required use cases
2025-06-07 17:45:48 [INFO] app.api.routes.public_holiday_routes_v2:76 - get_public_holidays(): Getting public holidays with filters: year=None, month=None
2025-06-07 17:45:48 [INFO] app.api.controllers.public_holiday_controller:90 - get_public_holidays(): Getting public holidays with filters
2025-06-07 17:45:48 [WARNING] app.api.controllers.public_holiday_controller:112 - get_public_holidays(): Get use case not available, returning empty list
2025-06-07 17:45:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56899 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 17:45:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56946 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 17:45:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56946 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 17:45:55 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 17:45:55 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-07 17:45:55 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:272 - list_with_filters(): Error retrieving filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 17:45:55 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:291 - count_with_filters(): Error counting filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 17:45:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56948 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 17:45:55 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 17:45:55 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-07 17:45:55 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:272 - list_with_filters(): Error retrieving filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 17:45:55 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:291 - count_with_filters(): Error counting filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 17:45:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56948 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 17:46:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57136 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 17:46:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57136 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 17:46:37 [WARNING] app.api.routes.public_holiday_routes_v2:37 - get_public_holiday_controller(): Could not get public holiday controller from container: PublicHolidayController.__init__() got an unexpected keyword argument 'public_holiday_service'
2025-06-07 17:46:37 [WARNING] app.api.controllers.public_holiday_controller:69 - __init__(): PublicHolidayController initialized without all required use cases
2025-06-07 17:46:37 [INFO] app.api.routes.public_holiday_routes_v2:76 - get_public_holidays(): Getting public holidays with filters: year=None, month=None
2025-06-07 17:46:37 [INFO] app.api.controllers.public_holiday_controller:90 - get_public_holidays(): Getting public holidays with filters
2025-06-07 17:46:37 [WARNING] app.api.controllers.public_holiday_controller:112 - get_public_holidays(): Get use case not available, returning empty list
2025-06-07 17:46:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57138 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 17:46:38 [WARNING] app.api.routes.public_holiday_routes_v2:37 - get_public_holiday_controller(): Could not get public holiday controller from container: PublicHolidayController.__init__() got an unexpected keyword argument 'public_holiday_service'
2025-06-07 17:46:38 [WARNING] app.api.controllers.public_holiday_controller:69 - __init__(): PublicHolidayController initialized without all required use cases
2025-06-07 17:46:38 [INFO] app.api.routes.public_holiday_routes_v2:76 - get_public_holidays(): Getting public holidays with filters: year=None, month=None
2025-06-07 17:46:38 [INFO] app.api.controllers.public_holiday_controller:90 - get_public_holidays(): Getting public holidays with filters
2025-06-07 17:46:38 [WARNING] app.api.controllers.public_holiday_controller:112 - get_public_holidays(): Get use case not available, returning empty list
2025-06-07 17:46:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57136 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 17:51:32 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:51:32 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:51:32 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:51:32 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:51:32 [INFO] uvicorn.error:93 - _serve(): Finished server process [29718]
2025-06-07 17:51:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:52:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:52:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:53:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:53:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:54:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:54:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:54:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:55:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:55:44 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:55:44 [INFO] uvicorn.error:83 - _serve(): Started server process [30192]
2025-06-07 17:55:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:55:44 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:55:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:56:08 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:56:08 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:56:08 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:56:08 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:56:08 [INFO] uvicorn.error:93 - _serve(): Finished server process [30192]
2025-06-07 17:56:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:56:18 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:56:18 [INFO] uvicorn.error:83 - _serve(): Started server process [30215]
2025-06-07 17:56:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:56:18 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:56:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:56:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:56:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:56:59 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:56:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:56:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [30215]
2025-06-07 17:57:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:57:10 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:57:10 [INFO] uvicorn.error:83 - _serve(): Started server process [30245]
2025-06-07 17:57:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:57:10 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:57:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:58:22 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:58:22 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:58:22 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:58:22 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:58:22 [INFO] uvicorn.error:93 - _serve(): Finished server process [30245]
2025-06-07 17:58:28 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:58:35 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:58:35 [INFO] uvicorn.error:83 - _serve(): Started server process [30288]
2025-06-07 17:58:35 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:58:35 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:58:35 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:59:41 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:59:41 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:59:41 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:59:41 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:59:41 [INFO] uvicorn.error:93 - _serve(): Finished server process [30288]
2025-06-07 17:59:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:59:50 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:59:50 [INFO] uvicorn.error:83 - _serve(): Started server process [30320]
2025-06-07 17:59:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:59:50 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:59:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:59:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:59:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:59:59 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:59:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:59:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [30320]
2025-06-07 18:00:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:00:11 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:00:11 [INFO] uvicorn.error:83 - _serve(): Started server process [30336]
2025-06-07 18:00:11 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:00:11 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:00:11 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:00:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:00:23 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:00:23 [INFO] uvicorn.error:83 - _serve(): Started server process [30354]
2025-06-07 18:00:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:00:23 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:00:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:00:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:00:33 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:00:33 [INFO] uvicorn.error:83 - _serve(): Started server process [30363]
2025-06-07 18:00:33 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:00:33 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:00:33 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:00:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:00:44 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:00:44 [INFO] uvicorn.error:83 - _serve(): Started server process [30368]
2025-06-07 18:00:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:00:44 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:00:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:00:47 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:00:54 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:00:55 [INFO] uvicorn.error:83 - _serve(): Started server process [30373]
2025-06-07 18:00:55 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:00:55 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:00:55 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:00:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:01:05 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:01:05 [INFO] uvicorn.error:83 - _serve(): Started server process [30386]
2025-06-07 18:01:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:01:05 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:01:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:01:05 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 18:01:05 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 18:01:05 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 18:01:05 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 18:01:05 [INFO] uvicorn.error:93 - _serve(): Finished server process [30386]
2025-06-07 18:01:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:01:15 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:01:15 [INFO] uvicorn.error:83 - _serve(): Started server process [30392]
2025-06-07 18:01:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:01:15 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:01:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:01:17 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 18:01:17 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 18:01:17 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 18:01:17 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 18:01:17 [INFO] uvicorn.error:93 - _serve(): Finished server process [30392]
2025-06-07 18:01:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:01:27 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:01:27 [INFO] uvicorn.error:83 - _serve(): Started server process [30399]
2025-06-07 18:01:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:01:27 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:01:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:01:28 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 18:01:28 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 18:01:28 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 18:01:28 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 18:01:28 [INFO] uvicorn.error:93 - _serve(): Finished server process [30399]
2025-06-07 18:01:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:01:38 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:01:38 [INFO] uvicorn.error:83 - _serve(): Started server process [30405]
2025-06-07 18:01:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:01:38 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:01:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:01:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:01:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:01:50 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 18:01:50 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 18:01:50 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 18:01:50 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 18:01:50 [ERROR] app.config.dependency_container:265 - _setup_services(): Error setting up services: PublicHolidayServiceImpl.__init__() got an unexpected keyword argument 'repository'
2025-06-07 18:01:50 [ERROR] app.config.dependency_container:88 - initialize(): Error initializing dependency container: PublicHolidayServiceImpl.__init__() got an unexpected keyword argument 'repository'
2025-06-07 18:02:15 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 18:02:15 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 18:02:15 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 18:02:15 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 18:02:15 [INFO] uvicorn.error:93 - _serve(): Finished server process [30405]
2025-06-07 18:02:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:02:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:02:25 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 18:02:25 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 18:02:25 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 18:02:25 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 18:02:25 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 18:02:25 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 18:02:25 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 18:02:29 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:02:29 [INFO] uvicorn.error:83 - _serve(): Started server process [30507]
2025-06-07 18:02:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:02:29 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:02:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:02:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:06:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59669 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-07 18:06:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59671 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-07 18:06:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59669 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 18:06:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59669 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 18:06:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59669 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 18:06:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59671 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 18:06:23 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 18:06:23 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 18:06:23 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 18:06:23 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 18:06:23 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 18:06:23 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 18:06:23 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 18:06:23 [ERROR] app.infrastructure.repositories.mongodb_public_holiday_repository:142 - find_with_filters(): Error finding public holidays with filters in database localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:06:23 [ERROR] app.infrastructure.services.public_holiday_service_impl:264 - list_public_holidays(): Error listing public holidays in organisation localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:06:23 [ERROR] app.api.controllers.public_holiday_controller:80 - list_public_holidays(): Error listing public holidays in organisation localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:06:23 [ERROR] app.api.routes.public_holiday_routes_v2:96 - list_public_holidays(): Error listing public holidays: 500: Internal server error
2025-06-07 18:06:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59669 - "GET /api/v2/public-holidays/ HTTP/1.1" 500
2025-06-07 18:06:23 [ERROR] app.infrastructure.repositories.mongodb_public_holiday_repository:142 - find_with_filters(): Error finding public holidays with filters in database localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:06:23 [ERROR] app.infrastructure.services.public_holiday_service_impl:264 - list_public_holidays(): Error listing public holidays in organisation localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:06:23 [ERROR] app.api.controllers.public_holiday_controller:80 - list_public_holidays(): Error listing public holidays in organisation localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:06:23 [ERROR] app.api.routes.public_holiday_routes_v2:96 - list_public_holidays(): Error listing public holidays: 500: Internal server error
2025-06-07 18:06:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59671 - "GET /api/v2/public-holidays/ HTTP/1.1" 500
2025-06-07 18:16:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60410 - "OPTIONS /api/v2/reimbursements/types?active_only=true HTTP/1.1" 200
2025-06-07 18:16:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60412 - "OPTIONS /api/v2/reimbursements/types?active_only=true HTTP/1.1" 200
2025-06-07 18:16:16 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 18:16:17 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 18:16:17 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 18:16:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60410 - "GET /api/v2/reimbursements/types?active_only=true HTTP/1.1" 200
2025-06-07 18:16:17 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 18:16:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60410 - "GET /api/v2/reimbursements/types?active_only=true HTTP/1.1" 200
2025-06-07 18:16:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60410 - "OPTIONS /api/v2/reimbursements/requests/my?limit=50&offset=0 HTTP/1.1" 200
2025-06-07 18:16:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60414 - "OPTIONS /api/v2/reimbursements/requests/my?limit=50&offset=0 HTTP/1.1" 200
2025-06-07 18:16:20 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 18:16:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: superadmin
2025-06-07 18:16:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60412 - "GET /api/v2/reimbursements/types?active_only=true HTTP/1.1" 200
2025-06-07 18:16:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 0 reimbursement requests for employee: superadmin
2025-06-07 18:16:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60449 - "GET /api/v2/reimbursements/requests/my?limit=50&offset=0 HTTP/1.1" 200
2025-06-07 18:16:20 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 18:16:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: superadmin
2025-06-07 18:16:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60412 - "GET /api/v2/reimbursements/types?active_only=true HTTP/1.1" 200
2025-06-07 18:16:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 0 reimbursement requests for employee: superadmin
2025-06-07 18:16:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60449 - "GET /api/v2/reimbursements/requests/my?limit=50&offset=0 HTTP/1.1" 200
2025-06-07 18:16:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60449 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 18:16:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60412 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 18:16:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60414 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 18:16:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60410 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 18:16:22 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 18:16:22 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 18:16:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 18:16:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 18:16:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 18:16:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 18:16:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: submitted
2025-06-07 18:16:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 18:16:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 18:16:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60449 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 18:16:22 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 18:16:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 18:16:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: approved
2025-06-07 18:16:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60472 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 18:16:23 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 18:16:23 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 18:16:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 18:16:23 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 18:16:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: submitted
2025-06-07 18:16:23 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 18:16:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 18:16:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60449 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 18:16:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: approved
2025-06-07 18:16:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60472 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 18:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60472 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-07 18:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60449 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-07 18:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60410 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 18:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60410 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 18:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60410 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 18:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60449 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 18:16:27 [ERROR] app.infrastructure.repositories.mongodb_public_holiday_repository:142 - find_with_filters(): Error finding public holidays with filters in database localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:16:27 [ERROR] app.infrastructure.services.public_holiday_service_impl:264 - list_public_holidays(): Error listing public holidays in organisation localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:16:27 [ERROR] app.api.controllers.public_holiday_controller:80 - list_public_holidays(): Error listing public holidays in organisation localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:16:27 [ERROR] app.api.routes.public_holiday_routes_v2:96 - list_public_holidays(): Error listing public holidays: 500: Internal server error
2025-06-07 18:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60472 - "GET /api/v2/public-holidays/ HTTP/1.1" 500
2025-06-07 18:16:27 [ERROR] app.infrastructure.repositories.mongodb_public_holiday_repository:142 - find_with_filters(): Error finding public holidays with filters in database localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:16:27 [ERROR] app.infrastructure.services.public_holiday_service_impl:264 - list_public_holidays(): Error listing public holidays in organisation localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:16:27 [ERROR] app.api.controllers.public_holiday_controller:80 - list_public_holidays(): Error listing public holidays in organisation localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:16:27 [ERROR] app.api.routes.public_holiday_routes_v2:96 - list_public_holidays(): Error listing public holidays: 500: Internal server error
2025-06-07 18:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60472 - "GET /api/v2/public-holidays/ HTTP/1.1" 500
