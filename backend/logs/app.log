2025-06-07 03:11:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:11:39 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:11:39 [INFO] uvicorn.error:83 - _serve(): Started server process [20174]
2025-06-07 03:11:39 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:11:39 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:11:39 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:11:58 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:11:58 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:11:58 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:11:58 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:11:58 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:11:58 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:11:58 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:11:58 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:11:58 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:11:58 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:11:58 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:11:58 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:11:58 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:11:58 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:11:58 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:11:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:11:59 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:11:59 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 03:11:59 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 03:11:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59758 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:12:00 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:12:00 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:12:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59756 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 500
2025-06-07 03:12:00 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dataclass_type', 'loc': ('response', 0), 'msg': 'Input should be a dictionary or an instance of ReimbursementResponseDTO', 'input': ReimbursementSummaryDTO(request_id='25bf0b6c-74f3-457a-beac-e328b4920ce4', employee_id='EMP003', reimbursement_type_name='Travel(Intr)', amount=Decimal('20000.0'), status='draft', submitted_at=None, final_amount=None), 'ctx': {'class_name': 'ReimbursementResponseDTO'}}

2025-06-07 03:12:00 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:12:00 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:12:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59758 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:12:00 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:12:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59792 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 500
2025-06-07 03:12:00 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dataclass_type', 'loc': ('response', 0), 'msg': 'Input should be a dictionary or an instance of ReimbursementResponseDTO', 'input': ReimbursementSummaryDTO(request_id='25bf0b6c-74f3-457a-beac-e328b4920ce4', employee_id='EMP003', reimbursement_type_name='Travel(Intr)', amount=Decimal('20000.0'), status='draft', submitted_at=None, final_amount=None), 'ctx': {'class_name': 'ReimbursementResponseDTO'}}

2025-06-07 03:13:47 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:13:47 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:13:47 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:13:47 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:13:47 [INFO] uvicorn.error:93 - _serve(): Finished server process [20174]
2025-06-07 03:13:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:13:57 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:13:57 [INFO] uvicorn.error:83 - _serve(): Started server process [20215]
2025-06-07 03:13:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:13:57 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:13:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:14:00 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:14:00 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:14:00 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:14:00 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:14:00 [INFO] uvicorn.error:93 - _serve(): Finished server process [20215]
2025-06-07 03:14:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:14:10 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:14:10 [INFO] uvicorn.error:83 - _serve(): Started server process [20232]
2025-06-07 03:14:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:14:10 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:14:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:14:11 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:14:11 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:14:11 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:14:11 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:14:11 [INFO] uvicorn.error:93 - _serve(): Finished server process [20232]
2025-06-07 03:14:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:14:21 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:14:21 [INFO] uvicorn.error:83 - _serve(): Started server process [20249]
2025-06-07 03:14:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:14:21 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:14:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:14:41 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Not enough segments
2025-06-07 03:14:41 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Not enough segments
2025-06-07 03:14:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61061 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 401
2025-06-07 03:14:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61114 - "GET /docs HTTP/1.1" 200
2025-06-07 03:15:22 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:15:22 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:15:22 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:15:22 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:15:22 [INFO] uvicorn.error:93 - _serve(): Finished server process [20249]
2025-06-07 03:15:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:15:32 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:15:32 [INFO] uvicorn.error:83 - _serve(): Started server process [20455]
2025-06-07 03:15:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:15:32 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:15:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:15:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61325 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 403
2025-06-07 03:15:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61346 - "GET /api/v2/reimbursements/requests/pending HTTP/1.1" 403
2025-06-07 03:15:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61349 - "GET /api/v2/reimbursements/requests/approved HTTP/1.1" 403
2025-06-07 03:16:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61766 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:16:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61769 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:16:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61771 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:16:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61772 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:16:39 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:16:39 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:16:39 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:16:39 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:16:39 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:16:39 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:16:39 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:16:39 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:16:39 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:16:39 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:16:39 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:16:39 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:16:39 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:16:39 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:16:39 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:16:39 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:16:39 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:16:40 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 03:16:40 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 03:16:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61769 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:16:40 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:16:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61766 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:16:40 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:16:40 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:16:40 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:16:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61772 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:16:40 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:16:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61769 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:17:05 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:17:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:17:05 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:17:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61972 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:17:05 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:17:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:17:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61970 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:17:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61972 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:17:05 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:17:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:17:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:17:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61974 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:18:41 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:18:42 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:18:42 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:18:42 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:18:42 [INFO] uvicorn.error:93 - _serve(): Finished server process [20455]
2025-06-07 03:18:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:18:55 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:18:55 [INFO] uvicorn.error:83 - _serve(): Started server process [20523]
2025-06-07 03:18:55 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:18:55 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:18:55 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:18:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:19:08 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:19:08 [INFO] uvicorn.error:83 - _serve(): Started server process [20551]
2025-06-07 03:19:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:19:08 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:19:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:19:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:19:20 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:19:20 [INFO] uvicorn.error:83 - _serve(): Started server process [20567]
2025-06-07 03:19:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:19:20 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:19:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:19:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:19:34 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:19:34 [INFO] uvicorn.error:83 - _serve(): Started server process [20586]
2025-06-07 03:19:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:19:34 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:19:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:19:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:19:46 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:19:46 [INFO] uvicorn.error:83 - _serve(): Started server process [20606]
2025-06-07 03:19:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:19:46 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:19:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:19:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:20:02 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:20:02 [INFO] uvicorn.error:83 - _serve(): Started server process [20621]
2025-06-07 03:20:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:20:02 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:20:02 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:20:02 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:20:02 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:20:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:20:02 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:20:02 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:20:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:20:02 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:20:02 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:20:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:20:02 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:20:02 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:20:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:20:03 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:20:03 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:20:03 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:20:03 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:20:03 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:20:03 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:20:03 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:20:03 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:20:03 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:20:03 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:20:03 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:20:03 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:20:03 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:20:03 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:20:03 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:20:03 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:20:03 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:20:03 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:20:03 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:20:03 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:20:03 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:20:03 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:20:04 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 03:20:04 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 03:20:04 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:20:04 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:20:43 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:20:43 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:20:43 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:20:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63337 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:20:43 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:20:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63335 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:20:43 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:20:43 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:20:43 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:20:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63337 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:20:43 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:20:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63340 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:24:38 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:24:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:24:38 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:24:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64805 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:24:38 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:24:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:24:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64803 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:24:38 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:24:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:24:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64811 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:24:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:24:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64805 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:26:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49429 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:26:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49431 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:26:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49433 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:26:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49435 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:26:56 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:26:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:26:56 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:26:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49437 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:26:56 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:26:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:26:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49429 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:26:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49435 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:26:56 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:26:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:26:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:26:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49437 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:31:16 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:31:16 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:31:16 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:31:16 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:31:16 [INFO] uvicorn.error:93 - _serve(): Finished server process [20621]
2025-06-07 03:31:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:31:29 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:31:29 [INFO] uvicorn.error:83 - _serve(): Started server process [21068]
2025-06-07 03:31:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:31:29 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:31:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:31:35 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:31:35 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:31:35 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:31:35 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:31:35 [INFO] uvicorn.error:93 - _serve(): Finished server process [21068]
2025-06-07 03:31:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:31:44 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:31:44 [INFO] uvicorn.error:83 - _serve(): Started server process [21083]
2025-06-07 03:31:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:31:44 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:31:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:31:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:31:54 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:31:54 [INFO] uvicorn.error:83 - _serve(): Started server process [21096]
2025-06-07 03:31:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:31:54 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:31:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:31:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51578 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 403
2025-06-07 03:34:22 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:34:22 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:34:22 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:34:22 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:34:22 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:34:22 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:34:22 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:34:22 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:34:22 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:34:22 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:34:22 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:34:22 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:34:22 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:34:22 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:34:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:34:22 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:34:23 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:34:24 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 03:34:24 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 03:34:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52470 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:34:24 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:34:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:34:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52468 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:34:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52512 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:34:24 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:34:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:34:25 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:34:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52470 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:35:12 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:35:12 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:35:12 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:35:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52969 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:35:12 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:35:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52967 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:35:12 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:35:12 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:35:12 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:35:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52969 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:35:13 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:35:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52967 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:36:06 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:36:06 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:36:06 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:36:06 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:36:06 [INFO] uvicorn.error:93 - _serve(): Finished server process [21096]
2025-06-07 03:36:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:36:17 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:36:17 [INFO] uvicorn.error:83 - _serve(): Started server process [21308]
2025-06-07 03:36:17 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:36:17 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:36:17 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:36:31 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:36:31 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:36:31 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:36:31 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 03:36:31 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 03:36:31 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 03:36:32 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:36:32 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 03:36:32 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:36:32 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:36:32 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 03:36:32 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:36:32 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 03:36:32 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 03:36:32 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:36:32 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:36:32 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:36:33 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 03:36:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 03:36:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53488 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:36:33 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:36:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53486 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:36:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53681 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:36:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53683 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:36:56 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 03:36:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 03:36:56 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 03:36:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53683 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:36:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 03:36:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53681 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:39:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54845 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 403
2025-06-07 03:42:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55954 - "OPTIONS /reimbursements/pending HTTP/1.1" 200
2025-06-07 03:42:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55956 - "OPTIONS /reimbursements/approved HTTP/1.1" 200
2025-06-07 03:42:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55959 - "OPTIONS /reimbursements/pending HTTP/1.1" 200
2025-06-07 03:42:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55960 - "OPTIONS /reimbursements/approved HTTP/1.1" 200
2025-06-07 03:42:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55959 - "GET /reimbursements/pending HTTP/1.1" 404
2025-06-07 03:42:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55956 - "GET /reimbursements/approved HTTP/1.1" 404
2025-06-07 03:42:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55959 - "GET /reimbursements/pending HTTP/1.1" 404
2025-06-07 03:42:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55956 - "GET /reimbursements/approved HTTP/1.1" 404
2025-06-07 03:47:39 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:47:39 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:47:39 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:47:39 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:47:39 [INFO] uvicorn.error:93 - _serve(): Finished server process [21308]
2025-06-07 03:47:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:47:56 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:47:56 [INFO] uvicorn.error:83 - _serve(): Started server process [21533]
2025-06-07 03:47:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:47:56 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:47:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:47:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:47:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:47:59 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:47:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:47:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [21533]
2025-06-07 03:48:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:48:27 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:48:27 [INFO] uvicorn.error:83 - _serve(): Started server process [21550]
2025-06-07 03:48:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:48:27 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:48:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:48:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:48:42 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:48:42 [INFO] uvicorn.error:83 - _serve(): Started server process [21563]
2025-06-07 03:48:42 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:48:42 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:48:42 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:48:48 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:48:48 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:48:48 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:48:48 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:48:48 [INFO] uvicorn.error:93 - _serve(): Finished server process [21563]
2025-06-07 03:49:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:49:12 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:49:12 [INFO] uvicorn.error:83 - _serve(): Started server process [21574]
2025-06-07 03:49:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:49:12 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:49:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:49:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:50:04 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:50:04 [INFO] uvicorn.error:83 - _serve(): Started server process [21582]
2025-06-07 03:50:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:50:04 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:50:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:50:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:50:26 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:50:26 [INFO] uvicorn.error:83 - _serve(): Started server process [21606]
2025-06-07 03:50:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:50:26 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:50:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:50:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:50:49 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:50:49 [INFO] uvicorn.error:83 - _serve(): Started server process [21631]
2025-06-07 03:50:49 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:50:49 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:50:49 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:50:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58947 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 03:50:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58948 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 03:51:35 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 03:51:35 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 03:51:35 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 03:51:35 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 03:51:35 [INFO] uvicorn.error:93 - _serve(): Finished server process [21631]
2025-06-07 03:51:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:52:01 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:52:01 [INFO] uvicorn.error:83 - _serve(): Started server process [21646]
2025-06-07 03:52:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:52:01 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:52:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 03:52:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 03:52:16 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 03:52:16 [INFO] uvicorn.error:83 - _serve(): Started server process [21660]
2025-06-07 03:52:16 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 03:52:16 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 03:52:16 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:01:09 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:01:09 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:01:09 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:01:09 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:01:09 [INFO] uvicorn.error:93 - _serve(): Finished server process [21660]
2025-06-07 04:01:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:01:23 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:01:23 [INFO] uvicorn.error:83 - _serve(): Started server process [21827]
2025-06-07 04:01:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:01:23 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:01:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:01:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62172 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:01:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62174 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:01:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62177 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:01:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62178 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:01:23 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:01:23 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:01:23 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:01:23 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:01:23 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:01:23 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:01:23 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:01:23 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:01:23 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:01:23 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:01:23 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:01:23 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:01:23 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:01:23 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:01:23 [INFO] app.infrastructure.services.reimbursement_service_impl:502 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:01:24 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:01:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:01:24 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:01:24 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:01:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 04:01:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62172 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:01:24 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:01:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:01:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 1 reimbursement requests for employee: EMP003
2025-06-07 04:01:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62178 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:01:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62227 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:01:25 [INFO] app.infrastructure.services.reimbursement_service_impl:502 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:01:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62178 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:01:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62502 - "OPTIONS /api/v2/reimbursements/requests/with-file HTTP/1.1" 200
2025-06-07 04:01:50 [INFO] app.api.controllers.reimbursement_controller:201 - create_reimbursement_request_with_file(): Creating reimbursement request with file for employee: EMP003 in organisation: localhost
2025-06-07 04:01:50 [INFO] app.infrastructure.services.reimbursement_service_impl:240 - create_reimbursement_request(): Creating reimbursement request for employee: EMP003 in organisation: localhost
2025-06-07 04:01:50 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:83 - execute(): Creating reimbursement request for employee: EMP003 by system
2025-06-07 04:01:50 [ERROR] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:303 - _send_notifications(): Failed to send notifications: 'EmailNotificationService' object has no attribute 'send_employee_notification'
2025-06-07 04:01:50 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:106 - execute(): Successfully created reimbursement request: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 04:01:50 [INFO] app.infrastructure.services.reimbursement_service_impl:248 - create_reimbursement_request(): Successfully created reimbursement request: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 04:01:50 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: receipts/localhost/377de0c9-0d37-4d51-8a8d-87226c1c597b.png
2025-06-07 04:01:50 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: 99caa3d8-c9c5-4e97-8118-c34424b20f25 in organisation: localhost
2025-06-07 04:01:51 [ERROR] app.infrastructure.services.reimbursement_service_impl:442 - attach_receipt_to_request(): Error attaching receipt to reimbursement request 99caa3d8-c9c5-4e97-8118-c34424b20f25 in organisation localhost: Reimbursement request not found: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 04:01:51 [ERROR] app.api.controllers.reimbursement_controller:233 - create_reimbursement_request_with_file(): Error creating reimbursement request with file for employee EMP003 in organisation localhost: Reimbursement request not found: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 04:01:51 [ERROR] app.api.routes.reimbursement_routes_v2:141 - create_reimbursement_request_with_file(): Error creating reimbursement request with file: 500: Internal server error
2025-06-07 04:01:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62502 - "POST /api/v2/reimbursements/requests/with-file HTTP/1.1" 500
2025-06-07 04:03:19 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:03:19 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:03:19 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:03:19 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:03:19 [INFO] uvicorn.error:93 - _serve(): Finished server process [21827]
2025-06-07 04:03:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:03:29 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:03:29 [INFO] uvicorn.error:83 - _serve(): Started server process [21881]
2025-06-07 04:03:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:03:29 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:03:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:03:42 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:03:42 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:03:42 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:03:42 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:03:42 [INFO] uvicorn.error:93 - _serve(): Finished server process [21881]
2025-06-07 04:03:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:03:51 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:03:51 [INFO] uvicorn.error:83 - _serve(): Started server process [21898]
2025-06-07 04:03:51 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:03:51 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:03:51 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:05:09 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:05:09 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:05:09 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:05:09 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:05:09 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:05:09 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:05:09 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:05:09 [INFO] app.api.controllers.reimbursement_controller:201 - create_reimbursement_request_with_file(): Creating reimbursement request with file for employee: EMP003 in organisation: localhost
2025-06-07 04:05:09 [INFO] app.infrastructure.services.reimbursement_service_impl:240 - create_reimbursement_request(): Creating reimbursement request for employee: EMP003 in organisation: localhost
2025-06-07 04:05:09 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:83 - execute(): Creating reimbursement request for employee: EMP003 by system
2025-06-07 04:05:11 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:05:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:05:11 [ERROR] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:303 - _send_notifications(): Failed to send notifications: 'EmailNotificationService' object has no attribute 'send_employee_notification'
2025-06-07 04:05:11 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:106 - execute(): Successfully created reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 04:05:11 [INFO] app.infrastructure.services.reimbursement_service_impl:248 - create_reimbursement_request(): Successfully created reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 04:05:11 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: receipts/localhost/21d290f1-0099-40b5-9698-1981f67d29a1.png
2025-06-07 04:05:11 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d in organisation: localhost
2025-06-07 04:05:11 [WARNING] app.infrastructure.services.reimbursement_service_impl:429 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:05:11 [WARNING] app.infrastructure.services.reimbursement_service_impl:429 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:05:12 [ERROR] app.infrastructure.services.reimbursement_service_impl:434 - attach_receipt_to_request(): Reimbursement request not found after retries: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 04:05:12 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 1
2025-06-07 04:05:12 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d in organisation: localhost
2025-06-07 04:05:12 [WARNING] app.infrastructure.services.reimbursement_service_impl:429 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:05:12 [WARNING] app.infrastructure.services.reimbursement_service_impl:429 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:05:12 [ERROR] app.infrastructure.services.reimbursement_service_impl:434 - attach_receipt_to_request(): Reimbursement request not found after retries: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 04:05:12 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 2
2025-06-07 04:05:12 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d in organisation: localhost
2025-06-07 04:05:12 [WARNING] app.infrastructure.services.reimbursement_service_impl:429 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:05:13 [WARNING] app.infrastructure.services.reimbursement_service_impl:429 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:05:13 [ERROR] app.infrastructure.services.reimbursement_service_impl:434 - attach_receipt_to_request(): Reimbursement request not found after retries: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 04:05:13 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 3
2025-06-07 04:05:13 [INFO] app.infrastructure.services.reimbursement_service_impl:495 - get_reimbursement_request_by_id(): Getting reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d in organisation: localhost
2025-06-07 04:05:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63842 - "POST /api/v2/reimbursements/requests/with-file HTTP/1.1" 200
2025-06-07 04:05:13 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:05:13 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:05:13 [INFO] app.infrastructure.services.reimbursement_service_impl:519 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:05:13 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 3 reimbursement requests for employee: EMP003
2025-06-07 04:05:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63842 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:05:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63886 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:05:49 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:05:49 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:05:49 [INFO] app.infrastructure.services.reimbursement_service_impl:519 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:05:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64124 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:05:49 [INFO] app.infrastructure.services.reimbursement_service_impl:519 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:05:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64124 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:05:49 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 3 reimbursement requests for employee: EMP003
2025-06-07 04:05:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64122 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:05:49 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:05:49 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:05:50 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 3 reimbursement requests for employee: EMP003
2025-06-07 04:05:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64124 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:08:49 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:08:49 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:08:49 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:08:49 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:08:49 [INFO] uvicorn.error:93 - _serve(): Finished server process [21898]
2025-06-07 04:08:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:09:01 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:09:01 [INFO] uvicorn.error:83 - _serve(): Started server process [22052]
2025-06-07 04:09:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:09:01 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:09:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:09:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:09:11 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:09:11 [INFO] uvicorn.error:83 - _serve(): Started server process [22072]
2025-06-07 04:09:11 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:09:11 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:09:11 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:10:06 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:10:06 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:10:06 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:10:06 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:10:06 [INFO] uvicorn.error:93 - _serve(): Finished server process [22072]
2025-06-07 04:10:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:10:20 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:10:20 [INFO] uvicorn.error:83 - _serve(): Started server process [22132]
2025-06-07 04:10:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:10:20 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:10:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:10:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:10:48 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:10:48 [INFO] uvicorn.error:83 - _serve(): Started server process [22171]
2025-06-07 04:10:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:10:48 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:10:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:13:32 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:13:32 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:13:32 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:13:32 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:13:32 [INFO] uvicorn.error:93 - _serve(): Finished server process [22171]
2025-06-07 04:13:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:13:45 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:13:45 [INFO] uvicorn.error:83 - _serve(): Started server process [22240]
2025-06-07 04:13:45 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:13:45 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:13:45 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:13:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50411 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:13:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50413 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:13:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50416 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:13:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50417 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:13:50 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:13:50 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:13:50 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:13:50 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:13:50 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:13:50 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:13:50 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:13:50 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:13:50 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:13:50 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:13:50 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:13:50 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:13:50 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:13:50 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:13:50 [INFO] app.infrastructure.services.reimbursement_service_impl:523 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:13:50 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:13:50 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:13:51 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:13:51 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:13:51 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 3 reimbursement requests for employee: EMP003
2025-06-07 04:13:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50411 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:13:51 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:13:51 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:13:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50413 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:13:51 [INFO] app.infrastructure.services.reimbursement_service_impl:523 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:13:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50411 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:13:51 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 3 reimbursement requests for employee: EMP003
2025-06-07 04:13:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50417 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:14:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50593 - "OPTIONS /api/v2/reimbursements/requests/with-file HTTP/1.1" 200
2025-06-07 04:14:13 [INFO] app.api.controllers.reimbursement_controller:201 - create_reimbursement_request_with_file(): Creating reimbursement request with file for employee: EMP003 in organisation: localhost
2025-06-07 04:14:13 [INFO] app.infrastructure.services.reimbursement_service_impl:240 - create_reimbursement_request(): Creating reimbursement request for employee: EMP003 in organisation: localhost
2025-06-07 04:14:13 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:83 - execute(): Creating reimbursement request for employee: EMP003 by system
2025-06-07 04:14:13 [ERROR] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:303 - _send_notifications(): Failed to send notifications: 'EmailNotificationService' object has no attribute 'send_employee_notification'
2025-06-07 04:14:13 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:106 - execute(): Successfully created reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 04:14:13 [INFO] app.infrastructure.services.reimbursement_service_impl:248 - create_reimbursement_request(): Successfully created reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 04:14:13 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: receipts/localhost/1d4e0f9c-56a6-4aff-89a9-7a3cf3ba0c51.png
2025-06-07 04:14:13 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 in organisation: localhost
2025-06-07 04:14:13 [INFO] app.infrastructure.services.reimbursement_service_impl:420 - attach_receipt_to_request(): Receipt details - file_path: receipts/localhost/1d4e0f9c-56a6-4aff-89a9-7a3cf3ba0c51.png, file_name: Screenshot 2025-05-07 at 4.27.23 PM.png, file_size: 30918, uploaded_by: EMP003
2025-06-07 04:14:14 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:14:14 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:14:14 [ERROR] app.infrastructure.services.reimbursement_service_impl:437 - attach_receipt_to_request(): Reimbursement request not found after retries: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 04:14:14 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 1
2025-06-07 04:14:14 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 in organisation: localhost
2025-06-07 04:14:14 [INFO] app.infrastructure.services.reimbursement_service_impl:420 - attach_receipt_to_request(): Receipt details - file_path: receipts/localhost/1d4e0f9c-56a6-4aff-89a9-7a3cf3ba0c51.png, file_name: Screenshot 2025-05-07 at 4.27.23 PM.png, file_size: 30918, uploaded_by: EMP003
2025-06-07 04:14:14 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:14:14 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:14:14 [ERROR] app.infrastructure.services.reimbursement_service_impl:437 - attach_receipt_to_request(): Reimbursement request not found after retries: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 04:14:14 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 2
2025-06-07 04:14:15 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 in organisation: localhost
2025-06-07 04:14:15 [INFO] app.infrastructure.services.reimbursement_service_impl:420 - attach_receipt_to_request(): Receipt details - file_path: receipts/localhost/1d4e0f9c-56a6-4aff-89a9-7a3cf3ba0c51.png, file_name: Screenshot 2025-05-07 at 4.27.23 PM.png, file_size: 30918, uploaded_by: EMP003
2025-06-07 04:14:15 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:14:15 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:14:15 [ERROR] app.infrastructure.services.reimbursement_service_impl:437 - attach_receipt_to_request(): Reimbursement request not found after retries: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 04:14:15 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 3
2025-06-07 04:14:15 [INFO] app.infrastructure.services.reimbursement_service_impl:499 - get_reimbursement_request_by_id(): Getting reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 in organisation: localhost
2025-06-07 04:14:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50593 - "POST /api/v2/reimbursements/requests/with-file HTTP/1.1" 200
2025-06-07 04:14:15 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:14:15 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:14:15 [INFO] app.infrastructure.services.reimbursement_service_impl:523 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:14:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50599 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:14:15 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 4 reimbursement requests for employee: EMP003
2025-06-07 04:14:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50593 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:16:00 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:16:00 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:16:00 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:16:00 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:16:00 [INFO] uvicorn.error:93 - _serve(): Finished server process [22240]
2025-06-07 04:16:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:16:10 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:16:10 [INFO] uvicorn.error:83 - _serve(): Started server process [22271]
2025-06-07 04:16:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:16:10 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:16:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:18:47 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:18:47 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:18:47 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:18:47 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:18:47 [INFO] uvicorn.error:93 - _serve(): Finished server process [22271]
2025-06-07 04:18:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:19:00 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:19:00 [INFO] uvicorn.error:83 - _serve(): Started server process [22420]
2025-06-07 04:19:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:19:00 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:19:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:19:24 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:19:24 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:19:24 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:19:24 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:19:24 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:19:24 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:19:24 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:19:24 [INFO] app.api.controllers.reimbursement_controller:201 - create_reimbursement_request_with_file(): Creating reimbursement request with file for employee: EMP003 in organisation: localhost
2025-06-07 04:19:24 [INFO] app.infrastructure.services.reimbursement_service_impl:240 - create_reimbursement_request(): Creating reimbursement request for employee: EMP003 in organisation: localhost
2025-06-07 04:19:24 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:83 - execute(): Creating reimbursement request for employee: EMP003 by system
2025-06-07 04:19:25 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:19:25 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:19:25 [ERROR] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:303 - _send_notifications(): Failed to send notifications: 'EmailNotificationService' object has no attribute 'send_employee_notification'
2025-06-07 04:19:25 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:106 - execute(): Successfully created reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 04:19:25 [INFO] app.infrastructure.services.reimbursement_service_impl:248 - create_reimbursement_request(): Successfully created reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 04:19:25 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: receipts/localhost/eacf0267-5faf-4ed8-b845-b4154b56610c.png
2025-06-07 04:19:25 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6 in organisation: localhost
2025-06-07 04:19:25 [INFO] app.infrastructure.services.reimbursement_service_impl:420 - attach_receipt_to_request(): Receipt details - file_path: receipts/localhost/eacf0267-5faf-4ed8-b845-b4154b56610c.png, file_name: Screenshot 2025-05-07 at 4.37.07 PM.png, file_size: 37752, uploaded_by: EMP003
2025-06-07 04:19:25 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:19:25 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:19:26 [ERROR] app.infrastructure.services.reimbursement_service_impl:437 - attach_receipt_to_request(): Reimbursement request not found after retries: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 04:19:26 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 1
2025-06-07 04:19:26 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6 in organisation: localhost
2025-06-07 04:19:26 [INFO] app.infrastructure.services.reimbursement_service_impl:420 - attach_receipt_to_request(): Receipt details - file_path: receipts/localhost/eacf0267-5faf-4ed8-b845-b4154b56610c.png, file_name: Screenshot 2025-05-07 at 4.37.07 PM.png, file_size: 37752, uploaded_by: EMP003
2025-06-07 04:19:26 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:19:26 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:19:26 [ERROR] app.infrastructure.services.reimbursement_service_impl:437 - attach_receipt_to_request(): Reimbursement request not found after retries: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 04:19:26 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 2
2025-06-07 04:19:26 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6 in organisation: localhost
2025-06-07 04:19:26 [INFO] app.infrastructure.services.reimbursement_service_impl:420 - attach_receipt_to_request(): Receipt details - file_path: receipts/localhost/eacf0267-5faf-4ed8-b845-b4154b56610c.png, file_name: Screenshot 2025-05-07 at 4.37.07 PM.png, file_size: 37752, uploaded_by: EMP003
2025-06-07 04:19:26 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:19:26 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:19:27 [ERROR] app.infrastructure.services.reimbursement_service_impl:437 - attach_receipt_to_request(): Reimbursement request not found after retries: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 04:19:27 [WARNING] app.api.controllers.reimbursement_controller:231 - create_reimbursement_request_with_file(): Failed to attach receipt on attempt 3
2025-06-07 04:19:27 [INFO] app.infrastructure.services.reimbursement_service_impl:533 - get_reimbursement_request_by_id(): Getting reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6 in organisation: localhost
2025-06-07 04:19:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52343 - "POST /api/v2/reimbursements/requests/with-file HTTP/1.1" 200
2025-06-07 04:19:27 [INFO] app.infrastructure.services.reimbursement_service_impl:591 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:19:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:19:27 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:19:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 5 reimbursement requests for employee: EMP003
2025-06-07 04:19:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52343 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:19:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52380 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:20:43 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:20:43 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:20:43 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:20:43 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:20:43 [INFO] uvicorn.error:93 - _serve(): Finished server process [22420]
2025-06-07 04:20:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:20:54 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:20:54 [INFO] uvicorn.error:83 - _serve(): Started server process [22447]
2025-06-07 04:20:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:20:54 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:20:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:21:15 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:21:16 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:21:16 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:21:16 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:21:16 [INFO] uvicorn.error:93 - _serve(): Finished server process [22447]
2025-06-07 04:21:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:21:25 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:21:25 [INFO] uvicorn.error:83 - _serve(): Started server process [22477]
2025-06-07 04:21:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:21:25 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:21:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:21:48 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:21:48 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:21:48 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:21:48 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:21:48 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:21:48 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:21:48 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:21:48 [INFO] app.api.controllers.reimbursement_controller:201 - create_reimbursement_request_with_file(): Creating reimbursement request with file for employee: EMP003 in organisation: localhost
2025-06-07 04:21:48 [INFO] app.infrastructure.services.reimbursement_service_impl:240 - create_reimbursement_request(): Creating reimbursement request for employee: EMP003 in organisation: localhost
2025-06-07 04:21:48 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:83 - execute(): Creating reimbursement request for employee: EMP003 by system
2025-06-07 04:21:49 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:21:49 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:21:49 [ERROR] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:303 - _send_notifications(): Failed to send notifications: 'EmailNotificationService' object has no attribute 'send_employee_notification'
2025-06-07 04:21:49 [INFO] app.application.use_cases.reimbursement.create_reimbursement_request_use_case:106 - execute(): Successfully created reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 04:21:49 [INFO] app.infrastructure.services.reimbursement_service_impl:248 - create_reimbursement_request(): Successfully created reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 04:21:49 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: receipts/localhost/65743128-d561-46a0-b401-0197cc33c377.png
2025-06-07 04:21:49 [INFO] app.infrastructure.services.reimbursement_service_impl:419 - attach_receipt_to_request(): Attaching receipt to reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 04:21:49 [INFO] app.infrastructure.services.reimbursement_service_impl:420 - attach_receipt_to_request(): Receipt details - file_path: receipts/localhost/65743128-d561-46a0-b401-0197cc33c377.png, file_name: Screenshot 2025-04-26 at 3.41.43 PM.png, file_size: 187670, uploaded_by: EMP003
2025-06-07 04:21:49 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 1, retrying...
2025-06-07 04:21:49 [WARNING] app.infrastructure.services.reimbursement_service_impl:432 - attach_receipt_to_request(): Request not found on attempt 2, retrying...
2025-06-07 04:21:50 [WARNING] app.infrastructure.services.reimbursement_service_impl:462 - attach_receipt_to_request(): Entity not found after retries, proceeding with direct MongoDB update
2025-06-07 04:21:50 [INFO] app.infrastructure.services.reimbursement_service_impl:465 - attach_receipt_to_request(): Trying direct MongoDB update as fallback...
2025-06-07 04:21:50 [INFO] app.infrastructure.services.reimbursement_service_impl:489 - attach_receipt_to_request(): Successfully attached receipt via direct MongoDB update: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 04:21:50 [INFO] app.infrastructure.services.reimbursement_service_impl:490 - attach_receipt_to_request(): Modified count: 1, Matched count: 1
2025-06-07 04:21:50 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 04:21:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53390 - "POST /api/v2/reimbursements/requests/with-file HTTP/1.1" 200
2025-06-07 04:21:50 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:21:50 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:21:50 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:21:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53415 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:21:51 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:21:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53390 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:24:02 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 04:26:40 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:26:40 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:26:40 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:26:40 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:26:40 [INFO] uvicorn.error:93 - _serve(): Finished server process [22477]
2025-06-07 04:26:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:26:50 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:26:50 [INFO] uvicorn.error:83 - _serve(): Started server process [22536]
2025-06-07 04:26:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:26:50 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:26:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:26:55 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:26:55 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:26:55 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:26:55 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:26:55 [INFO] uvicorn.error:93 - _serve(): Finished server process [22536]
2025-06-07 04:27:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:27:08 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:27:08 [INFO] uvicorn.error:83 - _serve(): Started server process [22551]
2025-06-07 04:27:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:27:08 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:27:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:27:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:27:43 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:27:43 [INFO] uvicorn.error:83 - _serve(): Started server process [22590]
2025-06-07 04:27:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:27:43 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:27:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:27:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55618 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:27:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55620 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:27:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55622 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:27:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55624 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:28:01 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:28:01 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:28:01 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:28:01 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:28:01 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:28:01 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:28:01 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:28:01 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:28:01 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:28:01 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:28:01 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:28:01 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:28:01 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:28:01 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:28:01 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:28:01 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:28:02 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:28:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55834 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:28:03 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:28:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:28:03 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:28:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55834 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:28:04 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:28:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55832 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:28:04 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:28:04 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:28:04 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:28:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55834 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56099 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56099 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55869 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:28:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:28:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56099 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:32:43 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:32:43 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:32:43 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:32:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57678 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:32:43 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:32:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57676 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:33:11 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:33:11 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:33:11 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:33:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57904 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:33:12 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:33:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57902 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:35:36 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:35:36 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:35:36 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:35:36 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:35:36 [INFO] uvicorn.error:93 - _serve(): Finished server process [22590]
2025-06-07 04:35:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:35:47 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:35:47 [INFO] uvicorn.error:83 - _serve(): Started server process [22918]
2025-06-07 04:35:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:35:47 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:35:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:37:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59483 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 403
2025-06-07 04:37:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59483 - "GET /favicon.ico HTTP/1.1" 404
2025-06-07 04:45:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61798 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:45:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61800 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:45:47 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:45:47 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:45:47 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:45:47 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:45:47 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:45:47 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:45:48 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:45:48 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:45:48 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:45:48 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:45:48 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:45:48 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:45:48 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:45:48 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:45:48 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:45:48 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:45:48 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:45:49 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:45:49 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:45:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61800 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:45:49 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:45:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61798 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:45:58 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:45:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:45:58 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:45:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61947 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:45:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:45:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61945 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:47:37 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:47:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:47:37 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:47:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62582 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:47:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:47:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62581 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:48:27 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:48:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:48:27 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:48:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62958 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:48:27 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:48:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62958 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:48:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:48:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62956 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:48:28 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:48:28 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:48:28 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:48:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62958 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:48:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62958 - "OPTIONS /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 200
2025-06-07 04:48:29 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 04:48:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62958 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 04:48:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62979 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 403
2025-06-07 04:49:27 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:49:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:49:27 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:49:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63402 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:49:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:49:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62960 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:49:29 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:49:29 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:49:29 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:49:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63402 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:49:29 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:49:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62960 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:51:44 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:51:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:51:44 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:51:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64280 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:51:45 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:51:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64278 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:52:55 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:52:55 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:52:55 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:52:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64849 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:52:55 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:52:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64851 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:52:55 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:52:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64847 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:52:55 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:52:55 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:52:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:52:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64851 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:53:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64948 - "OPTIONS /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 200
2025-06-07 04:53:07 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 04:53:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64948 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 04:53:34 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 04:53:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65131 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 04:53:55 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:53:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:53:56 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:53:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65291 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:53:56 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:53:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65291 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:53:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:53:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65289 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:53:56 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:53:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:53:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:53:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65291 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:54:10 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 04:54:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65293 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 04:54:52 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:54:52 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:54:52 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:54:52 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:54:52 [INFO] uvicorn.error:93 - _serve(): Finished server process [22918]
2025-06-07 04:54:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:55:04 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:55:04 [INFO] uvicorn.error:83 - _serve(): Started server process [23434]
2025-06-07 04:55:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:55:04 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:55:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:55:05 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:55:05 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:55:05 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:55:05 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:55:05 [INFO] uvicorn.error:93 - _serve(): Finished server process [23434]
2025-06-07 04:55:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:55:16 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:55:16 [INFO] uvicorn.error:83 - _serve(): Started server process [23451]
2025-06-07 04:55:16 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:55:16 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:55:16 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:55:37 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:55:37 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:55:37 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:55:37 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:55:37 [INFO] uvicorn.error:93 - _serve(): Finished server process [23451]
2025-06-07 04:55:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:55:47 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:55:47 [INFO] uvicorn.error:83 - _serve(): Started server process [23470]
2025-06-07 04:55:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:55:47 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:55:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:55:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49673 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:55:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49675 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:55:59 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:55:59 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:55:59 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:55:59 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:55:59 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:55:59 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:55:59 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:55:59 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:55:59 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:55:59 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:55:59 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:55:59 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:55:59 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:55:59 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:55:59 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:56:00 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:56:00 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:56:00 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:56:00 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:56:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49675 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:56:00 [INFO] app.infrastructure.services.reimbursement_service_impl:560 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:56:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49706 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:56:01 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:56:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49673 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:56:01 [INFO] app.infrastructure.services.reimbursement_service_impl:594 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:56:01 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:56:01 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:56:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49706 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 04:56:28 [INFO] app.api.routes.reimbursement_routes_v2:541 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 04:56:28 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 04:56:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49877 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 04:58:00 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:58:00 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:58:00 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:58:00 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:58:00 [INFO] uvicorn.error:93 - _serve(): Finished server process [23470]
2025-06-07 04:58:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:58:13 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:58:13 [INFO] uvicorn.error:83 - _serve(): Started server process [23524]
2025-06-07 04:58:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:58:13 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:58:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:58:43 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:58:43 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:58:43 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:58:43 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:58:43 [INFO] uvicorn.error:93 - _serve(): Finished server process [23524]
2025-06-07 04:58:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:58:59 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:58:59 [INFO] uvicorn.error:83 - _serve(): Started server process [23558]
2025-06-07 04:58:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:58:59 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:58:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:59:14 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 04:59:14 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 04:59:14 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 04:59:14 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 04:59:14 [INFO] uvicorn.error:93 - _serve(): Finished server process [23558]
2025-06-07 04:59:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 04:59:30 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 04:59:30 [INFO] uvicorn.error:83 - _serve(): Started server process [23580]
2025-06-07 04:59:30 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 04:59:30 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 04:59:30 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 04:59:30 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:59:30 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 04:59:30 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:59:30 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 04:59:30 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:59:30 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 04:59:30 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:59:30 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 04:59:30 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:59:30 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:59:30 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:59:30 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 04:59:30 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 04:59:30 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 04:59:30 [INFO] app.infrastructure.services.reimbursement_service_impl:565 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 04:59:30 [INFO] app.infrastructure.services.reimbursement_service_impl:599 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 04:59:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 04:59:31 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 04:59:31 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 04:59:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51044 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 04:59:31 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 04:59:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51042 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:00:06 [INFO] app.api.routes.reimbursement_routes_v2:541 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:00:06 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:00:06 [INFO] app.infrastructure.services.reimbursement_service_impl:539 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:00:06 [WARNING] app.infrastructure.services.reimbursement_service_impl:542 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:00:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51326 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:00:57 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:00:57 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:00:57 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:00:57 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:00:57 [INFO] uvicorn.error:93 - _serve(): Finished server process [23580]
2025-06-07 05:01:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:01:08 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:01:08 [INFO] uvicorn.error:83 - _serve(): Started server process [23636]
2025-06-07 05:01:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:01:08 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:01:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:01:17 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:01:17 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:01:17 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:01:17 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:01:17 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:01:17 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:01:17 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:01:17 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:01:17 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:01:17 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:01:17 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:01:17 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:01:17 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:01:17 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:01:17 [INFO] app.infrastructure.services.reimbursement_service_impl:599 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:01:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:01:18 [INFO] app.infrastructure.services.reimbursement_service_impl:565 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:01:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51827 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:01:18 [INFO] app.infrastructure.services.reimbursement_service_impl:565 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:01:18 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:01:18 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:01:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51827 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:01:18 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:01:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51825 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:01:19 [INFO] app.infrastructure.services.reimbursement_service_impl:599 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:01:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:01:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:01:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51827 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:01:23 [INFO] app.api.routes.reimbursement_routes_v2:541 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:01:23 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:01:23 [INFO] app.infrastructure.services.reimbursement_service_impl:539 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:01:23 [WARNING] app.infrastructure.services.reimbursement_service_impl:542 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:01:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51827 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:01:53 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:01:54 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:01:54 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:01:54 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:01:54 [INFO] uvicorn.error:93 - _serve(): Finished server process [23636]
2025-06-07 05:01:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:02:04 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:02:04 [INFO] uvicorn.error:83 - _serve(): Started server process [23660]
2025-06-07 05:02:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:02:04 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:02:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:02:23 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:02:23 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:02:23 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:02:23 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:02:23 [INFO] uvicorn.error:93 - _serve(): Finished server process [23660]
2025-06-07 05:02:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:02:31 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:02:31 [INFO] uvicorn.error:83 - _serve(): Started server process [23681]
2025-06-07 05:02:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:02:31 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:02:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:02:37 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:02:37 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:02:37 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:02:37 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:02:37 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:02:37 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:02:37 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:02:37 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:02:37 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:02:37 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:02:37 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:02:37 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:02:37 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:02:37 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:02:37 [INFO] app.infrastructure.services.reimbursement_service_impl:602 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:02:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:02:38 [INFO] app.infrastructure.services.reimbursement_service_impl:568 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:02:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52510 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:02:39 [INFO] app.infrastructure.services.reimbursement_service_impl:568 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:02:39 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:02:39 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:02:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52510 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:02:39 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:02:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52508 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:02:39 [INFO] app.infrastructure.services.reimbursement_service_impl:602 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:02:39 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:02:39 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:02:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52510 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:02:41 [INFO] app.api.routes.reimbursement_routes_v2:541 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:02:41 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:02:41 [INFO] app.infrastructure.services.reimbursement_service_impl:537 - get_reimbursement_request_by_id(): Repository type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:02:41 [INFO] app.infrastructure.services.reimbursement_service_impl:538 - get_reimbursement_request_by_id(): Repository.reimbursements type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:02:41 [INFO] app.infrastructure.services.reimbursement_service_impl:539 - get_reimbursement_request_by_id(): Repository.reimbursements.get_by_id method: <bound method MongoDBReimbursementRepository.get_by_id of <app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository object at 0x114143390>>
2025-06-07 05:02:41 [INFO] app.infrastructure.services.reimbursement_service_impl:542 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:02:41 [WARNING] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:02:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52510 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:07:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54313 - "OPTIONS /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 200
2025-06-07 05:07:18 [INFO] app.api.routes.reimbursement_routes_v2:541 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:07:18 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:07:18 [INFO] app.infrastructure.services.reimbursement_service_impl:537 - get_reimbursement_request_by_id(): Repository type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:07:18 [INFO] app.infrastructure.services.reimbursement_service_impl:538 - get_reimbursement_request_by_id(): Repository.reimbursements type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:07:18 [INFO] app.infrastructure.services.reimbursement_service_impl:539 - get_reimbursement_request_by_id(): Repository.reimbursements.get_by_id method: <bound method MongoDBReimbursementRepository.get_by_id of <app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository object at 0x114143390>>
2025-06-07 05:07:18 [INFO] app.infrastructure.services.reimbursement_service_impl:542 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:07:18 [WARNING] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:07:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54313 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:07:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:07:54 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:07:54 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:07:54 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:07:54 [INFO] uvicorn.error:93 - _serve(): Finished server process [23681]
2025-06-07 05:07:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:08:10 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:08:10 [INFO] uvicorn.error:83 - _serve(): Started server process [23750]
2025-06-07 05:08:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:08:10 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:08:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:08:20 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:08:20 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:08:20 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:08:20 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:08:20 [INFO] uvicorn.error:93 - _serve(): Finished server process [23750]
2025-06-07 05:08:28 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:08:34 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:08:34 [INFO] uvicorn.error:83 - _serve(): Started server process [23788]
2025-06-07 05:08:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:08:34 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:08:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:08:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54834 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:08:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54835 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:08:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54837 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:08:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54839 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:08:34 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:08:34 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:08:34 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:08:34 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:08:34 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:08:34 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:08:34 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:08:34 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:08:34 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:08:34 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:08:34 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:08:34 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:08:34 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:08:34 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:08:34 [INFO] app.infrastructure.services.reimbursement_service_impl:588 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:08:35 [INFO] app.infrastructure.services.reimbursement_service_impl:622 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:08:35 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:08:36 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:08:36 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:08:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54835 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:08:36 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:08:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54834 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:08:36 [INFO] app.infrastructure.services.reimbursement_service_impl:588 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:08:36 [INFO] app.infrastructure.services.reimbursement_service_impl:622 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:08:36 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:08:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54839 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:08:36 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:08:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54835 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:08:40 [INFO] app.api.routes.reimbursement_routes_v2:541 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:08:40 [INFO] app.infrastructure.services.reimbursement_service_impl:562 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:08:40 [WARNING] app.infrastructure.services.reimbursement_service_impl:565 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:08:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54835 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:10:44 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:10:44 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:10:44 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:10:44 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:10:44 [INFO] uvicorn.error:93 - _serve(): Finished server process [23788]
2025-06-07 05:10:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:11:00 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:11:00 [INFO] uvicorn.error:83 - _serve(): Started server process [23863]
2025-06-07 05:11:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:11:00 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:11:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:11:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56091 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 05:11:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56094 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 05:11:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56096 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 05:11:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56097 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 05:11:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56091 - "GET /api/v2/reimbursements/approved HTTP/1.1" 404
2025-06-07 05:11:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56099 - "GET /api/v2/reimbursements/pending HTTP/1.1" 404
2025-06-07 05:11:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56091 - "GET /api/v2/reimbursements/approved HTTP/1.1" 404
2025-06-07 05:11:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56099 - "GET /api/v2/reimbursements/pending HTTP/1.1" 404
2025-06-07 05:11:17 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Signature verification failed.
2025-06-07 05:11:17 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Signature verification failed.
2025-06-07 05:11:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56123 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 401
2025-06-07 05:11:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56262 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-07 05:11:42 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:11:56 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:11:58 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:11:58 [INFO] uvicorn.error:83 - _serve(): Started server process [24281]
2025-06-07 05:11:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:11:58 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:11:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:12:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56304 - "POST /api/v2/auth/login HTTP/1.1" 422
2025-06-07 05:12:11 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: admin @ localhost
2025-06-07 05:12:12 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:12:12 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:12:12 [ERROR] app.api.controllers.auth_controller:173 - login(): Login error: 'NoneType' object is not subscriptable
2025-06-07 05:12:12 [ERROR] app.api.routes.auth_routes_v2:83 - login(): Login error for user admin: 'NoneType' object is not subscriptable
2025-06-07 05:12:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56306 - "POST /api/v2/auth/login HTTP/1.1" 500
2025-06-07 05:13:31 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:13:32 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:13:32 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:13:32 [ERROR] app.api.controllers.auth_controller:173 - login(): Login error: 'NoneType' object is not subscriptable
2025-06-07 05:13:32 [ERROR] app.api.routes.auth_routes_v2:83 - login(): Login error for user superadmin: 'NoneType' object is not subscriptable
2025-06-07 05:13:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56460 - "POST /api/v2/auth/login HTTP/1.1" 500
2025-06-07 05:15:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:15:07 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:15:07 [INFO] uvicorn.error:83 - _serve(): Started server process [24767]
2025-06-07 05:15:07 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:15:07 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:15:07 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:15:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56835 - "GET /health HTTP/1.1" 404
2025-06-07 05:15:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56837 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 403
2025-06-07 05:15:44 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:15:44 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:15:44 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:15:44 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:15:44 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:15:44 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:15:45 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:15:45 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:15:45 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:15:45 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:15:45 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:15:45 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:15:45 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:15:45 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:15:45 [INFO] app.infrastructure.services.reimbursement_service_impl:613 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:15:45 [INFO] app.infrastructure.services.reimbursement_service_impl:647 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:15:45 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:15:46 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:15:46 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:15:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56894 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:15:46 [INFO] app.infrastructure.services.reimbursement_service_impl:613 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:15:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56894 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:15:46 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:15:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56892 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:15:47 [INFO] app.infrastructure.services.reimbursement_service_impl:647 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:15:47 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:15:47 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:15:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56894 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:15:49 [INFO] app.api.routes.reimbursement_routes_v2:541 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:15:49 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:15:49 [WARNING] app.infrastructure.services.reimbursement_service_impl:590 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:15:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56894 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:16:04 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:16:04 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:16:04 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:16:04 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:16:04 [INFO] uvicorn.error:93 - _serve(): Finished server process [24767]
2025-06-07 05:16:10 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:16:16 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:16:16 [INFO] uvicorn.error:83 - _serve(): Started server process [24843]
2025-06-07 05:16:16 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:16:16 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:16:16 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:16:16 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:16:16 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:16:16 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:16:17 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:16:17 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:16:17 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:16:17 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:16:17 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:16:17 [ERROR] app.api.routes.reimbursement_routes_v2:581 - debug_check_request(): DEBUG: Error checking request: MongoDBConnector.connect() missing 1 required positional argument: 'connection_string'
2025-06-07 05:16:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56997 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:16:27 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:16:27 [ERROR] app.api.routes.reimbursement_routes_v2:581 - debug_check_request(): DEBUG: Error checking request: MongoDBConnector.connect() missing 1 required positional argument: 'connection_string'
2025-06-07 05:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56999 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:16:39 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:16:39 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:16:39 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:16:39 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:16:39 [INFO] uvicorn.error:93 - _serve(): Finished server process [24843]
2025-06-07 05:16:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:16:50 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:16:50 [INFO] uvicorn.error:83 - _serve(): Started server process [24911]
2025-06-07 05:16:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:16:50 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:16:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:16:54 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:17:00 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:17:00 [INFO] uvicorn.error:83 - _serve(): Started server process [24932]
2025-06-07 05:17:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:17:00 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:17:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:17:00 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:17:00 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:17:00 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:17:00 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:17:00 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:17:00 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:17:00 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:17:00 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:17:30 [ERROR] app.api.routes.reimbursement_routes_v2:579 - debug_check_request(): DEBUG: Error checking request: localhost:27017: [Errno 61] Connection refused (configured timeouts: socketTimeoutMS: 20000.0ms, connectTimeoutMS: 20000.0ms), Timeout: 30s, Topology Description: <TopologyDescription id: 68437df4501c59bbf5b816fc, topology_type: Unknown, servers: [<ServerDescription ('localhost', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('localhost:27017: [Errno 61] Connection refused (configured timeouts: socketTimeoutMS: 20000.0ms, connectTimeoutMS: 20000.0ms)')>]>
2025-06-07 05:17:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57058 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:17:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57304 - "OPTIONS /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 200
2025-06-07 05:17:54 [INFO] app.api.routes.reimbursement_routes_v2:594 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:17:54 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:17:56 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:17:56 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:17:56 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:17:56 [WARNING] app.infrastructure.services.reimbursement_service_impl:590 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:17:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57304 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:18:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:18:22 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:18:22 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:18:22 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:18:22 [INFO] uvicorn.error:93 - _serve(): Finished server process [24932]
2025-06-07 05:18:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:18:34 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:18:34 [INFO] uvicorn.error:83 - _serve(): Started server process [25009]
2025-06-07 05:18:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:18:34 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:18:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:18:34 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:18:34 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:18:34 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:18:35 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:18:35 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:18:35 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:18:35 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:18:35 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:18:35 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:18:35 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:18:35 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:18:35 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:18:35 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:18:35 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:18:35 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:18:35 [ERROR] app.api.routes.reimbursement_routes_v2:579 - debug_check_request(): DEBUG: Error checking request: object NoneType can't be used in 'await' expression
2025-06-07 05:18:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57495 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:18:58 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:18:58 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:18:58 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:18:58 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:18:58 [INFO] uvicorn.error:93 - _serve(): Finished server process [25009]
2025-06-07 05:19:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:19:09 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:19:09 [INFO] uvicorn.error:83 - _serve(): Started server process [25040]
2025-06-07 05:19:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:19:09 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:19:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:19:09 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:19:09 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:19:09 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:19:09 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:19:09 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:19:09 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:19:09 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:19:09 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:19:09 [ERROR] app.api.routes.reimbursement_routes_v2:596 - debug_check_request(): DEBUG: Error checking request: CurrentUser.__init__() got an unexpected keyword argument 'employee_id'
2025-06-07 05:19:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57523 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:19:27 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:19:27 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:19:27 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:19:27 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:19:27 [INFO] uvicorn.error:93 - _serve(): Finished server process [25040]
2025-06-07 05:19:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:19:40 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:19:40 [INFO] uvicorn.error:83 - _serve(): Started server process [25070]
2025-06-07 05:19:40 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:19:40 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:19:40 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:19:40 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:19:40 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:19:40 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:19:40 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:19:40 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:19:40 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:19:40 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:19:40 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:19:40 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:19:41 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:19:41 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:19:41 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:19:41 [WARNING] app.infrastructure.services.reimbursement_service_impl:590 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:558 - debug_check_request(): DEBUG: Service returned: False
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:568 - debug_check_request(): DEBUG: All document IDs in database:
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: draft
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:19:41 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:19:42 [INFO] app.api.routes.reimbursement_routes_v2:582 - debug_check_request(): DEBUG: Found by request_id: True
2025-06-07 05:19:42 [INFO] app.api.routes.reimbursement_routes_v2:583 - debug_check_request(): DEBUG: Found by reimbursement_id: True
2025-06-07 05:19:42 [INFO] app.api.routes.reimbursement_routes_v2:584 - debug_check_request(): DEBUG: Found by _id: False
2025-06-07 05:19:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57542 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:20:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:20:54 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:20:54 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:20:54 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:20:54 [INFO] uvicorn.error:93 - _serve(): Finished server process [25070]
2025-06-07 05:21:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:21:09 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:21:09 [INFO] uvicorn.error:83 - _serve(): Started server process [25148]
2025-06-07 05:21:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:21:09 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:21:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:21:11 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:21:11 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:21:11 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:21:11 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:21:11 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:21:11 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:21:11 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:21:11 [INFO] app.api.routes.reimbursement_routes_v2:612 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:11 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:21:12 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:21:12 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:586 - get_reimbursement_request_by_id(): About to call repository.reimbursements.get_by_id with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, hostname: localhost
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:588 - get_reimbursement_request_by_id(): Repository.reimbursements type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:592 - get_reimbursement_request_by_id(): Repository call completed successfully. Entity: False
2025-06-07 05:21:12 [INFO] app.infrastructure.services.reimbursement_service_impl:597 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:21:12 [WARNING] app.infrastructure.services.reimbursement_service_impl:600 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57869 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:21:15 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:21:15 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:586 - get_reimbursement_request_by_id(): About to call repository.reimbursements.get_by_id with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, hostname: localhost
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:588 - get_reimbursement_request_by_id(): Repository.reimbursements type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:592 - get_reimbursement_request_by_id(): Repository call completed successfully. Entity: False
2025-06-07 05:21:16 [INFO] app.infrastructure.services.reimbursement_service_impl:597 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:21:16 [WARNING] app.infrastructure.services.reimbursement_service_impl:600 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:558 - debug_check_request(): DEBUG: Service returned: False
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:568 - debug_check_request(): DEBUG: All document IDs in database:
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: draft
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:582 - debug_check_request(): DEBUG: Found by request_id: True
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:583 - debug_check_request(): DEBUG: Found by reimbursement_id: True
2025-06-07 05:21:16 [INFO] app.api.routes.reimbursement_routes_v2:584 - debug_check_request(): DEBUG: Found by _id: False
2025-06-07 05:21:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57916 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:21:50 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:21:50 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:21:50 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:21:50 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:21:50 [INFO] uvicorn.error:93 - _serve(): Finished server process [25148]
2025-06-07 05:21:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:22:01 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:22:01 [INFO] uvicorn.error:83 - _serve(): Started server process [25231]
2025-06-07 05:22:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:22:01 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:22:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:22:02 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:22:02 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:22:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:22:02 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:22:02 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:22:02 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:22:02 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:22:02 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:22:02 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:22:02 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:22:02 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:586 - get_reimbursement_request_by_id(): About to call repository.reimbursements.get_by_id with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, hostname: localhost
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:588 - get_reimbursement_request_by_id(): Repository.reimbursements type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:592 - get_reimbursement_request_by_id(): Repository call completed successfully. Entity: False
2025-06-07 05:22:03 [INFO] app.infrastructure.services.reimbursement_service_impl:597 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:22:03 [WARNING] app.infrastructure.services.reimbursement_service_impl:600 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:558 - debug_check_request(): DEBUG: Service returned: False
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:568 - debug_check_request(): DEBUG: All document IDs in database:
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: draft
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:582 - debug_check_request(): DEBUG: Found by request_id: True
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:583 - debug_check_request(): DEBUG: Found by reimbursement_id: True
2025-06-07 05:22:03 [INFO] app.api.routes.reimbursement_routes_v2:584 - debug_check_request(): DEBUG: Found by _id: False
2025-06-07 05:22:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58115 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:22:55 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:22:55 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:22:55 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:22:55 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:22:55 [INFO] uvicorn.error:93 - _serve(): Finished server process [25231]
2025-06-07 05:23:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:23:09 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:23:09 [INFO] uvicorn.error:83 - _serve(): Started server process [25328]
2025-06-07 05:23:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:23:09 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:23:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:23:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:23:19 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:23:19 [INFO] uvicorn.error:83 - _serve(): Started server process [25342]
2025-06-07 05:23:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:23:19 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:23:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:23:19 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:23:19 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:23:19 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:23:19 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:23:19 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:23:19 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:23:19 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:23:19 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:23:19 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:23:20 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:23:20 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:23:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:586 - get_reimbursement_request_by_id(): About to call repository.reimbursements.get_by_id with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, hostname: localhost
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:588 - get_reimbursement_request_by_id(): Repository.reimbursements type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:592 - get_reimbursement_request_by_id(): Repository call completed successfully. Entity: False
2025-06-07 05:23:21 [INFO] app.infrastructure.services.reimbursement_service_impl:597 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:23:21 [WARNING] app.infrastructure.services.reimbursement_service_impl:600 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:558 - debug_check_request(): DEBUG: Service returned: False
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:568 - debug_check_request(): DEBUG: All document IDs in database:
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: draft
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:582 - debug_check_request(): DEBUG: Found by request_id: True
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:583 - debug_check_request(): DEBUG: Found by reimbursement_id: True
2025-06-07 05:23:21 [INFO] app.api.routes.reimbursement_routes_v2:584 - debug_check_request(): DEBUG: Found by _id: False
2025-06-07 05:23:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58406 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:24:05 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:24:05 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:24:05 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:24:05 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:24:05 [INFO] uvicorn.error:93 - _serve(): Finished server process [25342]
2025-06-07 05:24:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:24:19 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:24:19 [INFO] uvicorn.error:83 - _serve(): Started server process [25403]
2025-06-07 05:24:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:24:19 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:24:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:24:19 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:24:19 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:24:19 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:24:19 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:24:19 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:24:19 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:24:19 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:24:19 [INFO] app.api.routes.reimbursement_routes_v2:538 - debug_check_request(): DEBUG: Checking request existence for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:24:19 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:24:20 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:24:20 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:24:20 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:586 - get_reimbursement_request_by_id(): About to call repository.reimbursements.get_by_id with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, hostname: localhost
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:588 - get_reimbursement_request_by_id(): Repository.reimbursements type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:592 - get_reimbursement_request_by_id(): Repository call completed successfully. Entity: False
2025-06-07 05:24:21 [INFO] app.infrastructure.services.reimbursement_service_impl:597 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:24:21 [WARNING] app.infrastructure.services.reimbursement_service_impl:600 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:558 - debug_check_request(): DEBUG: Service returned: False
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:568 - debug_check_request(): DEBUG: All document IDs in database:
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: draft
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:570 - debug_check_request():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:571 - debug_check_request():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:572 - debug_check_request():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:573 - debug_check_request():      employee_id: EMP003
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:574 - debug_check_request():      status: submitted
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:575 - debug_check_request():      receipt_file_name: None
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:582 - debug_check_request(): DEBUG: Found by request_id: True
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:583 - debug_check_request(): DEBUG: Found by reimbursement_id: True
2025-06-07 05:24:21 [INFO] app.api.routes.reimbursement_routes_v2:584 - debug_check_request(): DEBUG: Found by _id: False
2025-06-07 05:24:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58610 - "GET /api/v2/reimbursements/debug/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/check HTTP/1.1" 200
2025-06-07 05:25:13 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:25:13 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:25:13 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:25:13 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:25:13 [INFO] uvicorn.error:93 - _serve(): Finished server process [25403]
2025-06-07 05:25:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:25:27 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:25:27 [INFO] uvicorn.error:83 - _serve(): Started server process [25470]
2025-06-07 05:25:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:25:27 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:25:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:25:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58970 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:25:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58972 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:25:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58974 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:25:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58976 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:25:27 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:25:27 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:25:27 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:25:27 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:25:27 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:25:27 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:25:27 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:25:27 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:25:27 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:25:27 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:25:27 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:25:27 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:25:27 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:25:27 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:25:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:25:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:25:27 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:25:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58972 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:25:28 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 05:25:28 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:25:28 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:25:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58976 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 05:25:28 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:25:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58970 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:25:29 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:25:29 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: EMP003
2025-06-07 05:25:29 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 6 reimbursement requests for employee: EMP003
2025-06-07 05:25:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58976 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 05:25:32 [INFO] app.api.routes.reimbursement_routes_v2:612 - download_receipt(): Starting receipt download for request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:536 - get_reimbursement_request_by_id(): Getting reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:544 - get_reimbursement_request_by_id(): Sample document keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:545 - get_reimbursement_request_by_id(): Sample request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:546 - get_reimbursement_request_by_id(): Sample reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:550 - get_reimbursement_request_by_id(): All document IDs in database:
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   1. _id: 6843581246614a4faf0911e6
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: draft
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   2. _id: 68436c5614426bcc351dd81e
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   3. _id: 68436d1f58469659d4b09b86
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   4. _id: 68436f3d5481e35000413a18
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   5. _id: 68437075feefa9f87ed92348
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:552 - get_reimbursement_request_by_id():   6. _id: 684371050daa36af02b3b986
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:553 - get_reimbursement_request_by_id():      request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:554 - get_reimbursement_request_by_id():      reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:555 - get_reimbursement_request_by_id():      employee_id: EMP003
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:556 - get_reimbursement_request_by_id():      status: submitted
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:557 - get_reimbursement_request_by_id():      receipt_file_name: None
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:559 - get_reimbursement_request_by_id(): Looking for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:569 - get_reimbursement_request_by_id(): Documents matching ID 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6: 1
2025-06-07 05:25:32 [INFO] app.infrastructure.services.reimbursement_service_impl:571 - get_reimbursement_request_by_id():   Matching doc: {'_id': ObjectId('684371050daa36af02b3b986'), 'request_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'reimbursement_id': '725995a2-18b2-4ac6-b8f2-ff54e1d71ed6', 'employee_id': 'EMP003', 'status': 'submitted'}
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:578 - get_reimbursement_request_by_id(): Query by request_id: True
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:579 - get_reimbursement_request_by_id(): Query by reimbursement_id: True
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:580 - get_reimbursement_request_by_id(): Query by _id: False
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:584 - get_reimbursement_request_by_id(): Total documents in collection: 6
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:586 - get_reimbursement_request_by_id(): About to call repository.reimbursements.get_by_id with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, hostname: localhost
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:587 - get_reimbursement_request_by_id(): Repository type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:588 - get_reimbursement_request_by_id(): Repository.reimbursements type: <class 'app.infrastructure.repositories.mongodb_reimbursement_repository.MongoDBReimbursementRepository'>
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:592 - get_reimbursement_request_by_id(): Repository call completed successfully. Entity: False
2025-06-07 05:25:33 [INFO] app.infrastructure.services.reimbursement_service_impl:597 - get_reimbursement_request_by_id(): Repository returned entity: False
2025-06-07 05:25:33 [WARNING] app.infrastructure.services.reimbursement_service_impl:600 - get_reimbursement_request_by_id(): No request entity found for ID: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 05:25:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58976 - "GET /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/receipt/download HTTP/1.1" 404
2025-06-07 05:25:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59113 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-07 05:25:47 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:25:48 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:25:48 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:25:48 [ERROR] app.api.controllers.auth_controller:173 - login(): Login error: 'NoneType' object is not subscriptable
2025-06-07 05:25:48 [ERROR] app.api.routes.auth_routes_v2:83 - login(): Login error for user superadmin: 'NoneType' object is not subscriptable
2025-06-07 05:25:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59113 - "POST /api/v2/auth/login HTTP/1.1" 500
2025-06-07 05:26:57 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:26:57 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:26:57 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:26:57 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:26:57 [INFO] uvicorn.error:93 - _serve(): Finished server process [25470]
2025-06-07 05:27:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:27:09 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:27:09 [INFO] uvicorn.error:83 - _serve(): Started server process [25516]
2025-06-07 05:27:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:27:09 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:27:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:27:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59538 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-07 05:27:09 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: emp003 @ localhost
2025-06-07 05:27:10 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:27:10 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:27:10 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: emp003
2025-06-07 05:27:10 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$gHiCgdCJbSRnoeGtzPMs4./cpUqt.p3NlXpYRZE8W5/LrWyou4R42
2025-06-07 05:27:10 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-07 05:27:10 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-07 05:27:10 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: EMP003
2025-06-07 05:27:10 [INFO] app.api.controllers.auth_controller:165 - login(): User emp003 logged in successfully
2025-06-07 05:27:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59540 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-07 05:27:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59540 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-07 05:27:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59538 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-07 05:27:11 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:27:11 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:27:11 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:27:11 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:27:11 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:27:11 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:27:11 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:27:12 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:27:12 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:27:12 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:27:12 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:27:12 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:27:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59540 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-07 05:27:12 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:27:12 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:27:12 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:27:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59538 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-07 05:27:17 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:27:17 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:27:18 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:27:18 [WARNING] app.api.controllers.auth_controller:118 - login(): User superadmin not found in database
2025-06-07 05:27:18 [ERROR] app.api.controllers.auth_controller:178 - login(): Login error: Invalid username or password
2025-06-07 05:27:18 [WARNING] app.api.routes.auth_routes_v2:80 - login(): Login failed for user superadmin: Invalid username or password
2025-06-07 05:27:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59634 - "POST /api/v2/auth/login HTTP/1.1" 400
2025-06-07 05:27:25 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:27:26 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:27:26 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:27:26 [WARNING] app.api.controllers.auth_controller:118 - login(): User superadmin not found in database
2025-06-07 05:27:26 [ERROR] app.api.controllers.auth_controller:178 - login(): Login error: Invalid username or password
2025-06-07 05:27:26 [WARNING] app.api.routes.auth_routes_v2:80 - login(): Login failed for user superadmin: Invalid username or password
2025-06-07 05:27:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59668 - "POST /api/v2/auth/login HTTP/1.1" 400
2025-06-07 05:29:00 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:29:01 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:31:21 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:31:21 [WARNING] app.api.controllers.auth_controller:118 - login(): User superadmin not found in database
2025-06-07 05:31:21 [ERROR] app.api.controllers.auth_controller:178 - login(): Login error: Invalid username or password
2025-06-07 05:31:21 [WARNING] app.api.routes.auth_routes_v2:80 - login(): Login failed for user superadmin: Invalid username or password
2025-06-07 05:31:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:31:22 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:31:22 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:31:22 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:31:22 [INFO] uvicorn.error:93 - _serve(): Finished server process [25516]
2025-06-07 05:31:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:31:32 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:31:32 [INFO] uvicorn.error:83 - _serve(): Started server process [25617]
2025-06-07 05:31:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:31:32 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:31:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:31:32 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:31:33 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:31:40 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:31:40 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-07 05:31:40 [ERROR] app.api.controllers.auth_controller:178 - login(): Login error: 'password_hash'
2025-06-07 05:31:40 [ERROR] app.api.routes.auth_routes_v2:83 - login(): Login error for user superadmin: 'password_hash'
2025-06-07 05:31:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60150 - "POST /api/v2/auth/login HTTP/1.1" 500
2025-06-07 05:31:59 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:31:59 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:33:00 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:33:05 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-07 05:33:05 [ERROR] app.api.controllers.auth_controller:178 - login(): Login error: 'password_hash'
2025-06-07 05:33:05 [ERROR] app.api.routes.auth_routes_v2:83 - login(): Login error for user superadmin: 'password_hash'
2025-06-07 05:33:58 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 05:33:59 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:34:04 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 05:34:04 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-07 05:34:04 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-07 05:34:04 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-07 05:34:04 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-07 05:34:04 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-07 05:34:04 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-07 05:34:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60303 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-07 05:34:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60303 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-07 05:34:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60320 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-07 05:34:05 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:34:05 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:34:05 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:34:05 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:34:05 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:34:05 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:34:05 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:34:06 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:34:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:34:06 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:34:06 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:34:06 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:34:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60322 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-07 05:34:06 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:34:06 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:34:06 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 05:34:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60322 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-07 05:34:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60396 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 05:34:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60398 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 05:34:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60401 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 05:34:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60402 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 05:34:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60396 - "GET /api/v2/reimbursements/approved HTTP/1.1" 404
2025-06-07 05:34:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60404 - "GET /api/v2/reimbursements/pending HTTP/1.1" 404
2025-06-07 05:34:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60396 - "GET /api/v2/reimbursements/approved HTTP/1.1" 404
2025-06-07 05:34:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60404 - "GET /api/v2/reimbursements/pending HTTP/1.1" 404
2025-06-07 05:34:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60466 - "GET /api/v2/reimbursements/pending HTTP/1.1" 404
2025-06-07 05:34:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60468 - "GET /api/v2/reimbursements/approved HTTP/1.1" 404
2025-06-07 05:34:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60468 - "GET /api/v2/reimbursements/approved HTTP/1.1" 404
2025-06-07 05:34:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60472 - "GET /api/v2/reimbursements/pending HTTP/1.1" 404
2025-06-07 05:35:58 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 05:35:58 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 05:35:58 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 05:35:58 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 05:35:58 [INFO] uvicorn.error:93 - _serve(): Finished server process [25617]
2025-06-07 05:36:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 05:36:10 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 05:36:10 [INFO] uvicorn.error:83 - _serve(): Started server process [25693]
2025-06-07 05:36:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 05:36:10 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 05:36:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 05:36:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60785 - "GET /api/v2/reimbursements/pending HTTP/1.1" 403
2025-06-07 05:36:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60807 - "GET /api/v2/reimbursements/approved HTTP/1.1" 403
2025-06-07 05:36:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60809 - "GET /docs HTTP/1.1" 200
2025-06-07 05:36:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60811 - "GET /openapi.json HTTP/1.1" 200
2025-06-07 05:36:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60813 - "GET /openapi.json HTTP/1.1" 200
2025-06-07 05:38:08 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 05:38:08 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:38:08 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:38:08 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:38:08 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 05:38:08 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 05:38:08 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 05:38:08 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 05:38:09 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:38:09 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 05:38:09 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:38:09 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 05:38:09 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:38:09 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:38:09 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 05:38:09 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 05:38:09 [ERROR] app.api.routes.reimbursement_routes_v2:284 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
status
  Value error, Status must be one of: draft, submitted, under_review, approved, rejected, cancelled, paid [type=value_error, input_value='pending', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-07 05:38:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60875 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 05:38:09 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:38:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 05:38:09 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 05:38:09 [ERROR] app.api.routes.reimbursement_routes_v2:284 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
status
  Value error, Status must be one of: draft, submitted, under_review, approved, rejected, cancelled, paid [type=value_error, input_value='pending', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-07 05:38:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60881 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 05:38:10 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 05:38:10 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 05:38:10 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 05:38:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60877 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 05:38:10 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 05:38:10 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 05:38:10 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 05:38:10 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 05:38:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60877 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 09:39:22 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1046, in connect
    conn.hello()
    ~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 255, in hello
    return self._hello(None, None)
           ~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 297, in _hello
    doc = self.command("admin", cmd, publish_events=False, exhaust_allowed=awaitable)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 11:05:32 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 513, in _configured_socket_interface
    ssl_sock = ssl_context.wrap_socket(sock, server_hostname=host)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 455, in wrap_socket
    return self.sslsocket_class._create(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sock=sock,
        ^^^^^^^^^^
    ...<5 lines>...
        session=session
        ^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1076, in _create
    self.do_handshake()
    ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1372, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
TimeoutError: _ssl.c:1011: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 527, in _configured_socket_interface
    _raise_connection_failure(address, exc, "SSL handshake failed: ", timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: _ssl.c:1011: The handshake operation timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 11:05:47 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 135, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 11:17:38 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 11:17:38 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 11:17:38 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 11:17:38 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 11:17:38 [INFO] uvicorn.error:93 - _serve(): Finished server process [25693]
2025-06-07 11:17:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:17:50 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:17:50 [INFO] uvicorn.error:83 - _serve(): Started server process [26232]
2025-06-07 11:17:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:17:50 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:17:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:17:54 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:18:00 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:18:00 [INFO] uvicorn.error:83 - _serve(): Started server process [26254]
2025-06-07 11:18:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:18:00 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:18:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:18:13 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 11:18:13 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 11:18:13 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 11:18:13 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 11:18:13 [INFO] uvicorn.error:93 - _serve(): Finished server process [26254]
2025-06-07 11:18:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:18:26 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:18:26 [INFO] uvicorn.error:83 - _serve(): Started server process [26271]
2025-06-07 11:18:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:18:26 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:18:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:18:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:18:38 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:18:38 [INFO] uvicorn.error:83 - _serve(): Started server process [26298]
2025-06-07 11:18:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:18:38 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:18:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:18:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63251 - "GET /api/v2/reimbursements/pending HTTP/1.1" 403
2025-06-07 11:41:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63652 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 11:41:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63654 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 11:41:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63657 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 11:41:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63658 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 11:41:11 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:41:11 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:41:11 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 11:41:11 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 11:41:11 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 11:41:11 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 11:41:11 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 11:41:11 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 11:41:11 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 11:41:11 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 11:41:11 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 11:41:11 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 11:41:11 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 11:41:11 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 11:41:11 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 11:41:11 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 11:41:11 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 11:41:11 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 11:41:11 [ERROR] app.api.routes.reimbursement_routes_v2:284 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
status
  Value error, Status must be one of: draft, submitted, under_review, approved, rejected, cancelled, paid [type=value_error, input_value='pending', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-07 11:41:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63652 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 11:41:11 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:41:11 [ERROR] app.api.routes.reimbursement_routes_v2:284 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
status
  Value error, Status must be one of: draft, submitted, under_review, approved, rejected, cancelled, paid [type=value_error, input_value='pending', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-07 11:41:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63652 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 11:41:12 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 11:41:12 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 11:41:12 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 11:41:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63660 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 11:41:12 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:41:12 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 11:41:12 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 11:41:12 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 11:41:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63660 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 11:41:16 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 11:41:16 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 11:41:16 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 11:41:16 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 11:41:16 [INFO] uvicorn.error:93 - _serve(): Finished server process [26298]
2025-06-07 11:41:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:41:26 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:41:26 [INFO] uvicorn.error:83 - _serve(): Started server process [26546]
2025-06-07 11:41:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:41:26 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:41:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:42:40 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:42:40 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:42:40 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 11:42:40 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 11:42:40 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 11:42:40 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 11:42:40 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 11:42:40 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 11:42:40 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 11:42:40 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 11:42:40 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 11:42:40 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 11:42:40 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 11:42:40 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 11:42:40 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 11:42:40 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 11:42:40 [ERROR] app.api.routes.reimbursement_routes_v2:284 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
status
  Value error, Status must be one of: draft, submitted, under_review, approved, rejected, cancelled, paid [type=value_error, input_value='pending', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-07 11:42:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63730 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 11:42:40 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 11:42:40 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 11:42:41 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:42:41 [ERROR] app.api.routes.reimbursement_routes_v2:284 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
status
  Value error, Status must be one of: draft, submitted, under_review, approved, rejected, cancelled, paid [type=value_error, input_value='pending', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-07 11:42:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63736 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 11:42:44 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 11:42:44 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 11:42:45 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 11:42:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63732 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 11:42:45 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:42:45 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 11:42:45 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 11:42:45 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 11:42:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63732 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 11:44:01 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 11:44:01 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 11:44:01 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 11:44:01 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 11:44:01 [INFO] uvicorn.error:93 - _serve(): Finished server process [26546]
2025-06-07 11:44:06 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:44:46 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:44:46 [INFO] uvicorn.error:83 - _serve(): Started server process [26594]
2025-06-07 11:44:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:44:46 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:44:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:44:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:44:57 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:44:57 [INFO] uvicorn.error:83 - _serve(): Started server process [26638]
2025-06-07 11:44:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:44:57 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:44:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:44:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64130 - "GET /api/v2/reimbursements/pending HTTP/1.1" 403
2025-06-07 11:45:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64156 - "GET /api/v2/reimbursements/requests/pending HTTP/1.1" 403
2025-06-07 11:45:14 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 11:45:14 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 11:45:14 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 11:45:14 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 11:45:14 [INFO] uvicorn.error:93 - _serve(): Finished server process [26638]
2025-06-07 11:45:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:45:25 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:45:25 [INFO] uvicorn.error:83 - _serve(): Started server process [26678]
2025-06-07 11:45:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:45:25 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:45:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:45:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 11:45:37 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 11:45:37 [INFO] uvicorn.error:83 - _serve(): Started server process [26702]
2025-06-07 11:45:37 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 11:45:37 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 11:45:37 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 11:45:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64175 - "GET /api/v2/reimbursements/approved HTTP/1.1" 403
2025-06-07 11:45:37 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:45:37 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:45:37 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 11:45:37 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 11:45:37 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 11:45:37 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 11:45:37 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 11:45:37 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 11:45:37 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 11:45:37 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 11:45:37 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 11:45:37 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 11:45:37 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 11:45:37 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 11:45:37 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 11:45:37 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 11:45:37 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 11:45:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 11:45:38 [ERROR] app.api.routes.reimbursement_routes_v2:308 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
page_size
  Input should be less than or equal to 100 [type=less_than_equal, input_value=1000, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/less_than_equal
2025-06-07 11:45:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64193 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 11:45:38 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:45:38 [ERROR] app.api.routes.reimbursement_routes_v2:308 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
page_size
  Input should be less than or equal to 100 [type=less_than_equal, input_value=1000, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/less_than_equal
2025-06-07 11:45:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64193 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 11:45:38 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 11:45:38 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 11:45:39 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 11:45:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64195 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 11:45:39 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 11:45:39 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 11:45:39 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 11:45:39 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 11:45:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64193 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:01:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50208 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:01:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50210 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:01:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50212 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:01:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50213 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:01:18 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:01:18 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:01:18 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:01:18 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:01:30 [ERROR] app.api.routes.reimbursement_routes_v2:308 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
page_size
  Input should be less than or equal to 100 [type=less_than_equal, input_value=1000, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/less_than_equal
2025-06-07 12:01:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50217 - "GET /api/v2/reimbursements/pending HTTP/1.1" 500
2025-06-07 12:01:30 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:01:30 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:01:30 [ERROR] app.api.routes.reimbursement_routes_v2:308 - get_pending_reimbursements_legacy(): Error getting pending reimbursement requests (legacy): 1 validation error for ReimbursementSearchFiltersDTO
page_size
  Input should be less than or equal to 100 [type=less_than_equal, input_value=1000, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/less_than_equal
2025-06-07 12:01:30 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:01:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:01:33 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:01:34 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:03:40 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 12:03:40 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 12:03:40 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 12:03:40 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 12:03:40 [INFO] uvicorn.error:93 - _serve(): Finished server process [26702]
2025-06-07 12:03:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 12:03:52 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 12:03:52 [INFO] uvicorn.error:83 - _serve(): Started server process [26837]
2025-06-07 12:03:52 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 12:03:52 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 12:03:52 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 12:03:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 12:04:03 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 12:04:03 [INFO] uvicorn.error:83 - _serve(): Started server process [26856]
2025-06-07 12:04:03 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 12:04:03 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 12:04:03 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 12:04:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50651 - "GET /api/v2/reimbursements/pending HTTP/1.1" 403
2025-06-07 12:04:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50678 - "GET /api/v2/reimbursements/requests/pending HTTP/1.1" 403
2025-06-07 12:17:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50967 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:17:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50969 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:17:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50971 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:17:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50973 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:17:13 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:17:13 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:17:13 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 12:17:13 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 12:17:13 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 12:17:13 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 12:17:13 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 12:17:13 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 12:17:13 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 12:17:13 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 12:17:13 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 12:17:13 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 12:17:13 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 12:17:13 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 12:17:13 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 12:17:13 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 12:17:13 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:17:13 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:17:23 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:17:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:17:29 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:17:29 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:17:29 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:17:29 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:17:32 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:17:32 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:17:34 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 12:17:34 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 12:17:34 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:18:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:18:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:18:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:18:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:18:36 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:18:36 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:18:36 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:18:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:18:37 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:18:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:18:53 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:18:53 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:18:53 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:18:53 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:18:54 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:20:00 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:20:00 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:20:00 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:20:00 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:20:05 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:20:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51415 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:20:05 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:20:05 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:20:05 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:20:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51415 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:20:05 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:20:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51413 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:20:05 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:20:05 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:20:05 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:20:06 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:20:06 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:20:06 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:20:06 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:20:06 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:20:06 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:20:06 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:20:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51413 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:20:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51516 - "OPTIONS /reimbursements/undefined/status HTTP/1.1" 200
2025-06-07 12:20:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51516 - "PUT /reimbursements/undefined/status HTTP/1.1" 404
2025-06-07 12:21:44 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 12:21:44 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 12:21:44 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 12:21:44 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 12:21:44 [INFO] uvicorn.error:93 - _serve(): Finished server process [26856]
2025-06-07 12:21:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 12:21:58 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 12:21:58 [INFO] uvicorn.error:83 - _serve(): Started server process [27080]
2025-06-07 12:21:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 12:21:58 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 12:21:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 12:23:39 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:23:39 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:23:39 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 12:23:39 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 12:23:39 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 12:23:39 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 12:23:39 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 12:23:39 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 12:23:40 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 12:23:40 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 12:23:40 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 12:23:40 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 12:23:40 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 12:23:40 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 12:23:40 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 12:23:40 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:23:40 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 12:23:40 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:23:41 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:23:41 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:23:42 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 12:23:42 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 12:23:42 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:23:42 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:23:42 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:23:42 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:23:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51779 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:23:42 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:23:42 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:23:42 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:23:42 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:23:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51778 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:24:56 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:24:56 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:24:56 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:24:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:24:56 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:24:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:24:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:24:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52101 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:24:56 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:24:56 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:24:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:24:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:24:56 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:24:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:24:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:24:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52101 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:24:57 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:24:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52100 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:24:57 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:24:57 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:24:57 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:24:57 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:24:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:24:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52100 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:25:30 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:25:30 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:25:30 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:25:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:25:30 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:25:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:25:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:25:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52316 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:25:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:25:30 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:25:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:25:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:25:30 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:25:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:25:30 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:25:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52314 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:25:56 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:25:56 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:25:56 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:25:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:25:56 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:25:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:25:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:25:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52484 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:25:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:25:56 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:25:56 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:25:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:25:58 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:25:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:25:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:25:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52482 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:26:20 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:26:20 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:26:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:26:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:26:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:26:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52647 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:26:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:26:21 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:26:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:26:21 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:26:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:26:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52645 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:26:21 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:26:21 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:26:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:26:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:26:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:26:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52647 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:26:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:26:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:26:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:26:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:26:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:26:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52645 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:26:57 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:26:57 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:26:57 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:26:57 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:26:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:26:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52891 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:26:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:26:57 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:26:57 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:26:57 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:26:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:26:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52895 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:26:58 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:26:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52889 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:26:58 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:26:58 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:26:58 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:26:58 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:26:58 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:26:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52889 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:27:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52956 - "OPTIONS /api/v2/reimbursements/25bf0b6c-74f3-457a-beac-e328b4920ce4/status HTTP/1.1" 200
2025-06-07 12:27:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52956 - "PUT /api/v2/reimbursements/25bf0b6c-74f3-457a-beac-e328b4920ce4/status HTTP/1.1" 404
2025-06-07 12:28:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53509 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:28:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53511 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:28:08 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:28:08 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:28:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:28:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:28:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:28:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:28:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:28:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53513 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:28:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:28:09 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:28:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:28:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:28:09 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:28:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:28:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:28:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53509 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:28:20 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:28:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:28:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:28:21 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:28:21 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:28:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:28:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:28:21 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:28:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:28:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:28:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53596 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:28:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:28:21 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:28:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:28:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:28:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53594 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:28:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53664 - "GET /api/v2/reimbursements/pending HTTP/1.1" 403
2025-06-07 12:29:24 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:29:24 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:29:24 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:29:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:29:24 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:29:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:29:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:29:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54074 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:29:24 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:29:24 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:29:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 12:29:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:29:24 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:29:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:29:24 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 12:29:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54074 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 12:29:25 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:29:25 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:29:25 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:29:25 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:29:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54072 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:29:25 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:29:25 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:29:25 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 12:29:25 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 12:29:25 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:29:25 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 12:29:26 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 12:29:26 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 12:29:26 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 12:29:26 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 12:29:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54074 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 12:29:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54160 - "OPTIONS /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 200
2025-06-07 12:29:36 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 12:29:37 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 12:29:37 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 12:29:37 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 12:29:37 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 12:29:37 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 12:29:37 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 12:29:37 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 12:29:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54162 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 13:25:44 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 96, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 13:25:44 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 135, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 13:26:46 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 13:26:46 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 13:28:08 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 513, in _configured_socket_interface
    ssl_sock = ssl_context.wrap_socket(sock, server_hostname=host)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 455, in wrap_socket
    return self.sslsocket_class._create(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sock=sock,
        ^^^^^^^^^^
    ...<5 lines>...
        session=session
        ^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1076, in _create
    self.do_handshake()
    ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1372, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
TimeoutError: _ssl.c:1011: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 527, in _configured_socket_interface
    _raise_connection_failure(address, exc, "SSL handshake failed: ", timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: _ssl.c:1011: The handshake operation timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 13:28:24 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 96, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 13:28:56 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:21:26 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1046, in connect
    conn.hello()
    ~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 255, in hello
    return self._hello(None, None)
           ~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 297, in _hello
    doc = self.command("admin", cmd, publish_events=False, exhaust_allowed=awaitable)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 14:21:26 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1046, in connect
    conn.hello()
    ~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 255, in hello
    return self._hello(None, None)
           ~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 297, in _hello
    doc = self.command("admin", cmd, publish_events=False, exhaust_allowed=awaitable)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 14:21:32 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 135, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 14:21:38 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1046, in connect
    conn.hello()
    ~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 255, in hello
    return self._hello(None, None)
           ~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 297, in _hello
    doc = self.command("admin", cmd, publish_events=False, exhaust_allowed=awaitable)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 14:21:45 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1046, in connect
    conn.hello()
    ~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 255, in hello
    return self._hello(None, None)
           ~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 297, in _hello
    doc = self.command("admin", cmd, publish_events=False, exhaust_allowed=awaitable)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 14:21:47 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 513, in _configured_socket_interface
    ssl_sock = ssl_context.wrap_socket(sock, server_hostname=host)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 455, in wrap_socket
    return self.sslsocket_class._create(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sock=sock,
        ^^^^^^^^^^
    ...<5 lines>...
        session=session
        ^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1076, in _create
    self.do_handshake()
    ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1372, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
TimeoutError: _ssl.c:1011: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 527, in _configured_socket_interface
    _raise_connection_failure(address, exc, "SSL handshake failed: ", timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: _ssl.c:1011: The handshake operation timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:21:52 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 513, in _configured_socket_interface
    ssl_sock = ssl_context.wrap_socket(sock, server_hostname=host)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 455, in wrap_socket
    return self.sslsocket_class._create(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sock=sock,
        ^^^^^^^^^^
    ...<5 lines>...
        session=session
        ^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1076, in _create
    self.do_handshake()
    ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1372, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
TimeoutError: _ssl.c:1011: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 527, in _configured_socket_interface
    _raise_connection_failure(address, exc, "SSL handshake failed: ", timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: _ssl.c:1011: The handshake operation timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:21:56 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:21:58 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:28:09 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 96, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 14:28:15 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 135, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 14:28:15 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1046, in connect
    conn.hello()
    ~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 255, in hello
    return self._hello(None, None)
           ~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 297, in _hello
    doc = self.command("admin", cmd, publish_events=False, exhaust_allowed=awaitable)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 14:28:20 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:39:48 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 513, in _configured_socket_interface
    ssl_sock = ssl_context.wrap_socket(sock, server_hostname=host)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 455, in wrap_socket
    return self.sslsocket_class._create(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sock=sock,
        ^^^^^^^^^^
    ...<5 lines>...
        session=session
        ^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1076, in _create
    self.do_handshake()
    ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1372, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
TimeoutError: _ssl.c:1011: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 527, in _configured_socket_interface
    _raise_connection_failure(address, exc, "SSL handshake failed: ", timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: _ssl.c:1011: The handshake operation timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:39:49 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:39:50 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 14:39:56 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1046, in connect
    conn.hello()
    ~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 255, in hello
    return self._hello(None, None)
           ~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 297, in _hello
    doc = self.command("admin", cmd, publish_events=False, exhaust_allowed=awaitable)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 15:44:41 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 135, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 15:44:41 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1046, in connect
    conn.hello()
    ~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 255, in hello
    return self._hello(None, None)
           ~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 297, in _hello
    doc = self.command("admin", cmd, publish_events=False, exhaust_allowed=awaitable)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 15:44:43 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 96, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-07 15:48:32 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 15:48:32 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 15:48:32 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 15:48:32 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 15:48:32 [INFO] uvicorn.error:93 - _serve(): Finished server process [27080]
2025-06-07 15:48:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 15:48:53 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 15:48:53 [INFO] uvicorn.error:83 - _serve(): Started server process [27716]
2025-06-07 15:48:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 15:48:53 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 15:48:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 15:56:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62731 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-07 15:56:05 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-07 15:56:07 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 15:56:07 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 15:56:07 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-07 15:56:07 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-07 15:56:07 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-07 15:56:07 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-07 15:56:07 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-07 15:56:07 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-07 15:56:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62731 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-07 15:56:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62731 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-07 15:56:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62733 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-07 15:56:07 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 15:56:07 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 15:56:07 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 15:56:07 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 15:56:07 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 15:56:07 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 15:56:07 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 15:56:08 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 15:56:08 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 15:56:08 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 15:56:08 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 15:56:08 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 15:56:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62748 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-07 15:56:08 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 15:56:08 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 15:56:08 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 15:56:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62733 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-07 15:56:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62853 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 15:56:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62856 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 15:56:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62858 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 15:56:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62859 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 15:56:19 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 15:56:19 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 15:56:19 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 15:56:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 15:56:19 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 15:56:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 15:56:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 15:56:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62853 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 15:56:19 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 15:56:19 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 15:56:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 15:56:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 15:56:19 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 15:56:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 15:56:19 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: approved
2025-06-07 15:56:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62859 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 15:56:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 15:56:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62861 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 15:56:20 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 15:56:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 15:56:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: submitted
2025-06-07 15:56:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 15:56:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 15:56:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62861 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 16:02:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63665 - "OPTIONS /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 200
2025-06-07 16:02:41 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:03:33 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:04:56 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:06:24 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:09:21 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:09:21 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:09:21 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:09:21 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:09:46 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:09:58 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:09:58 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:09:58 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:16:45 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 16:16:45 [INFO] uvicorn.error:305 - _wait_tasks_to_complete(): Waiting for background tasks to complete. (CTRL+C to force quit)
2025-06-07 16:16:46 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:16:46 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:16:46 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:16:46 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:16:46 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 16:16:46 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 16:16:46 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 16:16:46 [INFO] uvicorn.error:93 - _serve(): Finished server process [27716]
2025-06-07 16:16:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 16:16:57 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 16:16:57 [INFO] uvicorn.error:83 - _serve(): Started server process [28001]
2025-06-07 16:16:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 16:16:57 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 16:16:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 16:16:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64076 - "OPTIONS /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 200
2025-06-07 16:16:57 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:16:57 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 16:16:57 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 16:16:57 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 16:16:57 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 16:16:57 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 16:16:57 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 16:16:57 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 16:16:57 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:16:57 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:16:57 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:17:23 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 16:17:23 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 16:22:15 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:22:15 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:22:15 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:22:15 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:24:54 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:24:54 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:24:54 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:24:54 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:38:18 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 16:38:18 [INFO] uvicorn.error:305 - _wait_tasks_to_complete(): Waiting for background tasks to complete. (CTRL+C to force quit)
2025-06-07 16:38:18 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:38:18 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:38:18 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:38:18 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request with ID '25bf0b6c-74f3-457a-beac-e328b4920ce4' not found
2025-06-07 16:38:18 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 16:38:18 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 16:38:18 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 16:38:18 [INFO] uvicorn.error:93 - _serve(): Finished server process [28001]
2025-06-07 16:38:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 16:38:27 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 16:38:27 [INFO] uvicorn.error:83 - _serve(): Started server process [28186]
2025-06-07 16:38:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 16:38:27 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 16:38:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 16:39:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64788 - "OPTIONS /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 200
2025-06-07 16:39:15 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:39:15 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 16:39:15 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 16:39:15 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 16:39:15 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 16:39:15 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 16:39:15 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 16:39:15 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 16:39:15 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:39:15 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:39:15 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:39:34 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 16:39:35 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 16:39:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 16:39:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:39:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 16:39:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 16:39:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:39:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 16:39:35 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:39:35 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:39:35 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:39:35 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:40:26 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:40:26 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:40:26 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:40:26 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:40:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 16:40:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:40:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 16:40:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 16:40:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:40:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 16:40:33 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:40:33 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:40:33 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:40:33 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:40:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64971 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 16:41:13 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:41:13 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:41:13 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:41:13 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:41:19 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 16:41:19 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:41:19 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 16:41:19 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 16:41:19 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:41:19 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 16:43:05 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:43:05 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:43:05 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:43:05 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request is in 'draft' status and cannot be approved
2025-06-07 16:43:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65134 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 16:43:05 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 16:43:06 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 16:43:06 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 16:43:06 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 16:43:06 [INFO] uvicorn.error:93 - _serve(): Finished server process [28186]
2025-06-07 16:43:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 16:43:16 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 16:43:16 [INFO] uvicorn.error:83 - _serve(): Started server process [28292]
2025-06-07 16:43:16 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 16:43:16 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 16:43:16 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 16:43:37 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:43:37 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 16:43:37 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 16:43:37 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 16:43:37 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 16:43:37 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 16:43:37 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 16:43:37 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 16:43:37 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:43:37 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:43:37 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:43:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 16:43:38 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 16:43:38 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 16:43:38 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:43:38 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 16:43:38 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 16:43:38 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:43:38 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 16:43:59 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'ReimbursementType' object has no attribute 'code'
2025-06-07 16:43:59 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'ReimbursementType' object has no attribute 'code'
2025-06-07 16:43:59 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'ReimbursementType' object has no attribute 'code'
2025-06-07 16:43:59 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 16:43:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65228 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 16:44:22 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:44:22 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:44:22 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:44:22 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:44:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 16:44:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:44:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 16:44:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 16:44:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:44:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 16:46:29 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'ReimbursementType' object has no attribute 'code'
2025-06-07 16:46:29 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'ReimbursementType' object has no attribute 'code'
2025-06-07 16:46:29 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'ReimbursementType' object has no attribute 'code'
2025-06-07 16:46:29 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 16:46:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65327 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 16:46:29 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 16:46:29 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 16:46:29 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 16:46:29 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 16:46:29 [INFO] uvicorn.error:93 - _serve(): Finished server process [28292]
2025-06-07 16:46:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 16:46:38 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 16:46:38 [INFO] uvicorn.error:83 - _serve(): Started server process [28388]
2025-06-07 16:46:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 16:46:38 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 16:46:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 16:47:02 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:47:02 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 16:47:02 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 16:47:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 16:47:02 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 16:47:02 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 16:47:02 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 16:47:02 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 16:47:02 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:47:02 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:47:02 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:47:02 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 16:47:03 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 16:47:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 16:47:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:47:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 16:47:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 16:47:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:47:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 16:47:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 42727c34-956a-4078-8405-9b2a4f826adb, organisation_id: localhost
2025-06-07 16:47:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 42727c34-956a-4078-8405-9b2a4f826adb
2025-06-07 16:47:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: False
2025-06-07 16:47:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:267 - get_by_id(): [REPOSITORY] Not found with 'request_id', trying 'reimbursement_id'
2025-06-07 16:47:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] Second query result: False
2025-06-07 16:47:11 [WARNING] app.infrastructure.repositories.mongodb_reimbursement_repository:278 - get_by_id(): [REPOSITORY] No document found for request_id: 42727c34-956a-4078-8405-9b2a4f826adb
2025-06-07 16:48:20 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement type '42727c34-956a-4078-8405-9b2a4f826adb' not found
2025-06-07 16:48:20 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement type '42727c34-956a-4078-8405-9b2a4f826adb' not found
2025-06-07 16:48:20 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement type '42727c34-956a-4078-8405-9b2a4f826adb' not found
2025-06-07 16:48:20 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement type '42727c34-956a-4078-8405-9b2a4f826adb' not found
2025-06-07 16:48:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49153 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 16:48:29 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 16:48:29 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:48:29 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 16:48:29 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 16:48:29 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 16:48:29 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:48:29 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 16:48:29 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 16:48:29 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 16:48:29 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 16:48:49 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 42727c34-956a-4078-8405-9b2a4f826adb, organisation_id: localhost
2025-06-07 16:48:49 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 42727c34-956a-4078-8405-9b2a4f826adb
2025-06-07 16:48:49 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: False
2025-06-07 16:48:49 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:267 - get_by_id(): [REPOSITORY] Not found with 'request_id', trying 'reimbursement_id'
2025-06-07 16:48:49 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] Second query result: False
2025-06-07 16:48:49 [WARNING] app.infrastructure.repositories.mongodb_reimbursement_repository:278 - get_by_id(): [REPOSITORY] No document found for request_id: 42727c34-956a-4078-8405-9b2a4f826adb
2025-06-07 16:48:49 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement type '42727c34-956a-4078-8405-9b2a4f826adb' not found
2025-06-07 16:48:49 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement type '42727c34-956a-4078-8405-9b2a4f826adb' not found
2025-06-07 16:48:49 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Reimbursement type '42727c34-956a-4078-8405-9b2a4f826adb' not found
2025-06-07 16:48:49 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement type '42727c34-956a-4078-8405-9b2a4f826adb' not found
2025-06-07 17:00:07 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:00:07 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:00:07 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:00:07 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:00:07 [INFO] uvicorn.error:93 - _serve(): Finished server process [28388]
2025-06-07 17:00:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:00:22 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:00:22 [INFO] uvicorn.error:83 - _serve(): Started server process [28490]
2025-06-07 17:00:22 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:00:22 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:00:22 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:01:04 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:01:04 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:01:04 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:01:04 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:01:04 [INFO] uvicorn.error:93 - _serve(): Finished server process [28490]
2025-06-07 17:01:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:01:15 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:01:15 [INFO] uvicorn.error:83 - _serve(): Started server process [28529]
2025-06-07 17:01:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:01:15 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:01:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:01:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:01:23 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:01:23 [INFO] uvicorn.error:83 - _serve(): Started server process [28544]
2025-06-07 17:01:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:01:23 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:01:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:01:25 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:01:25 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:01:25 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:01:25 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:01:25 [INFO] uvicorn.error:93 - _serve(): Finished server process [28544]
2025-06-07 17:01:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:01:34 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:01:34 [INFO] uvicorn.error:83 - _serve(): Started server process [28557]
2025-06-07 17:01:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:01:34 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:01:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:02:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51033 - "OPTIONS /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 200
2025-06-07 17:02:06 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:02:06 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:02:06 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:02:06 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:02:06 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:02:06 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:02:06 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:02:06 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:02:06 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:02:06 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:02:06 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 17:02:06 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 17:02:07 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:02:07 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:02:07 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:02:07 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:02:07 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:02:07 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:02:07 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:02:11 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:02:11 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:02:11 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:02:11 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 17:02:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51033 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 17:04:40 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:04:40 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:04:40 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:04:43 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 17:04:51 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 17:04:51 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:04:51 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:04:51 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:04:51 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:04:51 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:05:29 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:05:29 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:05:29 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:05:29 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 17:06:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:06:21 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:06:21 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:06:21 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:06:21 [INFO] uvicorn.error:93 - _serve(): Finished server process [28557]
2025-06-07 17:06:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:06:31 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:06:31 [INFO] uvicorn.error:83 - _serve(): Started server process [28624]
2025-06-07 17:06:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:06:31 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:06:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:06:43 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:06:43 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:06:43 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:06:43 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:06:43 [INFO] uvicorn.error:93 - _serve(): Finished server process [28624]
2025-06-07 17:06:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:06:53 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:06:53 [INFO] uvicorn.error:83 - _serve(): Started server process [28640]
2025-06-07 17:06:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:06:53 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:06:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:06:53 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:06:53 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:06:53 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:06:53 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:06:53 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:06:53 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:06:53 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:06:53 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:06:53 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:06:53 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:07:04 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 17:07:08 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 17:07:09 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:07:09 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:07:09 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:07:09 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:07:09 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:07:09 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:07:09 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:07:42 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:07:42 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:07:42 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'currency'
2025-06-07 17:07:42 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 17:08:02 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:08:02 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:08:02 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:08:02 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:08:02 [INFO] uvicorn.error:93 - _serve(): Finished server process [28640]
2025-06-07 17:08:06 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:08:12 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:08:12 [INFO] uvicorn.error:83 - _serve(): Started server process [28692]
2025-06-07 17:08:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:08:12 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:08:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:08:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:08:23 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:08:23 [INFO] uvicorn.error:83 - _serve(): Started server process [28705]
2025-06-07 17:08:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:08:23 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:08:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:08:23 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:08:23 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:08:23 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:08:23 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:08:23 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:08:23 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:08:23 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:08:23 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:08:23 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:08:23 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:08:26 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 17:08:36 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 17:08:37 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:08:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:08:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:08:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:08:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:08:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:08:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:08:59 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-07 17:09:53 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'decimal.Decimal' object has no attribute 'amount'
2025-06-07 17:09:53 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'amount'
2025-06-07 17:09:53 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'amount'
2025-06-07 17:09:53 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 17:10:24 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:10:24 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:10:24 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:10:26 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 17:10:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 17:10:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:10:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:10:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:10:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:10:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:10:32 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'decimal.Decimal' object has no attribute 'amount'
2025-06-07 17:10:32 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'amount'
2025-06-07 17:10:32 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: 'decimal.Decimal' object has no attribute 'amount'
2025-06-07 17:10:32 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 17:10:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51951 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 17:12:17 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:12:17 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:12:17 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:12:17 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:12:17 [INFO] uvicorn.error:93 - _serve(): Finished server process [28705]
2025-06-07 17:12:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:12:31 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:12:31 [INFO] uvicorn.error:83 - _serve(): Started server process [28785]
2025-06-07 17:12:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:12:31 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:12:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:12:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:12:40 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:12:40 [INFO] uvicorn.error:83 - _serve(): Started server process [28805]
2025-06-07 17:12:40 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:12:40 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:12:40 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:13:34 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:13:34 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:13:34 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:13:34 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:13:34 [INFO] uvicorn.error:93 - _serve(): Finished server process [28805]
2025-06-07 17:13:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:13:48 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:13:48 [INFO] uvicorn.error:83 - _serve(): Started server process [28912]
2025-06-07 17:13:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:13:48 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:13:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:13:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:13:57 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:13:57 [INFO] uvicorn.error:83 - _serve(): Started server process [28927]
2025-06-07 17:13:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:13:57 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:13:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:15:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:15:21 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:15:21 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:15:21 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:15:21 [INFO] uvicorn.error:93 - _serve(): Finished server process [28927]
2025-06-07 17:15:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:15:31 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:15:31 [INFO] uvicorn.error:83 - _serve(): Started server process [29040]
2025-06-07 17:15:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:15:31 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:15:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:15:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52749 - "OPTIONS /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 200
2025-06-07 17:15:57 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:15:57 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:15:57 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:15:57 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:15:57 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:15:57 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:15:57 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:15:57 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:15:57 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:15:57 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation: localhost
2025-06-07 17:15:57 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 25bf0b6c-74f3-457a-beac-e328b4920ce4 by superadmin
2025-06-07 17:15:57 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, organisation_id: localhost
2025-06-07 17:15:58 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:15:58 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:15:58 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:15:58 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:15:58 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:15:58 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4, reimbursement_id: 25bf0b6c-74f3-457a-beac-e328b4920ce4
2025-06-07 17:15:58 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:15:58 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Can only approve submitted or under review reimbursements
2025-06-07 17:15:58 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Can only approve submitted or under review reimbursements
2025-06-07 17:15:58 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 25bf0b6c-74f3-457a-beac-e328b4920ce4 in organisation localhost: Can only approve submitted or under review reimbursements
2025-06-07 17:15:58 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 17:15:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52749 - "PUT /api/v2/reimbursements/requests/25bf0b6c-74f3-457a-beac-e328b4920ce4/approve HTTP/1.1" 500
2025-06-07 17:16:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52751 - "OPTIONS /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/approve HTTP/1.1" 200
2025-06-07 17:16:22 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:16:22 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:16:22 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:16:22 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 by superadmin
2025-06-07 17:16:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, organisation_id: localhost
2025-06-07 17:16:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:16:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:16:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at', 'receipt']
2025-06-07 17:16:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:16:22 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:16:22 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'Reimbursement' object has no attribute 'request_id'
2025-06-07 17:16:22 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: 'Reimbursement' object has no attribute 'request_id'
2025-06-07 17:16:22 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: 'Reimbursement' object has no attribute 'request_id'
2025-06-07 17:16:22 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 17:16:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52848 - "PUT /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/approve HTTP/1.1" 500
2025-06-07 17:16:41 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:16:41 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:16:41 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:16:41 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 by superadmin
2025-06-07 17:16:41 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, organisation_id: localhost
2025-06-07 17:16:41 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:16:41 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:16:41 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at', 'receipt']
2025-06-07 17:16:41 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:16:41 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:16:41 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: 'Reimbursement' object has no attribute 'request_id'
2025-06-07 17:16:41 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: 'Reimbursement' object has no attribute 'request_id'
2025-06-07 17:16:41 [ERROR] app.api.controllers.reimbursement_controller:345 - approve_reimbursement_request(): Error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: 'Reimbursement' object has no attribute 'request_id'
2025-06-07 17:16:41 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 500: Internal server error
2025-06-07 17:16:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52909 - "PUT /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/approve HTTP/1.1" 500
2025-06-07 17:17:31 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:17:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:17:31 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:17:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:17:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [29040]
2025-06-07 17:17:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:17:42 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:17:42 [INFO] uvicorn.error:83 - _serve(): Started server process [29082]
2025-06-07 17:17:42 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:17:42 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:17:42 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:18:35 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:18:35 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:18:35 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:18:35 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:18:35 [INFO] uvicorn.error:93 - _serve(): Finished server process [29082]
2025-06-07 17:18:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:18:53 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:18:53 [INFO] uvicorn.error:83 - _serve(): Started server process [29135]
2025-06-07 17:18:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:18:53 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:18:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:18:53 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:18:53 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:18:53 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:18:53 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:18:53 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:18:53 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:18:53 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:18:53 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:18:53 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:18:53 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:18:53 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 by superadmin
2025-06-07 17:18:53 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, organisation_id: localhost
2025-06-07 17:18:55 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:18:55 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:18:55 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:18:55 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:18:55 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at', 'receipt']
2025-06-07 17:18:55 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:18:55 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:18:55 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:246 - _persist_entity(): Failed to persist entity: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:18:55 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:18:55 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:18:55 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:18:55 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:18 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:19:18 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:19:18 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:19:18 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 by superadmin
2025-06-07 17:19:18 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, organisation_id: localhost
2025-06-07 17:19:18 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:19:18 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:19:18 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at', 'receipt']
2025-06-07 17:19:18 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:19:18 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:19:18 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:246 - _persist_entity(): Failed to persist entity: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:18 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:18 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:18 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:18 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53279 - "PUT /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/approve HTTP/1.1" 500
2025-06-07 17:19:25 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:19:25 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:19:25 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:19:25 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 by superadmin
2025-06-07 17:19:25 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:256 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, organisation_id: localhost
2025-06-07 17:19:25 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:260 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:19:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:264 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:19:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:272 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at', 'receipt']
2025-06-07 17:19:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Document request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:19:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:275 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:19:26 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:246 - _persist_entity(): Failed to persist entity: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:26 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:26 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:26 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:26 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Failed to save approved reimbursement request: 'Reimbursement' object has no attribute 'reimbursement_type_id'
2025-06-07 17:19:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53298 - "PUT /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/approve HTTP/1.1" 500
2025-06-07 17:21:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:21:21 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:21:21 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:21:21 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:21:21 [INFO] uvicorn.error:93 - _serve(): Finished server process [29135]
2025-06-07 17:21:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:21:32 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:21:32 [INFO] uvicorn.error:83 - _serve(): Started server process [29224]
2025-06-07 17:21:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:21:32 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:21:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:21:41 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:21:41 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:21:41 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:21:41 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:21:41 [INFO] uvicorn.error:93 - _serve(): Finished server process [29224]
2025-06-07 17:21:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:21:52 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:21:52 [INFO] uvicorn.error:83 - _serve(): Started server process [29247]
2025-06-07 17:21:52 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:21:52 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:21:52 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:21:56 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:21:56 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:21:56 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:21:56 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:21:56 [INFO] uvicorn.error:93 - _serve(): Finished server process [29247]
2025-06-07 17:22:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:22:08 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:22:08 [INFO] uvicorn.error:83 - _serve(): Started server process [29262]
2025-06-07 17:22:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:22:08 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:22:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:22:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:22:19 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:22:19 [INFO] uvicorn.error:83 - _serve(): Started server process [29277]
2025-06-07 17:22:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:22:19 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:22:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:24:09 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:24:09 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:24:09 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:24:09 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:24:09 [INFO] uvicorn.error:93 - _serve(): Finished server process [29277]
2025-06-07 17:24:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:24:17 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:24:17 [INFO] uvicorn.error:83 - _serve(): Started server process [29372]
2025-06-07 17:24:17 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:24:17 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:24:17 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:25:02 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:25:02 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:25:02 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:25:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:25:02 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:25:02 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:25:02 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:25:02 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:25:02 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:25:02 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:25:02 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 by superadmin
2025-06-07 17:25:02 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, organisation_id: localhost
2025-06-07 17:25:03 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:25:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:25:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:25:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:277 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:25:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:285 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at', 'receipt']
2025-06-07 17:25:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:286 - get_by_id(): [REPOSITORY] Document request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:25:03 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:288 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:25:18 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:324 - _send_notifications(): Failed to send notifications: 'EmailNotificationService' object has no attribute 'send_employee_notification'
2025-06-07 17:25:18 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:107 - execute(): Successfully approved reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:25:18 [INFO] app.infrastructure.services.reimbursement_service_impl:310 - approve_reimbursement_request(): Successfully approved reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:25:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53952 - "PUT /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/approve HTTP/1.1" 200
2025-06-07 17:26:35 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:26:35 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:26:35 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:26:35 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:26:35 [INFO] uvicorn.error:93 - _serve(): Finished server process [29372]
2025-06-07 17:26:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:26:49 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:26:49 [INFO] uvicorn.error:83 - _serve(): Started server process [29419]
2025-06-07 17:26:49 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:26:49 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:26:49 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:27:24 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:27:24 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:27:24 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:27:24 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:27:24 [INFO] uvicorn.error:93 - _serve(): Finished server process [29419]
2025-06-07 17:27:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:27:38 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:27:38 [INFO] uvicorn.error:83 - _serve(): Started server process [29453]
2025-06-07 17:27:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:27:38 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:27:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:28:10 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:28:10 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:28:10 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:28:10 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:28:10 [INFO] uvicorn.error:93 - _serve(): Finished server process [29453]
2025-06-07 17:28:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:28:20 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:28:20 [INFO] uvicorn.error:83 - _serve(): Started server process [29493]
2025-06-07 17:28:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:28:20 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:28:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:28:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54666 - "OPTIONS /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/approve HTTP/1.1" 200
2025-06-07 17:28:24 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:28:24 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:28:24 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:28:24 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:28:24 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:28:24 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:28:24 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:28:24 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:28:24 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:28:24 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation: localhost
2025-06-07 17:28:24 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 by superadmin
2025-06-07 17:28:24 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, organisation_id: localhost
2025-06-07 17:28:26 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:28:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:28:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:28:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:277 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:28:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:285 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at', 'receipt', 'approval']
2025-06-07 17:28:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:286 - get_by_id(): [REPOSITORY] Document request_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6, reimbursement_id: 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6
2025-06-07 17:28:26 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:288 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:28:26 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request is in 'approved' status and cannot be approved
2025-06-07 17:28:26 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: Reimbursement request is in 'approved' status and cannot be approved
2025-06-07 17:28:26 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request 725995a2-18b2-4ac6-b8f2-ff54e1d71ed6 in organisation localhost: Reimbursement request is in 'approved' status and cannot be approved
2025-06-07 17:28:26 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request is in 'approved' status and cannot be approved
2025-06-07 17:28:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54666 - "PUT /api/v2/reimbursements/requests/725995a2-18b2-4ac6-b8f2-ff54e1d71ed6/approve HTTP/1.1" 500
2025-06-07 17:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54668 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54748 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54750 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:28:37 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:28:37 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: approved
2025-06-07 17:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54748 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:28:37 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: approved
2025-06-07 17:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54748 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 4 reimbursement requests with status: submitted
2025-06-07 17:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54668 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:28:37 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:28:37 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:28:37 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:28:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:28:38 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:28:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:28:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 4 reimbursement requests with status: submitted
2025-06-07 17:28:38 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:28:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:28:38 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:28:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54668 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:29:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54754 - "OPTIONS /api/v2/reimbursements/requests/be525f5b-cb31-4f20-a853-192f7b248e12/approve HTTP/1.1" 200
2025-06-07 17:29:27 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:29:27 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 in organisation: localhost
2025-06-07 17:29:27 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 in organisation: localhost
2025-06-07 17:29:27 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 by superadmin
2025-06-07 17:29:27 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] get_by_id called with request_id: be525f5b-cb31-4f20-a853-192f7b248e12, organisation_id: localhost
2025-06-07 17:29:27 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 17:29:27 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:277 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:29:27 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:285 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:29:27 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:286 - get_by_id(): [REPOSITORY] Document request_id: be525f5b-cb31-4f20-a853-192f7b248e12, reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 17:29:27 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:288 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:29:41 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:305 - _send_notifications(): Failed to send notifications: 'SimpleUser' object has no attribute 'get'
2025-06-07 17:29:41 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:107 - execute(): Successfully approved reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 17:29:41 [INFO] app.infrastructure.services.reimbursement_service_impl:310 - approve_reimbursement_request(): Successfully approved reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 17:29:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54754 - "PUT /api/v2/reimbursements/requests/be525f5b-cb31-4f20-a853-192f7b248e12/approve HTTP/1.1" 200
2025-06-07 17:31:30 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:31:30 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:31:30 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:31:30 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:31:30 [INFO] uvicorn.error:93 - _serve(): Finished server process [29493]
2025-06-07 17:31:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:31:43 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:31:43 [INFO] uvicorn.error:83 - _serve(): Started server process [29547]
2025-06-07 17:31:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:31:43 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:31:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:32:42 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Signature verification failed.
2025-06-07 17:32:42 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Signature verification failed.
2025-06-07 17:32:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55368 - "PUT /api/v2/reimbursements/requests/be525f5b-cb31-4f20-a853-192f7b248e12/approve HTTP/1.1" 401
2025-06-07 17:34:10 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:34:10 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:34:10 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:34:10 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:34:10 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:34:10 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:34:10 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:34:10 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:34:10 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 in organisation: localhost
2025-06-07 17:34:10 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 in organisation: localhost
2025-06-07 17:34:10 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: be525f5b-cb31-4f20-a853-192f7b248e12 by superadmin
2025-06-07 17:34:10 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] get_by_id called with request_id: be525f5b-cb31-4f20-a853-192f7b248e12, organisation_id: localhost
2025-06-07 17:34:11 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:34:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:34:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 17:34:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:277 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:34:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:285 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at', 'approval']
2025-06-07 17:34:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:286 - get_by_id(): [REPOSITORY] Document request_id: be525f5b-cb31-4f20-a853-192f7b248e12, reimbursement_id: be525f5b-cb31-4f20-a853-192f7b248e12
2025-06-07 17:34:11 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:288 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:34:11 [ERROR] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:111 - execute(): Failed to approve reimbursement request: Reimbursement request is in 'approved' status and cannot be approved
2025-06-07 17:34:11 [ERROR] app.infrastructure.services.reimbursement_service_impl:314 - approve_reimbursement_request(): Error approving reimbursement request be525f5b-cb31-4f20-a853-192f7b248e12 in organisation localhost: Reimbursement request is in 'approved' status and cannot be approved
2025-06-07 17:34:11 [ERROR] app.api.controllers.reimbursement_controller:342 - approve_reimbursement_request(): Business rule error approving reimbursement request be525f5b-cb31-4f20-a853-192f7b248e12 in organisation localhost: Reimbursement request is in 'approved' status and cannot be approved
2025-06-07 17:34:11 [ERROR] app.api.routes.reimbursement_routes_v2:436 - approve_reimbursement_request(): Error approving reimbursement request: 422: Reimbursement request is in 'approved' status and cannot be approved
2025-06-07 17:34:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55385 - "PUT /api/v2/reimbursements/requests/be525f5b-cb31-4f20-a853-192f7b248e12/approve HTTP/1.1" 500
2025-06-07 17:34:44 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:34:44 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:34:44 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:34:44 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:34:44 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 2 reimbursement requests with status: approved
2025-06-07 17:34:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55488 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:34:44 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:34:44 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 3 reimbursement requests with status: submitted
2025-06-07 17:34:44 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 2 reimbursement requests with status: approved
2025-06-07 17:34:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55488 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:34:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55487 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:34:44 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:34:44 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:34:44 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 3 reimbursement requests with status: submitted
2025-06-07 17:34:44 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:34:44 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:34:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55487 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:35:06 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:35:06 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:35:06 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:35:06 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:35:06 [INFO] uvicorn.error:93 - _serve(): Finished server process [29547]
2025-06-07 17:35:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:35:20 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:35:20 [INFO] uvicorn.error:83 - _serve(): Started server process [29718]
2025-06-07 17:35:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:35:20 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:35:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:38:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55684 - "OPTIONS /api/v2/reimbursements/requests/99caa3d8-c9c5-4e97-8118-c34424b20f25/approve HTTP/1.1" 200
2025-06-07 17:38:00 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:00 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 17:38:00 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 17:38:00 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 17:38:00 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 17:38:00 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 17:38:00 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 17:38:00 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 17:38:00 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 99caa3d8-c9c5-4e97-8118-c34424b20f25 in organisation: localhost
2025-06-07 17:38:00 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 99caa3d8-c9c5-4e97-8118-c34424b20f25 in organisation: localhost
2025-06-07 17:38:00 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 99caa3d8-c9c5-4e97-8118-c34424b20f25 by superadmin
2025-06-07 17:38:00 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25, organisation_id: localhost
2025-06-07 17:38:01 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 17:38:01 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 17:38:02 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 17:38:02 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:277 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:38:02 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:285 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:38:02 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:286 - get_by_id(): [REPOSITORY] Document request_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25, reimbursement_id: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 17:38:02 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:288 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:38:02 [INFO] app.infrastructure.services.notification_service:798 - _send_email(): EMAIL TO: ishagarg10@outlook.com
2025-06-07 17:38:02 [INFO] app.infrastructure.services.notification_service:799 - _send_email(): SUBJECT: Reimbursement Request Approved: Travel(Intr)
2025-06-07 17:38:02 [INFO] app.infrastructure.services.notification_service:800 - _send_email(): BODY: 
            Dear Isha Agarwal,
            
            Your reimbursement request has been approved:
            
            Type: Travel(Intr)
            Amount: ₹15,000.00
            Status: Approved
            
Comments: a
            
            Best regards,
            Finance Team
            
2025-06-07 17:38:02 [INFO] app.infrastructure.services.notification_service:656 - send_reimbursement_notification(): Reimbursement notification sent to ishagarg10@outlook.com
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:107 - execute(): Successfully approved reimbursement request: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 17:38:02 [INFO] app.infrastructure.services.reimbursement_service_impl:310 - approve_reimbursement_request(): Successfully approved reimbursement request: 99caa3d8-c9c5-4e97-8118-c34424b20f25
2025-06-07 17:38:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55684 - "PUT /api/v2/reimbursements/requests/99caa3d8-c9c5-4e97-8118-c34424b20f25/approve HTTP/1.1" 200
2025-06-07 17:38:02 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:02 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:02 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:38:02 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:38:02 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 2 reimbursement requests with status: submitted
2025-06-07 17:38:02 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:38:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55684 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:38:02 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 3 reimbursement requests with status: approved
2025-06-07 17:38:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55686 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:38:08 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:08 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:38:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:38:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 3 reimbursement requests with status: approved
2025-06-07 17:38:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55763 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:38:08 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 2 reimbursement requests with status: submitted
2025-06-07 17:38:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:38:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:38:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55761 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:38:08 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:38:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:38:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 3 reimbursement requests with status: approved
2025-06-07 17:38:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55763 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:38:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 2 reimbursement requests with status: submitted
2025-06-07 17:38:09 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:38:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:38:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55770 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:38:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55774 - "OPTIONS /api/v2/reimbursements/requests/0c66d439-35f7-4cab-8bfc-5c828d1f894d/approve HTTP/1.1" 200
2025-06-07 17:38:16 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:16 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d in organisation: localhost
2025-06-07 17:38:16 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d in organisation: localhost
2025-06-07 17:38:16 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d by superadmin
2025-06-07 17:38:16 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] get_by_id called with request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d, organisation_id: localhost
2025-06-07 17:38:16 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 17:38:17 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:277 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:38:17 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:285 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:38:17 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:286 - get_by_id(): [REPOSITORY] Document request_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d, reimbursement_id: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 17:38:17 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:288 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:38:17 [INFO] app.infrastructure.services.notification_service:798 - _send_email(): EMAIL TO: ishagarg10@outlook.com
2025-06-07 17:38:17 [INFO] app.infrastructure.services.notification_service:799 - _send_email(): SUBJECT: Reimbursement Request Approved: Travel(Intr)
2025-06-07 17:38:17 [INFO] app.infrastructure.services.notification_service:800 - _send_email(): BODY: 
            Dear Isha Agarwal,
            
            Your reimbursement request has been approved:
            
            Type: Travel(Intr)
            Amount: ₹15,000.00
            Status: Approved
            
Comments: av
            
            Best regards,
            Finance Team
            
2025-06-07 17:38:17 [INFO] app.infrastructure.services.notification_service:656 - send_reimbursement_notification(): Reimbursement notification sent to ishagarg10@outlook.com
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:107 - execute(): Successfully approved reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 17:38:17 [INFO] app.infrastructure.services.reimbursement_service_impl:310 - approve_reimbursement_request(): Successfully approved reimbursement request: 0c66d439-35f7-4cab-8bfc-5c828d1f894d
2025-06-07 17:38:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55774 - "PUT /api/v2/reimbursements/requests/0c66d439-35f7-4cab-8bfc-5c828d1f894d/approve HTTP/1.1" 200
2025-06-07 17:38:17 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:17 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:17 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:38:17 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:38:17 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: submitted
2025-06-07 17:38:17 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:38:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55774 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:38:17 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 4 reimbursement requests with status: approved
2025-06-07 17:38:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55776 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:38:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55778 - "OPTIONS /api/v2/reimbursements/requests/cc594cb0-fafa-4081-856d-4c6dd58f4fb6/approve HTTP/1.1" 200
2025-06-07 17:38:23 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:23 [INFO] app.api.controllers.reimbursement_controller:333 - approve_reimbursement_request(): Approving reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6 in organisation: localhost
2025-06-07 17:38:23 [INFO] app.infrastructure.services.reimbursement_service_impl:300 - approve_reimbursement_request(): Approving reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6 in organisation: localhost
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:82 - execute(): Approving reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6 by superadmin
2025-06-07 17:38:23 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:269 - get_by_id(): [REPOSITORY] get_by_id called with request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6, organisation_id: localhost
2025-06-07 17:38:23 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:273 - get_by_id(): [REPOSITORY] Got collection, searching for reimbursement with request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 17:38:23 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:277 - get_by_id(): [REPOSITORY] First query result: True
2025-06-07 17:38:23 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:285 - get_by_id(): [REPOSITORY] Found document with keys: ['_id', 'request_id', 'reimbursement_id', 'employee_id', 'reimbursement_type', 'amount', 'description', 'status', 'created_at', 'created_by', 'submitted_at', 'updated_at']
2025-06-07 17:38:23 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:286 - get_by_id(): [REPOSITORY] Document request_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6, reimbursement_id: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 17:38:23 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:288 - get_by_id(): [REPOSITORY] Converted to entity: True
2025-06-07 17:38:23 [INFO] app.infrastructure.services.notification_service:798 - _send_email(): EMAIL TO: ishagarg10@outlook.com
2025-06-07 17:38:23 [INFO] app.infrastructure.services.notification_service:799 - _send_email(): SUBJECT: Reimbursement Request Approved: Travel(Intr)
2025-06-07 17:38:23 [INFO] app.infrastructure.services.notification_service:800 - _send_email(): BODY: 
            Dear Isha Agarwal,
            
            Your reimbursement request has been approved:
            
            Type: Travel(Intr)
            Amount: ₹12,000.00
            Status: Approved
            
Comments: as
            
            Best regards,
            Finance Team
            
2025-06-07 17:38:23 [INFO] app.infrastructure.services.notification_service:656 - send_reimbursement_notification(): Reimbursement notification sent to ishagarg10@outlook.com
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.approve_reimbursement_request_use_case:107 - execute(): Successfully approved reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 17:38:23 [INFO] app.infrastructure.services.reimbursement_service_impl:310 - approve_reimbursement_request(): Successfully approved reimbursement request: cc594cb0-fafa-4081-856d-4c6dd58f4fb6
2025-06-07 17:38:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55778 - "PUT /api/v2/reimbursements/requests/cc594cb0-fafa-4081-856d-4c6dd58f4fb6/approve HTTP/1.1" 200
2025-06-07 17:38:23 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:23 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:38:23 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:38:23 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:38:23 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: submitted
2025-06-07 17:38:23 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:38:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55778 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:38:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: approved
2025-06-07 17:38:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55780 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55869 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-07 17:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55871 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-07 17:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55873 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 17:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55873 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 17:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55873 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 17:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55871 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 17:39:08 [WARNING] app.api.routes.public_holiday_routes_v2:37 - get_public_holiday_controller(): Could not get public holiday controller from container: PublicHolidayController.__init__() got an unexpected keyword argument 'public_holiday_service'
2025-06-07 17:39:08 [WARNING] app.api.controllers.public_holiday_controller:69 - __init__(): PublicHolidayController initialized without all required use cases
2025-06-07 17:39:08 [INFO] app.api.routes.public_holiday_routes_v2:76 - get_public_holidays(): Getting public holidays with filters: year=None, month=None
2025-06-07 17:39:08 [INFO] app.api.controllers.public_holiday_controller:90 - get_public_holidays(): Getting public holidays with filters
2025-06-07 17:39:08 [WARNING] app.api.controllers.public_holiday_controller:112 - get_public_holidays(): Get use case not available, returning empty list
2025-06-07 17:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55869 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 17:39:08 [WARNING] app.api.routes.public_holiday_routes_v2:37 - get_public_holiday_controller(): Could not get public holiday controller from container: PublicHolidayController.__init__() got an unexpected keyword argument 'public_holiday_service'
2025-06-07 17:39:08 [WARNING] app.api.controllers.public_holiday_controller:69 - __init__(): PublicHolidayController initialized without all required use cases
2025-06-07 17:39:08 [INFO] app.api.routes.public_holiday_routes_v2:76 - get_public_holidays(): Getting public holidays with filters: year=None, month=None
2025-06-07 17:39:08 [INFO] app.api.controllers.public_holiday_controller:90 - get_public_holidays(): Getting public holidays with filters
2025-06-07 17:39:08 [WARNING] app.api.controllers.public_holiday_controller:112 - get_public_holidays(): Get use case not available, returning empty list
2025-06-07 17:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55871 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 17:39:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55871 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-07 17:39:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55869 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-07 17:39:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55873 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 17:39:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55873 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 17:39:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55869 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 17:39:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55873 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 17:39:11 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 17:39:11 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-07 17:39:11 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:272 - list_with_filters(): Error retrieving filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 17:39:11 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:291 - count_with_filters(): Error counting filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 17:39:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55871 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 17:39:11 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 17:39:11 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-07 17:39:11 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:272 - list_with_filters(): Error retrieving filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 17:39:11 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:291 - count_with_filters(): Error counting filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 17:39:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55871 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 17:44:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56695 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 17:44:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56696 - "OPTIONS /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 17:44:18 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 17:44:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56698 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 17:44:18 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 17:44:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56698 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 17:44:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56698 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 17:44:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56695 - "OPTIONS /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 17:44:21 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 17:44:21 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: superadmin
2025-06-07 17:44:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56696 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 17:44:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 0 reimbursement requests for employee: superadmin
2025-06-07 17:44:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56711 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 17:44:21 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 17:44:21 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: superadmin
2025-06-07 17:44:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56696 - "GET /api/v2/reimbursements/types HTTP/1.1" 200
2025-06-07 17:44:21 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 0 reimbursement requests for employee: superadmin
2025-06-07 17:44:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56711 - "GET /api/v2/reimbursements/requests/my HTTP/1.1" 200
2025-06-07 17:44:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56742 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:44:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56743 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:44:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56745 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:44:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56747 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:44:27 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:44:27 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:44:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:44:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:44:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: submitted
2025-06-07 17:44:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:44:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56742 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:44:27 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:44:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: approved
2025-06-07 17:44:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56749 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 17:44:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 17:44:27 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 17:44:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: submitted
2025-06-07 17:44:27 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 17:44:27 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 17:44:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56742 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 17:44:28 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: approved
2025-06-07 17:44:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56747 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 17:45:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56899 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 17:45:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56899 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 17:45:48 [WARNING] app.api.routes.public_holiday_routes_v2:37 - get_public_holiday_controller(): Could not get public holiday controller from container: PublicHolidayController.__init__() got an unexpected keyword argument 'public_holiday_service'
2025-06-07 17:45:48 [WARNING] app.api.controllers.public_holiday_controller:69 - __init__(): PublicHolidayController initialized without all required use cases
2025-06-07 17:45:48 [INFO] app.api.routes.public_holiday_routes_v2:76 - get_public_holidays(): Getting public holidays with filters: year=None, month=None
2025-06-07 17:45:48 [INFO] app.api.controllers.public_holiday_controller:90 - get_public_holidays(): Getting public holidays with filters
2025-06-07 17:45:48 [WARNING] app.api.controllers.public_holiday_controller:112 - get_public_holidays(): Get use case not available, returning empty list
2025-06-07 17:45:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56901 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 17:45:48 [WARNING] app.api.routes.public_holiday_routes_v2:37 - get_public_holiday_controller(): Could not get public holiday controller from container: PublicHolidayController.__init__() got an unexpected keyword argument 'public_holiday_service'
2025-06-07 17:45:48 [WARNING] app.api.controllers.public_holiday_controller:69 - __init__(): PublicHolidayController initialized without all required use cases
2025-06-07 17:45:48 [INFO] app.api.routes.public_holiday_routes_v2:76 - get_public_holidays(): Getting public holidays with filters: year=None, month=None
2025-06-07 17:45:48 [INFO] app.api.controllers.public_holiday_controller:90 - get_public_holidays(): Getting public holidays with filters
2025-06-07 17:45:48 [WARNING] app.api.controllers.public_holiday_controller:112 - get_public_holidays(): Get use case not available, returning empty list
2025-06-07 17:45:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56899 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 17:45:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56946 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 17:45:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56946 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 17:45:55 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 17:45:55 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-07 17:45:55 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:272 - list_with_filters(): Error retrieving filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 17:45:55 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:291 - count_with_filters(): Error counting filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 17:45:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56948 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 17:45:55 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 17:45:55 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-07 17:45:55 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:272 - list_with_filters(): Error retrieving filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 17:45:55 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:291 - count_with_filters(): Error counting filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 17:45:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56948 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 17:46:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57136 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 17:46:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57136 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 17:46:37 [WARNING] app.api.routes.public_holiday_routes_v2:37 - get_public_holiday_controller(): Could not get public holiday controller from container: PublicHolidayController.__init__() got an unexpected keyword argument 'public_holiday_service'
2025-06-07 17:46:37 [WARNING] app.api.controllers.public_holiday_controller:69 - __init__(): PublicHolidayController initialized without all required use cases
2025-06-07 17:46:37 [INFO] app.api.routes.public_holiday_routes_v2:76 - get_public_holidays(): Getting public holidays with filters: year=None, month=None
2025-06-07 17:46:37 [INFO] app.api.controllers.public_holiday_controller:90 - get_public_holidays(): Getting public holidays with filters
2025-06-07 17:46:37 [WARNING] app.api.controllers.public_holiday_controller:112 - get_public_holidays(): Get use case not available, returning empty list
2025-06-07 17:46:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57138 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 17:46:38 [WARNING] app.api.routes.public_holiday_routes_v2:37 - get_public_holiday_controller(): Could not get public holiday controller from container: PublicHolidayController.__init__() got an unexpected keyword argument 'public_holiday_service'
2025-06-07 17:46:38 [WARNING] app.api.controllers.public_holiday_controller:69 - __init__(): PublicHolidayController initialized without all required use cases
2025-06-07 17:46:38 [INFO] app.api.routes.public_holiday_routes_v2:76 - get_public_holidays(): Getting public holidays with filters: year=None, month=None
2025-06-07 17:46:38 [INFO] app.api.controllers.public_holiday_controller:90 - get_public_holidays(): Getting public holidays with filters
2025-06-07 17:46:38 [WARNING] app.api.controllers.public_holiday_controller:112 - get_public_holidays(): Get use case not available, returning empty list
2025-06-07 17:46:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57136 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 17:51:32 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:51:32 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:51:32 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:51:32 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:51:32 [INFO] uvicorn.error:93 - _serve(): Finished server process [29718]
2025-06-07 17:51:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:52:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:52:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:53:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:53:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:54:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:54:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:54:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:55:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:55:44 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:55:44 [INFO] uvicorn.error:83 - _serve(): Started server process [30192]
2025-06-07 17:55:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:55:44 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:55:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:56:08 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:56:08 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:56:08 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:56:08 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:56:08 [INFO] uvicorn.error:93 - _serve(): Finished server process [30192]
2025-06-07 17:56:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:56:18 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:56:18 [INFO] uvicorn.error:83 - _serve(): Started server process [30215]
2025-06-07 17:56:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:56:18 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:56:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:56:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:56:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:56:59 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:56:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:56:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [30215]
2025-06-07 17:57:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:57:10 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:57:10 [INFO] uvicorn.error:83 - _serve(): Started server process [30245]
2025-06-07 17:57:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:57:10 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:57:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:58:22 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:58:22 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:58:22 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:58:22 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:58:22 [INFO] uvicorn.error:93 - _serve(): Finished server process [30245]
2025-06-07 17:58:28 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:58:35 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:58:35 [INFO] uvicorn.error:83 - _serve(): Started server process [30288]
2025-06-07 17:58:35 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:58:35 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:58:35 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:59:41 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:59:41 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:59:41 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:59:41 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:59:41 [INFO] uvicorn.error:93 - _serve(): Finished server process [30288]
2025-06-07 17:59:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 17:59:50 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 17:59:50 [INFO] uvicorn.error:83 - _serve(): Started server process [30320]
2025-06-07 17:59:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 17:59:50 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 17:59:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 17:59:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 17:59:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 17:59:59 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 17:59:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 17:59:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [30320]
2025-06-07 18:00:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:00:11 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:00:11 [INFO] uvicorn.error:83 - _serve(): Started server process [30336]
2025-06-07 18:00:11 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:00:11 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:00:11 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:00:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:00:23 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:00:23 [INFO] uvicorn.error:83 - _serve(): Started server process [30354]
2025-06-07 18:00:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:00:23 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:00:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:00:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:00:33 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:00:33 [INFO] uvicorn.error:83 - _serve(): Started server process [30363]
2025-06-07 18:00:33 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:00:33 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:00:33 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:00:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:00:44 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:00:44 [INFO] uvicorn.error:83 - _serve(): Started server process [30368]
2025-06-07 18:00:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:00:44 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:00:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:00:47 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:00:54 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:00:55 [INFO] uvicorn.error:83 - _serve(): Started server process [30373]
2025-06-07 18:00:55 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:00:55 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:00:55 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:00:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:01:05 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:01:05 [INFO] uvicorn.error:83 - _serve(): Started server process [30386]
2025-06-07 18:01:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:01:05 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:01:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:01:05 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 18:01:05 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 18:01:05 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 18:01:05 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 18:01:05 [INFO] uvicorn.error:93 - _serve(): Finished server process [30386]
2025-06-07 18:01:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:01:15 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:01:15 [INFO] uvicorn.error:83 - _serve(): Started server process [30392]
2025-06-07 18:01:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:01:15 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:01:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:01:17 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 18:01:17 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 18:01:17 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 18:01:17 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 18:01:17 [INFO] uvicorn.error:93 - _serve(): Finished server process [30392]
2025-06-07 18:01:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:01:27 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:01:27 [INFO] uvicorn.error:83 - _serve(): Started server process [30399]
2025-06-07 18:01:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:01:27 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:01:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:01:28 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 18:01:28 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 18:01:28 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 18:01:28 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 18:01:28 [INFO] uvicorn.error:93 - _serve(): Finished server process [30399]
2025-06-07 18:01:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:01:38 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:01:38 [INFO] uvicorn.error:83 - _serve(): Started server process [30405]
2025-06-07 18:01:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:01:38 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:01:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:01:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:01:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:01:50 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 18:01:50 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 18:01:50 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 18:01:50 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 18:01:50 [ERROR] app.config.dependency_container:265 - _setup_services(): Error setting up services: PublicHolidayServiceImpl.__init__() got an unexpected keyword argument 'repository'
2025-06-07 18:01:50 [ERROR] app.config.dependency_container:88 - initialize(): Error initializing dependency container: PublicHolidayServiceImpl.__init__() got an unexpected keyword argument 'repository'
2025-06-07 18:02:15 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 18:02:15 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 18:02:15 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 18:02:15 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 18:02:15 [INFO] uvicorn.error:93 - _serve(): Finished server process [30405]
2025-06-07 18:02:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:02:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:02:25 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 18:02:25 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 18:02:25 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 18:02:25 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 18:02:25 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 18:02:25 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 18:02:25 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 18:02:29 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:02:29 [INFO] uvicorn.error:83 - _serve(): Started server process [30507]
2025-06-07 18:02:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:02:29 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:02:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:02:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:06:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59669 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-07 18:06:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59671 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-07 18:06:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59669 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 18:06:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59669 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 18:06:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59669 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 18:06:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59671 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 18:06:23 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 18:06:23 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 18:06:23 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 18:06:23 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 18:06:23 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 18:06:23 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 18:06:23 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 18:06:23 [ERROR] app.infrastructure.repositories.mongodb_public_holiday_repository:142 - find_with_filters(): Error finding public holidays with filters in database localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:06:23 [ERROR] app.infrastructure.services.public_holiday_service_impl:264 - list_public_holidays(): Error listing public holidays in organisation localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:06:23 [ERROR] app.api.controllers.public_holiday_controller:80 - list_public_holidays(): Error listing public holidays in organisation localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:06:23 [ERROR] app.api.routes.public_holiday_routes_v2:96 - list_public_holidays(): Error listing public holidays: 500: Internal server error
2025-06-07 18:06:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59669 - "GET /api/v2/public-holidays/ HTTP/1.1" 500
2025-06-07 18:06:23 [ERROR] app.infrastructure.repositories.mongodb_public_holiday_repository:142 - find_with_filters(): Error finding public holidays with filters in database localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:06:23 [ERROR] app.infrastructure.services.public_holiday_service_impl:264 - list_public_holidays(): Error listing public holidays in organisation localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:06:23 [ERROR] app.api.controllers.public_holiday_controller:80 - list_public_holidays(): Error listing public holidays in organisation localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:06:23 [ERROR] app.api.routes.public_holiday_routes_v2:96 - list_public_holidays(): Error listing public holidays: 500: Internal server error
2025-06-07 18:06:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59671 - "GET /api/v2/public-holidays/ HTTP/1.1" 500
2025-06-07 18:16:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60410 - "OPTIONS /api/v2/reimbursements/types?active_only=true HTTP/1.1" 200
2025-06-07 18:16:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60412 - "OPTIONS /api/v2/reimbursements/types?active_only=true HTTP/1.1" 200
2025-06-07 18:16:16 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 18:16:17 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 18:16:17 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 18:16:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60410 - "GET /api/v2/reimbursements/types?active_only=true HTTP/1.1" 200
2025-06-07 18:16:17 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 18:16:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60410 - "GET /api/v2/reimbursements/types?active_only=true HTTP/1.1" 200
2025-06-07 18:16:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60410 - "OPTIONS /api/v2/reimbursements/requests/my?limit=50&offset=0 HTTP/1.1" 200
2025-06-07 18:16:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60414 - "OPTIONS /api/v2/reimbursements/requests/my?limit=50&offset=0 HTTP/1.1" 200
2025-06-07 18:16:20 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 18:16:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: superadmin
2025-06-07 18:16:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60412 - "GET /api/v2/reimbursements/types?active_only=true HTTP/1.1" 200
2025-06-07 18:16:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 0 reimbursement requests for employee: superadmin
2025-06-07 18:16:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60449 - "GET /api/v2/reimbursements/requests/my?limit=50&offset=0 HTTP/1.1" 200
2025-06-07 18:16:20 [INFO] app.infrastructure.services.reimbursement_service_impl:623 - list_reimbursement_types(): Listing reimbursement types in organisation: localhost
2025-06-07 18:16:20 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: superadmin
2025-06-07 18:16:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60412 - "GET /api/v2/reimbursements/types?active_only=true HTTP/1.1" 200
2025-06-07 18:16:20 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 0 reimbursement requests for employee: superadmin
2025-06-07 18:16:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60449 - "GET /api/v2/reimbursements/requests/my?limit=50&offset=0 HTTP/1.1" 200
2025-06-07 18:16:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60449 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 18:16:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60412 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 18:16:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60414 - "OPTIONS /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 18:16:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60410 - "OPTIONS /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 18:16:22 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 18:16:22 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 18:16:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 18:16:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 18:16:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 18:16:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 18:16:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: submitted
2025-06-07 18:16:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 18:16:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 18:16:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60449 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 18:16:22 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 18:16:22 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:22 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: draft
2025-06-07 18:16:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: approved
2025-06-07 18:16:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60472 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 18:16:23 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-07 18:16:23 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: approved
2025-06-07 18:16:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 1 reimbursement requests with status: draft
2025-06-07 18:16:23 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: submitted
2025-06-07 18:16:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: submitted
2025-06-07 18:16:23 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-07 18:16:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:131 - get_requests_by_status(): Retrieving reimbursement requests with status: under_review
2025-06-07 18:16:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 0 reimbursement requests with status: under_review
2025-06-07 18:16:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60449 - "GET /api/v2/reimbursements/pending HTTP/1.1" 200
2025-06-07 18:16:23 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:143 - get_requests_by_status(): Retrieved 5 reimbursement requests with status: approved
2025-06-07 18:16:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60472 - "GET /api/v2/reimbursements/approved HTTP/1.1" 200
2025-06-07 18:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60472 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-07 18:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60449 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-07 18:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60410 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 18:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60410 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 18:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60410 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 18:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60449 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 18:16:27 [ERROR] app.infrastructure.repositories.mongodb_public_holiday_repository:142 - find_with_filters(): Error finding public holidays with filters in database localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:16:27 [ERROR] app.infrastructure.services.public_holiday_service_impl:264 - list_public_holidays(): Error listing public holidays in organisation localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:16:27 [ERROR] app.api.controllers.public_holiday_controller:80 - list_public_holidays(): Error listing public holidays in organisation localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:16:27 [ERROR] app.api.routes.public_holiday_routes_v2:96 - list_public_holidays(): Error listing public holidays: 500: Internal server error
2025-06-07 18:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60472 - "GET /api/v2/public-holidays/ HTTP/1.1" 500
2025-06-07 18:16:27 [ERROR] app.infrastructure.repositories.mongodb_public_holiday_repository:142 - find_with_filters(): Error finding public holidays with filters in database localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:16:27 [ERROR] app.infrastructure.services.public_holiday_service_impl:264 - list_public_holidays(): Error listing public holidays in organisation localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:16:27 [ERROR] app.api.controllers.public_holiday_controller:80 - list_public_holidays(): Error listing public holidays in organisation localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:16:27 [ERROR] app.api.routes.public_holiday_routes_v2:96 - list_public_holidays(): Error listing public holidays: 500: Internal server error
2025-06-07 18:16:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60472 - "GET /api/v2/public-holidays/ HTTP/1.1" 500
2025-06-07 18:19:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60966 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 18:19:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60966 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 18:19:22 [ERROR] app.infrastructure.repositories.mongodb_public_holiday_repository:142 - find_with_filters(): Error finding public holidays with filters in database localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:19:22 [ERROR] app.infrastructure.services.public_holiday_service_impl:264 - list_public_holidays(): Error listing public holidays in organisation localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:19:22 [ERROR] app.api.controllers.public_holiday_controller:80 - list_public_holidays(): Error listing public holidays in organisation localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:19:22 [ERROR] app.api.routes.public_holiday_routes_v2:96 - list_public_holidays(): Error listing public holidays: 500: Internal server error
2025-06-07 18:19:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60966 - "GET /api/v2/public-holidays/ HTTP/1.1" 500
2025-06-07 18:19:22 [ERROR] app.infrastructure.repositories.mongodb_public_holiday_repository:142 - find_with_filters(): Error finding public holidays with filters in database localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:19:22 [ERROR] app.infrastructure.services.public_holiday_service_impl:264 - list_public_holidays(): Error listing public holidays in organisation localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:19:22 [ERROR] app.api.controllers.public_holiday_controller:80 - list_public_holidays(): Error listing public holidays in organisation localhost: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-07 18:19:22 [ERROR] app.api.routes.public_holiday_routes_v2:96 - list_public_holidays(): Error listing public holidays: 500: Internal server error
2025-06-07 18:19:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60966 - "GET /api/v2/public-holidays/ HTTP/1.1" 500
2025-06-07 18:20:46 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 18:20:46 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 18:20:46 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 18:20:46 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 18:20:46 [INFO] uvicorn.error:93 - _serve(): Finished server process [30507]
2025-06-07 18:20:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:21:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:21:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:21:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:21:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:21:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:22:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:22:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:22:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:22:43 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:22:43 [INFO] uvicorn.error:83 - _serve(): Started server process [31500]
2025-06-07 18:22:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:22:43 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:22:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:23:27 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 18:23:27 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 18:23:27 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 18:23:27 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 18:23:27 [INFO] uvicorn.error:93 - _serve(): Finished server process [31500]
2025-06-07 18:23:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:23:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:23:39 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:23:39 [INFO] uvicorn.error:83 - _serve(): Started server process [31628]
2025-06-07 18:23:39 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:23:39 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:23:39 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:23:47 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 18:23:47 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 18:23:47 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 18:23:47 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 18:23:47 [INFO] uvicorn.error:93 - _serve(): Finished server process [31628]
2025-06-07 18:23:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:23:56 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:23:56 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 18:23:56 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 18:23:56 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 18:23:56 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 18:23:56 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 18:23:56 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 18:23:56 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 18:23:56 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:23:56 [INFO] uvicorn.error:83 - _serve(): Started server process [31657]
2025-06-07 18:23:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:23:56 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:23:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:24:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:24:06 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:24:06 [INFO] uvicorn.error:83 - _serve(): Started server process [31671]
2025-06-07 18:24:06 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:24:06 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:24:06 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:24:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62239 - "GET /api/v2/public-holidays/ HTTP/1.1" 403
2025-06-07 18:24:35 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 18:24:35 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 18:24:35 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 18:24:35 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 18:24:35 [INFO] uvicorn.error:93 - _serve(): Finished server process [31671]
2025-06-07 18:24:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:24:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:24:43 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 18:24:43 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 18:24:43 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 18:24:43 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 18:24:43 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 18:24:43 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 18:24:43 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 18:24:43 [ERROR] app.infrastructure.repositories.mongodb_public_holiday_repository:142 - find_with_filters(): Error finding public holidays with filters in database localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:24:48 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:24:48 [INFO] uvicorn.error:83 - _serve(): Started server process [31800]
2025-06-07 18:24:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:24:48 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:24:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:26:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62517 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 18:26:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62517 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 18:26:11 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 18:26:11 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 18:26:11 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 18:26:11 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 18:26:11 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 18:26:11 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 18:26:11 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 18:26:11 [ERROR] app.infrastructure.repositories.mongodb_public_holiday_repository:142 - find_with_filters(): Error finding public holidays with filters in database localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:26:11 [ERROR] app.infrastructure.services.public_holiday_service_impl:264 - list_public_holidays(): Error listing public holidays in organisation localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:26:11 [ERROR] app.api.controllers.public_holiday_controller:80 - list_public_holidays(): Error listing public holidays in organisation localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:26:11 [ERROR] app.api.routes.public_holiday_routes_v2:96 - list_public_holidays(): Error listing public holidays: 500: Internal server error
2025-06-07 18:26:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62517 - "GET /api/v2/public-holidays/ HTTP/1.1" 500
2025-06-07 18:26:11 [ERROR] app.infrastructure.repositories.mongodb_public_holiday_repository:142 - find_with_filters(): Error finding public holidays with filters in database localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:26:11 [ERROR] app.infrastructure.services.public_holiday_service_impl:264 - list_public_holidays(): Error listing public holidays in organisation localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:26:11 [ERROR] app.api.controllers.public_holiday_controller:80 - list_public_holidays(): Error listing public holidays in organisation localhost: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_localhost
2025-06-07 18:26:11 [ERROR] app.api.routes.public_holiday_routes_v2:96 - list_public_holidays(): Error listing public holidays: 500: Internal server error
2025-06-07 18:26:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62517 - "GET /api/v2/public-holidays/ HTTP/1.1" 500
2025-06-07 18:32:03 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 18:32:03 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 18:32:03 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 18:32:03 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 18:32:03 [INFO] uvicorn.error:93 - _serve(): Finished server process [31800]
2025-06-07 18:32:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:32:13 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:32:13 [INFO] uvicorn.error:83 - _serve(): Started server process [31923]
2025-06-07 18:32:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:32:13 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:32:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:33:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63139 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-07 18:33:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63140 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-07 18:33:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63139 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 18:33:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63139 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 18:33:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63139 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 18:33:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63140 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 18:33:25 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 18:33:25 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 18:33:25 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 18:33:25 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 18:33:25 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 18:33:25 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 18:33:25 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 18:33:26 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 18:33:26 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 18:33:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63142 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 18:33:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63142 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 18:33:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63219 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-07 18:33:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63220 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-07 18:33:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63219 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 18:33:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63219 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 18:33:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63220 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 18:33:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63219 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 18:33:39 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 18:33:39 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-07 18:33:39 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:272 - list_with_filters(): Error retrieving filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 18:33:39 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:291 - count_with_filters(): Error counting filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 18:33:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63222 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 18:33:40 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 18:33:40 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-07 18:33:40 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:272 - list_with_filters(): Error retrieving filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 18:33:40 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:291 - count_with_filters(): Error counting filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 18:33:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63222 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 18:33:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63224 - "OPTIONS /users?skip=0&limit=10 HTTP/1.1" 200
2025-06-07 18:33:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63226 - "OPTIONS /users?skip=0&limit=10 HTTP/1.1" 200
2025-06-07 18:33:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63228 - "GET /users?skip=0&limit=10 HTTP/1.1" 404
2025-06-07 18:33:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63228 - "GET /users?skip=0&limit=10 HTTP/1.1" 404
2025-06-07 18:37:00 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 18:37:00 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 18:37:00 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 18:37:00 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 18:37:00 [INFO] uvicorn.error:93 - _serve(): Finished server process [31923]
2025-06-07 18:37:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:37:10 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:37:10 [INFO] uvicorn.error:83 - _serve(): Started server process [31980]
2025-06-07 18:37:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:37:10 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:37:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:37:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:37:21 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:37:21 [INFO] uvicorn.error:83 - _serve(): Started server process [31997]
2025-06-07 18:37:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:37:21 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:37:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:37:39 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 18:37:39 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 18:37:39 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 18:37:39 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 18:37:39 [INFO] uvicorn.error:93 - _serve(): Finished server process [31997]
2025-06-07 18:37:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:37:51 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:37:51 [INFO] uvicorn.error:83 - _serve(): Started server process [32017]
2025-06-07 18:37:51 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:37:51 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:37:51 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:37:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:38:04 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 18:38:04 [INFO] uvicorn.error:83 - _serve(): Started server process [32041]
2025-06-07 18:38:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 18:38:04 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 18:38:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 18:38:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:38:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:38:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 18:38:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:42:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:43:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:43:34 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:43:34 [INFO] uvicorn.error:83 - _serve(): Started server process [32415]
2025-06-07 22:43:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:43:34 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:43:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:43:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:43:42 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:43:42 [INFO] uvicorn.error:83 - _serve(): Started server process [32436]
2025-06-07 22:43:42 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:43:42 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:43:42 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:43:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64605 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-07 22:43:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64607 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-07 22:43:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64605 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 22:43:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64605 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 22:43:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64607 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 22:43:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64605 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 22:43:49 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 22:43:49 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 22:43:49 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 22:43:49 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 22:43:49 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 22:43:49 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 22:43:49 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 22:43:49 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 22:43:49 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-07 22:43:49 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:272 - list_with_filters(): Error retrieving filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 22:43:49 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:291 - count_with_filters(): Error counting filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 22:43:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64609 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 22:43:49 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 22:43:49 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-07 22:43:49 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:272 - list_with_filters(): Error retrieving filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 22:43:49 [ERROR] app.infrastructure.repositories.mongodb_company_leave_repository:291 - count_with_filters(): Error counting filtered company leaves: MongoDBCompanyLeaveRepository._get_collection() missing 1 required positional argument: 'organisation_id'
2025-06-07 22:43:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64605 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 22:44:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64611 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-07 22:44:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64613 - "POST /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 22:44:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64611 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 22:44:23 [INFO] app.api.controllers.company_leave_controller:53 - create_company_leave(): Creating company leave with name: Sick Leave by localhost
2025-06-07 22:44:23 [INFO] app.infrastructure.services.company_leave_service_impl:115 - create_company_leave(): Creating company leave: Sick Leave in organisation: localhost
2025-06-07 22:44:23 [ERROR] app.infrastructure.services.company_leave_service_impl:148 - create_company_leave(): Error creating company leave Sick Leave in organisation localhost: MongoDBCompanyLeaveRepository.save() takes 2 positional arguments but 3 were given
2025-06-07 22:44:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64613 - "POST /api/v2/company-leaves/ HTTP/1.1" 500
2025-06-07 22:44:23 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/routes/company_leave_routes_v2.py", line 42, in create_company_leave
    return await controller.create_company_leave(request, current_user)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/controllers/company_leave_controller.py", line 54, in create_company_leave
    return await self.service.create_company_leave(request, current_user)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/infrastructure/services/company_leave_service_impl.py", line 137, in create_company_leave
    success = await self.repository.save(company_leave, current_user.hostname)
                    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: MongoDBCompanyLeaveRepository.save() takes 2 positional arguments but 3 were given
2025-06-07 22:45:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 22:45:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 22:45:59 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 22:45:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 22:45:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [32436]
2025-06-07 22:46:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:46:14 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:46:14 [INFO] uvicorn.error:83 - _serve(): Started server process [32481]
2025-06-07 22:46:14 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:46:14 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:46:14 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:46:20 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:46:25 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:46:25 [INFO] uvicorn.error:83 - _serve(): Started server process [32503]
2025-06-07 22:46:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:46:25 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:46:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:46:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:46:35 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:46:35 [INFO] uvicorn.error:83 - _serve(): Started server process [32516]
2025-06-07 22:46:35 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:46:35 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:46:35 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:46:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:46:45 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:46:45 [INFO] uvicorn.error:83 - _serve(): Started server process [32529]
2025-06-07 22:46:45 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:46:45 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:46:45 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:46:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:46:56 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:46:56 [INFO] uvicorn.error:83 - _serve(): Started server process [32542]
2025-06-07 22:46:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:46:56 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:46:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:47:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:47:05 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:47:05 [INFO] uvicorn.error:83 - _serve(): Started server process [32556]
2025-06-07 22:47:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:47:05 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:47:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:47:07 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 22:47:07 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 22:47:07 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 22:47:07 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 22:47:08 [INFO] uvicorn.error:93 - _serve(): Finished server process [32556]
2025-06-07 22:47:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:47:21 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:47:21 [INFO] uvicorn.error:83 - _serve(): Started server process [32570]
2025-06-07 22:47:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:47:21 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:47:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:47:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:47:30 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:47:30 [INFO] uvicorn.error:83 - _serve(): Started server process [32588]
2025-06-07 22:47:30 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:47:30 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:47:30 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:47:34 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:47:40 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:47:40 [INFO] uvicorn.error:83 - _serve(): Started server process [32601]
2025-06-07 22:47:40 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:47:40 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:47:40 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:47:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65080 - "POST /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 22:47:44 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 22:47:44 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 22:47:44 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 22:47:44 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 22:47:44 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 22:47:44 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 22:47:44 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 22:47:44 [INFO] app.api.controllers.company_leave_controller:53 - create_company_leave(): Creating company leave with name: Sick Leave by localhost
2025-06-07 22:47:44 [INFO] app.infrastructure.services.company_leave_service_impl:115 - create_company_leave(): Creating company leave: Sick Leave in organisation: localhost
2025-06-07 22:47:45 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 22:47:45 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:91 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 22:47:45 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:131 - save(): Saved company leave: 15478b65-2c69-4e5a-839b-51166de74c65
2025-06-07 22:47:45 [INFO] app.infrastructure.services.company_leave_service_impl:144 - create_company_leave(): Successfully created company leave: 15478b65-2c69-4e5a-839b-51166de74c65
2025-06-07 22:47:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65082 - "POST /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 22:47:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65082 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 22:47:45 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 22:47:45 [ERROR] app.infrastructure.services.company_leave_service_impl:312 - list_company_leaves(): Error listing company leaves in organisation unknown: MongoDBCompanyLeaveRepository.list_with_filters() missing 1 required positional argument: 'hostname'
2025-06-07 22:47:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65082 - "GET /api/v2/company-leaves/ HTTP/1.1" 500
2025-06-07 22:47:45 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/routes/company_leave_routes_v2.py", line 57, in list_company_leaves
    return await controller.list_company_leaves(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<8 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/controllers/company_leave_controller.py", line 63, in list_company_leaves
    return await self.service.list_company_leaves(filters, current_user)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/infrastructure/services/company_leave_service_impl.py", line 290, in list_company_leaves
    leaves = await self.repository.list_with_filters(filters)
                   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
TypeError: MongoDBCompanyLeaveRepository.list_with_filters() missing 1 required positional argument: 'hostname'
2025-06-07 22:48:32 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 22:48:33 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 22:48:33 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 22:48:33 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 22:48:33 [INFO] uvicorn.error:93 - _serve(): Finished server process [32601]
2025-06-07 22:48:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:48:41 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:48:41 [INFO] uvicorn.error:83 - _serve(): Started server process [32633]
2025-06-07 22:48:41 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:48:41 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:48:41 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:49:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65289 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 22:49:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65289 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 22:49:04 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 22:49:04 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 22:49:04 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 22:49:04 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 22:49:04 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 22:49:04 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 22:49:04 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 22:49:04 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 22:49:04 [ERROR] app.infrastructure.services.company_leave_service_impl:312 - list_company_leaves(): Error listing company leaves in organisation unknown: 'NoneType' object has no attribute 'hostname'
2025-06-07 22:49:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65289 - "GET /api/v2/company-leaves/ HTTP/1.1" 500
2025-06-07 22:49:05 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/routes/company_leave_routes_v2.py", line 57, in list_company_leaves
    return await controller.list_company_leaves(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<8 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/controllers/company_leave_controller.py", line 63, in list_company_leaves
    return await self.service.list_company_leaves(filters, current_user)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/infrastructure/services/company_leave_service_impl.py", line 290, in list_company_leaves
    leaves = await self.repository.list_with_filters(filters, current_user.hostname)
                                                              ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'hostname'
2025-06-07 22:49:05 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 22:49:05 [ERROR] app.infrastructure.services.company_leave_service_impl:312 - list_company_leaves(): Error listing company leaves in organisation unknown: 'NoneType' object has no attribute 'hostname'
2025-06-07 22:49:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65293 - "GET /api/v2/company-leaves/ HTTP/1.1" 500
2025-06-07 22:49:05 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/routes/company_leave_routes_v2.py", line 57, in list_company_leaves
    return await controller.list_company_leaves(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<8 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/controllers/company_leave_controller.py", line 63, in list_company_leaves
    return await self.service.list_company_leaves(filters, current_user)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/infrastructure/services/company_leave_service_impl.py", line 290, in list_company_leaves
    leaves = await self.repository.list_with_filters(filters, current_user.hostname)
                                                              ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'hostname'
2025-06-07 22:49:46 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 22:49:46 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 22:49:46 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 22:49:46 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 22:49:46 [INFO] uvicorn.error:93 - _serve(): Finished server process [32633]
2025-06-07 22:49:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:49:56 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:49:56 [INFO] uvicorn.error:83 - _serve(): Started server process [32662]
2025-06-07 22:49:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:49:56 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:49:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:50:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:50:08 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:50:08 [INFO] uvicorn.error:83 - _serve(): Started server process [32680]
2025-06-07 22:50:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:50:08 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:50:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:50:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:50:19 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:50:19 [INFO] uvicorn.error:83 - _serve(): Started server process [32702]
2025-06-07 22:50:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:50:19 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:50:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:50:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:50:29 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:50:29 [INFO] uvicorn.error:83 - _serve(): Started server process [32715]
2025-06-07 22:50:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:50:29 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:50:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:50:33 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 22:50:33 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 22:50:33 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 22:50:33 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 22:50:33 [INFO] uvicorn.error:93 - _serve(): Finished server process [32715]
2025-06-07 22:50:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:50:42 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:50:42 [INFO] uvicorn.error:83 - _serve(): Started server process [32732]
2025-06-07 22:50:42 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:50:42 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:50:42 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:50:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:50:54 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:50:54 [INFO] uvicorn.error:83 - _serve(): Started server process [32745]
2025-06-07 22:50:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:50:54 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:50:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:50:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49338 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 22:50:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49338 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 22:50:54 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 22:50:54 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 22:50:54 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 22:50:54 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 22:50:54 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 22:50:54 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 22:50:54 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 22:50:54 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 22:50:54 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-07 22:50:58 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 22:50:58 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-07 22:50:58 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 22:50:58 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:91 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 22:50:58 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:264 - list_with_filters(): Retrieved 1 company leave documents from MongoDB with filters
2025-06-07 22:50:58 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:267 - list_with_filters(): Successfully converted 1 filtered documents to entities
2025-06-07 22:50:58 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:264 - list_with_filters(): Retrieved 1 company leave documents from MongoDB with filters
2025-06-07 22:50:58 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:267 - list_with_filters(): Successfully converted 1 filtered documents to entities
2025-06-07 22:52:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49646 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 22:52:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49646 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-07 22:52:12 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 22:52:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-07 22:52:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:264 - list_with_filters(): Retrieved 1 company leave documents from MongoDB with filters
2025-06-07 22:52:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:267 - list_with_filters(): Successfully converted 1 filtered documents to entities
2025-06-07 22:52:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49646 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 22:52:13 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-07 22:52:13 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-07 22:52:13 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:264 - list_with_filters(): Retrieved 1 company leave documents from MongoDB with filters
2025-06-07 22:52:13 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:267 - list_with_filters(): Successfully converted 1 filtered documents to entities
2025-06-07 22:52:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49646 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-07 22:52:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49686 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-07 22:52:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49688 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-07 22:52:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49686 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 22:52:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49686 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 22:52:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49686 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 22:52:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49688 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 22:52:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49690 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 22:52:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49690 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 22:52:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49743 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 22:52:51 [INFO] app.api.routes.public_holiday_routes_v2:58 - create_public_holiday(): Creating public holiday by superadmin in organisation localhost
2025-06-07 22:52:51 [INFO] app.api.controllers.public_holiday_controller:42 - create_public_holiday(): Creating public holiday in organisation: localhost
2025-06-07 22:52:51 [INFO] app.infrastructure.services.public_holiday_service_impl:61 - create_public_holiday(): Creating public holiday in organisation: localhost
2025-06-07 22:52:52 [ERROR] app.infrastructure.services.public_holiday_service_impl:93 - create_public_holiday(): Error creating public holiday in organisation localhost: 'EmailNotificationService' object has no attribute 'notify_holiday_created'
2025-06-07 22:52:52 [ERROR] app.api.controllers.public_holiday_controller:51 - create_public_holiday(): Error creating public holiday in organisation localhost: 'EmailNotificationService' object has no attribute 'notify_holiday_created'
2025-06-07 22:52:52 [ERROR] app.api.routes.public_holiday_routes_v2:67 - create_public_holiday(): Unexpected error creating public holiday: 500: Internal server error
2025-06-07 22:52:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49743 - "POST /api/v2/public-holidays/ HTTP/1.1" 500
2025-06-07 22:54:26 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 22:54:26 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 22:54:26 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 22:54:26 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 22:54:26 [INFO] uvicorn.error:93 - _serve(): Finished server process [32745]
2025-06-07 22:54:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:54:37 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:54:37 [INFO] uvicorn.error:83 - _serve(): Started server process [32788]
2025-06-07 22:54:37 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:54:37 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:54:37 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:54:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:54:48 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:54:48 [INFO] uvicorn.error:83 - _serve(): Started server process [32809]
2025-06-07 22:54:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:54:48 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:54:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:54:54 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:55:00 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:55:00 [INFO] uvicorn.error:83 - _serve(): Started server process [32831]
2025-06-07 22:55:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:55:00 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:55:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:55:10 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 22:55:11 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 22:55:11 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 22:55:11 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 22:55:11 [INFO] uvicorn.error:93 - _serve(): Finished server process [32831]
2025-06-07 22:55:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:55:25 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:55:25 [INFO] uvicorn.error:83 - _serve(): Started server process [32861]
2025-06-07 22:55:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:55:25 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:55:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 22:55:26 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 22:55:26 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 22:55:26 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 22:55:26 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 22:55:26 [INFO] uvicorn.error:93 - _serve(): Finished server process [32861]
2025-06-07 22:55:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 22:55:36 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 22:55:36 [INFO] uvicorn.error:83 - _serve(): Started server process [32877]
2025-06-07 22:55:36 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 22:55:36 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 22:55:36 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 23:32:33 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 23:32:33 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 23:32:33 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 23:32:33 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 23:32:33 [INFO] uvicorn.error:93 - _serve(): Finished server process [32877]
2025-06-07 23:32:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 23:32:44 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 23:32:44 [INFO] uvicorn.error:83 - _serve(): Started server process [33097]
2025-06-07 23:32:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 23:32:44 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 23:32:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 23:37:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51005 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 23:37:52 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 23:37:52 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 23:37:52 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 23:37:52 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 23:37:53 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 23:37:53 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 23:37:53 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 23:37:53 [INFO] app.api.routes.public_holiday_routes_v2:58 - create_public_holiday(): Creating public holiday by superadmin in organisation localhost
2025-06-07 23:37:53 [INFO] app.api.controllers.public_holiday_controller:42 - create_public_holiday(): Creating public holiday in organisation: localhost
2025-06-07 23:37:53 [INFO] app.infrastructure.services.public_holiday_service_impl:61 - create_public_holiday(): Creating public holiday in organisation: localhost
2025-06-07 23:37:53 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 23:37:53 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 23:37:53 [INFO] app.infrastructure.services.notification_service:892 - _send_email(): EMAIL TO: admin@pms.com
2025-06-07 23:37:53 [INFO] app.infrastructure.services.notification_service:893 - _send_email(): SUBJECT: New Public Holiday Created
2025-06-07 23:37:53 [INFO] app.infrastructure.services.notification_service:894 - _send_email(): BODY: 
            A new public holiday has been created in the PMS system:
            
            Holiday Name: Diwali
            Date: 2025-10-24
            Description: N/A
            
            Please update your calendars accordingly.
            
            Best regards,
            HR Team
            
2025-06-07 23:37:53 [INFO] app.infrastructure.services.notification_service:810 - notify_holiday_created(): Holiday created notification sent for: Diwali
2025-06-07 23:37:53 [ERROR] app.infrastructure.services.public_holiday_service_impl:93 - create_public_holiday(): Error creating public holiday in organisation localhost: 'PublicHoliday' object has no attribute 'holiday_id'
2025-06-07 23:37:53 [ERROR] app.api.controllers.public_holiday_controller:51 - create_public_holiday(): Error creating public holiday in organisation localhost: 'PublicHoliday' object has no attribute 'holiday_id'
2025-06-07 23:37:53 [ERROR] app.api.routes.public_holiday_routes_v2:67 - create_public_holiday(): Unexpected error creating public holiday: 500: Internal server error
2025-06-07 23:37:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51007 - "POST /api/v2/public-holidays/ HTTP/1.1" 500
2025-06-07 23:38:47 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 23:38:47 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 23:38:47 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 23:38:47 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 23:38:47 [INFO] uvicorn.error:93 - _serve(): Finished server process [33097]
2025-06-07 23:38:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 23:38:59 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 23:38:59 [INFO] uvicorn.error:83 - _serve(): Started server process [33169]
2025-06-07 23:38:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 23:38:59 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 23:38:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 23:39:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 23:39:09 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 23:39:09 [INFO] uvicorn.error:83 - _serve(): Started server process [33179]
2025-06-07 23:39:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 23:39:09 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 23:39:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 23:39:56 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 23:39:56 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 23:39:56 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 23:39:56 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 23:39:56 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 23:39:56 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 23:39:56 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 23:39:56 [INFO] app.api.routes.public_holiday_routes_v2:58 - create_public_holiday(): Creating public holiday by superadmin in organisation localhost
2025-06-07 23:39:56 [INFO] app.api.controllers.public_holiday_controller:42 - create_public_holiday(): Creating public holiday in organisation: localhost
2025-06-07 23:39:56 [INFO] app.infrastructure.services.public_holiday_service_impl:61 - create_public_holiday(): Creating public holiday in organisation: localhost
2025-06-07 23:39:57 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 23:39:57 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 23:39:57 [INFO] app.infrastructure.services.notification_service:892 - _send_email(): EMAIL TO: admin@pms.com
2025-06-07 23:39:57 [INFO] app.infrastructure.services.notification_service:893 - _send_email(): SUBJECT: New Public Holiday Created
2025-06-07 23:39:57 [INFO] app.infrastructure.services.notification_service:894 - _send_email(): BODY: 
            A new public holiday has been created in the PMS system:
            
            Holiday Name: Diwala
            Date: 2025-10-02
            Description: N/A
            
            Please update your calendars accordingly.
            
            Best regards,
            HR Team
            
2025-06-07 23:39:57 [INFO] app.infrastructure.services.notification_service:810 - notify_holiday_created(): Holiday created notification sent for: Diwala
2025-06-07 23:39:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51336 - "POST /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 23:39:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51336 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-07 23:39:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51351 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 23:39:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51351 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 23:40:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51418 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 23:40:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51418 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 23:40:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51418 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 23:40:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51418 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 23:42:05 [INFO] app.api.routes.public_holiday_routes_v2:58 - create_public_holiday(): Creating public holiday by superadmin in organisation localhost
2025-06-07 23:42:05 [INFO] app.api.controllers.public_holiday_controller:42 - create_public_holiday(): Creating public holiday in organisation: localhost
2025-06-07 23:42:05 [INFO] app.infrastructure.services.public_holiday_service_impl:61 - create_public_holiday(): Creating public holiday in organisation: localhost
2025-06-07 23:42:57 [INFO] app.infrastructure.services.notification_service:892 - _send_email(): EMAIL TO: admin@pms.com
2025-06-07 23:42:57 [INFO] app.infrastructure.services.notification_service:893 - _send_email(): SUBJECT: New Public Holiday Created
2025-06-07 23:42:57 [INFO] app.infrastructure.services.notification_service:894 - _send_email(): BODY: 
            A new public holiday has been created in the PMS system:
            
            Holiday Name: Holi
            Date: 2025-06-13
            Description: N/A
            
            Please update your calendars accordingly.
            
            Best regards,
            HR Team
            
2025-06-07 23:42:57 [INFO] app.infrastructure.services.notification_service:810 - notify_holiday_created(): Holiday created notification sent for: Holi
2025-06-07 23:43:33 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 23:43:33 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 23:43:33 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 23:43:33 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 23:43:33 [INFO] uvicorn.error:93 - _serve(): Finished server process [33179]
2025-06-07 23:43:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 23:43:47 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 23:43:47 [INFO] uvicorn.error:83 - _serve(): Started server process [33239]
2025-06-07 23:43:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 23:43:47 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 23:43:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 23:43:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 23:43:58 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 23:43:58 [INFO] uvicorn.error:83 - _serve(): Started server process [33257]
2025-06-07 23:43:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 23:43:58 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 23:43:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 23:44:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 23:44:06 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 23:44:06 [INFO] uvicorn.error:83 - _serve(): Started server process [33271]
2025-06-07 23:44:06 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 23:44:06 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 23:44:06 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 23:44:06 [INFO] app.config.dependency_container:76 - initialize(): Initializing dependency container...
2025-06-07 23:44:06 [INFO] app.config.dependency_container:101 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-07 23:44:06 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-07 23:44:06 [INFO] app.config.dependency_container:192 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-07 23:44:06 [INFO] app.config.dependency_container:262 - _setup_services(): Services initialized
2025-06-07 23:44:06 [INFO] app.config.dependency_container:271 - _setup_controllers(): Controllers setup deferred
2025-06-07 23:44:06 [INFO] app.config.dependency_container:85 - initialize(): Dependency container initialized successfully
2025-06-07 23:44:07 [INFO] app.api.routes.public_holiday_routes_v2:58 - create_public_holiday(): Creating public holiday by superadmin in organisation localhost
2025-06-07 23:44:07 [INFO] app.api.controllers.public_holiday_controller:42 - create_public_holiday(): Creating public holiday in organisation: localhost
2025-06-07 23:44:07 [INFO] app.infrastructure.services.public_holiday_service_impl:61 - create_public_holiday(): Creating public holiday in organisation: localhost
2025-06-07 23:44:07 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 23:44:07 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-07 23:44:13 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:144 - save(): Saved new public holiday: 924c9aca-e3f7-41de-acec-15c296340287
2025-06-07 23:44:13 [INFO] app.infrastructure.services.notification_service:892 - _send_email(): EMAIL TO: admin@pms.com
2025-06-07 23:44:13 [INFO] app.infrastructure.services.notification_service:893 - _send_email(): SUBJECT: New Public Holiday Created
2025-06-07 23:44:13 [INFO] app.infrastructure.services.notification_service:894 - _send_email(): BODY: 
            A new public holiday has been created in the PMS system:
            
            Holiday Name: Holi
            Date: 2025-06-13
            Description: N/A
            
            Please update your calendars accordingly.
            
            Best regards,
            HR Team
            
2025-06-07 23:44:13 [INFO] app.infrastructure.services.notification_service:810 - notify_holiday_created(): Holiday created notification sent for: Holi
2025-06-07 23:44:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51937 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 23:44:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51937 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-07 23:44:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51937 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 23:44:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51937 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-07 23:49:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52658 - "OPTIONS /api/v2/taxation/all-taxation HTTP/1.1" 200
2025-06-07 23:49:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52660 - "OPTIONS /api/v2/taxation/all-taxation HTTP/1.1" 200
2025-06-07 23:49:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52662 - "GET /api/v2/taxation/all-taxation HTTP/1.1" 404
2025-06-07 23:49:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52662 - "GET /api/v2/taxation/all-taxation HTTP/1.1" 404
2025-06-07 23:50:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52687 - "OPTIONS /users?skip=0&limit=10 HTTP/1.1" 200
2025-06-07 23:50:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52688 - "OPTIONS /users?skip=0&limit=10 HTTP/1.1" 200
2025-06-07 23:50:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52687 - "GET /users?skip=0&limit=10 HTTP/1.1" 404
2025-06-07 23:50:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52688 - "GET /users?skip=0&limit=10 HTTP/1.1" 404
2025-06-07 23:50:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52690 - "OPTIONS /lwp HTTP/1.1" 200
2025-06-07 23:50:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52738 - "OPTIONS /lwp HTTP/1.1" 200
2025-06-07 23:50:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52690 - "GET /lwp HTTP/1.1" 404
2025-06-07 23:50:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52690 - "GET /lwp HTTP/1.1" 404
2025-06-07 23:50:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52762 - "GET /users?skip=0&limit=10 HTTP/1.1" 404
2025-06-07 23:50:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52762 - "GET /users?skip=0&limit=10 HTTP/1.1" 404
2025-06-07 23:51:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52864 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-07 23:51:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52866 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-07 23:51:09 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 23:51:09 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 23:51:09 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 23:51:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52864 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-07 23:51:09 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 23:51:09 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 23:51:09 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 23:51:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52864 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-07 23:51:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52927 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-07 23:51:38 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: emp003 @ localhost
2025-06-07 23:51:39 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-07 23:51:39 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-07 23:51:39 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: emp003
2025-06-07 23:51:39 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$gHiCgdCJbSRnoeGtzPMs4./cpUqt.p3NlXpYRZE8W5/LrWyou4R42
2025-06-07 23:51:39 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-07 23:51:40 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-07 23:51:40 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: EMP003
2025-06-07 23:51:40 [INFO] app.api.controllers.auth_controller:165 - login(): User emp003 logged in successfully
2025-06-07 23:51:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52927 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-07 23:51:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52927 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-07 23:51:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52929 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-07 23:51:40 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 23:51:40 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 23:51:40 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 23:51:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52927 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-07 23:51:40 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 23:51:40 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 23:51:40 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-07 23:51:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52929 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-07 23:51:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52929 - "OPTIONS /api/v2/attendance/checkin HTTP/1.1" 200
2025-06-07 23:51:43 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-07 23:51:43 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-07 23:51:43 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-07 23:51:43 [WARNING] app.api.routes.attendance_routes_v2:42 - get_attendance_controller(): Could not get attendance controller from container: 'attendance'
2025-06-07 23:51:43 [WARNING] app.api.controllers.attendance_controller:62 - __init__(): AttendanceController initialized without all required use cases
2025-06-07 23:51:43 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-07 23:51:43 [INFO] app.api.controllers.attendance_controller:79 - checkin(): Processing check-in for employee: EMP003
2025-06-07 23:51:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52927 - "POST /api/v2/attendance/checkin HTTP/1.1" 200
2025-06-07 23:56:43 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-07 23:56:43 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-07 23:56:43 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-07 23:56:43 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-07 23:56:43 [INFO] uvicorn.error:93 - _serve(): Finished server process [33271]
2025-06-07 23:56:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 23:56:56 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-07 23:56:56 [INFO] uvicorn.error:83 - _serve(): Started server process [33409]
2025-06-07 23:56:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-07 23:56:56 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-07 23:56:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-07 23:57:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-07 23:57:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:04:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:04:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:05:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:05:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:05:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:07:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:07:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:07:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:08:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:11:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:12:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:12:03 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 00:12:03 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 00:12:03 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 00:12:03 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 00:12:03 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 00:12:03 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 00:12:03 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 00:12:03 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 00:17:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:17:11 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 00:17:11 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 00:17:11 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 00:17:11 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 00:17:11 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 00:17:11 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 00:17:11 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 00:17:11 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 00:24:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:24:35 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 00:24:35 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 00:24:35 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 00:24:35 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 00:24:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:24:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:24:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:24:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:24:35 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:24:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:24:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:24:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:24:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:24:36 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:24:36 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 00:24:36 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 00:24:36 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 00:24:36 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 00:24:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:24:44 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 00:24:44 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 00:24:44 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 00:24:44 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 00:24:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:24:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:24:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:24:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:24:44 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:24:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:24:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:24:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:24:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:24:44 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:24:44 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 00:24:44 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 00:24:44 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 00:24:44 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 00:24:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:24:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:24:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:24:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:24:44 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:25:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:25:16 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 00:25:16 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 00:25:16 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 00:25:16 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 00:25:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:25:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:25:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:25:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:25:16 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:25:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:25:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:25:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:25:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:25:16 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:25:16 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 00:25:16 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 00:25:16 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 00:25:16 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 00:25:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:25:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:25:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:25:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:25:16 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:27:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:27:37 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 00:27:37 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 00:27:37 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 00:27:37 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 00:27:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:27:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:27:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:27:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:27:37 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:27:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:27:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:27:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:27:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:27:37 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:27:37 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 00:27:37 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 00:27:37 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 00:27:37 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 00:27:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:27:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:27:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:27:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:27:37 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:27:37 [ERROR] app.infrastructure.services.enhanced_event_publisher:107 - save_event(): Error saving event to store: MongoDBConnector.get_database() missing 1 required positional argument: 'database_name'
2025-06-08 00:27:37 [ERROR] app.infrastructure.services.enhanced_event_publisher:316 - publish(): Failed to save event bd83c8e8-b38b-4374-a9fb-1b9a98c74c36 to store
2025-06-08 00:27:37 [ERROR] app.infrastructure.services.enhanced_event_publisher:107 - save_event(): Error saving event to store: MongoDBConnector.get_database() missing 1 required positional argument: 'database_name'
2025-06-08 00:27:37 [ERROR] app.infrastructure.services.enhanced_event_publisher:316 - publish(): Failed to save event 214fca9d-5566-489c-8513-c4c77f01db30 to store
2025-06-08 00:27:37 [ERROR] app.infrastructure.services.enhanced_event_publisher:144 - save_events_batch(): Error saving event batch to store: MongoDBConnector.get_database() missing 1 required positional argument: 'database_name'
2025-06-08 00:27:37 [ERROR] app.infrastructure.services.enhanced_event_publisher:354 - publish_batch(): Event bd83c8e8-b38b-4374-a9fb-1b9a98c74c36 was not saved to store
2025-06-08 00:27:37 [ERROR] app.infrastructure.services.enhanced_event_publisher:354 - publish_batch(): Event 214fca9d-5566-489c-8513-c4c77f01db30 was not saved to store
2025-06-08 00:27:37 [INFO] app.infrastructure.services.enhanced_event_publisher:356 - publish_batch(): Successfully published batch of 2 events
2025-06-08 00:27:54 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:27:54 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 00:27:54 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 00:27:54 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 00:27:54 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 00:27:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:27:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:27:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:27:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:27:54 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:27:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:27:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:27:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:27:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:27:54 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:27:54 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 00:27:54 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 00:27:54 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 00:27:54 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 00:27:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:27:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:27:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:27:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:27:54 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:27:54 [ERROR] app.infrastructure.services.enhanced_event_publisher:107 - save_event(): Error saving event to store: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_global_database
2025-06-08 00:27:54 [ERROR] app.infrastructure.services.enhanced_event_publisher:316 - publish(): Failed to save event 205ed1aa-4ca4-424d-ba46-a77d3937bb3d to store
2025-06-08 00:27:54 [ERROR] app.infrastructure.services.enhanced_event_publisher:107 - save_event(): Error saving event to store: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_global_database
2025-06-08 00:27:54 [ERROR] app.infrastructure.services.enhanced_event_publisher:316 - publish(): Failed to save event 4fbdc1ad-baf9-4fe5-8ec7-2c96a0748e03 to store
2025-06-08 00:27:54 [ERROR] app.infrastructure.services.enhanced_event_publisher:144 - save_events_batch(): Error saving event batch to store: Not connected to MongoDB. Call connect() first. Connection string: None and database_name: pms_global_database
2025-06-08 00:27:54 [ERROR] app.infrastructure.services.enhanced_event_publisher:354 - publish_batch(): Event 205ed1aa-4ca4-424d-ba46-a77d3937bb3d was not saved to store
2025-06-08 00:27:54 [ERROR] app.infrastructure.services.enhanced_event_publisher:354 - publish_batch(): Event 4fbdc1ad-baf9-4fe5-8ec7-2c96a0748e03 was not saved to store
2025-06-08 00:27:54 [INFO] app.infrastructure.services.enhanced_event_publisher:356 - publish_batch(): Successfully published batch of 2 events
2025-06-08 00:38:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:38:50 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 00:38:50 [INFO] uvicorn.error:83 - _serve(): Started server process [34376]
2025-06-08 00:38:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 00:38:50 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 00:38:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 00:41:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57628 - "OPTIONS /users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 00:41:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57629 - "OPTIONS /users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 00:41:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57632 - "GET /users?skip=0&limit=10 HTTP/1.1" 404
2025-06-08 00:41:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57632 - "GET /users?skip=0&limit=10 HTTP/1.1" 404
2025-06-08 00:42:14 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 00:42:14 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 00:42:14 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-08 00:42:14 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 00:42:14 [INFO] uvicorn.error:93 - _serve(): Finished server process [34376]
2025-06-08 00:42:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:42:35 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 00:42:35 [INFO] uvicorn.error:83 - _serve(): Started server process [34430]
2025-06-08 00:42:35 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 00:42:35 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 00:42:35 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 00:42:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:42:54 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 00:42:54 [INFO] uvicorn.error:83 - _serve(): Started server process [34462]
2025-06-08 00:42:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 00:42:54 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 00:42:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 00:43:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:43:12 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 00:43:12 [INFO] uvicorn.error:83 - _serve(): Started server process [34488]
2025-06-08 00:43:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 00:43:12 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 00:43:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 00:43:15 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 00:43:15 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 00:43:15 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-08 00:43:15 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 00:43:15 [INFO] uvicorn.error:93 - _serve(): Finished server process [34488]
2025-06-08 00:43:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:43:35 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 00:43:35 [INFO] uvicorn.error:83 - _serve(): Started server process [34509]
2025-06-08 00:43:35 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 00:43:35 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 00:43:35 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 00:43:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:43:50 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 00:43:50 [INFO] uvicorn.error:83 - _serve(): Started server process [34531]
2025-06-08 00:43:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 00:43:50 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 00:43:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 00:43:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:44:05 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 00:44:05 [INFO] uvicorn.error:83 - _serve(): Started server process [34546]
2025-06-08 00:44:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 00:44:05 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 00:44:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 00:44:07 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 00:44:08 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 00:44:08 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-08 00:44:08 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 00:44:08 [INFO] uvicorn.error:93 - _serve(): Finished server process [34546]
2025-06-08 00:44:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:44:20 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 00:44:20 [INFO] uvicorn.error:83 - _serve(): Started server process [34563]
2025-06-08 00:44:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 00:44:20 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 00:44:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 00:44:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:44:51 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 00:44:51 [INFO] uvicorn.error:83 - _serve(): Started server process [34577]
2025-06-08 00:44:51 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 00:44:51 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 00:44:51 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 00:44:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58396 - "GET /users?skip=0&limit=10 HTTP/1.1" 404
2025-06-08 00:46:43 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 00:46:43 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 00:46:43 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-08 00:46:43 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 00:46:43 [INFO] uvicorn.error:93 - _serve(): Finished server process [34577]
2025-06-08 00:46:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:46:53 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 00:46:53 [INFO] uvicorn.error:83 - _serve(): Started server process [34650]
2025-06-08 00:46:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 00:46:53 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 00:46:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 00:47:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58815 - "GET /users?skip=0&limit=10 HTTP/1.1" 404
2025-06-08 00:47:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58815 - "GET /users?skip=0&limit=10 HTTP/1.1" 404
2025-06-08 00:48:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59102 - "OPTIONS /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 00:48:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59103 - "OPTIONS /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 00:48:56 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-08 00:48:56 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-08 00:48:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59105 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 401
2025-06-08 00:48:56 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-08 00:48:56 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-08 00:48:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59103 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 401
2025-06-08 00:49:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59116 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-08 00:49:08 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-08 00:49:09 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 00:49:09 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-08 00:49:09 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-08 00:49:09 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-08 00:49:09 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-08 00:49:10 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-08 00:49:10 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-08 00:49:10 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-08 00:49:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59116 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-08 00:49:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59116 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 00:49:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59118 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 00:49:10 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 00:49:10 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 00:49:10 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 00:49:10 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 00:49:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:49:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:49:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:49:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:49:10 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:49:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:49:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:49:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:49:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:49:10 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:49:10 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 00:49:10 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 00:49:10 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 00:49:10 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 00:49:11 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 00:49:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 00:49:11 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 00:49:11 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 00:49:11 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 00:49:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59131 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 00:49:11 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 00:49:11 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 00:49:11 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 00:49:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59131 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 00:49:24 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 00:49:24 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:49:24 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:49:24 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:49:24 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 00:49:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59205 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 500
2025-06-08 00:49:24 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 00:49:24 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:49:24 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:49:24 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:49:24 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 00:49:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59205 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 500
2025-06-08 00:55:04 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 00:55:04 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 00:55:04 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-08 00:55:04 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 00:55:04 [INFO] uvicorn.error:93 - _serve(): Finished server process [34650]
2025-06-08 00:55:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 00:55:13 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 00:55:13 [INFO] uvicorn.error:83 - _serve(): Started server process [34780]
2025-06-08 00:55:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 00:55:13 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 00:55:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 00:55:27 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 00:55:27 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 00:55:27 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 00:55:27 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 00:55:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:55:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:55:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:55:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:55:27 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:55:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 00:55:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 00:55:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 00:55:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 00:55:27 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 00:55:27 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 00:55:27 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 00:55:27 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 00:55:27 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 00:55:28 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 00:55:28 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 00:55:28 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 00:55:28 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:55:28 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:55:28 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:55:28 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 00:55:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59966 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 500
2025-06-08 00:55:28 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 00:55:28 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:55:28 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:55:28 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:55:28 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 00:55:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59966 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 500
2025-06-08 00:56:11 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 00:56:11 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:56:11 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:56:11 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:56:11 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 00:56:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60153 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 500
2025-06-08 00:56:11 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 00:56:11 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:56:11 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:56:11 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 00:56:11 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 00:56:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60153 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 500
2025-06-08 01:01:40 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 01:01:40 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 01:01:40 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-08 01:01:40 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 01:01:40 [INFO] uvicorn.error:93 - _serve(): Finished server process [34780]
2025-06-08 01:01:47 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 01:01:54 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 01:01:54 [INFO] uvicorn.error:83 - _serve(): Started server process [34839]
2025-06-08 01:01:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 01:01:54 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 01:01:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 01:01:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 01:02:05 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 01:02:05 [INFO] uvicorn.error:83 - _serve(): Started server process [34864]
2025-06-08 01:02:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 01:02:05 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 01:02:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 01:02:16 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 01:02:16 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 01:02:16 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-08 01:02:16 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 01:02:16 [INFO] uvicorn.error:93 - _serve(): Finished server process [34864]
2025-06-08 01:02:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 01:02:29 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 01:02:29 [INFO] uvicorn.error:83 - _serve(): Started server process [34894]
2025-06-08 01:02:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 01:02:29 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 01:02:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 01:02:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 01:02:44 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 01:02:44 [INFO] uvicorn.error:83 - _serve(): Started server process [34914]
2025-06-08 01:02:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 01:02:44 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 01:02:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 01:02:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 01:02:56 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 01:02:56 [INFO] uvicorn.error:83 - _serve(): Started server process [34929]
2025-06-08 01:02:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 01:02:56 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 01:02:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 01:03:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 01:03:15 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 01:03:15 [INFO] uvicorn.error:83 - _serve(): Started server process [34938]
2025-06-08 01:03:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 01:03:15 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 01:03:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 01:05:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 01:05:21 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 01:05:21 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-08 01:05:21 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 01:05:21 [INFO] uvicorn.error:93 - _serve(): Finished server process [34938]
2025-06-08 01:05:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 01:05:32 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 01:05:32 [INFO] uvicorn.error:83 - _serve(): Started server process [34975]
2025-06-08 01:05:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 01:05:32 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 01:05:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 01:05:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61220 - "OPTIONS /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 01:05:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61221 - "OPTIONS /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 01:05:37 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 01:05:37 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 01:05:37 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 01:05:37 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 01:05:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 01:05:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 01:05:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 01:05:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 01:05:38 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 01:05:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 01:05:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 01:05:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 01:05:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 01:05:38 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 01:05:38 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 01:05:38 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 01:05:38 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 01:05:38 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 01:05:38 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 01:05:38 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 01:05:38 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 01:05:38 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:05:38 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:05:38 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:05:39 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 01:05:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61220 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 500
2025-06-08 01:05:39 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 01:05:39 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:05:39 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:05:39 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:05:39 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 01:05:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61220 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 500
2025-06-08 01:11:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62050 - "OPTIONS /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 01:11:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62052 - "OPTIONS /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 01:11:43 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 01:11:43 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:11:43 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:11:43 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:11:43 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 01:11:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62050 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 500
2025-06-08 01:11:43 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 01:11:43 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:11:43 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:11:43 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:11:43 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 01:11:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62050 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 500
2025-06-08 01:12:01 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 01:12:01 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:12:01 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:12:01 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:12:01 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 01:12:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62054 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 500
2025-06-08 01:12:01 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 01:12:01 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:12:01 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:12:01 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:12:01 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 01:12:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62128 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 500
2025-06-08 01:21:36 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 01:21:36 [INFO] uvicorn.error:305 - _wait_tasks_to_complete(): Waiting for background tasks to complete. (CTRL+C to force quit)
2025-06-08 01:21:36 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 01:21:36 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:21:36 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:21:36 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:21:36 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 01:21:36 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 01:21:36 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:21:36 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:21:36 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:21:36 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 01:21:36 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 01:21:36 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-08 01:21:36 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 01:21:36 [INFO] uvicorn.error:93 - _serve(): Finished server process [34975]
2025-06-08 01:21:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 01:21:48 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 01:21:48 [INFO] uvicorn.error:83 - _serve(): Started server process [35201]
2025-06-08 01:21:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 01:21:48 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 01:21:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 01:21:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62678 - "OPTIONS /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 01:21:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62679 - "OPTIONS /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 01:21:53 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 01:21:53 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 01:21:54 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 01:21:54 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 01:21:54 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 01:21:54 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 01:21:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 01:21:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 01:21:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 01:21:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 01:21:54 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 01:21:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 01:21:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 01:21:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 01:21:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 01:21:54 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 01:21:54 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 01:21:54 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 01:21:54 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 01:21:54 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 01:22:03 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 01:22:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 01:22:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 01:22:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 01:22:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 01:22:14 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 01:22:14 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 01:22:14 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:22:14 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 01:22:14 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 01:22:14 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:22:14 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 01:22:14 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:22:14 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:22:14 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:22:14 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 01:22:14 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 01:22:14 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:22:14 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:22:14 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:22:14 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 01:25:00 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 01:25:00 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 01:25:09 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 01:25:18 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:26:26 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 01:26:26 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 01:27:36 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 01:28:00 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:30:17 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Cannot use ended session
2025-06-08 01:30:17 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Cannot use ended session
2025-06-08 01:30:17 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Cannot use ended session
2025-06-08 01:30:34 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 01:30:34 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 01:30:34 [INFO] uvicorn.error:305 - _wait_tasks_to_complete(): Waiting for background tasks to complete. (CTRL+C to force quit)
2025-06-08 01:30:40 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 01:30:41 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:30:41 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:30:41 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:30:41 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 01:30:41 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 01:30:41 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-08 01:30:41 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 01:30:41 [INFO] uvicorn.error:93 - _serve(): Finished server process [35201]
2025-06-08 01:32:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 01:32:31 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 01:32:31 [INFO] uvicorn.error:83 - _serve(): Started server process [35399]
2025-06-08 01:32:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 01:32:31 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 01:32:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 01:34:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63345 - "OPTIONS /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 01:34:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63346 - "OPTIONS /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 01:34:39 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 01:34:39 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 01:34:39 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 01:34:39 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 01:34:39 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 01:34:39 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 01:34:39 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 01:34:39 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 01:34:39 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 01:34:39 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 01:34:39 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 01:34:39 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 01:34:39 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 01:34:39 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 01:34:39 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 01:34:39 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 01:34:39 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 01:34:39 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 01:34:39 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 01:34:39 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 01:34:39 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 01:34:39 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 01:34:39 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 01:34:40 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 01:34:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 01:34:40 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 01:34:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:37:29 [ERROR] app.infrastructure.repositories.mongodb_user_repository:336 - _document_to_user(): Error creating User entity from document: 'employee' is not a valid UserRole
2025-06-08 01:39:37 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:39:37 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:39:37 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Failed to reconstruct User entity: 'employee' is not a valid UserRole
2025-06-08 01:39:37 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 01:39:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63345 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 500
2025-06-08 01:39:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 01:39:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 01:39:37 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 01:39:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:39:59 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 01:39:59 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 01:39:59 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 01:39:59 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 01:40:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 01:40:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:40:02 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 01:40:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:40:02 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 01:40:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:40:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 01:40:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:40:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 01:40:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:40:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 01:40:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 01:40:13 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 01:40:13 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:40:13 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 01:40:13 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:40:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63682 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 01:40:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 01:40:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 01:40:13 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 01:40:13 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:40:13 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 01:40:13 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:40:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63684 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 01:40:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63684 - "OPTIONS /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 01:40:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63682 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 404
2025-06-08 01:40:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63682 - "OPTIONS /api/v2/employee-leave/lwp/EMP001/6/2025 HTTP/1.1" 200
2025-06-08 01:40:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63684 - "OPTIONS /api/v2/employee-leave/lwp/EMP003/6/2025 HTTP/1.1" 200
2025-06-08 01:40:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63682 - "GET /api/v2/employee-leave/lwp/EMP003/6/2025 HTTP/1.1" 404
2025-06-08 01:40:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63688 - "GET /api/v2/employee-leave/lwp/EMP001/6/2025 HTTP/1.1" 404
2025-06-08 01:40:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63688 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 404
2025-06-08 01:40:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63682 - "GET /api/v2/employee-leave/lwp/EMP001/6/2025 HTTP/1.1" 404
2025-06-08 01:40:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63682 - "GET /api/v2/employee-leave/lwp/EMP003/6/2025 HTTP/1.1" 404
2025-06-08 01:42:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63991 - "OPTIONS /api/v2/attendance/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 01:42:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63992 - "OPTIONS /api/v2/attendance/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 01:42:25 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 01:42:25 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 01:42:25 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 01:42:25 [INFO] app.api.routes.attendance_routes_v2:389 - get_user_attendance_by_month_legacy(): Getting attendance for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 01:42:25 [ERROR] app.api.routes.attendance_routes_v2:426 - get_user_attendance_by_month_legacy(): Error getting employee attendance: CurrentUser.__init__() got an unexpected keyword argument 'employee_id'
2025-06-08 01:42:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63991 - "GET /api/v2/attendance/user/EMP002/6/2025 HTTP/1.1" 500
2025-06-08 01:42:25 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 01:42:25 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 01:42:25 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 01:42:25 [INFO] app.api.routes.attendance_routes_v2:389 - get_user_attendance_by_month_legacy(): Getting attendance for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 01:42:25 [ERROR] app.api.routes.attendance_routes_v2:426 - get_user_attendance_by_month_legacy(): Error getting employee attendance: CurrentUser.__init__() got an unexpected keyword argument 'employee_id'
2025-06-08 01:42:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63992 - "GET /api/v2/attendance/user/EMP002/6/2025 HTTP/1.1" 500
2025-06-08 01:44:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64308 - "OPTIONS /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 01:44:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64311 - "OPTIONS /api/v2/attendance/lwp/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 01:44:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64313 - "OPTIONS /api/v2/attendance/lwp/EMP001/6/2025 HTTP/1.1" 200
2025-06-08 01:44:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64314 - "OPTIONS /api/v2/attendance/lwp/EMP003/6/2025 HTTP/1.1" 200
2025-06-08 01:44:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 01:44:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 01:44:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64308 - "GET /api/v2/attendance/lwp/EMP002/6/2025 HTTP/1.1" 404
2025-06-08 01:44:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64311 - "GET /api/v2/attendance/lwp/EMP001/6/2025 HTTP/1.1" 404
2025-06-08 01:44:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64313 - "GET /api/v2/attendance/lwp/EMP003/6/2025 HTTP/1.1" 404
2025-06-08 01:44:51 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 01:44:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:44:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 01:44:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:44:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64316 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 01:44:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64316 - "GET /api/v2/attendance/lwp/EMP002/6/2025 HTTP/1.1" 404
2025-06-08 01:44:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64313 - "GET /api/v2/attendance/lwp/EMP001/6/2025 HTTP/1.1" 404
2025-06-08 01:44:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64311 - "GET /api/v2/attendance/lwp/EMP003/6/2025 HTTP/1.1" 404
2025-06-08 01:45:10 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 01:45:10 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 01:45:10 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 01:45:10 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:45:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 01:45:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:45:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64356 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 01:45:11 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 01:45:11 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 01:45:11 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 01:45:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:45:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 01:45:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:45:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64358 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 01:45:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64358 - "GET /api/v2/attendance/lwp/EMP002/6/2025 HTTP/1.1" 404
2025-06-08 01:45:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64356 - "GET /api/v2/attendance/lwp/EMP001/6/2025 HTTP/1.1" 404
2025-06-08 01:45:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64363 - "GET /api/v2/attendance/lwp/EMP003/6/2025 HTTP/1.1" 404
2025-06-08 01:57:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49671 - "OPTIONS /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 01:57:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49674 - "OPTIONS /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 01:57:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49675 - "OPTIONS /api/v2/employee-leave/lwp/EMP001/6/2025 HTTP/1.1" 200
2025-06-08 01:57:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49677 - "OPTIONS /api/v2/employee-leave/lwp/EMP003/6/2025 HTTP/1.1" 200
2025-06-08 01:57:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49671 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 404
2025-06-08 01:57:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49674 - "GET /api/v2/employee-leave/lwp/EMP001/6/2025 HTTP/1.1" 404
2025-06-08 01:57:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49675 - "GET /api/v2/employee-leave/lwp/EMP003/6/2025 HTTP/1.1" 404
2025-06-08 01:57:39 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 01:57:39 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 01:57:39 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 01:57:39 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:57:39 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 01:57:39 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:57:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49680 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 01:57:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49680 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 404
2025-06-08 01:57:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49675 - "GET /api/v2/employee-leave/lwp/EMP001/6/2025 HTTP/1.1" 404
2025-06-08 01:57:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49674 - "GET /api/v2/employee-leave/lwp/EMP003/6/2025 HTTP/1.1" 404
2025-06-08 01:57:56 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 01:57:56 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 01:57:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49750 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 404
2025-06-08 01:57:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49751 - "GET /api/v2/employee-leave/lwp/EMP001/6/2025 HTTP/1.1" 404
2025-06-08 01:57:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49753 - "GET /api/v2/employee-leave/lwp/EMP003/6/2025 HTTP/1.1" 404
2025-06-08 01:57:56 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 01:57:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:57:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 01:57:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 01:57:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49748 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 01:57:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49748 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 404
2025-06-08 01:57:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49753 - "GET /api/v2/employee-leave/lwp/EMP001/6/2025 HTTP/1.1" 404
2025-06-08 01:57:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49751 - "GET /api/v2/employee-leave/lwp/EMP003/6/2025 HTTP/1.1" 404
2025-06-08 02:00:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:00:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:00:31 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 02:00:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 02:00:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 02:00:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 02:00:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50071 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 02:00:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:00:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:00:31 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 02:00:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 02:00:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 02:00:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 02:00:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50071 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 02:00:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50071 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 404
2025-06-08 02:00:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50077 - "GET /api/v2/employee-leave/lwp/EMP001/6/2025 HTTP/1.1" 404
2025-06-08 02:00:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50078 - "GET /api/v2/employee-leave/lwp/EMP003/6/2025 HTTP/1.1" 404
2025-06-08 02:00:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50078 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 404
2025-06-08 02:00:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50077 - "GET /api/v2/employee-leave/lwp/EMP001/6/2025 HTTP/1.1" 404
2025-06-08 02:00:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50071 - "GET /api/v2/employee-leave/lwp/EMP003/6/2025 HTTP/1.1" 404
2025-06-08 02:00:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50121 - "OPTIONS /api/v2/attendance/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:00:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50123 - "OPTIONS /api/v2/attendance/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:00:47 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:00:47 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 02:00:47 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:00:47 [INFO] app.api.routes.attendance_routes_v2:389 - get_user_attendance_by_month_legacy(): Getting attendance for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:00:47 [ERROR] app.api.routes.attendance_routes_v2:426 - get_user_attendance_by_month_legacy(): Error getting employee attendance: CurrentUser.__init__() got an unexpected keyword argument 'employee_id'
2025-06-08 02:00:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50125 - "GET /api/v2/attendance/user/EMP002/6/2025 HTTP/1.1" 500
2025-06-08 02:00:47 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:00:47 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 02:00:47 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:00:47 [INFO] app.api.routes.attendance_routes_v2:389 - get_user_attendance_by_month_legacy(): Getting attendance for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:00:47 [ERROR] app.api.routes.attendance_routes_v2:426 - get_user_attendance_by_month_legacy(): Error getting employee attendance: CurrentUser.__init__() got an unexpected keyword argument 'employee_id'
2025-06-08 02:00:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50125 - "GET /api/v2/attendance/user/EMP002/6/2025 HTTP/1.1" 500
2025-06-08 02:01:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50215 - "OPTIONS /api/v2/attendance/user/EMP001/6/2025 HTTP/1.1" 200
2025-06-08 02:01:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50216 - "OPTIONS /api/v2/attendance/user/EMP001/6/2025 HTTP/1.1" 200
2025-06-08 02:01:24 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:01:24 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 02:01:24 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:01:24 [INFO] app.api.routes.attendance_routes_v2:389 - get_user_attendance_by_month_legacy(): Getting attendance for employee EMP001 for 6/2025 (legacy endpoint)
2025-06-08 02:01:24 [ERROR] app.api.routes.attendance_routes_v2:426 - get_user_attendance_by_month_legacy(): Error getting employee attendance: CurrentUser.__init__() got an unexpected keyword argument 'employee_id'
2025-06-08 02:01:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50215 - "GET /api/v2/attendance/user/EMP001/6/2025 HTTP/1.1" 500
2025-06-08 02:01:24 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:01:24 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 02:01:24 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:01:24 [INFO] app.api.routes.attendance_routes_v2:389 - get_user_attendance_by_month_legacy(): Getting attendance for employee EMP001 for 6/2025 (legacy endpoint)
2025-06-08 02:01:24 [ERROR] app.api.routes.attendance_routes_v2:426 - get_user_attendance_by_month_legacy(): Error getting employee attendance: CurrentUser.__init__() got an unexpected keyword argument 'employee_id'
2025-06-08 02:01:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50216 - "GET /api/v2/attendance/user/EMP001/6/2025 HTTP/1.1" 500
2025-06-08 02:02:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 02:02:55 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 02:02:55 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-08 02:02:55 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 02:02:55 [INFO] uvicorn.error:93 - _serve(): Finished server process [35399]
2025-06-08 02:02:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:03:06 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:03:06 [INFO] uvicorn.error:83 - _serve(): Started server process [35762]
2025-06-08 02:03:06 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:03:06 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 02:03:06 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:04:58 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 02:04:58 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 02:04:58 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-08 02:04:58 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 02:04:58 [INFO] uvicorn.error:93 - _serve(): Finished server process [35762]
2025-06-08 02:05:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:05:07 [INFO] app.main:79 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:05:07 [INFO] uvicorn.error:83 - _serve(): Started server process [35781]
2025-06-08 02:05:07 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:05:07 [INFO] app.main:36 - lifespan(): Running startup tasks...
2025-06-08 02:05:07 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:05:31 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:05:31 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 02:05:31 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:05:31 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 02:05:31 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 02:05:31 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 02:05:31 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 02:05:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 02:05:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 02:05:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 02:05:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 02:05:31 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 02:05:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 02:05:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 02:05:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 02:05:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 02:05:31 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 02:05:31 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 02:05:31 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 02:05:31 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 02:05:31 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 02:05:31 [INFO] app.api.routes.attendance_routes_v2:389 - get_user_attendance_by_month_legacy(): Getting attendance for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:05:31 [INFO] app.api.controllers.attendance_controller:95 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:05:31 [INFO] app.infrastructure.services.attendance_service_impl:94 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:05:31 [INFO] app.application.use_cases.attendance.attendance_query_use_case:53 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:05:31 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:77 - _get_collection(): Database not connected, establishing connection...
2025-06-08 02:05:31 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:82 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 02:05:32 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 02:05:32 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 02:05:32 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-08 02:05:32 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_pms_global_database
2025-06-08 02:05:32 [INFO] app.application.use_cases.attendance.attendance_query_use_case:75 - get_employee_attendance_by_month(): No attendance records found for employee EMP002 in 6/2025
2025-06-08 02:05:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50621 - "GET /api/v2/attendance/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:05:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50621 - "OPTIONS /api/v2/public-holidays/month/6/2025 HTTP/1.1" 200
2025-06-08 02:05:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:05:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:05:32 [INFO] app.api.routes.public_holiday_routes_v2:247 - get_public_holidays_by_month_legacy(): Getting public holidays for 6/2025 (legacy endpoint)
2025-06-08 02:05:32 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 02:05:32 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:100 - _get_collection(): Successfully retrieved collection: public_holidays from database: pms_localhost
2025-06-08 02:05:32 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:05:33 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 02:05:33 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:05:33 [INFO] app.api.routes.attendance_routes_v2:389 - get_user_attendance_by_month_legacy(): Getting attendance for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:05:33 [INFO] app.api.controllers.attendance_controller:95 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:05:33 [INFO] app.infrastructure.services.attendance_service_impl:94 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:05:33 [INFO] app.application.use_cases.attendance.attendance_query_use_case:53 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:05:33 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_pms_global_database
2025-06-08 02:05:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50621 - "GET /api/v2/public-holidays/month/6/2025 HTTP/1.1" 200
2025-06-08 02:05:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50621 - "OPTIONS /api/v2/employee-leave/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:05:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50638 - "GET /api/v2/employee-leave/user/EMP002/6/2025 HTTP/1.1" 404
2025-06-08 02:05:33 [INFO] app.application.use_cases.attendance.attendance_query_use_case:75 - get_employee_attendance_by_month(): No attendance records found for employee EMP002 in 6/2025
2025-06-08 02:05:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50636 - "GET /api/v2/attendance/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:05:33 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:05:33 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:05:33 [INFO] app.api.routes.public_holiday_routes_v2:247 - get_public_holidays_by_month_legacy(): Getting public holidays for 6/2025 (legacy endpoint)
2025-06-08 02:05:33 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:100 - _get_collection(): Successfully retrieved collection: public_holidays from database: pms_localhost
2025-06-08 02:05:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50636 - "GET /api/v2/public-holidays/month/6/2025 HTTP/1.1" 200
2025-06-08 02:05:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50636 - "GET /api/v2/employee-leave/user/EMP002/6/2025 HTTP/1.1" 404
2025-06-08 02:07:24 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 02:07:24 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 02:07:24 [INFO] app.main:38 - lifespan(): Running shutdown tasks...
2025-06-08 02:07:24 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 02:07:24 [INFO] uvicorn.error:93 - _serve(): Finished server process [35781]
2025-06-08 02:07:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:07:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:08:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:22:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:27:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:28:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:28:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:28:56 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:29:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:29:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:29:34 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:29:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:30:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:30:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:31:28 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:32:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:33:47 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:34:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:36:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:36:28 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:37:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:37:33 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:37:33 [INFO] uvicorn.error:83 - _serve(): Started server process [36954]
2025-06-08 02:37:33 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:37:33 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 02:37:33 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:39:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52774 - "GET /api/v2/employee-leave/user/EMP002/6/2025 HTTP/1.1" 422
2025-06-08 02:40:20 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 02:40:20 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 02:40:20 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 02:40:20 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 02:40:20 [INFO] uvicorn.error:93 - _serve(): Finished server process [36954]
2025-06-08 02:40:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:40:25 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:40:25 [INFO] uvicorn.error:83 - _serve(): Started server process [37048]
2025-06-08 02:40:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:40:25 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 02:40:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:40:26 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Not enough segments
2025-06-08 02:40:26 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Not enough segments
2025-06-08 02:40:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52795 - "GET /api/v2/employee-leave/user/EMP002/6/2025 HTTP/1.1" 401
2025-06-08 02:40:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52796 - "GET /api/v2/employee-leave/health HTTP/1.1" 403
2025-06-08 02:41:16 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP002
2025-06-08 02:41:16 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP002 from organisation: test_company
2025-06-08 02:41:16 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 02:41:16 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 02:41:16 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 02:41:16 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 02:41:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 02:41:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 02:41:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 02:41:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 02:41:16 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 02:41:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 02:41:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 02:41:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 02:41:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 02:41:16 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 02:41:16 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 02:41:16 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 02:41:16 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 02:41:16 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 02:41:16 [INFO] app.api.routes.employee_leave_routes_v2:494 - get_user_leaves_by_month_legacy(): Getting leaves for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:41:16 [INFO] app.api.controllers.employee_leave_controller:307 - get_monthly_leaves(): Retrieving monthly leaves for EMP002: 6/2025
2025-06-08 02:41:16 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:234 - get_employee_leaves_by_month(): Retrieving leaves for employee EMP002 in 6/2025
2025-06-08 02:41:16 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:245 - get_employee_leaves_by_month(): Failed to retrieve monthly leaves: 'EmployeeLeaveRepositoryImpl' object has no attribute 'get_by_month'
2025-06-08 02:41:16 [ERROR] app.api.controllers.employee_leave_controller:328 - get_monthly_leaves(): Error retrieving monthly leaves: Failed to retrieve monthly leaves: 'EmployeeLeaveRepositoryImpl' object has no attribute 'get_by_month'
2025-06-08 02:41:16 [ERROR] app.api.controllers.employee_leave_controller:333 - get_monthly_leaves(): Fallback also failed: No module named 'app.models'
2025-06-08 02:41:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52833 - "GET /api/v2/employee-leave/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:41:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52834 - "GET /api/v2/employee-leave/health HTTP/1.1" 403
2025-06-08 02:43:02 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 02:43:02 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 02:43:02 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 02:43:02 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 02:43:02 [INFO] uvicorn.error:93 - _serve(): Finished server process [37048]
2025-06-08 02:43:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:43:05 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:43:05 [INFO] uvicorn.error:83 - _serve(): Started server process [37155]
2025-06-08 02:43:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:43:05 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 02:43:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:44:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53217 - "OPTIONS /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 02:44:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53218 - "OPTIONS /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 02:44:34 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:44:34 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:44:34 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 02:44:34 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 02:44:34 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 02:44:34 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 02:44:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 02:44:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 02:44:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 02:44:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 02:44:34 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 02:44:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 02:44:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 02:44:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 02:44:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 02:44:34 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 02:44:34 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 02:44:34 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 02:44:34 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 02:44:34 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 02:44:34 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 02:44:34 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 02:44:34 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 02:44:40 [ERROR] app.infrastructure.database.mongodb_connector:72 - connect(): Failed to connect to MongoDB: SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844abbbe662895e0daf30ab, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-08 02:44:40 [ERROR] app.infrastructure.repositories.mongodb_user_repository:93 - _get_collection(): Failed to establish database connection: SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844abbbe662895e0daf30ab, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-08 02:44:40 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Database connection failed: SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844abbbe662895e0daf30ab, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-08 02:44:40 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Database connection failed: SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844abbbe662895e0daf30ab, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-08 02:44:40 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Database connection failed: SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844abbbe662895e0daf30ab, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-08 02:44:40 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 02:44:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53217 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 500
2025-06-08 02:44:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:44:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:44:40 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 02:44:40 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 02:44:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 02:44:45 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844abbbe662895e0daf30ab, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-08 02:44:45 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844abbbe662895e0daf30ab, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-08 02:44:45 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844abbbe662895e0daf30ab, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-08 02:44:45 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 02:45:23 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 02:45:23 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 02:45:23 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 02:45:23 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 02:45:23 [INFO] uvicorn.error:93 - _serve(): Finished server process [37155]
2025-06-08 02:46:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:46:05 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:46:05 [INFO] uvicorn.error:83 - _serve(): Started server process [37253]
2025-06-08 02:46:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:46:05 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 02:46:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:46:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:46:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:46:36 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 02:46:36 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 02:46:36 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 02:46:36 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 02:46:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 02:46:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 02:46:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 02:46:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 02:46:36 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 02:46:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 02:46:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 02:46:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 02:46:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 02:46:36 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 02:46:36 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 02:46:36 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 02:46:36 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 02:46:36 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 02:46:36 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 02:46:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 02:46:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 02:46:42 [ERROR] app.infrastructure.database.mongodb_connector:72 - connect(): Failed to connect to MongoDB: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844ac35ca8ff74b5b1738d1, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-08 02:46:42 [ERROR] app.infrastructure.repositories.mongodb_user_repository:93 - _get_collection(): Failed to establish database connection: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844ac35ca8ff74b5b1738d1, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-08 02:46:42 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: Database connection failed: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844ac35ca8ff74b5b1738d1, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-08 02:46:42 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: Database connection failed: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844ac35ca8ff74b5b1738d1, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-08 02:46:42 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: Database connection failed: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844ac35ca8ff74b5b1738d1, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-08 02:46:42 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 02:46:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53413 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 500
2025-06-08 02:46:42 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:46:42 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:46:42 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 02:46:42 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 02:46:42 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 02:46:47 [ERROR] app.infrastructure.repositories.mongodb_user_repository:581 - get_all(): Error getting all users: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844ac35ca8ff74b5b1738d1, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-08 02:46:47 [ERROR] app.infrastructure.services.user_service_impl:446 - get_all_users(): Error getting all users in organisation localhost: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844ac35ca8ff74b5b1738d1, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-08 02:46:47 [ERROR] app.api.controllers.user_controller:151 - get_all_users(): Error getting all users in organisation localhost: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844ac35ca8ff74b5b1738d1, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-08 02:46:47 [ERROR] app.api.routes.user_routes_v2:353 - get_users(): Error getting users for organisation localhost: 500: Internal server error
2025-06-08 02:46:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 02:46:55 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 02:46:55 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 02:46:55 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 02:46:55 [INFO] uvicorn.error:93 - _serve(): Finished server process [37253]
2025-06-08 02:48:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:48:45 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:48:45 [INFO] uvicorn.error:83 - _serve(): Started server process [37312]
2025-06-08 02:48:45 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:48:45 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 02:48:45 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:49:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:49:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:49:02 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 02:49:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 02:49:02 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 02:49:02 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 02:49:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 02:49:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 02:49:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 02:49:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 02:49:03 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 02:49:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 02:49:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 02:49:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 02:49:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 02:49:03 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 02:49:03 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 02:49:03 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 02:49:03 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 02:49:03 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 02:49:03 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 02:49:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 02:49:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 02:49:04 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 02:49:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 02:49:04 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 02:49:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 02:49:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 02:49:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 02:49:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53565 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 02:49:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:49:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:49:04 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 02:49:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 02:49:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53584 - "OPTIONS /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:49:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53586 - "OPTIONS /api/v2/employee-leave/lwp/EMP001/6/2025 HTTP/1.1" 200
2025-06-08 02:49:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53587 - "OPTIONS /api/v2/employee-leave/lwp/EMP003/6/2025 HTTP/1.1" 200
2025-06-08 02:49:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:49:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:49:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:49:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:49:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:49:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:49:04 [INFO] app.api.routes.employee_leave_routes_v2:541 - get_user_lwp_legacy(): Getting LWP for employee EMP001 for 6/2025 (legacy endpoint)
2025-06-08 02:49:04 [INFO] app.api.controllers.employee_leave_controller:451 - calculate_lwp(): Calculating LWP for EMP001: 6/2025
2025-06-08 02:49:04 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:346 - calculate_lwp_for_month(): Calculating LWP for employee EMP001 in 6/2025
2025-06-08 02:49:04 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:366 - calculate_lwp_for_month(): Failed to calculate LWP: Analytics repository not available
2025-06-08 02:49:04 [ERROR] app.api.controllers.employee_leave_controller:472 - calculate_lwp(): Error calculating LWP: Failed to calculate LWP: Analytics repository not available
2025-06-08 02:49:04 [ERROR] app.api.controllers.employee_leave_controller:477 - calculate_lwp(): LWP fallback also failed: No module named 'app.models'
2025-06-08 02:49:04 [ERROR] app.api.routes.employee_leave_routes_v2:84 - wrapper(): Unexpected error: name 'date' is not defined
2025-06-08 02:49:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53584 - "GET /api/v2/employee-leave/lwp/EMP001/6/2025 HTTP/1.1" 500
2025-06-08 02:49:04 [INFO] app.api.routes.employee_leave_routes_v2:541 - get_user_lwp_legacy(): Getting LWP for employee EMP003 for 6/2025 (legacy endpoint)
2025-06-08 02:49:04 [INFO] app.api.controllers.employee_leave_controller:451 - calculate_lwp(): Calculating LWP for EMP003: 6/2025
2025-06-08 02:49:04 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:346 - calculate_lwp_for_month(): Calculating LWP for employee EMP003 in 6/2025
2025-06-08 02:49:04 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:366 - calculate_lwp_for_month(): Failed to calculate LWP: Analytics repository not available
2025-06-08 02:49:04 [ERROR] app.api.controllers.employee_leave_controller:472 - calculate_lwp(): Error calculating LWP: Failed to calculate LWP: Analytics repository not available
2025-06-08 02:49:04 [ERROR] app.api.controllers.employee_leave_controller:477 - calculate_lwp(): LWP fallback also failed: No module named 'app.models'
2025-06-08 02:49:04 [ERROR] app.api.routes.employee_leave_routes_v2:84 - wrapper(): Unexpected error: name 'date' is not defined
2025-06-08 02:49:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53586 - "GET /api/v2/employee-leave/lwp/EMP003/6/2025 HTTP/1.1" 500
2025-06-08 02:49:04 [INFO] app.api.routes.employee_leave_routes_v2:541 - get_user_lwp_legacy(): Getting LWP for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:49:04 [INFO] app.api.controllers.employee_leave_controller:451 - calculate_lwp(): Calculating LWP for EMP002: 6/2025
2025-06-08 02:49:04 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:346 - calculate_lwp_for_month(): Calculating LWP for employee EMP002 in 6/2025
2025-06-08 02:49:04 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:366 - calculate_lwp_for_month(): Failed to calculate LWP: Analytics repository not available
2025-06-08 02:49:04 [ERROR] app.api.controllers.employee_leave_controller:472 - calculate_lwp(): Error calculating LWP: Failed to calculate LWP: Analytics repository not available
2025-06-08 02:49:04 [ERROR] app.api.controllers.employee_leave_controller:477 - calculate_lwp(): LWP fallback also failed: No module named 'app.models'
2025-06-08 02:49:04 [ERROR] app.api.routes.employee_leave_routes_v2:84 - wrapper(): Unexpected error: name 'date' is not defined
2025-06-08 02:49:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53590 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 500
2025-06-08 02:49:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 02:49:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 02:49:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53565 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 02:49:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:49:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:49:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:49:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:49:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:49:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:49:05 [INFO] app.api.routes.employee_leave_routes_v2:541 - get_user_lwp_legacy(): Getting LWP for employee EMP001 for 6/2025 (legacy endpoint)
2025-06-08 02:49:05 [INFO] app.api.controllers.employee_leave_controller:451 - calculate_lwp(): Calculating LWP for EMP001: 6/2025
2025-06-08 02:49:05 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:346 - calculate_lwp_for_month(): Calculating LWP for employee EMP001 in 6/2025
2025-06-08 02:49:05 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:366 - calculate_lwp_for_month(): Failed to calculate LWP: Analytics repository not available
2025-06-08 02:49:05 [ERROR] app.api.controllers.employee_leave_controller:472 - calculate_lwp(): Error calculating LWP: Failed to calculate LWP: Analytics repository not available
2025-06-08 02:49:05 [ERROR] app.api.controllers.employee_leave_controller:477 - calculate_lwp(): LWP fallback also failed: No module named 'app.models'
2025-06-08 02:49:05 [ERROR] app.api.routes.employee_leave_routes_v2:84 - wrapper(): Unexpected error: name 'date' is not defined
2025-06-08 02:49:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53590 - "GET /api/v2/employee-leave/lwp/EMP001/6/2025 HTTP/1.1" 500
2025-06-08 02:49:05 [INFO] app.api.routes.employee_leave_routes_v2:541 - get_user_lwp_legacy(): Getting LWP for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:49:05 [INFO] app.api.controllers.employee_leave_controller:451 - calculate_lwp(): Calculating LWP for EMP002: 6/2025
2025-06-08 02:49:05 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:346 - calculate_lwp_for_month(): Calculating LWP for employee EMP002 in 6/2025
2025-06-08 02:49:05 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:366 - calculate_lwp_for_month(): Failed to calculate LWP: Analytics repository not available
2025-06-08 02:49:05 [ERROR] app.api.controllers.employee_leave_controller:472 - calculate_lwp(): Error calculating LWP: Failed to calculate LWP: Analytics repository not available
2025-06-08 02:49:05 [ERROR] app.api.controllers.employee_leave_controller:477 - calculate_lwp(): LWP fallback also failed: No module named 'app.models'
2025-06-08 02:49:05 [ERROR] app.api.routes.employee_leave_routes_v2:84 - wrapper(): Unexpected error: name 'date' is not defined
2025-06-08 02:49:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53565 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 500
2025-06-08 02:49:05 [INFO] app.api.routes.employee_leave_routes_v2:541 - get_user_lwp_legacy(): Getting LWP for employee EMP003 for 6/2025 (legacy endpoint)
2025-06-08 02:49:05 [INFO] app.api.controllers.employee_leave_controller:451 - calculate_lwp(): Calculating LWP for EMP003: 6/2025
2025-06-08 02:49:05 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:346 - calculate_lwp_for_month(): Calculating LWP for employee EMP003 in 6/2025
2025-06-08 02:49:05 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:366 - calculate_lwp_for_month(): Failed to calculate LWP: Analytics repository not available
2025-06-08 02:49:05 [ERROR] app.api.controllers.employee_leave_controller:472 - calculate_lwp(): Error calculating LWP: Failed to calculate LWP: Analytics repository not available
2025-06-08 02:49:05 [ERROR] app.api.controllers.employee_leave_controller:477 - calculate_lwp(): LWP fallback also failed: No module named 'app.models'
2025-06-08 02:49:05 [ERROR] app.api.routes.employee_leave_routes_v2:84 - wrapper(): Unexpected error: name 'date' is not defined
2025-06-08 02:49:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53586 - "GET /api/v2/employee-leave/lwp/EMP003/6/2025 HTTP/1.1" 500
2025-06-08 02:49:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53650 - "OPTIONS /api/v2/attendance/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:49:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53651 - "OPTIONS /api/v2/attendance/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:49:24 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:49:24 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 02:49:24 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:49:24 [INFO] app.api.routes.attendance_routes_v2:389 - get_user_attendance_by_month_legacy(): Getting attendance for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:49:24 [INFO] app.api.controllers.attendance_controller:95 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:49:24 [INFO] app.infrastructure.services.attendance_service_impl:94 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:49:24 [INFO] app.application.use_cases.attendance.attendance_query_use_case:53 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:49:24 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-08 02:49:24 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_pms_global_database
2025-06-08 02:49:24 [INFO] app.application.use_cases.attendance.attendance_query_use_case:75 - get_employee_attendance_by_month(): No attendance records found for employee EMP002 in 6/2025
2025-06-08 02:49:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53653 - "GET /api/v2/attendance/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:49:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53651 - "OPTIONS /api/v2/public-holidays/month/6/2025 HTTP/1.1" 200
2025-06-08 02:49:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:49:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:49:24 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:49:24 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 02:49:24 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:49:24 [INFO] app.api.routes.attendance_routes_v2:389 - get_user_attendance_by_month_legacy(): Getting attendance for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:49:24 [INFO] app.api.controllers.attendance_controller:95 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:49:24 [INFO] app.infrastructure.services.attendance_service_impl:94 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:49:24 [INFO] app.application.use_cases.attendance.attendance_query_use_case:53 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:49:24 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_pms_global_database
2025-06-08 02:49:24 [INFO] app.api.routes.public_holiday_routes_v2:247 - get_public_holidays_by_month_legacy(): Getting public holidays for 6/2025 (legacy endpoint)
2025-06-08 02:49:24 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:100 - _get_collection(): Successfully retrieved collection: public_holidays from database: pms_localhost
2025-06-08 02:49:24 [INFO] app.application.use_cases.attendance.attendance_query_use_case:75 - get_employee_attendance_by_month(): No attendance records found for employee EMP002 in 6/2025
2025-06-08 02:49:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53653 - "GET /api/v2/attendance/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:49:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53650 - "GET /api/v2/public-holidays/month/6/2025 HTTP/1.1" 200
2025-06-08 02:49:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:49:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:49:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53653 - "OPTIONS /api/v2/employee-leave/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:49:24 [INFO] app.api.routes.public_holiday_routes_v2:247 - get_public_holidays_by_month_legacy(): Getting public holidays for 6/2025 (legacy endpoint)
2025-06-08 02:49:24 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:100 - _get_collection(): Successfully retrieved collection: public_holidays from database: pms_localhost
2025-06-08 02:49:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:49:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:49:24 [INFO] app.api.routes.employee_leave_routes_v2:494 - get_user_leaves_by_month_legacy(): Getting leaves for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:49:24 [INFO] app.api.controllers.employee_leave_controller:307 - get_monthly_leaves(): Retrieving monthly leaves for EMP002: 6/2025
2025-06-08 02:49:24 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:234 - get_employee_leaves_by_month(): Retrieving leaves for employee EMP002 in 6/2025
2025-06-08 02:49:24 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:245 - get_employee_leaves_by_month(): Failed to retrieve monthly leaves: 'EmployeeLeaveRepositoryImpl' object has no attribute 'get_by_month'
2025-06-08 02:49:24 [ERROR] app.api.controllers.employee_leave_controller:328 - get_monthly_leaves(): Error retrieving monthly leaves: Failed to retrieve monthly leaves: 'EmployeeLeaveRepositoryImpl' object has no attribute 'get_by_month'
2025-06-08 02:49:24 [ERROR] app.api.controllers.employee_leave_controller:333 - get_monthly_leaves(): Fallback also failed: No module named 'app.models'
2025-06-08 02:49:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53651 - "GET /api/v2/employee-leave/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:49:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53650 - "GET /api/v2/public-holidays/month/6/2025 HTTP/1.1" 200
2025-06-08 02:49:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:49:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:49:24 [INFO] app.api.routes.employee_leave_routes_v2:494 - get_user_leaves_by_month_legacy(): Getting leaves for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:49:24 [INFO] app.api.controllers.employee_leave_controller:307 - get_monthly_leaves(): Retrieving monthly leaves for EMP002: 6/2025
2025-06-08 02:49:24 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:234 - get_employee_leaves_by_month(): Retrieving leaves for employee EMP002 in 6/2025
2025-06-08 02:49:24 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:245 - get_employee_leaves_by_month(): Failed to retrieve monthly leaves: 'EmployeeLeaveRepositoryImpl' object has no attribute 'get_by_month'
2025-06-08 02:49:24 [ERROR] app.api.controllers.employee_leave_controller:328 - get_monthly_leaves(): Error retrieving monthly leaves: Failed to retrieve monthly leaves: 'EmployeeLeaveRepositoryImpl' object has no attribute 'get_by_month'
2025-06-08 02:49:24 [ERROR] app.api.controllers.employee_leave_controller:333 - get_monthly_leaves(): Fallback also failed: No module named 'app.models'
2025-06-08 02:49:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53650 - "GET /api/v2/employee-leave/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:51:46 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 02:51:46 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 02:51:46 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 02:51:46 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 02:51:46 [INFO] uvicorn.error:93 - _serve(): Finished server process [37312]
2025-06-08 02:51:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:51:59 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:51:59 [INFO] uvicorn.error:83 - _serve(): Started server process [37342]
2025-06-08 02:51:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:51:59 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 02:51:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:52:05 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 02:52:06 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 02:52:06 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 02:52:06 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 02:52:06 [INFO] uvicorn.error:93 - _serve(): Finished server process [37342]
2025-06-08 02:52:10 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:52:17 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:52:17 [INFO] uvicorn.error:83 - _serve(): Started server process [37359]
2025-06-08 02:52:17 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:52:17 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 02:52:17 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:52:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 02:52:21 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 02:52:21 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 02:52:21 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 02:52:21 [INFO] uvicorn.error:93 - _serve(): Finished server process [37359]
2025-06-08 02:52:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:52:33 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:52:33 [INFO] uvicorn.error:83 - _serve(): Started server process [37374]
2025-06-08 02:52:33 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:52:33 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 02:52:33 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:52:43 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 02:52:43 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 02:52:43 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 02:52:43 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 02:52:43 [INFO] uvicorn.error:93 - _serve(): Finished server process [37374]
2025-06-08 02:52:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:52:56 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:52:56 [INFO] uvicorn.error:83 - _serve(): Started server process [37389]
2025-06-08 02:52:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:52:56 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 02:52:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:52:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 02:53:00 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 02:53:00 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 02:53:00 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 02:53:00 [INFO] uvicorn.error:93 - _serve(): Finished server process [37389]
2025-06-08 02:53:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:53:11 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:53:11 [INFO] uvicorn.error:83 - _serve(): Started server process [37416]
2025-06-08 02:53:11 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:53:11 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 02:53:11 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:53:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:53:24 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:53:24 [INFO] uvicorn.error:83 - _serve(): Started server process [37433]
2025-06-08 02:53:24 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:53:24 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 02:53:24 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:53:30 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 02:53:30 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 02:53:30 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 02:53:30 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 02:53:30 [INFO] uvicorn.error:93 - _serve(): Finished server process [37433]
2025-06-08 02:53:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:53:41 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:53:41 [INFO] uvicorn.error:83 - _serve(): Started server process [37446]
2025-06-08 02:53:41 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:53:41 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 02:53:41 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:53:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:53:55 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:53:55 [INFO] uvicorn.error:83 - _serve(): Started server process [37461]
2025-06-08 02:53:55 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:53:55 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 02:53:55 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:53:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:54:05 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:54:05 [INFO] uvicorn.error:83 - _serve(): Started server process [37477]
2025-06-08 02:54:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:54:05 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 02:54:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:54:06 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP002
2025-06-08 02:54:06 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP002 from organisation: test_company
2025-06-08 02:54:06 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 02:54:06 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 02:54:06 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 02:54:06 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 02:54:06 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 02:54:06 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 02:54:06 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 02:54:06 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 02:54:06 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 02:54:06 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 02:54:06 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 02:54:06 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 02:54:06 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 02:54:06 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 02:54:06 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 02:54:06 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 02:54:06 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 02:54:06 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 02:54:06 [INFO] app.api.routes.employee_leave_routes_v2:494 - get_user_leaves_by_month_legacy(): Getting leaves for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:54:06 [INFO] app.api.controllers.employee_leave_controller:308 - get_monthly_leaves(): Retrieving monthly leaves for EMP002: 6/2025
2025-06-08 02:54:06 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:235 - get_employee_leaves_by_month(): Retrieving leaves for employee EMP002 in 6/2025
2025-06-08 02:54:06 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:69 - _get_collection(): Database not connected, establishing connection...
2025-06-08 02:54:06 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:74 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 02:54:07 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 02:54:07 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:82 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 02:54:07 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-08 02:54:07 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:92 - _get_collection(): Successfully retrieved collection: employee_leaves from database: pms_pms_global_database
2025-06-08 02:54:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54465 - "GET /api/v2/employee-leave/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:54:16 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP002
2025-06-08 02:54:16 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP002 from organisation: test_company
2025-06-08 02:54:16 [INFO] app.api.routes.employee_leave_routes_v2:541 - get_user_lwp_legacy(): Getting LWP for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:54:16 [ERROR] app.api.routes.employee_leave_routes_v2:84 - wrapper(): Unexpected error: 403: Access denied
2025-06-08 02:54:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54536 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 500
2025-06-08 02:54:32 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Invalid crypto padding
2025-06-08 02:54:32 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Invalid crypto padding
2025-06-08 02:54:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54539 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 401
2025-06-08 02:54:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP002
2025-06-08 02:54:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP002 from organisation: test_company
2025-06-08 02:54:48 [INFO] app.api.routes.employee_leave_routes_v2:541 - get_user_lwp_legacy(): Getting LWP for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:54:48 [INFO] app.api.controllers.employee_leave_controller:452 - calculate_lwp(): Calculating LWP for EMP002: 6/2025
2025-06-08 02:54:48 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:347 - calculate_lwp_for_month(): Calculating LWP for employee EMP002 in 6/2025
2025-06-08 02:54:48 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:367 - calculate_lwp_for_month(): Failed to calculate LWP: Analytics repository not available
2025-06-08 02:54:48 [ERROR] app.api.controllers.employee_leave_controller:473 - calculate_lwp(): Error calculating LWP: Failed to calculate LWP: Analytics repository not available
2025-06-08 02:54:48 [ERROR] app.api.controllers.employee_leave_controller:478 - calculate_lwp(): LWP fallback also failed: No module named 'app.infrastructure.services.legacy_migration_service'
2025-06-08 02:54:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54602 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:55:01 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP002
2025-06-08 02:55:01 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP002 from organisation: test_company
2025-06-08 02:55:01 [INFO] app.api.routes.employee_leave_routes_v2:494 - get_user_leaves_by_month_legacy(): Getting leaves for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:55:01 [INFO] app.api.controllers.employee_leave_controller:308 - get_monthly_leaves(): Retrieving monthly leaves for EMP002: 6/2025
2025-06-08 02:55:01 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:235 - get_employee_leaves_by_month(): Retrieving leaves for employee EMP002 in 6/2025
2025-06-08 02:55:01 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:92 - _get_collection(): Successfully retrieved collection: employee_leaves from database: pms_pms_global_database
2025-06-08 02:55:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54609 - "GET /api/v2/employee-leave/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:55:01 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP002
2025-06-08 02:55:01 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP002 from organisation: test_company
2025-06-08 02:55:01 [INFO] app.api.routes.employee_leave_routes_v2:541 - get_user_lwp_legacy(): Getting LWP for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:55:01 [INFO] app.api.controllers.employee_leave_controller:452 - calculate_lwp(): Calculating LWP for EMP002: 6/2025
2025-06-08 02:55:01 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:347 - calculate_lwp_for_month(): Calculating LWP for employee EMP002 in 6/2025
2025-06-08 02:55:01 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:367 - calculate_lwp_for_month(): Failed to calculate LWP: Analytics repository not available
2025-06-08 02:55:01 [ERROR] app.api.controllers.employee_leave_controller:473 - calculate_lwp(): Error calculating LWP: Failed to calculate LWP: Analytics repository not available
2025-06-08 02:55:01 [ERROR] app.api.controllers.employee_leave_controller:478 - calculate_lwp(): LWP fallback also failed: No module named 'app.infrastructure.services.legacy_migration_service'
2025-06-08 02:55:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54610 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:55:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54613 - "GET /api/v2/employee-leave/health HTTP/1.1" 403
2025-06-08 02:55:37 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 02:55:37 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 02:55:37 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 02:55:37 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 02:55:37 [INFO] uvicorn.error:93 - _serve(): Finished server process [37477]
2025-06-08 02:55:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:55:50 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:55:50 [INFO] uvicorn.error:83 - _serve(): Started server process [37613]
2025-06-08 02:55:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:55:50 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 02:55:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:56:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54791 - "OPTIONS /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 02:56:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54792 - "OPTIONS /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 02:56:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:56:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:56:02 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 02:56:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 02:56:02 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 02:56:02 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 02:56:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 02:56:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 02:56:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 02:56:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 02:56:02 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 02:56:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 02:56:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 02:56:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 02:56:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 02:56:02 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 02:56:02 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 02:56:02 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 02:56:02 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 02:56:02 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 02:56:02 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 02:56:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 02:56:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 02:56:03 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 02:56:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 02:56:03 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 02:56:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 02:56:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 02:56:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 02:56:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54791 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 02:56:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:56:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:56:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:56:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:56:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:56:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:56:03 [INFO] app.infrastructure.services.user_service_impl:413 - get_all_users(): Getting all users from organisation localhost
2025-06-08 02:56:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 02:56:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:56:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:56:03 [INFO] app.api.routes.employee_leave_routes_v2:541 - get_user_lwp_legacy(): Getting LWP for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:56:03 [INFO] app.api.controllers.employee_leave_controller:452 - calculate_lwp(): Calculating LWP for EMP002: 6/2025
2025-06-08 02:56:03 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:347 - calculate_lwp_for_month(): Calculating LWP for employee EMP002 in 6/2025
2025-06-08 02:56:03 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:367 - calculate_lwp_for_month(): Failed to calculate LWP: Analytics repository not available
2025-06-08 02:56:03 [ERROR] app.api.controllers.employee_leave_controller:473 - calculate_lwp(): Error calculating LWP: Failed to calculate LWP: Analytics repository not available
2025-06-08 02:56:03 [ERROR] app.api.controllers.employee_leave_controller:478 - calculate_lwp(): LWP fallback also failed: No module named 'app.infrastructure.services.legacy_migration_service'
2025-06-08 02:56:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54792 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:56:03 [INFO] app.api.routes.employee_leave_routes_v2:541 - get_user_lwp_legacy(): Getting LWP for employee EMP001 for 6/2025 (legacy endpoint)
2025-06-08 02:56:03 [INFO] app.api.controllers.employee_leave_controller:452 - calculate_lwp(): Calculating LWP for EMP001: 6/2025
2025-06-08 02:56:03 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:347 - calculate_lwp_for_month(): Calculating LWP for employee EMP001 in 6/2025
2025-06-08 02:56:03 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:367 - calculate_lwp_for_month(): Failed to calculate LWP: Analytics repository not available
2025-06-08 02:56:03 [ERROR] app.api.controllers.employee_leave_controller:473 - calculate_lwp(): Error calculating LWP: Failed to calculate LWP: Analytics repository not available
2025-06-08 02:56:03 [ERROR] app.api.controllers.employee_leave_controller:478 - calculate_lwp(): LWP fallback also failed: No module named 'app.infrastructure.services.legacy_migration_service'
2025-06-08 02:56:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54794 - "GET /api/v2/employee-leave/lwp/EMP001/6/2025 HTTP/1.1" 200
2025-06-08 02:56:03 [INFO] app.api.routes.employee_leave_routes_v2:541 - get_user_lwp_legacy(): Getting LWP for employee EMP003 for 6/2025 (legacy endpoint)
2025-06-08 02:56:03 [INFO] app.api.controllers.employee_leave_controller:452 - calculate_lwp(): Calculating LWP for EMP003: 6/2025
2025-06-08 02:56:03 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:347 - calculate_lwp_for_month(): Calculating LWP for employee EMP003 in 6/2025
2025-06-08 02:56:03 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:367 - calculate_lwp_for_month(): Failed to calculate LWP: Analytics repository not available
2025-06-08 02:56:03 [ERROR] app.api.controllers.employee_leave_controller:473 - calculate_lwp(): Error calculating LWP: Failed to calculate LWP: Analytics repository not available
2025-06-08 02:56:03 [ERROR] app.api.controllers.employee_leave_controller:478 - calculate_lwp(): LWP fallback also failed: No module named 'app.infrastructure.services.legacy_migration_service'
2025-06-08 02:56:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54814 - "GET /api/v2/employee-leave/lwp/EMP003/6/2025 HTTP/1.1" 200
2025-06-08 02:56:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 02:56:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 02:56:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54791 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 02:56:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:56:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:56:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:56:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:56:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:56:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:56:04 [INFO] app.api.routes.employee_leave_routes_v2:541 - get_user_lwp_legacy(): Getting LWP for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:56:04 [INFO] app.api.controllers.employee_leave_controller:452 - calculate_lwp(): Calculating LWP for EMP002: 6/2025
2025-06-08 02:56:04 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:347 - calculate_lwp_for_month(): Calculating LWP for employee EMP002 in 6/2025
2025-06-08 02:56:04 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:367 - calculate_lwp_for_month(): Failed to calculate LWP: Analytics repository not available
2025-06-08 02:56:04 [ERROR] app.api.controllers.employee_leave_controller:473 - calculate_lwp(): Error calculating LWP: Failed to calculate LWP: Analytics repository not available
2025-06-08 02:56:04 [ERROR] app.api.controllers.employee_leave_controller:478 - calculate_lwp(): LWP fallback also failed: No module named 'app.infrastructure.services.legacy_migration_service'
2025-06-08 02:56:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54791 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:56:04 [INFO] app.api.routes.employee_leave_routes_v2:541 - get_user_lwp_legacy(): Getting LWP for employee EMP001 for 6/2025 (legacy endpoint)
2025-06-08 02:56:04 [INFO] app.api.controllers.employee_leave_controller:452 - calculate_lwp(): Calculating LWP for EMP001: 6/2025
2025-06-08 02:56:04 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:347 - calculate_lwp_for_month(): Calculating LWP for employee EMP001 in 6/2025
2025-06-08 02:56:04 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:367 - calculate_lwp_for_month(): Failed to calculate LWP: Analytics repository not available
2025-06-08 02:56:04 [ERROR] app.api.controllers.employee_leave_controller:473 - calculate_lwp(): Error calculating LWP: Failed to calculate LWP: Analytics repository not available
2025-06-08 02:56:04 [ERROR] app.api.controllers.employee_leave_controller:478 - calculate_lwp(): LWP fallback also failed: No module named 'app.infrastructure.services.legacy_migration_service'
2025-06-08 02:56:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54814 - "GET /api/v2/employee-leave/lwp/EMP001/6/2025 HTTP/1.1" 200
2025-06-08 02:56:04 [INFO] app.api.routes.employee_leave_routes_v2:541 - get_user_lwp_legacy(): Getting LWP for employee EMP003 for 6/2025 (legacy endpoint)
2025-06-08 02:56:04 [INFO] app.api.controllers.employee_leave_controller:452 - calculate_lwp(): Calculating LWP for EMP003: 6/2025
2025-06-08 02:56:04 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:347 - calculate_lwp_for_month(): Calculating LWP for employee EMP003 in 6/2025
2025-06-08 02:56:04 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:367 - calculate_lwp_for_month(): Failed to calculate LWP: Analytics repository not available
2025-06-08 02:56:04 [ERROR] app.api.controllers.employee_leave_controller:473 - calculate_lwp(): Error calculating LWP: Failed to calculate LWP: Analytics repository not available
2025-06-08 02:56:04 [ERROR] app.api.controllers.employee_leave_controller:478 - calculate_lwp(): LWP fallback also failed: No module named 'app.infrastructure.services.legacy_migration_service'
2025-06-08 02:56:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54794 - "GET /api/v2/employee-leave/lwp/EMP003/6/2025 HTTP/1.1" 200
2025-06-08 02:57:28 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:57:28 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 02:57:28 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:57:28 [INFO] app.api.routes.attendance_routes_v2:389 - get_user_attendance_by_month_legacy(): Getting attendance for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:57:28 [INFO] app.api.controllers.attendance_controller:95 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:57:28 [INFO] app.infrastructure.services.attendance_service_impl:94 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:57:28 [INFO] app.application.use_cases.attendance.attendance_query_use_case:53 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:57:28 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-08 02:57:28 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_pms_global_database
2025-06-08 02:57:29 [INFO] app.application.use_cases.attendance.attendance_query_use_case:75 - get_employee_attendance_by_month(): No attendance records found for employee EMP002 in 6/2025
2025-06-08 02:57:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55007 - "GET /api/v2/attendance/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:57:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:57:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:57:29 [INFO] app.api.routes.public_holiday_routes_v2:247 - get_public_holidays_by_month_legacy(): Getting public holidays for 6/2025 (legacy endpoint)
2025-06-08 02:57:29 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:100 - _get_collection(): Successfully retrieved collection: public_holidays from database: pms_localhost
2025-06-08 02:57:29 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:57:29 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 02:57:29 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:57:29 [INFO] app.api.routes.attendance_routes_v2:389 - get_user_attendance_by_month_legacy(): Getting attendance for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:57:29 [INFO] app.api.controllers.attendance_controller:95 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:57:29 [INFO] app.infrastructure.services.attendance_service_impl:94 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:57:29 [INFO] app.application.use_cases.attendance.attendance_query_use_case:53 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-08 02:57:29 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_pms_global_database
2025-06-08 02:57:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55009 - "GET /api/v2/public-holidays/month/6/2025 HTTP/1.1" 200
2025-06-08 02:57:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:57:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:57:29 [INFO] app.api.routes.employee_leave_routes_v2:494 - get_user_leaves_by_month_legacy(): Getting leaves for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:57:29 [INFO] app.api.controllers.employee_leave_controller:308 - get_monthly_leaves(): Retrieving monthly leaves for EMP002: 6/2025
2025-06-08 02:57:29 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:235 - get_employee_leaves_by_month(): Retrieving leaves for employee EMP002 in 6/2025
2025-06-08 02:57:29 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:92 - _get_collection(): Successfully retrieved collection: employee_leaves from database: pms_pms_global_database
2025-06-08 02:57:29 [INFO] app.application.use_cases.attendance.attendance_query_use_case:75 - get_employee_attendance_by_month(): No attendance records found for employee EMP002 in 6/2025
2025-06-08 02:57:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55007 - "GET /api/v2/attendance/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:57:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:57:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:57:29 [INFO] app.api.routes.public_holiday_routes_v2:247 - get_public_holidays_by_month_legacy(): Getting public holidays for 6/2025 (legacy endpoint)
2025-06-08 02:57:29 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:100 - _get_collection(): Successfully retrieved collection: public_holidays from database: pms_localhost
2025-06-08 02:57:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55009 - "GET /api/v2/employee-leave/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:57:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55007 - "GET /api/v2/public-holidays/month/6/2025 HTTP/1.1" 200
2025-06-08 02:57:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 02:57:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 02:57:29 [INFO] app.api.routes.employee_leave_routes_v2:494 - get_user_leaves_by_month_legacy(): Getting leaves for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 02:57:29 [INFO] app.api.controllers.employee_leave_controller:308 - get_monthly_leaves(): Retrieving monthly leaves for EMP002: 6/2025
2025-06-08 02:57:29 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:235 - get_employee_leaves_by_month(): Retrieving leaves for employee EMP002 in 6/2025
2025-06-08 02:57:29 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:92 - _get_collection(): Successfully retrieved collection: employee_leaves from database: pms_pms_global_database
2025-06-08 02:57:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55007 - "GET /api/v2/employee-leave/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 02:57:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55080 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 02:57:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55081 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 02:57:56 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 02:57:56 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 02:57:56 [INFO] app.infrastructure.services.user_service_impl:802 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 02:57:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 02:57:56 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 02:57:56 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 02:57:56 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 02:57:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55080 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 02:57:56 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 02:57:56 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 02:57:56 [INFO] app.infrastructure.services.user_service_impl:802 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 02:57:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 02:57:56 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 02:57:56 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 02:57:56 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 02:57:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55081 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 02:58:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55081 - "OPTIONS /api/v2/attendance/checkin HTTP/1.1" 200
2025-06-08 02:58:01 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:58:01 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 02:58:01 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 02:58:01 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 02:58:01 [ERROR] app.api.routes.attendance_routes_v2:78 - checkin(): Unexpected error during check-in: AttendanceController.checkin() missing 1 required positional argument: 'current_user_id'
2025-06-08 02:58:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55081 - "POST /api/v2/attendance/checkin HTTP/1.1" 500
2025-06-08 02:59:30 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 02:59:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 02:59:31 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 02:59:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 02:59:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [37613]
2025-06-08 02:59:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:59:45 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:59:45 [INFO] uvicorn.error:83 - _serve(): Started server process [37683]
2025-06-08 02:59:45 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:59:45 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 02:59:45 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 02:59:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 02:59:58 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 02:59:58 [INFO] uvicorn.error:83 - _serve(): Started server process [37696]
2025-06-08 02:59:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 02:59:58 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 02:59:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 03:00:08 [ERROR] app.auth.auth:32 - extract_employee_id(): JWT decode error: Invalid crypto padding
2025-06-08 03:00:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55539 - "POST /api/v2/attendance/checkin HTTP/1.1" 401
2025-06-08 03:00:23 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 03:00:23 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 03:00:23 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 03:00:23 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 03:00:23 [INFO] uvicorn.error:93 - _serve(): Finished server process [37696]
2025-06-08 03:00:34 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 03:00:41 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 03:00:41 [INFO] uvicorn.error:83 - _serve(): Started server process [37825]
2025-06-08 03:00:41 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 03:00:41 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 03:00:41 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 03:00:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 03:00:53 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 03:00:53 [INFO] uvicorn.error:83 - _serve(): Started server process [37838]
2025-06-08 03:00:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 03:00:53 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 03:00:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 03:00:56 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:00:56 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 03:00:56 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:00:56 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 03:00:56 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 03:00:56 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 03:00:56 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 03:00:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 03:00:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 03:00:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 03:00:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 03:00:56 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 03:00:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 03:00:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 03:00:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 03:00:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 03:00:56 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 03:00:56 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 03:00:56 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 03:00:56 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 03:00:56 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 03:00:56 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 03:00:56 [INFO] app.api.controllers.attendance_controller:56 - checkin(): Check-in request for employee: EMP003
2025-06-08 03:00:56 [INFO] app.infrastructure.services.attendance_service_impl:58 - check_in(): Processing check-in for employee: EMP003
2025-06-08 03:00:56 [INFO] app.application.use_cases.attendance.check_in_use_case:87 - execute(): Processing check-in for employee: EMP003
2025-06-08 03:00:56 [ERROR] app.application.use_cases.attendance.check_in_use_case:135 - execute(): Unexpected error during check-in: 'NoneType' object has no attribute 'get_by_id'
2025-06-08 03:00:56 [ERROR] app.infrastructure.services.attendance_service_impl:68 - check_in(): Error processing check-in: Failed to process check-in: 'NoneType' object has no attribute 'get_by_id'
2025-06-08 03:00:56 [WARNING] app.api.controllers.attendance_controller:63 - checkin(): Business rule error during check-in: Failed to process check-in: 'NoneType' object has no attribute 'get_by_id'
2025-06-08 03:00:56 [WARNING] app.api.routes.attendance_routes_v2:74 - checkin(): Business rule error during check-in: Failed to process check-in: 'NoneType' object has no attribute 'get_by_id'
2025-06-08 03:00:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55719 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 03:01:27 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 03:01:27 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 03:01:27 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 03:01:27 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 03:01:27 [INFO] uvicorn.error:93 - _serve(): Finished server process [37838]
2025-06-08 03:01:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 03:01:40 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 03:01:40 [INFO] uvicorn.error:83 - _serve(): Started server process [37895]
2025-06-08 03:01:40 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 03:01:40 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 03:01:40 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 03:01:40 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:01:40 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 03:01:40 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:01:40 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 03:01:40 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 03:01:40 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 03:01:40 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 03:01:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 03:01:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 03:01:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 03:01:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 03:01:40 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 03:01:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 03:01:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 03:01:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 03:01:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 03:01:40 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 03:01:40 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 03:01:40 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 03:01:40 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 03:01:40 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 03:01:40 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 03:01:40 [INFO] app.api.controllers.attendance_controller:56 - checkin(): Check-in request for employee: EMP003
2025-06-08 03:01:40 [INFO] app.infrastructure.services.attendance_service_impl:58 - check_in(): Processing check-in for employee: EMP003
2025-06-08 03:01:40 [INFO] app.application.use_cases.attendance.check_in_use_case:87 - execute(): Processing check-in for employee: EMP003
2025-06-08 03:01:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 03:01:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 03:01:41 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 03:01:41 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 03:01:41 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-08 03:01:41 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_pms_global_database
2025-06-08 03:01:41 [ERROR] app.infrastructure.services.attendance_service_impl:68 - check_in(): Error processing check-in: Employee EMP003 not found
2025-06-08 03:01:41 [WARNING] app.api.controllers.attendance_controller:63 - checkin(): Business rule error during check-in: Employee EMP003 not found
2025-06-08 03:01:41 [WARNING] app.api.routes.attendance_routes_v2:74 - checkin(): Business rule error during check-in: Employee EMP003 not found
2025-06-08 03:01:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55880 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 03:02:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55970 - "GET /api/v2/user/EMP003 HTTP/1.1" 404
2025-06-08 03:02:16 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 03:02:16 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 03:02:16 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 03:02:16 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 03:02:16 [INFO] uvicorn.error:93 - _serve(): Finished server process [37895]
2025-06-08 03:02:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 03:02:30 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 03:02:30 [INFO] uvicorn.error:83 - _serve(): Started server process [37960]
2025-06-08 03:02:30 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 03:02:30 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 03:02:30 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 03:04:50 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 03:04:50 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 03:04:50 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 03:04:50 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 03:04:50 [INFO] uvicorn.error:93 - _serve(): Finished server process [37960]
2025-06-08 03:05:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 03:05:11 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 03:05:11 [INFO] uvicorn.error:83 - _serve(): Started server process [38003]
2025-06-08 03:05:11 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 03:05:11 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 03:05:11 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 03:05:41 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 03:05:41 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 03:05:41 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 03:05:41 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 03:05:41 [INFO] uvicorn.error:93 - _serve(): Finished server process [38003]
2025-06-08 03:05:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 03:05:53 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 03:05:53 [INFO] uvicorn.error:83 - _serve(): Started server process [38031]
2025-06-08 03:05:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 03:05:53 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 03:05:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 03:05:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 03:06:05 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 03:06:05 [INFO] uvicorn.error:83 - _serve(): Started server process [38063]
2025-06-08 03:06:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 03:06:05 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 03:06:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 03:06:30 [ERROR] app.auth.auth:32 - extract_employee_id(): JWT decode error: Signature verification failed.
2025-06-08 03:06:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56624 - "POST /api/v2/attendance/checkin HTTP/1.1" 401
2025-06-08 03:07:14 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:07:14 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 03:07:14 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:07:14 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 03:07:14 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 03:07:14 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 03:07:14 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 03:07:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 03:07:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 03:07:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 03:07:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 03:07:14 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 03:07:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 03:07:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 03:07:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 03:07:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 03:07:14 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 03:07:14 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 03:07:14 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 03:07:14 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 03:07:14 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 03:07:14 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 03:07:14 [INFO] app.api.controllers.attendance_controller:56 - checkin(): Check-in request for employee: EMP003
2025-06-08 03:07:14 [INFO] app.infrastructure.services.attendance_service_impl:58 - check_in(): Processing check-in for employee: EMP003
2025-06-08 03:07:14 [INFO] app.application.use_cases.attendance.check_in_use_case:87 - execute(): Processing check-in for employee: EMP003
2025-06-08 03:07:14 [ERROR] app.application.use_cases.attendance.check_in_use_case:135 - execute(): Unexpected error during check-in: 'NoneType' object has no attribute 'get_by_id'
2025-06-08 03:07:14 [ERROR] app.infrastructure.services.attendance_service_impl:68 - check_in(): Error processing check-in: Failed to process check-in: 'NoneType' object has no attribute 'get_by_id'
2025-06-08 03:07:14 [WARNING] app.api.controllers.attendance_controller:63 - checkin(): Business rule error during check-in: Failed to process check-in: 'NoneType' object has no attribute 'get_by_id'
2025-06-08 03:07:14 [WARNING] app.api.routes.attendance_routes_v2:74 - checkin(): Business rule error during check-in: Failed to process check-in: 'NoneType' object has no attribute 'get_by_id'
2025-06-08 03:07:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56654 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 03:07:48 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 03:07:48 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 03:07:48 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 03:07:48 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 03:07:48 [INFO] uvicorn.error:93 - _serve(): Finished server process [38063]
2025-06-08 03:07:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 03:08:02 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 03:08:02 [INFO] uvicorn.error:83 - _serve(): Started server process [38314]
2025-06-08 03:08:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 03:08:02 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 03:08:02 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 03:08:02 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:08:02 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 03:08:02 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:08:02 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 03:08:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 03:08:02 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 03:08:02 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 03:08:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 03:08:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 03:08:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 03:08:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 03:08:02 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 03:08:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 03:08:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 03:08:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 03:08:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 03:08:02 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 03:08:02 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 03:08:02 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 03:08:02 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 03:08:02 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 03:08:02 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 03:08:02 [INFO] app.api.controllers.attendance_controller:56 - checkin(): Check-in request for employee: EMP003
2025-06-08 03:08:02 [INFO] app.infrastructure.services.attendance_service_impl:58 - check_in(): Processing check-in for employee: EMP003
2025-06-08 03:08:02 [INFO] app.application.use_cases.attendance.check_in_use_case:87 - execute(): Processing check-in for employee: EMP003
2025-06-08 03:08:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 03:08:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 03:08:08 [ERROR] app.infrastructure.database.mongodb_connector:72 - connect(): Failed to connect to MongoDB: No replica set members match selector "Primary()", Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844b13bee5dc1c22e306681, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.03709004999836907>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.04508525699930033>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>]>
2025-06-08 03:08:08 [ERROR] app.infrastructure.repositories.mongodb_user_repository:93 - _get_collection(): Failed to establish database connection: No replica set members match selector "Primary()", Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844b13bee5dc1c22e306681, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.03709004999836907>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.04508525699930033>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>]>
2025-06-08 03:08:08 [ERROR] app.infrastructure.repositories.mongodb_user_repository:478 - get_by_id(): Error getting user by ID EMP003: Database connection failed: No replica set members match selector "Primary()", Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844b13bee5dc1c22e306681, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.03709004999836907>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.04508525699930033>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>]>
2025-06-08 03:08:08 [ERROR] app.application.use_cases.attendance.check_in_use_case:135 - execute(): Unexpected error during check-in: Database connection failed: No replica set members match selector "Primary()", Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844b13bee5dc1c22e306681, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.03709004999836907>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.04508525699930033>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>]>
2025-06-08 03:08:08 [ERROR] app.infrastructure.services.attendance_service_impl:68 - check_in(): Error processing check-in: Failed to process check-in: Database connection failed: No replica set members match selector "Primary()", Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844b13bee5dc1c22e306681, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.03709004999836907>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.04508525699930033>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>]>
2025-06-08 03:08:08 [WARNING] app.api.controllers.attendance_controller:63 - checkin(): Business rule error during check-in: Failed to process check-in: Database connection failed: No replica set members match selector "Primary()", Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844b13bee5dc1c22e306681, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.03709004999836907>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.04508525699930033>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>]>
2025-06-08 03:08:08 [WARNING] app.api.routes.attendance_routes_v2:74 - checkin(): Business rule error during check-in: Failed to process check-in: Database connection failed: No replica set members match selector "Primary()", Timeout: 5.0s, Topology Description: <TopologyDescription id: 6844b13bee5dc1c22e306681, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.03709004999836907>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.04508525699930033>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>]>
2025-06-08 03:08:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56728 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 03:08:20 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 03:08:20 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: test_company
2025-06-08 03:08:20 [INFO] app.api.routes.employee_leave_routes_v2:494 - get_user_leaves_by_month_legacy(): Getting leaves for employee EMP003 for 6/2025 (legacy endpoint)
2025-06-08 03:08:20 [INFO] app.api.controllers.employee_leave_controller:308 - get_monthly_leaves(): Retrieving monthly leaves for EMP003: 6/2025
2025-06-08 03:08:20 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:235 - get_employee_leaves_by_month(): Retrieving leaves for employee EMP003 in 6/2025
2025-06-08 03:08:20 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-08 03:08:20 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:92 - _get_collection(): Successfully retrieved collection: employee_leaves from database: pms_pms_global_database
2025-06-08 03:08:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56854 - "GET /api/v2/employee-leave/user/EMP003/6/2025 HTTP/1.1" 200
2025-06-08 03:08:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 03:08:54 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 03:08:54 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 03:08:54 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 03:08:54 [INFO] uvicorn.error:93 - _serve(): Finished server process [38314]
2025-06-08 03:08:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 03:09:06 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 03:09:06 [INFO] uvicorn.error:83 - _serve(): Started server process [38387]
2025-06-08 03:09:06 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 03:09:06 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 03:09:06 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 03:09:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 03:09:18 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 03:09:18 [INFO] uvicorn.error:83 - _serve(): Started server process [38407]
2025-06-08 03:09:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 03:09:18 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 03:09:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 03:09:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 03:09:26 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 03:09:26 [INFO] uvicorn.error:83 - _serve(): Started server process [38420]
2025-06-08 03:09:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 03:09:26 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 03:09:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 03:09:59 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:09:59 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 03:09:59 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:09:59 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 03:09:59 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 03:09:59 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 03:09:59 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 03:09:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 03:09:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 03:09:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 03:09:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 03:09:59 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 03:09:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 03:09:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 03:09:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 03:09:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 03:09:59 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 03:09:59 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 03:09:59 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 03:09:59 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 03:09:59 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 03:09:59 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 03:09:59 [INFO] app.api.controllers.attendance_controller:56 - checkin(): Check-in request for employee: EMP003
2025-06-08 03:09:59 [INFO] app.infrastructure.services.attendance_service_impl:58 - check_in(): Processing check-in for employee: EMP003
2025-06-08 03:09:59 [INFO] app.application.use_cases.attendance.check_in_use_case:87 - execute(): Processing check-in for employee: EMP003
2025-06-08 03:09:59 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 03:09:59 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 03:10:01 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 03:10:01 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 03:10:01 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-08 03:10:01 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_pms_global_database
2025-06-08 03:10:01 [ERROR] app.infrastructure.services.attendance_service_impl:78 - check_in(): Error processing check-in: Employee EMP003 not found
2025-06-08 03:10:01 [WARNING] app.api.controllers.attendance_controller:63 - checkin(): Business rule error during check-in: Employee EMP003 not found
2025-06-08 03:10:01 [WARNING] app.api.routes.attendance_routes_v2:74 - checkin(): Business rule error during check-in: Employee EMP003 not found
2025-06-08 03:10:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57274 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 03:10:38 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:10:38 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 03:10:38 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:10:38 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP002
2025-06-08 03:10:38 [INFO] app.api.controllers.attendance_controller:56 - checkin(): Check-in request for employee: EMP002
2025-06-08 03:10:38 [INFO] app.infrastructure.services.attendance_service_impl:58 - check_in(): Processing check-in for employee: EMP002
2025-06-08 03:10:38 [INFO] app.application.use_cases.attendance.check_in_use_case:87 - execute(): Processing check-in for employee: EMP002
2025-06-08 03:10:38 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_pms_global_database
2025-06-08 03:10:38 [ERROR] app.infrastructure.services.attendance_service_impl:78 - check_in(): Error processing check-in: Employee EMP002 not found
2025-06-08 03:10:38 [WARNING] app.api.controllers.attendance_controller:63 - checkin(): Business rule error during check-in: Employee EMP002 not found
2025-06-08 03:10:38 [WARNING] app.api.routes.attendance_routes_v2:74 - checkin(): Business rule error during check-in: Employee EMP002 not found
2025-06-08 03:10:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57396 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 03:10:51 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 03:10:51 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 03:10:51 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 03:10:51 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 03:10:51 [INFO] uvicorn.error:93 - _serve(): Finished server process [38420]
2025-06-08 03:10:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 03:11:04 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 03:11:04 [INFO] uvicorn.error:83 - _serve(): Started server process [38500]
2025-06-08 03:11:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 03:11:04 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 03:11:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 03:11:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 03:11:16 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 03:11:16 [INFO] uvicorn.error:83 - _serve(): Started server process [38520]
2025-06-08 03:11:16 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 03:11:16 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 03:11:16 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 03:11:16 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:11:16 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 03:11:16 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:11:16 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 03:11:16 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 03:11:16 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 03:11:16 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 03:11:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 03:11:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 03:11:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 03:11:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 03:11:16 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 03:11:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 03:11:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 03:11:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 03:11:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 03:11:16 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 03:11:16 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 03:11:16 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 03:11:16 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 03:11:16 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 03:11:16 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP002
2025-06-08 03:11:16 [INFO] app.api.controllers.attendance_controller:56 - checkin(): Check-in request for employee: EMP002
2025-06-08 03:11:16 [INFO] app.infrastructure.services.attendance_service_impl:58 - check_in(): Processing check-in for employee: EMP002
2025-06-08 03:11:16 [INFO] app.application.use_cases.attendance.check_in_use_case:87 - execute(): Processing check-in for employee: EMP002
2025-06-08 03:11:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 03:11:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 03:11:17 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 03:11:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 03:11:17 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-08 03:11:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_pms_global_database
2025-06-08 03:11:18 [WARNING] app.infrastructure.services.attendance_service_impl:69 - check_in(): Database/employee issue during check-in, using fallback: Employee EMP002 not found
2025-06-08 03:11:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57560 - "POST /api/v2/attendance/checkin HTTP/1.1" 200
2025-06-08 03:11:25 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:11:25 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 03:11:25 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:11:25 [INFO] app.api.routes.attendance_routes_v2:90 - checkout(): Check-out request for employee: EMP002
2025-06-08 03:11:25 [INFO] app.api.controllers.attendance_controller:76 - checkout(): Check-out request for employee: EMP002
2025-06-08 03:11:25 [INFO] app.infrastructure.services.attendance_service_impl:86 - check_out(): Processing check-out for employee: EMP002
2025-06-08 03:11:25 [INFO] app.application.use_cases.attendance.check_out_use_case:88 - execute(): Processing check-out for employee: EMP002
2025-06-08 03:11:25 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_pms_global_database
2025-06-08 03:11:25 [WARNING] app.infrastructure.services.attendance_service_impl:97 - check_out(): Database/employee issue during check-out, using fallback: Employee EMP002 not found
2025-06-08 03:11:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57659 - "POST /api/v2/attendance/checkout HTTP/1.1" 200
2025-06-08 03:11:34 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP002
2025-06-08 03:11:34 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP002 from organisation: test_company
2025-06-08 03:11:34 [INFO] app.api.routes.employee_leave_routes_v2:494 - get_user_leaves_by_month_legacy(): Getting leaves for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 03:11:34 [INFO] app.api.controllers.employee_leave_controller:308 - get_monthly_leaves(): Retrieving monthly leaves for EMP002: 6/2025
2025-06-08 03:11:34 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:235 - get_employee_leaves_by_month(): Retrieving leaves for employee EMP002 in 6/2025
2025-06-08 03:11:34 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:92 - _get_collection(): Successfully retrieved collection: employee_leaves from database: pms_pms_global_database
2025-06-08 03:11:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57678 - "GET /api/v2/employee-leave/user/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 03:11:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP002
2025-06-08 03:11:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP002 from organisation: test_company
2025-06-08 03:11:43 [INFO] app.api.routes.employee_leave_routes_v2:541 - get_user_lwp_legacy(): Getting LWP for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 03:11:43 [ERROR] app.api.routes.employee_leave_routes_v2:84 - wrapper(): Unexpected error: 403: Access denied
2025-06-08 03:11:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57695 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 500
2025-06-08 03:12:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP002
2025-06-08 03:12:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP002 from organisation: test_company
2025-06-08 03:12:32 [INFO] app.api.routes.employee_leave_routes_v2:541 - get_user_lwp_legacy(): Getting LWP for employee EMP002 for 6/2025 (legacy endpoint)
2025-06-08 03:12:32 [INFO] app.api.controllers.employee_leave_controller:452 - calculate_lwp(): Calculating LWP for EMP002: 6/2025
2025-06-08 03:12:32 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:347 - calculate_lwp_for_month(): Calculating LWP for employee EMP002 in 6/2025
2025-06-08 03:12:32 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:367 - calculate_lwp_for_month(): Failed to calculate LWP: Analytics repository not available
2025-06-08 03:12:32 [ERROR] app.api.controllers.employee_leave_controller:473 - calculate_lwp(): Error calculating LWP: Failed to calculate LWP: Analytics repository not available
2025-06-08 03:12:32 [ERROR] app.api.controllers.employee_leave_controller:478 - calculate_lwp(): LWP fallback also failed: No module named 'app.infrastructure.services.legacy_migration_service'
2025-06-08 03:12:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57891 - "GET /api/v2/employee-leave/lwp/EMP002/6/2025 HTTP/1.1" 200
2025-06-08 03:13:05 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 03:13:05 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 03:13:05 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 03:13:05 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 03:13:05 [INFO] uvicorn.error:93 - _serve(): Finished server process [38520]
2025-06-08 03:13:10 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 03:13:18 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 03:13:18 [INFO] uvicorn.error:83 - _serve(): Started server process [38643]
2025-06-08 03:13:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 03:13:18 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 03:13:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 03:15:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58246 - "OPTIONS /api/v2/attendance/checkin HTTP/1.1" 200
2025-06-08 03:15:02 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:15:02 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 03:15:02 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:15:02 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 03:15:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 03:15:02 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 03:15:02 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 03:15:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 03:15:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 03:15:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 03:15:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 03:15:02 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 03:15:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 03:15:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 03:15:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 03:15:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 03:15:02 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 03:15:02 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 03:15:02 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 03:15:02 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 03:15:02 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 03:15:02 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 03:15:02 [INFO] app.api.controllers.attendance_controller:56 - checkin(): Check-in request for employee: EMP003
2025-06-08 03:15:02 [INFO] app.infrastructure.services.attendance_service_impl:58 - check_in(): Processing check-in for employee: EMP003
2025-06-08 03:15:02 [INFO] app.application.use_cases.attendance.check_in_use_case:87 - execute(): Processing check-in for employee: EMP003
2025-06-08 03:15:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 03:15:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 03:15:03 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 03:15:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 03:15:03 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-08 03:15:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_pms_global_database
2025-06-08 03:15:03 [WARNING] app.infrastructure.services.attendance_service_impl:69 - check_in(): Database/employee issue during check-in, using fallback: Employee EMP003 not found
2025-06-08 03:15:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58246 - "POST /api/v2/attendance/checkin HTTP/1.1" 200
2025-06-08 03:17:01 [INFO] app.api.routes.attendance_routes_v2:35 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:17:01 [INFO] app.api.routes.attendance_routes_v2:37 - get_attendance_controller(): Getting dependency container
2025-06-08 03:17:01 [INFO] app.api.routes.attendance_routes_v2:39 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 03:17:01 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 03:17:01 [INFO] app.api.controllers.attendance_controller:56 - checkin(): Check-in request for employee: EMP003
2025-06-08 03:17:01 [INFO] app.infrastructure.services.attendance_service_impl:58 - check_in(): Processing check-in for employee: EMP003
2025-06-08 03:17:38 [INFO] app.application.use_cases.attendance.check_in_use_case:87 - execute(): Processing check-in for employee: EMP003
2025-06-08 03:37:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_pms_global_database
2025-06-08 03:37:07 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 03:37:07 [INFO] uvicorn.access:473 - send():  - "GET /api/v2/attendance/health HTTP/1.1" 200
2025-06-08 03:37:07 [INFO] uvicorn.access:473 - send():  - "GET /api/v2/attendance/health HTTP/1.1" 200
2025-06-08 03:37:07 [INFO] uvicorn.error:93 - _serve(): Finished server process [38643]
2025-06-08 03:37:07 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2419, in run_sync_in_worker_thread
    await cls.checkpoint()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2326, in checkpoint
    await sleep(0)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/tasks.py", line 706, in sleep
    await __sleep0()
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/tasks.py", line 700, in __sleep0
    yield
asyncio.exceptions.CancelledError
2025-06-08 03:37:07 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2419, in run_sync_in_worker_thread
    await cls.checkpoint()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2326, in checkpoint
    await sleep(0)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/tasks.py", line 706, in sleep
    await __sleep0()
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/tasks.py", line 700, in __sleep0
    yield
asyncio.exceptions.CancelledError
2025-06-08 03:37:07 [ERROR] uvicorn.error:134 - send(): Traceback (most recent call last):
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 706, in run_until_complete
    self.run_forever()
    ~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 677, in run_forever
    self._run_once()
    ~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 2034, in _run_once
    handle._run()
    ~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 69, in serve
    with self.capture_signals():
         ~~~~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 148, in __exit__
    next(self.gen)
    ~~~~^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 330, in capture_signals
    signal.raise_signal(captured_signal)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 157, in _on_sigint
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/lifespan/on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/queues.py", line 186, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-08 03:37:07 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 706, in run_until_complete
    self.run_forever()
    ~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 677, in run_forever
    self._run_once()
    ~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py", line 2034, in _run_once
    handle._run()
    ~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 69, in serve
    with self.capture_signals():
         ~~~~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 148, in __exit__
    next(self.gen)
    ~~~~^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/server.py", line 330, in capture_signals
    signal.raise_signal(captured_signal)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py", line 157, in _on_sigint
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/routes/attendance_routes_v2.py", line 65, in checkin
    response = await controller.checkin(request, current_user.employee_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/controllers/attendance_controller.py", line 57, in checkin
    return await self.attendance_service.check_in(request, current_user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/infrastructure/services/attendance_service_impl.py", line 62, in check_in
    return await self.checkin_use_case.execute(request, current_user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/application/use_cases/attendance/check_in_use_case.py", line 93, in execute
    employee = await self._verify_employee(request.employee_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/application/use_cases/attendance/check_in_use_case.py", line 157, in _verify_employee
    employee = await self.employee_repository.get_by_id(employee_id)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/infrastructure/repositories/mongodb_user_repository.py", line 467, in get_by_id
    document = await collection.find_one({
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
    })
    ^^
asyncio.exceptions.CancelledError
2025-06-08 04:05:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:05:38 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:05:38 [INFO] uvicorn.error:83 - _serve(): Started server process [40000]
2025-06-08 04:05:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:05:38 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:05:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:05:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61275 - "OPTIONS /api/v2/attendance/checkin HTTP/1.1" 200
2025-06-08 04:05:49 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 04:05:49 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 04:05:49 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:05:49 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 04:05:49 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:05:49 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 04:05:49 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 04:05:49 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 04:05:49 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 04:05:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:05:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:05:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:05:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:05:49 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:05:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:05:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:05:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:05:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:05:49 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:05:49 [ERROR] app.config.dependency_container:327 - _create_attendance_use_cases(): Error creating attendance use cases: AttendanceAnalyticsUseCase.__init__() got an unexpected keyword argument 'attendance_analytics_repository'. Did you mean 'attendance_query_repository'?
2025-06-08 04:05:49 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 04:05:49 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 04:05:49 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 04:05:49 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 04:05:50 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 04:05:50 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 04:05:50 [WARNING] app.infrastructure.services.attendance_service_impl:69 - check_in(): Check-in use case not available, using fallback implementation
2025-06-08 04:05:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61275 - "POST /api/v2/attendance/checkin HTTP/1.1" 200
2025-06-08 04:07:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:07:30 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 04:07:30 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 04:07:30 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 04:07:30 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 04:07:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:07:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:07:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:07:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:07:30 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:07:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:07:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:07:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:07:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:07:30 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:07:30 [ERROR] app.config.dependency_container:327 - _create_attendance_use_cases(): Error creating attendance use cases: AttendanceAnalyticsUseCase.__init__() got an unexpected keyword argument 'attendance_analytics_repository'. Did you mean 'attendance_query_repository'?
2025-06-08 04:07:30 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 04:07:30 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 04:07:30 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 04:07:49 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 04:07:49 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 04:07:49 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 04:07:49 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 04:07:49 [INFO] uvicorn.error:93 - _serve(): Finished server process [40000]
2025-06-08 04:07:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:07:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:08:00 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 04:08:00 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 04:08:00 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 04:08:00 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 04:08:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:08:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:08:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:08:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:08:00 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:08:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:08:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:08:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:08:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:08:00 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:08:00 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 04:08:00 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 04:08:00 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 04:08:00 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 04:08:02 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:08:02 [INFO] uvicorn.error:83 - _serve(): Started server process [40137]
2025-06-08 04:08:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:08:02 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:08:02 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:08:10 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Signature verification failed.
2025-06-08 04:08:10 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Signature verification failed.
2025-06-08 04:08:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61403 - "POST /api/v2/attendance/checkin HTTP/1.1" 401
2025-06-08 04:08:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP002
2025-06-08 04:08:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP002 from organisation: test_company
2025-06-08 04:08:43 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:08:43 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 04:08:43 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:08:43 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 04:08:43 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 04:08:43 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 04:08:43 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 04:08:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:08:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:08:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:08:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:08:43 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:08:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:08:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:08:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:08:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:08:43 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:08:43 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 04:08:43 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 04:08:43 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 04:08:43 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 04:08:43 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP002
2025-06-08 04:08:43 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP002 in organisation: test_company
2025-06-08 04:08:43 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP002 in organisation test_company
2025-06-08 04:08:43 [INFO] app.application.use_cases.attendance.check_in_use_case:91 - execute(): Processing check-in for employee: EMP002 in organisation: test_company
2025-06-08 04:08:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 04:08:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 04:08:44 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 04:08:44 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 04:08:44 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_test_company' cached
2025-06-08 04:08:44 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_test_company
2025-06-08 04:08:44 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP002 in organisation test_company: Employee EMP002 not found in organisation test_company
2025-06-08 04:08:44 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Employee EMP002 not found in organisation test_company
2025-06-08 04:08:44 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Employee EMP002 not found in organisation test_company
2025-06-08 04:08:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61405 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 04:09:15 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 04:09:15 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 04:09:15 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:09:15 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 04:09:15 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:09:15 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 04:09:15 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 04:09:15 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 04:09:15 [INFO] app.application.use_cases.attendance.check_in_use_case:91 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 04:09:15 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 04:09:15 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 04:09:15 [ERROR] app.application.use_cases.attendance.check_in_use_case:140 - execute(): Unexpected error during check-in: 'SimpleUser' object has no attribute 'get'
2025-06-08 04:09:15 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Failed to process check-in: 'SimpleUser' object has no attribute 'get'
2025-06-08 04:09:15 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Failed to process check-in: 'SimpleUser' object has no attribute 'get'
2025-06-08 04:09:15 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Failed to process check-in: 'SimpleUser' object has no attribute 'get'
2025-06-08 04:09:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61537 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 04:10:02 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 04:10:02 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 04:10:02 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 04:10:02 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 04:10:02 [INFO] uvicorn.error:93 - _serve(): Finished server process [40137]
2025-06-08 04:10:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:10:15 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:10:15 [INFO] uvicorn.error:83 - _serve(): Started server process [40300]
2025-06-08 04:10:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:10:15 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:10:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:10:21 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 04:10:21 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 04:10:21 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:10:21 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 04:10:21 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:10:21 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 04:10:21 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 04:10:21 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 04:10:21 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 04:10:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:10:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:10:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:10:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:10:21 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:10:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:10:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:10:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:10:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:10:22 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:10:22 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 04:10:22 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 04:10:22 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 04:10:22 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 04:10:22 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 04:10:22 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 04:10:22 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 04:10:22 [INFO] app.application.use_cases.attendance.check_in_use_case:91 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 04:10:22 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 04:10:22 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 04:10:22 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 04:10:22 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 04:10:22 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 04:10:22 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 04:10:22 [ERROR] app.application.use_cases.attendance.check_in_use_case:140 - execute(): Unexpected error during check-in: MongoDBAttendanceRepository.get_by_employee_and_date() takes 3 positional arguments but 4 were given
2025-06-08 04:10:22 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Failed to process check-in: MongoDBAttendanceRepository.get_by_employee_and_date() takes 3 positional arguments but 4 were given
2025-06-08 04:10:22 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Failed to process check-in: MongoDBAttendanceRepository.get_by_employee_and_date() takes 3 positional arguments but 4 were given
2025-06-08 04:10:22 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Failed to process check-in: MongoDBAttendanceRepository.get_by_employee_and_date() takes 3 positional arguments but 4 were given
2025-06-08 04:10:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61823 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 04:11:50 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 04:11:50 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 04:11:50 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:11:50 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 04:11:50 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:11:50 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 04:11:50 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 04:11:55 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 04:12:02 [INFO] app.application.use_cases.attendance.check_in_use_case:91 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 04:12:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 04:13:51 [ERROR] app.application.use_cases.attendance.check_in_use_case:140 - execute(): Unexpected error during check-in: MongoDBAttendanceRepository.get_by_employee_and_date() takes 3 positional arguments but 4 were given
2025-06-08 04:13:51 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Failed to process check-in: MongoDBAttendanceRepository.get_by_employee_and_date() takes 3 positional arguments but 4 were given
2025-06-08 04:13:51 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Failed to process check-in: MongoDBAttendanceRepository.get_by_employee_and_date() takes 3 positional arguments but 4 were given
2025-06-08 04:13:51 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Failed to process check-in: MongoDBAttendanceRepository.get_by_employee_and_date() takes 3 positional arguments but 4 were given
2025-06-08 04:13:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62063 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 04:14:26 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 04:14:26 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 04:14:26 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:14:26 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 04:14:26 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:14:26 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 04:14:26 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 04:14:36 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 04:14:42 [INFO] app.application.use_cases.attendance.check_in_use_case:91 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 04:15:00 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 04:41:30 [ERROR] app.application.use_cases.attendance.check_in_use_case:140 - execute(): Unexpected error during check-in: MongoDBAttendanceRepository.get_by_employee_and_date() takes 3 positional arguments but 4 were given
2025-06-08 04:41:30 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Failed to process check-in: MongoDBAttendanceRepository.get_by_employee_and_date() takes 3 positional arguments but 4 were given
2025-06-08 04:41:30 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Failed to process check-in: MongoDBAttendanceRepository.get_by_employee_and_date() takes 3 positional arguments but 4 were given
2025-06-08 04:41:30 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Failed to process check-in: MongoDBAttendanceRepository.get_by_employee_and_date() takes 3 positional arguments but 4 were given
2025-06-08 04:41:30 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 04:41:30 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 04:41:30 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 04:41:30 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 04:41:30 [INFO] uvicorn.error:93 - _serve(): Finished server process [40300]
2025-06-08 04:41:34 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:41:39 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:41:39 [INFO] uvicorn.error:83 - _serve(): Started server process [40934]
2025-06-08 04:41:39 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:41:39 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:41:39 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:41:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63599 - "OPTIONS /api/v2/attendance/checkin HTTP/1.1" 200
2025-06-08 04:41:58 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 04:41:58 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 04:41:58 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:41:58 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 04:41:58 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:41:58 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 04:41:58 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 04:41:58 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 04:41:58 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 04:41:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:41:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:41:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:41:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:41:58 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:41:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:41:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:41:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:41:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:41:58 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:41:58 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 04:41:58 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 04:41:58 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 04:41:58 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 04:41:58 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 04:41:58 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 04:42:07 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 04:42:07 [INFO] app.application.use_cases.attendance.check_in_use_case:91 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 04:42:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 04:42:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 04:42:08 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 04:42:08 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 04:42:08 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 04:42:08 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 04:42:08 [ERROR] app.application.use_cases.attendance.check_in_use_case:140 - execute(): Unexpected error during check-in: MongoDBAttendanceRepository.get_by_employee_and_date() takes 3 positional arguments but 4 were given
2025-06-08 04:42:08 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Failed to process check-in: MongoDBAttendanceRepository.get_by_employee_and_date() takes 3 positional arguments but 4 were given
2025-06-08 04:42:08 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Failed to process check-in: MongoDBAttendanceRepository.get_by_employee_and_date() takes 3 positional arguments but 4 were given
2025-06-08 04:42:08 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Failed to process check-in: MongoDBAttendanceRepository.get_by_employee_and_date() takes 3 positional arguments but 4 were given
2025-06-08 04:42:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63599 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 04:44:06 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 04:44:06 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 04:44:06 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 04:44:06 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 04:44:06 [INFO] uvicorn.error:93 - _serve(): Finished server process [40934]
2025-06-08 04:44:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:44:20 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:44:20 [INFO] uvicorn.error:83 - _serve(): Started server process [40981]
2025-06-08 04:44:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:44:20 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:44:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:44:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:44:31 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:44:31 [INFO] uvicorn.error:83 - _serve(): Started server process [40995]
2025-06-08 04:44:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:44:31 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:44:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:44:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 04:44:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 04:44:31 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:44:31 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 04:44:31 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:44:31 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 04:44:31 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 04:44:31 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 04:44:31 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 04:44:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:44:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:44:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:44:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:44:31 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:44:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:44:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:44:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:44:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:44:31 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:44:31 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 04:44:31 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 04:44:31 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 04:44:31 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 04:44:31 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 04:44:31 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 04:44:31 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 04:44:31 [INFO] app.application.use_cases.attendance.check_in_use_case:91 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 04:44:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 04:44:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 04:44:32 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 04:44:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 04:44:32 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 04:44:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 04:44:32 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 04:44:32 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 04:44:32 [ERROR] app.application.use_cases.attendance.check_in_use_case:140 - execute(): Unexpected error during check-in: type object 'Attendance' has no attribute 'create_new_attendance'
2025-06-08 04:44:32 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Failed to process check-in: type object 'Attendance' has no attribute 'create_new_attendance'
2025-06-08 04:44:32 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Failed to process check-in: type object 'Attendance' has no attribute 'create_new_attendance'
2025-06-08 04:44:32 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Failed to process check-in: type object 'Attendance' has no attribute 'create_new_attendance'
2025-06-08 04:44:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63946 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 04:44:51 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 04:44:51 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 04:44:51 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 04:44:51 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 04:44:51 [INFO] uvicorn.error:93 - _serve(): Finished server process [40995]
2025-06-08 04:44:56 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:45:04 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:45:04 [INFO] uvicorn.error:83 - _serve(): Started server process [41024]
2025-06-08 04:45:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:45:04 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:45:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:45:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 04:45:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 04:45:04 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:45:04 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 04:45:04 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:45:04 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 04:45:04 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 04:45:04 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 04:45:04 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 04:45:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:45:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:45:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:45:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:45:04 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:45:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:45:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:45:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:45:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:45:04 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:45:04 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 04:45:04 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 04:45:04 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 04:45:04 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 04:45:04 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 04:45:04 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 04:45:04 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 04:45:04 [INFO] app.application.use_cases.attendance.check_in_use_case:91 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 04:45:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 04:45:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 04:45:05 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 04:45:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 04:45:05 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 04:45:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 04:45:05 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 04:45:05 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 04:45:05 [ERROR] app.application.use_cases.attendance.check_in_use_case:140 - execute(): Unexpected error during check-in: Cannot check in for future time
2025-06-08 04:45:05 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Failed to process check-in: Cannot check in for future time
2025-06-08 04:45:05 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Failed to process check-in: Cannot check in for future time
2025-06-08 04:45:05 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Failed to process check-in: Cannot check in for future time
2025-06-08 04:45:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64041 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 04:45:29 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 04:45:29 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 04:45:29 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 04:45:29 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 04:45:29 [INFO] uvicorn.error:93 - _serve(): Finished server process [41024]
2025-06-08 04:45:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:45:44 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:45:44 [INFO] uvicorn.error:83 - _serve(): Started server process [41062]
2025-06-08 04:45:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:45:44 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:45:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:46:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:46:11 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:46:11 [INFO] uvicorn.error:83 - _serve(): Started server process [41082]
2025-06-08 04:46:11 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:46:11 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:46:11 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:46:11 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 04:46:11 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 04:46:11 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:46:11 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 04:46:11 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:46:11 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 04:46:11 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 04:46:11 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 04:46:11 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 04:46:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:46:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:46:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:46:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:46:11 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:46:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:46:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:46:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:46:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:46:11 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:46:11 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 04:46:11 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 04:46:11 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 04:46:11 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 04:46:11 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 04:46:11 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 04:46:11 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 04:46:11 [INFO] app.application.use_cases.attendance.check_in_use_case:91 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 04:46:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 04:46:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 04:46:13 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 04:46:13 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 04:46:13 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 04:46:13 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 04:46:13 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 04:46:13 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 04:46:13 [ERROR] app.application.use_cases.attendance.check_in_use_case:140 - execute(): Unexpected error during check-in: Cannot check in for future time
2025-06-08 04:46:13 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Failed to process check-in: Cannot check in for future time
2025-06-08 04:46:13 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Failed to process check-in: Cannot check in for future time
2025-06-08 04:46:13 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Failed to process check-in: Cannot check in for future time
2025-06-08 04:46:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64281 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 04:46:43 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 04:46:43 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 04:46:43 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 04:46:43 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 04:46:43 [INFO] uvicorn.error:93 - _serve(): Finished server process [41082]
2025-06-08 04:46:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:47:01 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:47:01 [INFO] uvicorn.error:83 - _serve(): Started server process [41111]
2025-06-08 04:47:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:47:01 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:47:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:47:01 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 04:47:01 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 04:47:01 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:47:01 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 04:47:02 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:47:02 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 04:47:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 04:47:02 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 04:47:02 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 04:47:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:47:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:47:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:47:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:47:02 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:47:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:47:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:47:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:47:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:47:02 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:47:02 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 04:47:02 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 04:47:02 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 04:47:02 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 04:47:02 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 04:47:02 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 04:47:02 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 04:47:02 [INFO] app.application.use_cases.attendance.check_in_use_case:91 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 04:47:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 04:47:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 04:47:03 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 04:47:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 04:47:03 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 04:47:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 04:47:03 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 04:47:03 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 04:47:03 [INFO] app.domain.entities.attendance:138 - check_in(): Employee EMP003 checked in at 2025-06-08 04:47:02.112428
2025-06-08 04:47:03 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 04:47:03 [ERROR] app.infrastructure.repositories.mongodb_attendance_repository:358 - save(): Error saving attendance: AttendanceCreatedEvent.__init__() got an unexpected keyword argument 'event_id'
2025-06-08 04:47:03 [ERROR] app.application.use_cases.attendance.check_in_use_case:140 - execute(): Unexpected error during check-in: AttendanceCreatedEvent.__init__() got an unexpected keyword argument 'event_id'
2025-06-08 04:47:03 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Failed to process check-in: AttendanceCreatedEvent.__init__() got an unexpected keyword argument 'event_id'
2025-06-08 04:47:03 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Failed to process check-in: AttendanceCreatedEvent.__init__() got an unexpected keyword argument 'event_id'
2025-06-08 04:47:03 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Failed to process check-in: AttendanceCreatedEvent.__init__() got an unexpected keyword argument 'event_id'
2025-06-08 04:47:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64488 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 04:49:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 04:49:21 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 04:49:21 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 04:49:21 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 04:49:21 [INFO] uvicorn.error:93 - _serve(): Finished server process [41111]
2025-06-08 04:49:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:49:50 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:49:50 [INFO] uvicorn.error:83 - _serve(): Started server process [41173]
2025-06-08 04:49:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:49:50 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:49:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:50:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:50:21 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:50:21 [INFO] uvicorn.error:83 - _serve(): Started server process [41187]
2025-06-08 04:50:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:50:21 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:50:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:50:21 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 04:50:21 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 04:50:22 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:50:22 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 04:50:22 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:50:22 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 04:50:22 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 04:50:22 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 04:50:22 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 04:50:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:50:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:50:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:50:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:50:22 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:50:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:50:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:50:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:50:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:50:22 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:50:22 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 04:50:22 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 04:50:22 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 04:50:22 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 04:50:22 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 04:50:22 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 04:50:22 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 04:50:22 [INFO] app.application.use_cases.attendance.check_in_use_case:91 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 04:50:22 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 04:50:22 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 04:50:23 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 04:50:23 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 04:50:23 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 04:50:23 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 04:50:23 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 04:50:23 [ERROR] app.infrastructure.repositories.mongodb_attendance_repository:720 - get_by_employee_and_date(): Error getting attendance by employee and date: cannot import name 'AttendanceStatusEnum' from 'app.domain.value_objects.attendance_status' (/Users/ankit/Downloads/code/pmssrc/backend/app/domain/value_objects/attendance_status.py)
2025-06-08 04:50:23 [ERROR] app.application.use_cases.attendance.check_in_use_case:140 - execute(): Unexpected error during check-in: cannot import name 'AttendanceStatusEnum' from 'app.domain.value_objects.attendance_status' (/Users/ankit/Downloads/code/pmssrc/backend/app/domain/value_objects/attendance_status.py)
2025-06-08 04:50:23 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Failed to process check-in: cannot import name 'AttendanceStatusEnum' from 'app.domain.value_objects.attendance_status' (/Users/ankit/Downloads/code/pmssrc/backend/app/domain/value_objects/attendance_status.py)
2025-06-08 04:50:23 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Failed to process check-in: cannot import name 'AttendanceStatusEnum' from 'app.domain.value_objects.attendance_status' (/Users/ankit/Downloads/code/pmssrc/backend/app/domain/value_objects/attendance_status.py)
2025-06-08 04:50:23 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Failed to process check-in: cannot import name 'AttendanceStatusEnum' from 'app.domain.value_objects.attendance_status' (/Users/ankit/Downloads/code/pmssrc/backend/app/domain/value_objects/attendance_status.py)
2025-06-08 04:50:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65076 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 04:51:02 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 04:51:02 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 04:51:02 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 04:51:02 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 04:51:02 [INFO] uvicorn.error:93 - _serve(): Finished server process [41187]
2025-06-08 04:51:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:52:01 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:52:01 [INFO] uvicorn.error:83 - _serve(): Started server process [41223]
2025-06-08 04:52:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:52:01 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:52:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:52:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:52:34 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:52:34 [INFO] uvicorn.error:83 - _serve(): Started server process [41248]
2025-06-08 04:52:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:52:34 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:52:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:52:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:52:55 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:52:55 [INFO] uvicorn.error:83 - _serve(): Started server process [41264]
2025-06-08 04:52:55 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:52:55 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:52:55 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:52:55 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 04:52:55 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 04:52:55 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:52:55 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 04:52:55 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:52:55 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 04:52:55 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 04:52:55 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 04:52:55 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 04:52:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:52:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:52:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:52:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:52:55 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:52:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:52:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:52:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:52:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:52:55 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:52:55 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 04:52:55 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 04:52:55 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 04:52:55 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 04:52:55 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 04:52:55 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 04:52:55 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 04:52:55 [INFO] app.application.use_cases.attendance.check_in_use_case:91 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 04:52:55 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 04:52:55 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 04:52:57 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 04:52:57 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 04:52:57 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 04:52:57 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 04:52:57 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 04:52:57 [ERROR] app.infrastructure.repositories.mongodb_attendance_repository:720 - get_by_employee_and_date(): Error getting attendance by employee and date: name 'AttendanceStatusEnum' is not defined
2025-06-08 04:52:57 [ERROR] app.application.use_cases.attendance.check_in_use_case:140 - execute(): Unexpected error during check-in: name 'AttendanceStatusEnum' is not defined
2025-06-08 04:52:57 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Failed to process check-in: name 'AttendanceStatusEnum' is not defined
2025-06-08 04:52:57 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Failed to process check-in: name 'AttendanceStatusEnum' is not defined
2025-06-08 04:52:57 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Failed to process check-in: name 'AttendanceStatusEnum' is not defined
2025-06-08 04:52:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65385 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 04:53:27 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 04:53:27 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 04:53:27 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 04:53:27 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 04:53:27 [INFO] uvicorn.error:93 - _serve(): Finished server process [41264]
2025-06-08 04:53:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:53:53 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:53:53 [INFO] uvicorn.error:83 - _serve(): Started server process [41287]
2025-06-08 04:53:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:53:53 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:53:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:54:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:54:09 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:54:09 [INFO] uvicorn.error:83 - _serve(): Started server process [41303]
2025-06-08 04:54:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:54:09 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:54:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:54:09 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 04:54:09 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 04:54:09 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:54:09 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 04:54:09 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:54:09 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 04:54:09 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 04:54:09 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 04:54:09 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 04:54:09 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:54:09 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:54:09 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:54:09 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:54:09 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:54:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:54:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:54:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:54:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:54:10 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:54:10 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 04:54:10 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 04:54:10 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 04:54:10 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 04:54:10 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 04:54:10 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 04:54:10 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 04:54:10 [INFO] app.application.use_cases.attendance.check_in_use_case:93 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 04:54:10 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 04:54:10 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 04:54:11 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 04:54:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 04:54:11 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 04:54:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 04:54:11 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 04:54:11 [ERROR] app.infrastructure.repositories.mongodb_attendance_repository:720 - get_by_employee_and_date(): Error getting attendance by employee and date: name 'AttendanceStatusEnum' is not defined
2025-06-08 04:54:11 [ERROR] app.application.use_cases.attendance.check_in_use_case:142 - execute(): Unexpected error during check-in: name 'AttendanceStatusEnum' is not defined
2025-06-08 04:54:11 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Failed to process check-in: name 'AttendanceStatusEnum' is not defined
2025-06-08 04:54:11 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Failed to process check-in: name 'AttendanceStatusEnum' is not defined
2025-06-08 04:54:11 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Failed to process check-in: name 'AttendanceStatusEnum' is not defined
2025-06-08 04:54:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49251 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 04:55:14 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 04:55:14 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 04:55:14 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 04:55:14 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 04:55:14 [INFO] uvicorn.error:93 - _serve(): Finished server process [41303]
2025-06-08 04:55:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:56:00 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:56:00 [INFO] uvicorn.error:83 - _serve(): Started server process [41363]
2025-06-08 04:56:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:56:00 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:56:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:56:01 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 04:56:01 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 04:56:01 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:56:01 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 04:56:01 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:56:01 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 04:56:01 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 04:56:01 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 04:56:01 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 04:56:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:56:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:56:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:56:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:56:01 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:56:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:56:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:56:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:56:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:56:01 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:56:01 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 04:56:01 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 04:56:01 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 04:56:01 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 04:56:01 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 04:56:01 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 04:56:01 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 04:56:01 [INFO] app.application.use_cases.attendance.check_in_use_case:93 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 04:56:01 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 04:56:01 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 04:56:02 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 04:56:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 04:56:02 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 04:56:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 04:56:02 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 04:56:02 [ERROR] app.infrastructure.repositories.mongodb_attendance_repository:720 - get_by_employee_and_date(): Error getting attendance by employee and date: WorkingHours.__init__() got an unexpected keyword argument 'break_start_time'
2025-06-08 04:56:02 [ERROR] app.application.use_cases.attendance.check_in_use_case:142 - execute(): Unexpected error during check-in: WorkingHours.__init__() got an unexpected keyword argument 'break_start_time'
2025-06-08 04:56:02 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Failed to process check-in: WorkingHours.__init__() got an unexpected keyword argument 'break_start_time'
2025-06-08 04:56:02 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Failed to process check-in: WorkingHours.__init__() got an unexpected keyword argument 'break_start_time'
2025-06-08 04:56:02 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Failed to process check-in: WorkingHours.__init__() got an unexpected keyword argument 'break_start_time'
2025-06-08 04:56:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49510 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 04:56:13 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 04:56:13 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 04:56:13 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 04:56:13 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 04:56:13 [INFO] uvicorn.error:93 - _serve(): Finished server process [41363]
2025-06-08 04:56:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 04:56:28 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 04:56:28 [INFO] uvicorn.error:83 - _serve(): Started server process [41404]
2025-06-08 04:56:28 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 04:56:28 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 04:56:28 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 04:56:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 04:56:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 04:56:28 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:56:28 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 04:56:28 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 04:56:28 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 04:56:28 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 04:56:28 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 04:56:28 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 04:56:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:56:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:56:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:56:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:56:28 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:56:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 04:56:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 04:56:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 04:56:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 04:56:28 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 04:56:28 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 04:56:28 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 04:56:28 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 04:56:28 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 04:56:28 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 04:56:28 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 04:56:28 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 04:56:28 [INFO] app.application.use_cases.attendance.check_in_use_case:93 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 04:56:28 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 04:56:28 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 04:56:29 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 04:56:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 04:56:29 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 04:56:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 04:56:29 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 04:56:29 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 04:56:29 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 04:56:29 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 04:56:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49679 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 05:01:29 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 05:01:29 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 05:01:29 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 05:01:29 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 05:01:29 [INFO] uvicorn.error:93 - _serve(): Finished server process [41404]
2025-06-08 05:01:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:01:48 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:01:48 [INFO] uvicorn.error:83 - _serve(): Started server process [41472]
2025-06-08 05:01:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:01:48 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 05:01:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:01:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50560 - "OPTIONS /api/v2/attendance/checkout HTTP/1.1" 200
2025-06-08 05:01:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 05:01:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 05:01:48 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:01:48 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 05:01:48 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:01:48 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 05:01:48 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 05:01:48 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 05:01:48 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 05:01:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 05:01:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 05:01:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 05:01:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 05:01:48 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 05:01:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 05:01:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 05:01:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 05:01:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 05:01:48 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 05:01:48 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 05:01:48 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 05:01:48 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 05:01:48 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 05:01:48 [INFO] app.api.routes.attendance_routes_v2:88 - checkout(): Check-out request for employee: EMP003
2025-06-08 05:01:48 [INFO] app.api.controllers.attendance_controller:80 - checkout(): Check-out request for employee: EMP003 in organisation: localhost
2025-06-08 05:01:48 [INFO] app.infrastructure.services.attendance_service_impl:79 - check_out(): Processing check-out for employee EMP003 in organisation localhost
2025-06-08 05:01:48 [INFO] app.application.use_cases.attendance.check_out_use_case:92 - execute(): Processing check-out for employee: EMP003 in organisation: localhost
2025-06-08 05:01:48 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 05:01:48 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 05:01:49 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 05:01:49 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 05:01:49 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 05:01:49 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 05:01:49 [ERROR] app.application.use_cases.attendance.check_out_use_case:136 - execute(): Unexpected error during check-out: 'SimpleUser' object has no attribute 'get'
2025-06-08 05:01:49 [ERROR] app.infrastructure.services.attendance_service_impl:89 - check_out(): Error processing check-out for employee EMP003 in organisation localhost: Failed to process check-out: 'SimpleUser' object has no attribute 'get'
2025-06-08 05:01:49 [WARNING] app.api.controllers.attendance_controller:87 - checkout(): Business rule error during check-out: Failed to process check-out: 'SimpleUser' object has no attribute 'get'
2025-06-08 05:01:49 [WARNING] app.api.routes.attendance_routes_v2:104 - checkout(): Business rule error during check-out: Failed to process check-out: 'SimpleUser' object has no attribute 'get'
2025-06-08 05:01:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50560 - "POST /api/v2/attendance/checkout HTTP/1.1" 422
2025-06-08 05:01:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50567 - "OPTIONS /api/v2/attendance/checkin HTTP/1.1" 200
2025-06-08 05:01:56 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 05:01:56 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 05:01:56 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:01:56 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 05:01:56 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:01:56 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 05:01:56 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 05:01:56 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 05:01:56 [INFO] app.application.use_cases.attendance.check_in_use_case:93 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 05:01:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 05:01:56 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 05:01:56 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 05:01:56 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 05:01:56 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 05:01:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50641 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 05:02:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 05:02:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 05:02:51 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:02:51 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 05:02:51 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:02:51 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 05:02:51 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 05:02:51 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 05:02:51 [INFO] app.application.use_cases.attendance.check_in_use_case:93 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 05:02:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 05:02:51 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 05:02:51 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 05:02:51 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 05:02:51 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 05:02:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50711 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 05:03:07 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 05:03:07 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 05:03:07 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:03:07 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 05:03:07 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:03:07 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 05:03:07 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 05:03:07 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 05:03:07 [INFO] app.application.use_cases.attendance.check_in_use_case:93 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 05:03:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 05:03:07 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 05:03:07 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 05:03:07 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 05:03:07 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 05:03:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50804 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 05:04:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP001
2025-06-08 05:04:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP001 from organisation: localhost
2025-06-08 05:04:17 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:04:17 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 05:04:17 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:04:17 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP001
2025-06-08 05:04:17 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP001 in organisation: localhost
2025-06-08 05:04:17 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP001 in organisation localhost
2025-06-08 05:04:17 [INFO] app.application.use_cases.attendance.check_in_use_case:93 - execute(): Processing check-in for employee: EMP001 in organisation: localhost
2025-06-08 05:04:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 05:04:17 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 05:04:17 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 05:04:17 [INFO] app.domain.entities.attendance:138 - check_in(): Employee EMP001 checked in at 2025-06-08 05:04:17.206275
2025-06-08 05:04:17 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 05:04:17 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:339 - save(): Created attendance: EMP001
2025-06-08 05:04:17 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:310 - _publish_events(): Publishing event: AttendanceCreatedEvent
2025-06-08 05:04:17 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-08 05:04:17 [ERROR] app.infrastructure.services.enhanced_event_publisher:107 - save_event(): Error saving event to store: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-08 05:04:17 [WARNING] app.application.use_cases.attendance.check_in_use_case:256 - _publish_events(): Failed to publish check-in event: 'dict' object has no attribute 'get_event_type'
2025-06-08 05:04:17 [INFO] app.application.use_cases.attendance.check_in_use_case:134 - execute(): Check-in completed successfully for employee: EMP001 in organisation: localhost
2025-06-08 05:04:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51295 - "POST /api/v2/attendance/checkin HTTP/1.1" 200
2025-06-08 05:04:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 05:04:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 05:04:28 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:04:28 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 05:04:28 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:04:28 [INFO] app.api.routes.attendance_routes_v2:88 - checkout(): Check-out request for employee: EMP003
2025-06-08 05:04:28 [INFO] app.api.controllers.attendance_controller:80 - checkout(): Check-out request for employee: EMP003 in organisation: localhost
2025-06-08 05:04:28 [INFO] app.infrastructure.services.attendance_service_impl:79 - check_out(): Processing check-out for employee EMP003 in organisation localhost
2025-06-08 05:04:28 [INFO] app.application.use_cases.attendance.check_out_use_case:92 - execute(): Processing check-out for employee: EMP003 in organisation: localhost
2025-06-08 05:04:28 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 05:04:28 [ERROR] app.application.use_cases.attendance.check_out_use_case:136 - execute(): Unexpected error during check-out: 'SimpleUser' object has no attribute 'get'
2025-06-08 05:04:28 [ERROR] app.infrastructure.services.attendance_service_impl:89 - check_out(): Error processing check-out for employee EMP003 in organisation localhost: Failed to process check-out: 'SimpleUser' object has no attribute 'get'
2025-06-08 05:04:28 [WARNING] app.api.controllers.attendance_controller:87 - checkout(): Business rule error during check-out: Failed to process check-out: 'SimpleUser' object has no attribute 'get'
2025-06-08 05:04:28 [WARNING] app.api.routes.attendance_routes_v2:104 - checkout(): Business rule error during check-out: Failed to process check-out: 'SimpleUser' object has no attribute 'get'
2025-06-08 05:04:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51362 - "POST /api/v2/attendance/checkout HTTP/1.1" 422
2025-06-08 05:04:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51507 - "OPTIONS /leaves/leave-balance HTTP/1.1" 200
2025-06-08 05:04:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51509 - "OPTIONS /leaves/my-leaves HTTP/1.1" 200
2025-06-08 05:04:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51512 - "OPTIONS /leaves/leave-balance HTTP/1.1" 200
2025-06-08 05:04:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51514 - "OPTIONS /leaves/my-leaves HTTP/1.1" 200
2025-06-08 05:04:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51507 - "GET /leaves/my-leaves HTTP/1.1" 404
2025-06-08 05:04:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51517 - "GET /leaves/leave-balance HTTP/1.1" 404
2025-06-08 05:04:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51514 - "GET /leaves/my-leaves HTTP/1.1" 404
2025-06-08 05:04:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51507 - "GET /leaves/leave-balance HTTP/1.1" 404
2025-06-08 05:05:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51643 - "OPTIONS /leaves/all HTTP/1.1" 200
2025-06-08 05:05:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51646 - "OPTIONS /leaves/stats HTTP/1.1" 200
2025-06-08 05:05:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51648 - "OPTIONS /leaves/all HTTP/1.1" 200
2025-06-08 05:05:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51649 - "OPTIONS /leaves/stats HTTP/1.1" 200
2025-06-08 05:05:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51643 - "GET /leaves/all HTTP/1.1" 404
2025-06-08 05:05:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51643 - "GET /leaves/all HTTP/1.1" 404
2025-06-08 05:05:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51651 - "GET /leaves/stats HTTP/1.1" 404
2025-06-08 05:05:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51651 - "GET /leaves/stats HTTP/1.1" 404
2025-06-08 05:05:27 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 05:05:27 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 05:05:27 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 05:05:27 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 05:05:27 [INFO] uvicorn.error:93 - _serve(): Finished server process [41472]
2025-06-08 05:05:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:05:46 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:05:46 [INFO] uvicorn.error:83 - _serve(): Started server process [41589]
2025-06-08 05:05:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:05:46 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 05:05:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:05:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:06:30 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:06:30 [INFO] uvicorn.error:83 - _serve(): Started server process [41621]
2025-06-08 05:06:30 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:06:30 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 05:06:30 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:06:30 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 05:06:30 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 05:06:30 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:06:30 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 05:06:30 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:06:30 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 05:06:30 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 05:06:30 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 05:06:30 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 05:06:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 05:06:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 05:06:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 05:06:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 05:06:30 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 05:06:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 05:06:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 05:06:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 05:06:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 05:06:30 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 05:06:30 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 05:06:30 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 05:06:30 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 05:06:30 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 05:06:30 [INFO] app.api.routes.attendance_routes_v2:88 - checkout(): Check-out request for employee: EMP003
2025-06-08 05:06:30 [INFO] app.api.controllers.attendance_controller:80 - checkout(): Check-out request for employee: EMP003 in organisation: localhost
2025-06-08 05:06:30 [INFO] app.infrastructure.services.attendance_service_impl:79 - check_out(): Processing check-out for employee EMP003 in organisation localhost
2025-06-08 05:06:30 [INFO] app.application.use_cases.attendance.check_out_use_case:92 - execute(): Processing check-out for employee: EMP003 in organisation: localhost
2025-06-08 05:06:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 05:06:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 05:06:32 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 05:06:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 05:06:32 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 05:06:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 05:06:32 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 05:06:32 [ERROR] app.infrastructure.services.attendance_service_impl:89 - check_out(): Error processing check-out for employee EMP003 in organisation localhost: Check-out time cannot be more than 1 hour in the future
2025-06-08 05:06:32 [WARNING] app.api.controllers.attendance_controller:87 - checkout(): Business rule error during check-out: Check-out time cannot be more than 1 hour in the future
2025-06-08 05:06:32 [WARNING] app.api.routes.attendance_routes_v2:104 - checkout(): Business rule error during check-out: Check-out time cannot be more than 1 hour in the future
2025-06-08 05:06:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51945 - "POST /api/v2/attendance/checkout HTTP/1.1" 422
2025-06-08 05:06:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52233 - "OPTIONS /api/v2/leaves/all HTTP/1.1" 200
2025-06-08 05:06:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52235 - "GET /leaves/stats HTTP/1.1" 404
2025-06-08 05:06:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52233 - "GET /api/v2/leaves/all HTTP/1.1" 404
2025-06-08 05:06:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52233 - "GET /api/v2/leaves/all HTTP/1.1" 404
2025-06-08 05:06:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52235 - "OPTIONS /api/v2/leaves/stats HTTP/1.1" 200
2025-06-08 05:06:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52233 - "GET /api/v2/leaves/stats HTTP/1.1" 404
2025-06-08 05:06:57 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 05:06:57 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 05:06:57 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 05:06:57 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 05:06:57 [INFO] uvicorn.error:93 - _serve(): Finished server process [41621]
2025-06-08 05:07:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:07:56 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:07:56 [INFO] uvicorn.error:83 - _serve(): Started server process [41728]
2025-06-08 05:07:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:07:56 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 05:07:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:07:56 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 05:07:56 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 05:07:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52767 - "GET /api/v2/leaves/all HTTP/1.1" 404
2025-06-08 05:07:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52769 - "GET /api/v2/leaves/stats HTTP/1.1" 404
2025-06-08 05:07:56 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:07:56 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 05:07:56 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:07:56 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 05:07:56 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 05:07:56 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 05:07:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52769 - "GET /api/v2/leaves/stats HTTP/1.1" 404
2025-06-08 05:07:56 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 05:07:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52787 - "GET /api/v2/leaves/all HTTP/1.1" 404
2025-06-08 05:07:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 05:07:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 05:07:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 05:07:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 05:07:56 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 05:07:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 05:07:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 05:07:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 05:07:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 05:07:56 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 05:07:56 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 05:07:56 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 05:07:56 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 05:07:56 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 05:07:56 [INFO] app.api.routes.attendance_routes_v2:88 - checkout(): Check-out request for employee: EMP003
2025-06-08 05:07:56 [INFO] app.api.controllers.attendance_controller:80 - checkout(): Check-out request for employee: EMP003 in organisation: localhost
2025-06-08 05:07:56 [INFO] app.infrastructure.services.attendance_service_impl:79 - check_out(): Processing check-out for employee EMP003 in organisation localhost
2025-06-08 05:07:56 [INFO] app.application.use_cases.attendance.check_out_use_case:92 - execute(): Processing check-out for employee: EMP003 in organisation: localhost
2025-06-08 05:07:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 05:07:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 05:07:57 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 05:07:57 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 05:07:57 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 05:07:57 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 05:07:58 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 05:07:58 [INFO] app.domain.entities.attendance:185 - check_out(): Employee EMP003 checked out at 2025-06-08 05:07:56.842222
2025-06-08 05:07:58 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 05:07:58 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:349 - save(): Updated attendance: EMP003
2025-06-08 05:07:58 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:310 - _publish_events(): Publishing event: AttendanceUpdatedEvent
2025-06-08 05:07:58 [WARNING] app.application.use_cases.attendance.check_out_use_case:256 - _publish_events(): Failed to publish check-out event: 'WorkingHours' object has no attribute 'total_hours'
2025-06-08 05:07:58 [WARNING] app.application.use_cases.attendance.check_out_use_case:274 - _send_notifications(): Failed to send check-out notifications: '>' not supported between instances of 'method' and 'int'
2025-06-08 05:07:58 [ERROR] app.application.use_cases.attendance.check_out_use_case:136 - execute(): Unexpected error during check-out: 'WorkingHours' object has no attribute 'total_hours'
2025-06-08 05:07:58 [ERROR] app.infrastructure.services.attendance_service_impl:89 - check_out(): Error processing check-out for employee EMP003 in organisation localhost: Failed to process check-out: 'WorkingHours' object has no attribute 'total_hours'
2025-06-08 05:07:58 [WARNING] app.api.controllers.attendance_controller:87 - checkout(): Business rule error during check-out: Failed to process check-out: 'WorkingHours' object has no attribute 'total_hours'
2025-06-08 05:07:58 [WARNING] app.api.routes.attendance_routes_v2:104 - checkout(): Business rule error during check-out: Failed to process check-out: 'WorkingHours' object has no attribute 'total_hours'
2025-06-08 05:07:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52455 - "POST /api/v2/attendance/checkout HTTP/1.1" 422
2025-06-08 05:08:18 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 05:08:18 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 05:08:18 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 05:08:18 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 05:08:18 [INFO] uvicorn.error:93 - _serve(): Finished server process [41728]
2025-06-08 05:08:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:08:31 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:08:31 [INFO] uvicorn.error:83 - _serve(): Started server process [41844]
2025-06-08 05:08:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:08:31 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 05:08:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:08:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:08:45 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:08:45 [INFO] uvicorn.error:83 - _serve(): Started server process [41859]
2025-06-08 05:08:45 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:08:45 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 05:08:45 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:08:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:08:58 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:08:58 [INFO] uvicorn.error:83 - _serve(): Started server process [41878]
2025-06-08 05:08:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:08:58 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 05:08:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:09:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:09:08 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:09:08 [INFO] uvicorn.error:83 - _serve(): Started server process [41891]
2025-06-08 05:09:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:09:08 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 05:09:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:09:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:09:19 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:09:19 [INFO] uvicorn.error:83 - _serve(): Started server process [41904]
2025-06-08 05:09:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:09:19 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 05:09:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:09:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 05:09:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 05:09:19 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:09:19 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 05:09:19 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:09:19 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 05:09:19 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 05:09:19 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 05:09:19 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 05:09:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 05:09:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 05:09:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 05:09:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 05:09:19 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 05:09:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 05:09:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 05:09:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 05:09:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 05:09:19 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 05:09:19 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 05:09:19 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 05:09:19 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 05:09:19 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 05:09:19 [INFO] app.api.routes.attendance_routes_v2:88 - checkout(): Check-out request for employee: EMP003
2025-06-08 05:09:19 [INFO] app.api.controllers.attendance_controller:80 - checkout(): Check-out request for employee: EMP003 in organisation: localhost
2025-06-08 05:09:19 [INFO] app.infrastructure.services.attendance_service_impl:79 - check_out(): Processing check-out for employee EMP003 in organisation localhost
2025-06-08 05:09:19 [INFO] app.application.use_cases.attendance.check_out_use_case:93 - execute(): Processing check-out for employee: EMP003 in organisation: localhost
2025-06-08 05:09:19 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 05:09:19 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 05:09:20 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 05:09:20 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 05:09:20 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 05:09:20 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 05:09:20 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 05:09:20 [ERROR] app.infrastructure.services.attendance_service_impl:89 - check_out(): Error processing check-out for employee EMP003 in organisation localhost: Employee EMP003 is already checked out
2025-06-08 05:09:20 [WARNING] app.api.controllers.attendance_controller:87 - checkout(): Business rule error during check-out: Employee EMP003 is already checked out
2025-06-08 05:09:20 [WARNING] app.api.routes.attendance_routes_v2:104 - checkout(): Business rule error during check-out: Employee EMP003 is already checked out
2025-06-08 05:09:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53334 - "POST /api/v2/attendance/checkout HTTP/1.1" 422
2025-06-08 05:11:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54363 - "OPTIONS /api/v2/leaves/leave-balance HTTP/1.1" 200
2025-06-08 05:11:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54365 - "OPTIONS /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 05:11:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54363 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 404
2025-06-08 05:11:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54367 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 404
2025-06-08 05:13:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54929 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 05:13:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54931 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 05:13:26 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 05:13:26 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 05:13:26 [INFO] app.infrastructure.services.user_service_impl:802 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 05:13:26 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 05:13:26 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 05:13:26 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 05:13:26 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 05:13:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54934 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 05:13:26 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 05:13:26 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 05:13:26 [INFO] app.infrastructure.services.user_service_impl:802 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 05:13:26 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 05:13:27 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 05:13:27 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 05:13:27 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 05:13:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54934 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 05:13:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54934 - "OPTIONS /api/v2/attendance/checkin HTTP/1.1" 200
2025-06-08 05:13:30 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 05:13:30 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 05:13:30 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:13:30 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 05:13:30 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 05:13:30 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: superadmin
2025-06-08 05:13:30 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: superadmin in organisation: localhost
2025-06-08 05:13:30 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee superadmin in organisation localhost
2025-06-08 05:13:30 [INFO] app.application.use_cases.attendance.check_in_use_case:93 - execute(): Processing check-in for employee: superadmin in organisation: localhost
2025-06-08 05:13:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 05:13:30 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee superadmin in organisation localhost: Employee superadmin not found in organisation localhost
2025-06-08 05:13:30 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Employee superadmin not found in organisation localhost
2025-06-08 05:13:30 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Employee superadmin not found in organisation localhost
2025-06-08 05:13:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54934 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 05:14:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55400 - "GET /api/v2/leaves/all HTTP/1.1" 404
2025-06-08 05:14:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55400 - "GET /api/v2/leaves/all HTTP/1.1" 404
2025-06-08 05:14:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55402 - "GET /api/v2/leaves/stats HTTP/1.1" 404
2025-06-08 05:14:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55402 - "GET /api/v2/leaves/stats HTTP/1.1" 404
2025-06-08 05:21:39 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 05:21:39 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 05:21:39 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 05:21:39 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 05:21:39 [INFO] uvicorn.error:93 - _serve(): Finished server process [41904]
2025-06-08 05:21:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:22:02 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:22:02 [INFO] uvicorn.error:83 - _serve(): Started server process [42037]
2025-06-08 05:22:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:22:02 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 05:22:03 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:22:29 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 05:22:29 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 05:22:29 [INFO] app.main:39 - lifespan(): Running shutdown tasks...
2025-06-08 05:22:29 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 05:22:29 [INFO] uvicorn.error:93 - _serve(): Finished server process [42037]
2025-06-08 05:22:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:22:41 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:22:41 [INFO] uvicorn.error:83 - _serve(): Started server process [42070]
2025-06-08 05:22:41 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:22:41 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 05:22:41 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:22:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:22:54 [INFO] app.main:81 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:22:54 [INFO] uvicorn.error:83 - _serve(): Started server process [42080]
2025-06-08 05:22:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:22:54 [INFO] app.main:37 - lifespan(): Running startup tasks...
2025-06-08 05:22:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:22:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:23:05 [INFO] app.main:82 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:23:05 [INFO] uvicorn.error:83 - _serve(): Started server process [42089]
2025-06-08 05:23:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:23:05 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 05:23:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:23:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:23:18 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:23:18 [INFO] uvicorn.error:83 - _serve(): Started server process [42103]
2025-06-08 05:23:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:23:18 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 05:23:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:23:34 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 05:23:34 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 05:23:34 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 05:23:34 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 05:23:34 [INFO] uvicorn.error:93 - _serve(): Finished server process [42103]
2025-06-08 05:23:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:23:46 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:23:46 [INFO] uvicorn.error:83 - _serve(): Started server process [42120]
2025-06-08 05:23:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:23:46 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 05:23:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:23:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:24:01 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:24:01 [INFO] uvicorn.error:83 - _serve(): Started server process [42128]
2025-06-08 05:24:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:24:01 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 05:24:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:24:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:24:13 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:24:13 [INFO] uvicorn.error:83 - _serve(): Started server process [42138]
2025-06-08 05:24:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:24:13 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 05:24:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:24:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:24:26 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:24:26 [INFO] uvicorn.error:83 - _serve(): Started server process [42143]
2025-06-08 05:24:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:24:26 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 05:24:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:24:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:24:38 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:24:38 [INFO] uvicorn.error:83 - _serve(): Started server process [42150]
2025-06-08 05:24:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:24:38 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 05:24:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:24:47 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:24:52 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:24:52 [INFO] uvicorn.error:83 - _serve(): Started server process [42155]
2025-06-08 05:24:52 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:24:52 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 05:24:52 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:25:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 05:25:30 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 05:25:30 [INFO] uvicorn.error:83 - _serve(): Started server process [42162]
2025-06-08 05:25:30 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 05:25:30 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 05:25:30 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 05:25:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60596 - "OPTIONS /api/v2/leaves/leave-balance HTTP/1.1" 200
2025-06-08 05:25:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60598 - "OPTIONS /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 05:25:30 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 05:25:30 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 05:25:30 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 05:25:30 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 05:25:31 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 05:25:31 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 05:25:31 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 05:25:31 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 05:25:31 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 05:25:31 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 05:25:31 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 05:25:31 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 05:25:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 05:25:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 05:25:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 05:25:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 05:25:31 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 05:25:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 05:25:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 05:25:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 05:25:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 05:25:31 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 05:25:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 05:25:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 05:25:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 05:25:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 05:25:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 05:25:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 05:25:31 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 05:25:31 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 05:25:31 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 05:25:31 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 05:25:31 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 05:25:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 05:25:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 05:25:31 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 05:25:31 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 05:25:31 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 05:25:31 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 05:25:31 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 05:25:31 [INFO] app.api.routes.leaves_routes_v2:141 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 05:25:31 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003
2025-06-08 05:25:31 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:92 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: EMP003
2025-06-08 05:25:31 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:105 - get_employee_leaves_by_employee_id(): Failed to retrieve leaves for employee EMP003: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 05:25:31 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 05:25:31 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 05:25:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60598 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 05:25:31 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 05:25:31 [INFO] app.api.controllers.employee_leave_controller:387 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 05:25:31 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:261 - get_leave_balance(): Retrieving leave balance for employee: EMP003
2025-06-08 05:25:31 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:272 - get_leave_balance(): Failed to retrieve leave balance for EMP003: Leave balance functionality not implemented
2025-06-08 05:25:31 [ERROR] app.api.controllers.employee_leave_controller:394 - get_leave_balance(): Error retrieving leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 05:25:31 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 05:25:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60596 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 05:25:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 05:25:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 05:25:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 05:25:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 05:25:31 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 05:25:31 [INFO] app.api.controllers.employee_leave_controller:387 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 05:25:31 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:261 - get_leave_balance(): Retrieving leave balance for employee: EMP003
2025-06-08 05:25:31 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:272 - get_leave_balance(): Failed to retrieve leave balance for EMP003: Leave balance functionality not implemented
2025-06-08 05:25:31 [ERROR] app.api.controllers.employee_leave_controller:394 - get_leave_balance(): Error retrieving leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 05:25:31 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 05:25:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60596 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 05:25:31 [INFO] app.api.routes.leaves_routes_v2:141 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 05:25:31 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003
2025-06-08 05:25:31 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:92 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: EMP003
2025-06-08 05:25:31 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:105 - get_employee_leaves_by_employee_id(): Failed to retrieve leaves for employee EMP003: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 05:25:31 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 05:25:31 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 05:25:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60598 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 05:25:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60743 - "OPTIONS /api/v2/leaves/all HTTP/1.1" 200
2025-06-08 05:25:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60745 - "OPTIONS /api/v2/leaves/stats HTTP/1.1" 200
2025-06-08 05:25:49 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 05:25:49 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 05:25:49 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 05:25:49 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 05:25:49 [INFO] app.api.routes.leaves_routes_v2:200 - get_all_leaves(): Retrieving all leaves by: superadmin
2025-06-08 05:25:49 [INFO] app.api.controllers.employee_leave_controller:279 - search_leaves(): Searching employee leaves
2025-06-08 05:25:49 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:187 - search_employee_leaves(): Searching employee leaves with filters
2025-06-08 05:25:49 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:213 - search_employee_leaves(): Failed to search employee leaves: EmployeeLeaveRepositoryImpl.search() got an unexpected keyword argument 'employee_id'
2025-06-08 05:25:49 [ERROR] app.api.controllers.employee_leave_controller:286 - search_leaves(): Error searching employee leaves: Failed to search employee leaves: EmployeeLeaveRepositoryImpl.search() got an unexpected keyword argument 'employee_id'
2025-06-08 05:25:49 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to search employee leaves: Failed to search employee leaves: EmployeeLeaveRepositoryImpl.search() got an unexpected keyword argument 'employee_id'
2025-06-08 05:25:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60743 - "GET /api/v2/leaves/all HTTP/1.1" 500
2025-06-08 05:25:49 [INFO] app.api.routes.leaves_routes_v2:245 - get_leave_stats(): Retrieving leave statistics by: superadmin
2025-06-08 05:25:49 [INFO] app.api.controllers.employee_leave_controller:416 - get_leave_analytics(): Retrieving leave analytics
2025-06-08 05:25:49 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:294 - get_leave_analytics(): Retrieving leave analytics
2025-06-08 05:25:49 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:325 - get_leave_analytics(): Failed to retrieve leave analytics: Analytics repository not available
2025-06-08 05:25:49 [ERROR] app.api.controllers.employee_leave_controller:430 - get_leave_analytics(): Error retrieving leave analytics: Failed to retrieve leave analytics: Analytics repository not available
2025-06-08 05:25:49 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave analytics: Failed to retrieve leave analytics: Analytics repository not available
2025-06-08 05:25:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60747 - "GET /api/v2/leaves/stats HTTP/1.1" 500
2025-06-08 05:25:57 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 05:25:57 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 05:25:57 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 05:25:57 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 05:25:57 [INFO] app.api.routes.leaves_routes_v2:200 - get_all_leaves(): Retrieving all leaves by: superadmin
2025-06-08 05:25:57 [INFO] app.api.controllers.employee_leave_controller:279 - search_leaves(): Searching employee leaves
2025-06-08 05:25:57 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:187 - search_employee_leaves(): Searching employee leaves with filters
2025-06-08 05:25:57 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:213 - search_employee_leaves(): Failed to search employee leaves: EmployeeLeaveRepositoryImpl.search() got an unexpected keyword argument 'employee_id'
2025-06-08 05:25:57 [ERROR] app.api.controllers.employee_leave_controller:286 - search_leaves(): Error searching employee leaves: Failed to search employee leaves: EmployeeLeaveRepositoryImpl.search() got an unexpected keyword argument 'employee_id'
2025-06-08 05:25:57 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to search employee leaves: Failed to search employee leaves: EmployeeLeaveRepositoryImpl.search() got an unexpected keyword argument 'employee_id'
2025-06-08 05:25:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60808 - "GET /api/v2/leaves/all HTTP/1.1" 500
2025-06-08 05:25:57 [INFO] app.api.routes.leaves_routes_v2:245 - get_leave_stats(): Retrieving leave statistics by: superadmin
2025-06-08 05:25:57 [INFO] app.api.controllers.employee_leave_controller:416 - get_leave_analytics(): Retrieving leave analytics
2025-06-08 05:25:57 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:294 - get_leave_analytics(): Retrieving leave analytics
2025-06-08 05:25:57 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:325 - get_leave_analytics(): Failed to retrieve leave analytics: Analytics repository not available
2025-06-08 05:25:57 [ERROR] app.api.controllers.employee_leave_controller:430 - get_leave_analytics(): Error retrieving leave analytics: Failed to retrieve leave analytics: Analytics repository not available
2025-06-08 05:25:57 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave analytics: Failed to retrieve leave analytics: Analytics repository not available
2025-06-08 05:25:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60810 - "GET /api/v2/leaves/stats HTTP/1.1" 500
2025-06-08 10:51:43 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 10:51:43 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 10:51:43 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 10:51:43 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 10:51:43 [INFO] uvicorn.error:93 - _serve(): Finished server process [42162]
2025-06-08 10:51:54 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 10:52:00 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 10:52:00 [INFO] uvicorn.error:83 - _serve(): Started server process [43827]
2025-06-08 10:52:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 10:52:00 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 10:52:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 10:52:06 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 10:52:12 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 10:52:12 [INFO] uvicorn.error:83 - _serve(): Started server process [43868]
2025-06-08 10:52:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 10:52:12 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 10:52:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 10:52:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 10:52:23 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 10:52:23 [INFO] uvicorn.error:83 - _serve(): Started server process [43885]
2025-06-08 10:52:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 10:52:23 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 10:52:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 10:52:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61661 - "OPTIONS /api/v2/leaves/all HTTP/1.1" 200
2025-06-08 10:52:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61663 - "OPTIONS /api/v2/leaves/stats HTTP/1.1" 200
2025-06-08 10:52:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 10:52:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61997 - "GET /api/v2/leaves/health HTTP/1.1" 200
2025-06-08 10:53:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62035 - "GET /docs HTTP/1.1" 200
2025-06-08 10:53:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62061 - "GET /openapi.json HTTP/1.1" 200
2025-06-08 11:33:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65180 - "OPTIONS /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 11:33:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65182 - "OPTIONS /api/v2/users?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 11:33:41 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-08 11:33:41 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-08 11:33:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65180 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 401
2025-06-08 11:33:41 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-08 11:33:41 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-08 11:33:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65182 - "GET /api/v2/users?skip=0&limit=10 HTTP/1.1" 401
2025-06-08 11:33:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65184 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-08 11:33:51 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-08 11:33:51 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-08 11:33:51 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-08 11:33:52 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 11:33:52 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 11:33:52 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-08 11:33:52 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-08 11:33:52 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-08 11:33:52 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-08 11:33:53 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-08 11:33:53 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-08 11:33:53 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-08 11:33:53 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-08T14:03:53.409944
2025-06-08 11:33:53 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-08 11:33:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65184 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-08 11:33:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65184 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 11:33:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65239 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 11:33:53 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 11:33:53 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 11:33:53 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 11:33:53 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 11:33:53 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 11:33:53 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 11:33:53 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 11:33:53 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 11:33:53 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 11:33:53 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 11:33:53 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 11:33:53 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 11:33:53 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 11:33:53 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 11:33:53 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 11:33:53 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 11:33:53 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 11:33:53 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 11:33:53 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 11:33:53 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 11:33:53 [INFO] app.infrastructure.services.user_service_impl:802 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 11:33:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 11:33:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 11:33:54 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 11:33:54 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 11:33:54 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 11:33:54 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 11:33:54 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 11:33:54 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 11:33:54 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 11:33:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65184 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 11:33:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 11:33:54 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 11:33:54 [INFO] app.infrastructure.services.user_service_impl:802 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 11:33:54 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 11:33:54 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 11:33:54 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 11:33:54 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 11:33:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65184 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 11:34:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65262 - "OPTIONS /api/v2/leaves/leave-balance HTTP/1.1" 200
2025-06-08 11:34:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65376 - "OPTIONS /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 11:34:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 11:34:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 11:34:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65379 - "OPTIONS /api/v2/leaves/leave-balance HTTP/1.1" 200
2025-06-08 11:34:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65380 - "OPTIONS /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 11:34:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 11:34:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 11:34:04 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: superadmin
2025-06-08 11:34:04 [INFO] app.api.controllers.employee_leave_controller:387 - get_leave_balance(): Retrieving leave balance for: superadmin
2025-06-08 11:34:04 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:261 - get_leave_balance(): Retrieving leave balance for employee: superadmin
2025-06-08 11:34:04 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:272 - get_leave_balance(): Failed to retrieve leave balance for superadmin: Leave balance functionality not implemented
2025-06-08 11:34:04 [ERROR] app.api.controllers.employee_leave_controller:394 - get_leave_balance(): Error retrieving leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 11:34:04 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 11:34:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65262 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 11:34:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 11:34:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 11:34:04 [INFO] app.api.routes.leaves_routes_v2:141 - get_my_leaves(): Retrieving leaves for current user: superadmin
2025-06-08 11:34:04 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: superadmin
2025-06-08 11:34:04 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:92 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: superadmin
2025-06-08 11:34:04 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:105 - get_employee_leaves_by_employee_id(): Failed to retrieve leaves for employee SUPERADMIN: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:34:04 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:34:04 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:34:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65382 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 11:34:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 11:34:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 11:34:04 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: superadmin
2025-06-08 11:34:04 [INFO] app.api.controllers.employee_leave_controller:387 - get_leave_balance(): Retrieving leave balance for: superadmin
2025-06-08 11:34:04 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:261 - get_leave_balance(): Retrieving leave balance for employee: superadmin
2025-06-08 11:34:04 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:272 - get_leave_balance(): Failed to retrieve leave balance for superadmin: Leave balance functionality not implemented
2025-06-08 11:34:04 [ERROR] app.api.controllers.employee_leave_controller:394 - get_leave_balance(): Error retrieving leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 11:34:04 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 11:34:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65262 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 11:34:04 [INFO] app.api.routes.leaves_routes_v2:141 - get_my_leaves(): Retrieving leaves for current user: superadmin
2025-06-08 11:34:04 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: superadmin
2025-06-08 11:34:04 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:92 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: superadmin
2025-06-08 11:34:04 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:105 - get_employee_leaves_by_employee_id(): Failed to retrieve leaves for employee SUPERADMIN: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:34:04 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:34:04 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:34:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65382 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 11:34:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65420 - "OPTIONS /lwp HTTP/1.1" 200
2025-06-08 11:34:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65422 - "OPTIONS /lwp HTTP/1.1" 200
2025-06-08 11:34:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65420 - "GET /lwp HTTP/1.1" 404
2025-06-08 11:34:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65420 - "GET /lwp HTTP/1.1" 404
2025-06-08 11:34:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65424 - "OPTIONS /api/v2/leaves/all HTTP/1.1" 200
2025-06-08 11:34:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 11:34:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 11:34:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65451 - "OPTIONS /api/v2/leaves/stats HTTP/1.1" 200
2025-06-08 11:34:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65452 - "OPTIONS /api/v2/leaves/all HTTP/1.1" 200
2025-06-08 11:34:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65454 - "OPTIONS /api/v2/leaves/stats HTTP/1.1" 200
2025-06-08 11:34:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 11:34:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 11:34:19 [INFO] app.api.routes.leaves_routes_v2:200 - get_all_leaves(): Retrieving all leaves by: superadmin
2025-06-08 11:34:19 [INFO] app.api.controllers.employee_leave_controller:279 - search_leaves(): Searching employee leaves
2025-06-08 11:34:19 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:187 - search_employee_leaves(): Searching employee leaves with filters
2025-06-08 11:34:19 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:213 - search_employee_leaves(): Failed to search employee leaves: EmployeeLeaveRepositoryImpl.search() got an unexpected keyword argument 'employee_id'
2025-06-08 11:34:19 [ERROR] app.api.controllers.employee_leave_controller:286 - search_leaves(): Error searching employee leaves: Failed to search employee leaves: EmployeeLeaveRepositoryImpl.search() got an unexpected keyword argument 'employee_id'
2025-06-08 11:34:19 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to search employee leaves: Failed to search employee leaves: EmployeeLeaveRepositoryImpl.search() got an unexpected keyword argument 'employee_id'
2025-06-08 11:34:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65424 - "GET /api/v2/leaves/all HTTP/1.1" 500
2025-06-08 11:34:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 11:34:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 11:34:19 [INFO] app.api.routes.leaves_routes_v2:245 - get_leave_stats(): Retrieving leave statistics by: superadmin
2025-06-08 11:34:19 [INFO] app.api.controllers.employee_leave_controller:416 - get_leave_analytics(): Retrieving leave analytics
2025-06-08 11:34:19 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:294 - get_leave_analytics(): Retrieving leave analytics
2025-06-08 11:34:19 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:325 - get_leave_analytics(): Failed to retrieve leave analytics: Analytics repository not available
2025-06-08 11:34:19 [ERROR] app.api.controllers.employee_leave_controller:430 - get_leave_analytics(): Error retrieving leave analytics: Failed to retrieve leave analytics: Analytics repository not available
2025-06-08 11:34:19 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave analytics: Failed to retrieve leave analytics: Analytics repository not available
2025-06-08 11:34:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65456 - "GET /api/v2/leaves/stats HTTP/1.1" 500
2025-06-08 11:34:19 [INFO] app.api.routes.leaves_routes_v2:200 - get_all_leaves(): Retrieving all leaves by: superadmin
2025-06-08 11:34:19 [INFO] app.api.controllers.employee_leave_controller:279 - search_leaves(): Searching employee leaves
2025-06-08 11:34:19 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:187 - search_employee_leaves(): Searching employee leaves with filters
2025-06-08 11:34:19 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:213 - search_employee_leaves(): Failed to search employee leaves: EmployeeLeaveRepositoryImpl.search() got an unexpected keyword argument 'employee_id'
2025-06-08 11:34:19 [ERROR] app.api.controllers.employee_leave_controller:286 - search_leaves(): Error searching employee leaves: Failed to search employee leaves: EmployeeLeaveRepositoryImpl.search() got an unexpected keyword argument 'employee_id'
2025-06-08 11:34:19 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to search employee leaves: Failed to search employee leaves: EmployeeLeaveRepositoryImpl.search() got an unexpected keyword argument 'employee_id'
2025-06-08 11:34:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65454 - "GET /api/v2/leaves/all HTTP/1.1" 500
2025-06-08 11:34:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 11:34:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 11:34:19 [INFO] app.api.routes.leaves_routes_v2:245 - get_leave_stats(): Retrieving leave statistics by: superadmin
2025-06-08 11:34:19 [INFO] app.api.controllers.employee_leave_controller:416 - get_leave_analytics(): Retrieving leave analytics
2025-06-08 11:34:19 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:294 - get_leave_analytics(): Retrieving leave analytics
2025-06-08 11:34:19 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:325 - get_leave_analytics(): Failed to retrieve leave analytics: Analytics repository not available
2025-06-08 11:34:19 [ERROR] app.api.controllers.employee_leave_controller:430 - get_leave_analytics(): Error retrieving leave analytics: Failed to retrieve leave analytics: Analytics repository not available
2025-06-08 11:34:19 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave analytics: Failed to retrieve leave analytics: Analytics repository not available
2025-06-08 11:34:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65456 - "GET /api/v2/leaves/stats HTTP/1.1" 500
2025-06-08 11:34:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49287 - "OPTIONS /api/v2/leaves/leave-balance HTTP/1.1" 200
2025-06-08 11:34:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49289 - "OPTIONS /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 11:34:45 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-08 11:34:45 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-08 11:34:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49287 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 401
2025-06-08 11:34:45 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-08 11:34:45 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-08 11:34:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49289 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 401
2025-06-08 11:34:45 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-08 11:34:45 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-08 11:34:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49291 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 401
2025-06-08 11:34:45 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-08 11:34:45 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-08 11:34:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49291 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 401
2025-06-08 11:34:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49335 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-08 11:34:56 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: emp003 @ localhost
2025-06-08 11:34:56 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: emp003 @ localhost
2025-06-08 11:34:56 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-08 11:34:56 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 11:34:56 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 11:34:57 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-08 11:34:57 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: emp003
2025-06-08 11:34:57 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$gHiCgdCJbSRnoeGtzPMs4./cpUqt.p3NlXpYRZE8W5/LrWyou4R42
2025-06-08 11:34:57 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-08 11:34:57 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: EMP003
2025-06-08 11:34:57 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-08T14:04:57.505703
2025-06-08 11:34:57 [INFO] app.api.controllers.auth_controller:165 - login(): User emp003 logged in successfully
2025-06-08 11:34:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49335 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-08 11:34:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49335 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 11:34:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49337 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 11:34:57 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 11:34:57 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 11:34:57 [INFO] app.infrastructure.services.user_service_impl:802 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 11:34:57 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 11:34:57 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 11:34:57 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 11:34:57 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 11:34:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49335 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 11:34:58 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 11:34:58 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 11:34:58 [INFO] app.infrastructure.services.user_service_impl:802 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 11:34:58 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 11:34:58 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 11:34:58 [ERROR] app.infrastructure.services.user_service_impl:806 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 11:34:58 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 11:34:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49337 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 11:35:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 11:35:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 11:35:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 11:35:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 11:35:02 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 11:35:02 [INFO] app.api.controllers.employee_leave_controller:387 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 11:35:02 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:261 - get_leave_balance(): Retrieving leave balance for employee: EMP003
2025-06-08 11:35:02 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:272 - get_leave_balance(): Failed to retrieve leave balance for EMP003: Leave balance functionality not implemented
2025-06-08 11:35:02 [ERROR] app.api.controllers.employee_leave_controller:394 - get_leave_balance(): Error retrieving leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 11:35:02 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 11:35:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49337 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 11:35:02 [INFO] app.api.routes.leaves_routes_v2:141 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 11:35:02 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003
2025-06-08 11:35:02 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:92 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: EMP003
2025-06-08 11:35:02 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:105 - get_employee_leaves_by_employee_id(): Failed to retrieve leaves for employee EMP003: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:35:02 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:35:02 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:35:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49335 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 11:35:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 11:35:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 11:35:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 11:35:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 11:35:02 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 11:35:02 [INFO] app.api.controllers.employee_leave_controller:387 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 11:35:02 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:261 - get_leave_balance(): Retrieving leave balance for employee: EMP003
2025-06-08 11:35:02 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:272 - get_leave_balance(): Failed to retrieve leave balance for EMP003: Leave balance functionality not implemented
2025-06-08 11:35:02 [ERROR] app.api.controllers.employee_leave_controller:394 - get_leave_balance(): Error retrieving leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 11:35:02 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 11:35:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49377 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 11:35:02 [INFO] app.api.routes.leaves_routes_v2:141 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 11:35:02 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003
2025-06-08 11:35:02 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:92 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: EMP003
2025-06-08 11:35:02 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:105 - get_employee_leaves_by_employee_id(): Failed to retrieve leaves for employee EMP003: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:35:02 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:35:02 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:35:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49337 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 11:38:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 11:38:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 11:38:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 11:38:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 11:38:43 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 11:38:43 [INFO] app.api.controllers.employee_leave_controller:387 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 11:38:43 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:261 - get_leave_balance(): Retrieving leave balance for employee: EMP003
2025-06-08 11:38:43 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:272 - get_leave_balance(): Failed to retrieve leave balance for EMP003: Leave balance functionality not implemented
2025-06-08 11:38:43 [ERROR] app.api.controllers.employee_leave_controller:394 - get_leave_balance(): Error retrieving leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 11:38:43 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 11:38:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50800 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 11:38:43 [INFO] app.api.routes.leaves_routes_v2:141 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 11:38:43 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003
2025-06-08 11:38:43 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:92 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: EMP003
2025-06-08 11:38:43 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:105 - get_employee_leaves_by_employee_id(): Failed to retrieve leaves for employee EMP003: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:38:43 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:38:43 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:38:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50802 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 11:38:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 11:38:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 11:38:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 11:38:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 11:38:43 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 11:38:43 [INFO] app.api.controllers.employee_leave_controller:387 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 11:38:43 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:261 - get_leave_balance(): Retrieving leave balance for employee: EMP003
2025-06-08 11:38:43 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:272 - get_leave_balance(): Failed to retrieve leave balance for EMP003: Leave balance functionality not implemented
2025-06-08 11:38:43 [ERROR] app.api.controllers.employee_leave_controller:394 - get_leave_balance(): Error retrieving leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 11:38:43 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 11:38:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50800 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 11:38:43 [INFO] app.api.routes.leaves_routes_v2:141 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 11:38:43 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003
2025-06-08 11:38:43 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:92 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: EMP003
2025-06-08 11:38:43 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:105 - get_employee_leaves_by_employee_id(): Failed to retrieve leaves for employee EMP003: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:38:43 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:38:43 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 11:38:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50804 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 11:44:14 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 11:44:14 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 11:44:14 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 11:44:14 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 11:44:14 [INFO] uvicorn.error:93 - _serve(): Finished server process [43885]
2025-06-08 11:44:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 11:44:27 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 11:44:27 [INFO] uvicorn.error:83 - _serve(): Started server process [44378]
2025-06-08 11:44:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 11:44:27 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 11:44:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 11:44:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 11:44:39 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 11:44:39 [INFO] uvicorn.error:83 - _serve(): Started server process [44402]
2025-06-08 11:44:39 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 11:44:39 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 11:44:39 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 11:44:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 11:44:50 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 11:44:50 [INFO] uvicorn.error:83 - _serve(): Started server process [44469]
2025-06-08 11:44:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 11:44:50 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 11:44:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 11:45:02 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 11:45:02 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 11:45:02 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 11:45:02 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 11:45:02 [INFO] uvicorn.error:93 - _serve(): Finished server process [44469]
2025-06-08 11:45:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 11:45:17 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 11:45:17 [INFO] uvicorn.error:83 - _serve(): Started server process [44485]
2025-06-08 11:45:17 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 11:45:17 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 11:45:17 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 11:45:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 11:45:30 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 11:45:30 [INFO] uvicorn.error:83 - _serve(): Started server process [44512]
2025-06-08 11:45:30 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 11:45:30 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 11:45:30 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 11:45:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 11:45:49 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 11:45:49 [INFO] uvicorn.error:83 - _serve(): Started server process [44531]
2025-06-08 11:45:49 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 11:45:49 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 11:45:49 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 11:45:54 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 11:46:00 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 11:46:00 [INFO] uvicorn.error:83 - _serve(): Started server process [44552]
2025-06-08 11:46:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 11:46:00 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 11:46:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 11:46:03 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 11:46:03 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 11:46:03 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 11:46:03 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 11:46:03 [INFO] uvicorn.error:93 - _serve(): Finished server process [44552]
2025-06-08 11:46:10 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 11:46:20 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 11:46:20 [INFO] uvicorn.error:83 - _serve(): Started server process [44568]
2025-06-08 11:46:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 11:46:20 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 11:46:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 11:46:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 11:46:32 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 11:46:32 [INFO] uvicorn.error:83 - _serve(): Started server process [44583]
2025-06-08 11:46:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 11:46:32 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 11:46:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 11:48:32 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 11:48:32 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 11:48:32 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 11:48:32 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 11:48:32 [INFO] uvicorn.error:93 - _serve(): Finished server process [44583]
2025-06-08 11:48:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 11:48:43 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 11:48:43 [INFO] uvicorn.error:83 - _serve(): Started server process [44627]
2025-06-08 11:48:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 11:48:43 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 11:48:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 11:52:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55732 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-08 11:52:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55733 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-08 11:52:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55735 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-08 11:52:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55735 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-08 11:52:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55733 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-08 11:52:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55735 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-08 11:52:47 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 11:52:47 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 11:52:47 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 11:52:47 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 11:52:47 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 11:52:47 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 11:52:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 11:52:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 11:52:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 11:52:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 11:52:47 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 11:52:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 11:52:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 11:52:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 11:52:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 11:52:47 [INFO] app.config.dependency_container:502 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 11:52:47 [INFO] app.config.dependency_container:317 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 11:52:47 [INFO] app.config.dependency_container:268 - _setup_services(): Services initialized
2025-06-08 11:52:47 [INFO] app.config.dependency_container:339 - _setup_controllers(): Controllers setup deferred
2025-06-08 11:52:47 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 11:52:47 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-08 11:52:47 [INFO] app.infrastructure.services.company_leave_service_impl:286 - list_company_leaves(): Listing company leaves in organisation localhost
2025-06-08 11:52:47 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-08 11:52:47 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:76 - _get_collection(): Database not connected, establishing connection...
2025-06-08 11:52:47 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:81 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 11:52:48 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 11:52:48 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:91 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 11:52:48 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 11:52:48 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-08 11:52:48 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:244 - list_with_filters(): MongoDB query: {}
2025-06-08 11:52:48 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:248 - list_with_filters(): Pagination: skip=0, limit=100
2025-06-08 11:52:48 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:253 - list_with_filters(): Sort: field=created_at, direction=-1
2025-06-08 11:52:48 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:264 - list_with_filters(): Retrieved 1 company leave documents from MongoDB with filters
2025-06-08 11:52:48 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:267 - list_with_filters(): Successfully converted 1 filtered documents to entities
2025-06-08 11:52:48 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-08 11:52:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55732 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-08 11:52:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 11:52:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 11:52:48 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-08 11:52:48 [INFO] app.infrastructure.services.company_leave_service_impl:286 - list_company_leaves(): Listing company leaves in organisation localhost
2025-06-08 11:52:48 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:233 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-08 11:52:48 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-08 11:52:48 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:244 - list_with_filters(): MongoDB query: {}
2025-06-08 11:52:48 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:248 - list_with_filters(): Pagination: skip=0, limit=100
2025-06-08 11:52:48 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:253 - list_with_filters(): Sort: field=created_at, direction=-1
2025-06-08 11:52:48 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:264 - list_with_filters(): Retrieved 1 company leave documents from MongoDB with filters
2025-06-08 11:52:48 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:267 - list_with_filters(): Successfully converted 1 filtered documents to entities
2025-06-08 11:52:48 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-08 11:52:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55732 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-08 12:12:31 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 12:12:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 12:12:31 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 12:12:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 12:12:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [44627]
2025-06-08 12:12:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:12:44 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:12:44 [INFO] uvicorn.error:83 - _serve(): Started server process [44812]
2025-06-08 12:12:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:12:44 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:12:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:12:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:12:59 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:12:59 [INFO] uvicorn.error:83 - _serve(): Started server process [44830]
2025-06-08 12:12:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:12:59 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:12:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:13:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:13:09 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:13:09 [INFO] uvicorn.error:83 - _serve(): Started server process [44859]
2025-06-08 12:13:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:13:09 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:13:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:13:20 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 12:13:20 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 12:13:20 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 12:13:20 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 12:13:20 [INFO] uvicorn.error:93 - _serve(): Finished server process [44859]
2025-06-08 12:13:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:13:31 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:13:31 [INFO] uvicorn.error:83 - _serve(): Started server process [44877]
2025-06-08 12:13:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:13:31 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:13:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:13:37 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 12:13:37 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 12:13:37 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 12:13:37 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 12:13:37 [INFO] uvicorn.error:93 - _serve(): Finished server process [44877]
2025-06-08 12:13:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:13:54 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:13:54 [INFO] uvicorn.error:83 - _serve(): Started server process [44899]
2025-06-08 12:13:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:13:54 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:13:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:13:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:14:05 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:14:05 [INFO] uvicorn.error:83 - _serve(): Started server process [44923]
2025-06-08 12:14:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:14:05 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:14:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:14:27 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 12:14:27 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 12:14:27 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 12:14:27 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 12:14:27 [INFO] uvicorn.error:93 - _serve(): Finished server process [44923]
2025-06-08 12:14:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:14:38 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:14:38 [INFO] uvicorn.error:83 - _serve(): Started server process [44947]
2025-06-08 12:14:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:14:38 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:14:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:14:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:14:52 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:14:52 [INFO] uvicorn.error:83 - _serve(): Started server process [44973]
2025-06-08 12:14:52 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:14:52 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:14:52 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:14:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:15:04 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:15:04 [INFO] uvicorn.error:83 - _serve(): Started server process [45000]
2025-06-08 12:15:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:15:04 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:15:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:18:08 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 12:18:08 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 12:18:08 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 12:18:08 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 12:18:08 [INFO] uvicorn.error:93 - _serve(): Finished server process [45000]
2025-06-08 12:18:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:18:18 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:18:18 [INFO] uvicorn.error:83 - _serve(): Started server process [45022]
2025-06-08 12:18:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:18:18 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:18:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:18:49 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 12:18:49 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 12:18:49 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 12:18:49 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 12:18:49 [INFO] uvicorn.error:93 - _serve(): Finished server process [45022]
2025-06-08 12:18:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:18:58 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:18:58 [INFO] uvicorn.error:83 - _serve(): Started server process [45040]
2025-06-08 12:18:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:18:58 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:18:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:19:01 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 12:19:01 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 12:19:01 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 12:19:01 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 12:19:01 [INFO] uvicorn.error:93 - _serve(): Finished server process [45040]
2025-06-08 12:19:06 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:19:11 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:19:11 [INFO] uvicorn.error:83 - _serve(): Started server process [45057]
2025-06-08 12:19:11 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:19:11 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:19:11 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:19:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:19:21 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:19:21 [INFO] uvicorn.error:83 - _serve(): Started server process [45072]
2025-06-08 12:19:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:19:21 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:19:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:19:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:19:32 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:19:32 [INFO] uvicorn.error:83 - _serve(): Started server process [45086]
2025-06-08 12:19:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:19:32 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:19:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:19:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:19:43 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:19:43 [INFO] uvicorn.error:83 - _serve(): Started server process [45101]
2025-06-08 12:19:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:19:43 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:19:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:19:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:19:51 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:19:51 [INFO] uvicorn.error:83 - _serve(): Started server process [45114]
2025-06-08 12:19:51 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:19:51 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:19:51 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:22:43 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 12:22:43 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 12:22:43 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 12:22:43 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 12:22:43 [INFO] uvicorn.error:93 - _serve(): Finished server process [45114]
2025-06-08 12:22:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:22:57 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:22:57 [INFO] uvicorn.error:83 - _serve(): Started server process [45156]
2025-06-08 12:22:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:22:57 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:22:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:23:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:23:08 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:23:08 [INFO] uvicorn.error:83 - _serve(): Started server process [45173]
2025-06-08 12:23:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:23:08 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:23:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:23:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:23:21 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:23:21 [INFO] uvicorn.error:83 - _serve(): Started server process [45186]
2025-06-08 12:23:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:23:21 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:23:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:23:22 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 12:23:22 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 12:23:22 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 12:23:22 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 12:23:22 [INFO] uvicorn.error:93 - _serve(): Finished server process [45186]
2025-06-08 12:23:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:23:33 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:23:33 [INFO] uvicorn.error:83 - _serve(): Started server process [45210]
2025-06-08 12:23:33 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:23:33 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:23:33 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:23:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:23:44 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:23:44 [INFO] uvicorn.error:83 - _serve(): Started server process [45225]
2025-06-08 12:23:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:23:44 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:23:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:24:34 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 12:24:34 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 12:24:34 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 12:24:34 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 12:24:34 [INFO] uvicorn.error:93 - _serve(): Finished server process [45225]
2025-06-08 12:24:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:24:46 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:24:46 [INFO] uvicorn.error:83 - _serve(): Started server process [45238]
2025-06-08 12:24:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:24:46 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:24:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:25:22 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 12:25:22 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 12:25:22 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 12:25:22 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 12:25:22 [INFO] uvicorn.error:93 - _serve(): Finished server process [45238]
2025-06-08 12:25:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:25:35 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:25:35 [INFO] uvicorn.error:83 - _serve(): Started server process [45270]
2025-06-08 12:25:35 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:25:35 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:25:35 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:25:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:25:49 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:25:49 [INFO] uvicorn.error:83 - _serve(): Started server process [45286]
2025-06-08 12:25:49 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:25:49 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:25:49 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:25:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 12:25:58 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 12:25:58 [INFO] uvicorn.error:83 - _serve(): Started server process [45304]
2025-06-08 12:25:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 12:25:58 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 12:25:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 12:27:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51822 - "OPTIONS /api/v2/leaves/leave-balance HTTP/1.1" 200
2025-06-08 12:27:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51824 - "OPTIONS /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 12:27:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51826 - "OPTIONS /api/v2/leaves/leave-balance HTTP/1.1" 200
2025-06-08 12:27:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51827 - "OPTIONS /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 12:27:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 12:27:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 12:27:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 12:27:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 12:27:32 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 12:27:32 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 12:27:32 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 12:27:32 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 12:27:32 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 12:27:32 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 12:27:32 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 12:27:32 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 12:27:32 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 12:27:32 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 12:27:32 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 12:27:32 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 12:27:32 [WARNING] app.api.routes.leaves_routes_v2:40 - get_employee_leave_controller(): Could not get employee leave controller from container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 12:27:32 [WARNING] app.api.routes.leaves_routes_v2:40 - get_employee_leave_controller(): Could not get employee leave controller from container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 12:27:32 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 12:27:32 [INFO] app.api.controllers.employee_leave_controller:387 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 12:27:32 [ERROR] app.api.controllers.employee_leave_controller:394 - get_leave_balance(): Error retrieving leave balance: 'NoneType' object has no attribute 'get_leave_balance'
2025-06-08 12:27:32 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: 'NoneType' object has no attribute 'get_leave_balance'
2025-06-08 12:27:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51822 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 12:27:32 [INFO] app.api.routes.leaves_routes_v2:141 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 12:27:32 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003
2025-06-08 12:27:32 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: 'NoneType' object has no attribute 'get_employee_leaves_by_employee_id'
2025-06-08 12:27:32 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: 'NoneType' object has no attribute 'get_employee_leaves_by_employee_id'
2025-06-08 12:27:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51824 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 12:27:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 12:27:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 12:27:33 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 12:27:33 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 12:27:33 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 12:27:33 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 12:27:33 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 12:27:33 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 12:27:33 [WARNING] app.api.routes.leaves_routes_v2:40 - get_employee_leave_controller(): Could not get employee leave controller from container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 12:27:33 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 12:27:33 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 12:27:33 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 12:27:33 [INFO] app.api.controllers.employee_leave_controller:387 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 12:27:33 [ERROR] app.api.controllers.employee_leave_controller:394 - get_leave_balance(): Error retrieving leave balance: 'NoneType' object has no attribute 'get_leave_balance'
2025-06-08 12:27:33 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: 'NoneType' object has no attribute 'get_leave_balance'
2025-06-08 12:27:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51827 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 12:27:33 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 12:27:33 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 12:27:33 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 12:27:33 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 12:27:33 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 12:27:33 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 12:27:33 [WARNING] app.api.routes.leaves_routes_v2:40 - get_employee_leave_controller(): Could not get employee leave controller from container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 12:27:33 [INFO] app.api.routes.leaves_routes_v2:141 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 12:27:33 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003
2025-06-08 12:27:33 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: 'NoneType' object has no attribute 'get_employee_leaves_by_employee_id'
2025-06-08 12:27:33 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: 'NoneType' object has no attribute 'get_employee_leaves_by_employee_id'
2025-06-08 12:27:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51822 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 14:32:25 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 14:32:25 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 14:32:25 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 14:32:25 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 14:32:25 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:32:25 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:32:25 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:32:25 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:32:25 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:32:25 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:32:25 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:32:25 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:32:25 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:32:25 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:32:25 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:32:26 [WARNING] app.api.routes.leaves_routes_v2:40 - get_employee_leave_controller(): Could not get employee leave controller from container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:32:25 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:32:26 [WARNING] app.api.routes.leaves_routes_v2:40 - get_employee_leave_controller(): Could not get employee leave controller from container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:32:26 [INFO] app.api.routes.leaves_routes_v2:141 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 14:32:26 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003
2025-06-08 14:32:26 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: 'NoneType' object has no attribute 'get_employee_leaves_by_employee_id'
2025-06-08 14:32:26 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: 'NoneType' object has no attribute 'get_employee_leaves_by_employee_id'
2025-06-08 14:32:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52086 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 14:32:26 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 14:32:26 [INFO] app.api.controllers.employee_leave_controller:387 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 14:32:26 [ERROR] app.api.controllers.employee_leave_controller:394 - get_leave_balance(): Error retrieving leave balance: 'NoneType' object has no attribute 'get_leave_balance'
2025-06-08 14:32:26 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: 'NoneType' object has no attribute 'get_leave_balance'
2025-06-08 14:32:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52084 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 14:32:26 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 14:32:26 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 14:32:26 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:32:26 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 14:32:26 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:32:26 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 14:32:26 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:32:26 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:32:26 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:32:26 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:32:26 [WARNING] app.api.routes.leaves_routes_v2:40 - get_employee_leave_controller(): Could not get employee leave controller from container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:32:26 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 14:32:26 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:32:26 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:32:26 [INFO] app.api.controllers.employee_leave_controller:387 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 14:32:26 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:32:26 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:32:26 [ERROR] app.api.controllers.employee_leave_controller:394 - get_leave_balance(): Error retrieving leave balance: 'NoneType' object has no attribute 'get_leave_balance'
2025-06-08 14:32:26 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: 'NoneType' object has no attribute 'get_leave_balance'
2025-06-08 14:32:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52086 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 14:32:26 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:32:26 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:32:26 [WARNING] app.api.routes.leaves_routes_v2:40 - get_employee_leave_controller(): Could not get employee leave controller from container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:32:26 [INFO] app.api.routes.leaves_routes_v2:141 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 14:32:26 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003
2025-06-08 14:32:26 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: 'NoneType' object has no attribute 'get_employee_leaves_by_employee_id'
2025-06-08 14:32:26 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: 'NoneType' object has no attribute 'get_employee_leaves_by_employee_id'
2025-06-08 14:32:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52088 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 14:32:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52175 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 14:32:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52176 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 14:32:53 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 14:32:53 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 14:32:53 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:32:53 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:32:53 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:32:53 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:32:53 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:32:53 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:32:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52175 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 14:32:53 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 792, in get_user_controller
    return container.get_user_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 514, in get_user_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 82, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 203, in _setup_services
    self._services['user'] = UserServiceImpl(
                             ~~~~~~~~~~~~~~~^
        user_repository=self._repositories['user'],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        file_upload_service=self._file_upload_service
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/infrastructure/services/user_service_impl.py", line 75, in __init__
    self._create_user_use_case = CreateUserUseCase(
                                 ~~~~~~~~~~~~~~~~~^
        user_repository, user_repository, self, self
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:32:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 14:32:54 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 14:32:54 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:32:54 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:32:54 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:32:54 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:32:54 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:32:54 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:32:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52176 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 14:32:54 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 792, in get_user_controller
    return container.get_user_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 514, in get_user_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 82, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 203, in _setup_services
    self._services['user'] = UserServiceImpl(
                             ~~~~~~~~~~~~~~~^
        user_repository=self._repositories['user'],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        file_upload_service=self._file_upload_service
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/infrastructure/services/user_service_impl.py", line 75, in __init__
    self._create_user_use_case = CreateUserUseCase(
                                 ~~~~~~~~~~~~~~~~~^
        user_repository, user_repository, self, self
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52320 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-08 14:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52321 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-08 14:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52326 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-08 14:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52326 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-08 14:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52326 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-08 14:39:08 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 14:39:08 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 14:39:08 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:39:08 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:39:08 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:39:08 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:39:08 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:39:08 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52321 - "GET /api/v2/company-leaves/ HTTP/1.1" 500
2025-06-08 14:39:08 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 846, in get_company_leave_controller
    return container.get_company_leave_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 602, in get_company_leave_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 82, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 203, in _setup_services
    self._services['user'] = UserServiceImpl(
                             ~~~~~~~~~~~~~~~^
        user_repository=self._repositories['user'],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        file_upload_service=self._file_upload_service
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/infrastructure/services/user_service_impl.py", line 75, in __init__
    self._create_user_use_case = CreateUserUseCase(
                                 ~~~~~~~~~~~~~~~~~^
        user_repository, user_repository, self, self
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:39:08 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 14:39:08 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 14:39:08 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:39:08 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:39:08 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:39:08 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:39:08 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:39:08 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:39:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52326 - "GET /api/v2/company-leaves/ HTTP/1.1" 500
2025-06-08 14:39:08 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 846, in get_company_leave_controller
    return container.get_company_leave_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 602, in get_company_leave_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 82, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 203, in _setup_services
    self._services['user'] = UserServiceImpl(
                             ~~~~~~~~~~~~~~~^
        user_repository=self._repositories['user'],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        file_upload_service=self._file_upload_service
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/infrastructure/services/user_service_impl.py", line 75, in __init__
    self._create_user_use_case = CreateUserUseCase(
                                 ~~~~~~~~~~~~~~~~~^
        user_repository, user_repository, self, self
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:39:38 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 14:39:38 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 14:39:38 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 14:39:38 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 14:39:38 [INFO] uvicorn.error:93 - _serve(): Finished server process [45304]
2025-06-08 14:39:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 14:39:56 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 14:39:56 [INFO] uvicorn.error:83 - _serve(): Started server process [45557]
2025-06-08 14:39:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 14:39:56 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 14:39:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 14:40:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52360 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 14:40:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52361 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 14:40:26 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 14:40:26 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 14:40:26 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:40:26 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:40:26 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:40:26 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:40:26 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:40:26 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:40:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52360 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 14:40:26 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 792, in get_user_controller
    return container.get_user_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 514, in get_user_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 82, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 203, in _setup_services
    self._services['user'] = UserServiceImpl(
                             ~~~~~~~~~~~~~~~^
        user_repository=self._repositories['user'],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        file_upload_service=self._file_upload_service
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/infrastructure/services/user_service_impl.py", line 75, in __init__
    self._create_user_use_case = CreateUserUseCase(
                                 ~~~~~~~~~~~~~~~~~^
        user_repository, user_repository, self, self
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:40:26 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 14:40:26 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 14:40:26 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:40:26 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:40:26 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:40:26 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:40:26 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:40:26 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:40:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52361 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 14:40:26 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 792, in get_user_controller
    return container.get_user_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 514, in get_user_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 82, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 203, in _setup_services
    self._services['user'] = UserServiceImpl(
                             ~~~~~~~~~~~~~~~^
        user_repository=self._repositories['user'],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        file_upload_service=self._file_upload_service
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/infrastructure/services/user_service_impl.py", line 75, in __init__
    self._create_user_use_case = CreateUserUseCase(
                                 ~~~~~~~~~~~~~~~~~^
        user_repository, user_repository, self, self
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52702 - "OPTIONS /api/v2/leaves/leave-balance HTTP/1.1" 200
2025-06-08 14:54:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52704 - "OPTIONS /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 14:54:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52706 - "OPTIONS /api/v2/leaves/leave-balance HTTP/1.1" 200
2025-06-08 14:54:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52707 - "OPTIONS /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 14:54:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 14:54:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 14:54:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 14:54:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 14:54:13 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:54:13 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:54:13 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:54:13 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:54:13 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:13 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:54:13 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:13 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:54:13 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:54:13 [WARNING] app.api.routes.leaves_routes_v2:40 - get_employee_leave_controller(): Could not get employee leave controller from container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:13 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:54:13 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:13 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:13 [WARNING] app.api.routes.leaves_routes_v2:40 - get_employee_leave_controller(): Could not get employee leave controller from container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:13 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 14:54:13 [INFO] app.api.controllers.employee_leave_controller:387 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 14:54:13 [ERROR] app.api.controllers.employee_leave_controller:394 - get_leave_balance(): Error retrieving leave balance: 'NoneType' object has no attribute 'get_leave_balance'
2025-06-08 14:54:13 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: 'NoneType' object has no attribute 'get_leave_balance'
2025-06-08 14:54:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52702 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 14:54:13 [INFO] app.api.routes.leaves_routes_v2:141 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 14:54:13 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003
2025-06-08 14:54:13 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: 'NoneType' object has no attribute 'get_employee_leaves_by_employee_id'
2025-06-08 14:54:13 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: 'NoneType' object has no attribute 'get_employee_leaves_by_employee_id'
2025-06-08 14:54:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52704 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 14:54:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 14:54:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 14:54:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 14:54:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 14:54:13 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:54:13 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:54:13 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:54:13 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:54:13 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:13 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:13 [WARNING] app.api.routes.leaves_routes_v2:40 - get_employee_leave_controller(): Could not get employee leave controller from container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:13 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 14:54:13 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:54:13 [INFO] app.api.controllers.employee_leave_controller:387 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 14:54:13 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:54:13 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:54:13 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:54:13 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:13 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:13 [WARNING] app.api.routes.leaves_routes_v2:40 - get_employee_leave_controller(): Could not get employee leave controller from container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:13 [ERROR] app.api.controllers.employee_leave_controller:394 - get_leave_balance(): Error retrieving leave balance: 'NoneType' object has no attribute 'get_leave_balance'
2025-06-08 14:54:13 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: 'NoneType' object has no attribute 'get_leave_balance'
2025-06-08 14:54:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52707 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 14:54:13 [INFO] app.api.routes.leaves_routes_v2:141 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 14:54:13 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003
2025-06-08 14:54:13 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: 'NoneType' object has no attribute 'get_employee_leaves_by_employee_id'
2025-06-08 14:54:13 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: 'NoneType' object has no attribute 'get_employee_leaves_by_employee_id'
2025-06-08 14:54:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52702 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 14:54:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52719 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-08 14:54:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52721 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-08 14:54:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52723 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-08 14:54:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52723 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-08 14:54:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52721 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-08 14:54:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52723 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-08 14:54:42 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 14:54:42 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 14:54:42 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:54:42 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:54:42 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:54:42 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:54:42 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:42 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52719 - "GET /api/v2/company-leaves/ HTTP/1.1" 500
2025-06-08 14:54:42 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 846, in get_company_leave_controller
    return container.get_company_leave_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 602, in get_company_leave_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 82, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 203, in _setup_services
    self._services['user'] = UserServiceImpl(
                             ~~~~~~~~~~~~~~~^
        user_repository=self._repositories['user'],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        file_upload_service=self._file_upload_service
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/infrastructure/services/user_service_impl.py", line 75, in __init__
    self._create_user_use_case = CreateUserUseCase(
                                 ~~~~~~~~~~~~~~~~~^
        user_repository, user_repository, self, self
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:42 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 14:54:42 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 14:54:42 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:54:42 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:54:42 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:54:42 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:54:42 [ERROR] app.config.dependency_container:271 - _setup_services(): Error setting up services: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:42 [ERROR] app.config.dependency_container:89 - initialize(): Error initializing dependency container: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:54:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52723 - "GET /api/v2/company-leaves/ HTTP/1.1" 500
2025-06-08 14:54:42 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 846, in get_company_leave_controller
    return container.get_company_leave_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 602, in get_company_leave_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 82, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 203, in _setup_services
    self._services['user'] = UserServiceImpl(
                             ~~~~~~~~~~~~~~~^
        user_repository=self._repositories['user'],
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        file_upload_service=self._file_upload_service
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/infrastructure/services/user_service_impl.py", line 75, in __init__
    self._create_user_use_case = CreateUserUseCase(
                                 ~~~~~~~~~~~~~~~~~^
        user_repository, user_repository, self, self
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: CreateUserUseCase.__init__() missing 1 required positional argument: 'company_leave_query_repository'
2025-06-08 14:56:02 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 14:56:02 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 14:56:02 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 14:56:02 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 14:56:02 [INFO] uvicorn.error:93 - _serve(): Finished server process [45557]
2025-06-08 14:56:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 14:56:19 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 14:56:19 [INFO] uvicorn.error:83 - _serve(): Started server process [45709]
2025-06-08 14:56:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 14:56:19 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 14:56:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 14:56:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 14:56:33 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 14:56:33 [INFO] uvicorn.error:83 - _serve(): Started server process [45738]
2025-06-08 14:56:33 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 14:56:33 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 14:56:33 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 14:56:47 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 14:57:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 14:57:01 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:57:01 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:57:01 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:57:01 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:57:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 14:57:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 14:57:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 14:57:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 14:57:01 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 14:57:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 14:57:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 14:57:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 14:57:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 14:57:01 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 14:57:01 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 14:57:01 [INFO] app.config.dependency_container:269 - _setup_services(): Services initialized
2025-06-08 14:57:01 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 14:57:01 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 14:59:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 14:59:02 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 14:59:02 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 14:59:02 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 14:59:02 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 14:59:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 14:59:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 14:59:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 14:59:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 14:59:02 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 14:59:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 14:59:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 14:59:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 14:59:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 14:59:02 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 14:59:02 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 14:59:02 [INFO] app.config.dependency_container:269 - _setup_services(): Services initialized
2025-06-08 14:59:02 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 14:59:02 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 14:59:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:00:03 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:00:03 [INFO] uvicorn.error:83 - _serve(): Started server process [46265]
2025-06-08 15:00:03 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:00:03 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:00:03 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:00:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 15:00:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 15:00:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 15:00:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 15:00:19 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 15:00:19 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 15:00:19 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 15:00:19 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 15:00:19 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 15:00:19 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 15:00:19 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 15:00:19 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 15:00:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 15:00:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 15:00:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 15:00:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 15:00:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 15:00:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 15:00:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 15:00:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 15:00:19 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 15:00:19 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 15:00:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 15:00:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 15:00:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 15:00:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 15:00:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 15:00:19 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 15:00:19 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 15:00:19 [INFO] app.config.dependency_container:269 - _setup_services(): Services initialized
2025-06-08 15:00:19 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 15:00:19 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 15:00:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 15:00:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 15:00:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 15:00:19 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 15:00:19 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 15:00:19 [INFO] app.config.dependency_container:269 - _setup_services(): Services initialized
2025-06-08 15:00:19 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 15:00:19 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 15:00:19 [INFO] app.api.routes.leaves_routes_v2:141 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 15:00:19 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003
2025-06-08 15:00:19 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:92 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: EMP003
2025-06-08 15:00:19 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:105 - get_employee_leaves_by_employee_id(): Failed to retrieve leaves for employee EMP003: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 15:00:19 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 15:00:19 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 15:00:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53197 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 15:00:19 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 15:00:19 [INFO] app.api.controllers.employee_leave_controller:387 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 15:00:19 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:261 - get_leave_balance(): Retrieving leave balance for employee: EMP003
2025-06-08 15:00:19 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:272 - get_leave_balance(): Failed to retrieve leave balance for EMP003: Leave balance functionality not implemented
2025-06-08 15:00:19 [ERROR] app.api.controllers.employee_leave_controller:394 - get_leave_balance(): Error retrieving leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 15:00:19 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 15:00:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53195 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 15:00:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 15:00:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 15:00:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 15:00:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 15:00:19 [INFO] app.api.routes.leaves_routes_v2:141 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 15:00:19 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003
2025-06-08 15:00:19 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:92 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: EMP003
2025-06-08 15:00:19 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:105 - get_employee_leaves_by_employee_id(): Failed to retrieve leaves for employee EMP003: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 15:00:19 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 15:00:19 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 4 were given
2025-06-08 15:00:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53197 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 15:00:19 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 15:00:19 [INFO] app.api.controllers.employee_leave_controller:387 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 15:00:19 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:261 - get_leave_balance(): Retrieving leave balance for employee: EMP003
2025-06-08 15:00:19 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:272 - get_leave_balance(): Failed to retrieve leave balance for EMP003: Leave balance functionality not implemented
2025-06-08 15:00:19 [ERROR] app.api.controllers.employee_leave_controller:394 - get_leave_balance(): Error retrieving leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 15:00:19 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 15:00:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53199 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 15:19:53 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 15:19:53 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 15:19:53 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 15:19:53 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 15:19:53 [INFO] uvicorn.error:93 - _serve(): Finished server process [46265]
2025-06-08 15:19:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:20:05 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:20:05 [INFO] uvicorn.error:83 - _serve(): Started server process [46431]
2025-06-08 15:20:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:20:05 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:20:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:21:42 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 15:21:42 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 15:21:42 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 15:21:42 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 15:21:42 [INFO] uvicorn.error:93 - _serve(): Finished server process [46431]
2025-06-08 15:21:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:21:52 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:21:52 [INFO] uvicorn.error:83 - _serve(): Started server process [46467]
2025-06-08 15:21:52 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:21:52 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:21:52 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:25:02 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 15:25:02 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 15:25:02 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 15:25:02 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 15:25:02 [INFO] uvicorn.error:93 - _serve(): Finished server process [46467]
2025-06-08 15:25:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:25:14 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:25:14 [INFO] uvicorn.error:83 - _serve(): Started server process [46513]
2025-06-08 15:25:14 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:25:14 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:25:14 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:31:50 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 15:31:50 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 15:31:50 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 15:31:50 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 15:31:50 [INFO] uvicorn.error:93 - _serve(): Finished server process [46513]
2025-06-08 15:31:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:32:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:32:24 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:32:24 [INFO] uvicorn.error:83 - _serve(): Started server process [46635]
2025-06-08 15:32:24 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:32:24 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:32:24 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:32:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:32:39 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:32:39 [INFO] uvicorn.error:83 - _serve(): Started server process [46663]
2025-06-08 15:32:39 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:32:39 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:32:39 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:32:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:32:53 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:32:54 [INFO] uvicorn.error:83 - _serve(): Started server process [46691]
2025-06-08 15:32:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:32:54 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:32:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:33:12 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 15:33:12 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 15:33:12 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 15:33:12 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 15:33:12 [INFO] uvicorn.error:93 - _serve(): Finished server process [46691]
2025-06-08 15:33:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:33:25 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:33:25 [INFO] uvicorn.error:83 - _serve(): Started server process [46724]
2025-06-08 15:33:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:33:25 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:33:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:33:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:33:40 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:33:40 [INFO] uvicorn.error:83 - _serve(): Started server process [46751]
2025-06-08 15:33:40 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:33:40 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:33:40 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:35:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55289 - "OPTIONS /api/v2/leaves/leave-balance HTTP/1.1" 200
2025-06-08 15:35:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55291 - "OPTIONS /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 15:35:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55292 - "OPTIONS /api/v2/leaves/leave-balance HTTP/1.1" 200
2025-06-08 15:35:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55294 - "OPTIONS /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 15:35:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 15:35:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 15:35:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 15:35:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 15:35:13 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 15:35:13 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 15:35:13 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 15:35:13 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 15:35:13 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 15:35:13 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 15:35:13 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 15:35:13 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 15:35:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 15:35:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 15:35:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 15:35:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 15:35:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 15:35:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 15:35:13 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 15:35:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 15:35:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 15:35:13 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 15:35:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 15:35:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 15:35:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 15:35:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 15:35:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 15:35:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 15:35:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 15:35:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 15:35:13 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 15:35:13 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 15:35:13 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 15:35:13 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 15:35:13 [INFO] app.config.dependency_container:269 - _setup_services(): Services initialized
2025-06-08 15:35:13 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 15:35:13 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 15:35:13 [INFO] app.config.dependency_container:269 - _setup_services(): Services initialized
2025-06-08 15:35:13 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 15:35:13 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 15:35:13 [INFO] app.api.routes.leaves_routes_v2:140 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 15:35:13 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003 in org: localhost
2025-06-08 15:35:13 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:94 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: EMP003
2025-06-08 15:35:13 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:107 - get_employee_leaves_by_employee_id(): Failed to retrieve leaves for employee EMP003: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 5 were given
2025-06-08 15:35:13 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 5 were given
2025-06-08 15:35:13 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 5 were given
2025-06-08 15:35:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55291 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 15:35:13 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 15:35:13 [INFO] app.api.controllers.employee_leave_controller:392 - get_leave_balance(): Retrieving leave balance for EMP003 in org: localhost
2025-06-08 15:35:14 [ERROR] app.api.controllers.employee_leave_controller:412 - get_leave_balance(): Error retrieving leave balance: GetEmployeeLeavesUseCase.get_leave_balance() takes 2 positional arguments but 3 were given
2025-06-08 15:35:14 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: GetEmployeeLeavesUseCase.get_leave_balance() takes 2 positional arguments but 3 were given
2025-06-08 15:35:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55289 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 15:35:14 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 15:35:14 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 15:35:14 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 15:35:14 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 15:35:14 [INFO] app.api.routes.leaves_routes_v2:140 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 15:35:14 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003 in org: localhost
2025-06-08 15:35:14 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:94 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: EMP003
2025-06-08 15:35:14 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:107 - get_employee_leaves_by_employee_id(): Failed to retrieve leaves for employee EMP003: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 5 were given
2025-06-08 15:35:14 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 5 were given
2025-06-08 15:35:14 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 5 were given
2025-06-08 15:35:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55294 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 15:35:14 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 15:35:14 [INFO] app.api.controllers.employee_leave_controller:392 - get_leave_balance(): Retrieving leave balance for EMP003 in org: localhost
2025-06-08 15:35:14 [ERROR] app.api.controllers.employee_leave_controller:412 - get_leave_balance(): Error retrieving leave balance: GetEmployeeLeavesUseCase.get_leave_balance() takes 2 positional arguments but 3 were given
2025-06-08 15:35:14 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: GetEmployeeLeavesUseCase.get_leave_balance() takes 2 positional arguments but 3 were given
2025-06-08 15:35:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55291 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 15:36:43 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 15:36:43 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 15:36:43 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 15:36:43 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 15:36:43 [INFO] uvicorn.error:93 - _serve(): Finished server process [46751]
2025-06-08 15:36:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:36:58 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:36:58 [INFO] uvicorn.error:83 - _serve(): Started server process [46784]
2025-06-08 15:36:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:36:58 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:36:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:37:06 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 15:37:06 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 15:37:06 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 15:37:06 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 15:37:06 [INFO] uvicorn.error:93 - _serve(): Finished server process [46784]
2025-06-08 15:37:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:37:18 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:37:18 [INFO] uvicorn.error:83 - _serve(): Started server process [46806]
2025-06-08 15:37:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:37:18 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:37:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:37:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:37:40 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:37:40 [INFO] uvicorn.error:83 - _serve(): Started server process [46824]
2025-06-08 15:37:40 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:37:40 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:37:40 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:37:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:38:03 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:38:03 [INFO] uvicorn.error:83 - _serve(): Started server process [46842]
2025-06-08 15:38:03 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:38:03 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:38:03 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:38:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:38:24 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:38:24 [INFO] uvicorn.error:83 - _serve(): Started server process [46866]
2025-06-08 15:38:24 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:38:24 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:38:24 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:38:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:38:43 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:38:43 [INFO] uvicorn.error:83 - _serve(): Started server process [46874]
2025-06-08 15:38:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:38:43 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:38:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:38:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:39:00 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:39:00 [INFO] uvicorn.error:83 - _serve(): Started server process [46883]
2025-06-08 15:39:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:39:00 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:39:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:39:00 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Signature verification failed.
2025-06-08 15:39:00 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Signature verification failed.
2025-06-08 15:39:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56001 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 401
2025-06-08 15:54:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP002
2025-06-08 15:54:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP002 from organisation: test_company
2025-06-08 15:54:36 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 15:54:36 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 15:54:36 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 15:54:36 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 15:54:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 15:54:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 15:54:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 15:54:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 15:54:36 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 15:54:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 15:54:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 15:54:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 15:54:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 15:54:36 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 15:54:36 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 15:54:36 [INFO] app.config.dependency_container:269 - _setup_services(): Services initialized
2025-06-08 15:54:36 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 15:54:36 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 15:54:36 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP002
2025-06-08 15:54:36 [INFO] app.api.controllers.employee_leave_controller:392 - get_leave_balance(): Retrieving leave balance for EMP002 in org: test_company
2025-06-08 15:54:36 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:263 - get_leave_balance(): Retrieving leave balance for employee: EMP002
2025-06-08 15:54:36 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:274 - get_leave_balance(): Failed to retrieve leave balance for EMP002: Leave balance functionality not implemented
2025-06-08 15:54:36 [ERROR] app.api.controllers.employee_leave_controller:412 - get_leave_balance(): Error retrieving leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 15:54:36 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 15:54:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57085 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 15:54:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57132 - "GET /api/v2/leaves/pending-approvals HTTP/1.1" 405
2025-06-08 15:55:09 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP002
2025-06-08 15:55:09 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP002 from organisation: test_company
2025-06-08 15:55:09 [INFO] app.api.routes.leaves_routes_v2:349 - get_pending_leaves(): Retrieving pending leaves for: EMP002
2025-06-08 15:55:09 [INFO] app.api.controllers.employee_leave_controller:258 - get_pending_approvals(): Retrieving pending approvals for manager: None in org: test_company
2025-06-08 15:55:09 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:161 - get_pending_approvals(): Retrieving pending approvals for manager: None
2025-06-08 15:55:09 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:171 - get_pending_approvals(): Failed to retrieve pending approvals: 'EmployeeLeaveRepositoryImpl' object has no attribute 'get_pending_approvals'
2025-06-08 15:55:09 [ERROR] app.api.controllers.employee_leave_controller:267 - get_pending_approvals(): Error retrieving pending approvals: Failed to retrieve pending approvals: 'EmployeeLeaveRepositoryImpl' object has no attribute 'get_pending_approvals'
2025-06-08 15:55:09 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve pending approvals: Failed to retrieve pending approvals: 'EmployeeLeaveRepositoryImpl' object has no attribute 'get_pending_approvals'
2025-06-08 15:55:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57157 - "GET /api/v2/leaves/pending HTTP/1.1" 500
2025-06-08 15:55:25 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP002
2025-06-08 15:55:25 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP002 from organisation: test_company
2025-06-08 15:55:25 [INFO] app.api.routes.leaves_routes_v2:140 - get_my_leaves(): Retrieving leaves for current user: EMP002
2025-06-08 15:55:25 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP002 in org: test_company
2025-06-08 15:55:25 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:94 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: EMP002
2025-06-08 15:55:25 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:107 - get_employee_leaves_by_employee_id(): Failed to retrieve leaves for employee EMP002: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 5 were given
2025-06-08 15:55:25 [ERROR] app.api.controllers.employee_leave_controller:194 - get_employee_leaves(): Error retrieving employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 5 were given
2025-06-08 15:55:25 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve employee leaves: Failed to retrieve employee leaves: EmployeeLeaveRepositoryImpl.get_by_employee_id() takes from 2 to 3 positional arguments but 5 were given
2025-06-08 15:55:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57161 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 500
2025-06-08 15:55:58 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 15:55:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 15:55:59 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 15:55:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 15:55:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [46883]
2025-06-08 15:56:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:56:13 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:56:13 [INFO] uvicorn.error:83 - _serve(): Started server process [47218]
2025-06-08 15:56:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:56:13 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:56:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:56:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:56:25 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:56:25 [INFO] uvicorn.error:83 - _serve(): Started server process [47242]
2025-06-08 15:56:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:56:25 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:56:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:56:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:56:36 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:56:36 [INFO] uvicorn.error:83 - _serve(): Started server process [47257]
2025-06-08 15:56:36 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:56:36 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:56:36 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:56:41 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 15:56:41 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 15:56:41 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 15:56:41 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 15:56:41 [INFO] uvicorn.error:93 - _serve(): Finished server process [47257]
2025-06-08 15:56:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:56:51 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:56:51 [INFO] uvicorn.error:83 - _serve(): Started server process [47273]
2025-06-08 15:56:51 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:56:51 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:56:51 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:56:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:57:01 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:57:01 [INFO] uvicorn.error:83 - _serve(): Started server process [47287]
2025-06-08 15:57:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:57:01 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:57:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:57:01 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP002
2025-06-08 15:57:01 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP002 from organisation: test_company
2025-06-08 15:57:01 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 15:57:01 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 15:57:01 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 15:57:01 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 15:57:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 15:57:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 15:57:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 15:57:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 15:57:01 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 15:57:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 15:57:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 15:57:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 15:57:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 15:57:01 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 15:57:01 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 15:57:01 [INFO] app.config.dependency_container:269 - _setup_services(): Services initialized
2025-06-08 15:57:01 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 15:57:01 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 15:57:01 [INFO] app.api.routes.leaves_routes_v2:140 - get_my_leaves(): Retrieving leaves for current user: EMP002
2025-06-08 15:57:01 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP002 in org: test_company
2025-06-08 15:57:01 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:95 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: EMP002
2025-06-08 15:57:01 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:69 - _get_collection(): Database not connected, establishing connection...
2025-06-08 15:57:01 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:74 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 15:57:02 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 15:57:02 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:82 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 15:57:02 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_test_company' cached
2025-06-08 15:57:02 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:92 - _get_collection(): Successfully retrieved collection: employee_leaves from database: pms_test_company
2025-06-08 15:57:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57317 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 15:57:15 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP002
2025-06-08 15:57:15 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP002 from organisation: test_company
2025-06-08 15:57:15 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP002
2025-06-08 15:57:15 [INFO] app.api.controllers.employee_leave_controller:392 - get_leave_balance(): Retrieving leave balance for EMP002 in org: test_company
2025-06-08 15:57:15 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:272 - get_leave_balance(): Retrieving leave balance for employee: EMP002
2025-06-08 15:57:15 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:283 - get_leave_balance(): Failed to retrieve leave balance for EMP002: Leave balance functionality not implemented
2025-06-08 15:57:15 [ERROR] app.api.controllers.employee_leave_controller:412 - get_leave_balance(): Error retrieving leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 15:57:15 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 15:57:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57459 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 15:58:31 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 15:58:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 15:58:31 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 15:58:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 15:58:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [47287]
2025-06-08 15:58:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 15:58:43 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 15:58:43 [INFO] uvicorn.error:83 - _serve(): Started server process [47367]
2025-06-08 15:58:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 15:58:43 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 15:58:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 15:59:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57751 - "OPTIONS /api/v2/leaves/leave-balance HTTP/1.1" 200
2025-06-08 15:59:12 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 15:59:12 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 15:59:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57751 - "OPTIONS /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 15:59:13 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 15:59:13 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 15:59:13 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 15:59:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57755 - "OPTIONS /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 15:59:13 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 15:59:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 15:59:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 15:59:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 15:59:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 15:59:13 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 15:59:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 15:59:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 15:59:13 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 15:59:13 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 15:59:13 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 15:59:13 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 15:59:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 15:59:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 15:59:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 15:59:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 15:59:13 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 15:59:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 15:59:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 15:59:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 15:59:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 15:59:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 15:59:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 15:59:13 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 15:59:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 15:59:13 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 15:59:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 15:59:13 [INFO] app.config.dependency_container:269 - _setup_services(): Services initialized
2025-06-08 15:59:13 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 15:59:13 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 15:59:13 [INFO] app.config.dependency_container:269 - _setup_services(): Services initialized
2025-06-08 15:59:13 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 15:59:13 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 15:59:13 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 15:59:13 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 15:59:13 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 15:59:13 [INFO] app.api.controllers.employee_leave_controller:392 - get_leave_balance(): Retrieving leave balance for EMP003 in org: localhost
2025-06-08 15:59:13 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:272 - get_leave_balance(): Retrieving leave balance for employee: EMP003
2025-06-08 15:59:13 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:283 - get_leave_balance(): Failed to retrieve leave balance for EMP003: Leave balance functionality not implemented
2025-06-08 15:59:13 [ERROR] app.api.controllers.employee_leave_controller:412 - get_leave_balance(): Error retrieving leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 15:59:13 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 15:59:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57753 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 15:59:13 [INFO] app.api.routes.leaves_routes_v2:140 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 15:59:13 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003 in org: localhost
2025-06-08 15:59:13 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:95 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: EMP003
2025-06-08 15:59:13 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:69 - _get_collection(): Database not connected, establishing connection...
2025-06-08 15:59:13 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:74 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 15:59:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 15:59:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 15:59:13 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 15:59:13 [INFO] app.api.controllers.employee_leave_controller:392 - get_leave_balance(): Retrieving leave balance for EMP003 in org: localhost
2025-06-08 15:59:13 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:272 - get_leave_balance(): Retrieving leave balance for employee: EMP003
2025-06-08 15:59:13 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:283 - get_leave_balance(): Failed to retrieve leave balance for EMP003: Leave balance functionality not implemented
2025-06-08 15:59:13 [ERROR] app.api.controllers.employee_leave_controller:412 - get_leave_balance(): Error retrieving leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 15:59:13 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 15:59:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57755 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 15:59:14 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 15:59:14 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:82 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 15:59:14 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 15:59:14 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:92 - _get_collection(): Successfully retrieved collection: employee_leaves from database: pms_localhost
2025-06-08 15:59:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57757 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 15:59:14 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 15:59:14 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 15:59:14 [INFO] app.api.routes.leaves_routes_v2:140 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 15:59:14 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003 in org: localhost
2025-06-08 15:59:14 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:95 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: EMP003
2025-06-08 15:59:14 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:92 - _get_collection(): Successfully retrieved collection: employee_leaves from database: pms_localhost
2025-06-08 15:59:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57755 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 15:59:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 15:59:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 15:59:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 15:59:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 15:59:51 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 15:59:51 [INFO] app.api.controllers.employee_leave_controller:392 - get_leave_balance(): Retrieving leave balance for EMP003 in org: localhost
2025-06-08 15:59:51 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:272 - get_leave_balance(): Retrieving leave balance for employee: EMP003
2025-06-08 15:59:51 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:283 - get_leave_balance(): Failed to retrieve leave balance for EMP003: Leave balance functionality not implemented
2025-06-08 15:59:51 [ERROR] app.api.controllers.employee_leave_controller:412 - get_leave_balance(): Error retrieving leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 15:59:51 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 15:59:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57888 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 15:59:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 15:59:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 15:59:51 [INFO] app.api.routes.leaves_routes_v2:140 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 15:59:51 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003 in org: localhost
2025-06-08 15:59:51 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:95 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: EMP003
2025-06-08 15:59:51 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:92 - _get_collection(): Successfully retrieved collection: employee_leaves from database: pms_localhost
2025-06-08 15:59:51 [INFO] app.api.routes.leaves_routes_v2:173 - get_leave_balance(): Retrieving leave balance for: EMP003
2025-06-08 15:59:51 [INFO] app.api.controllers.employee_leave_controller:392 - get_leave_balance(): Retrieving leave balance for EMP003 in org: localhost
2025-06-08 15:59:51 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:272 - get_leave_balance(): Retrieving leave balance for employee: EMP003
2025-06-08 15:59:51 [ERROR] app.application.use_cases.employee_leave.get_employee_leaves_use_case:283 - get_leave_balance(): Failed to retrieve leave balance for EMP003: Leave balance functionality not implemented
2025-06-08 15:59:51 [ERROR] app.api.controllers.employee_leave_controller:412 - get_leave_balance(): Error retrieving leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 15:59:51 [ERROR] app.api.routes.leaves_routes_v2:83 - wrapper(): Unexpected error: Failed to retrieve leave balance: Failed to retrieve leave balance: Leave balance functionality not implemented
2025-06-08 15:59:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57888 - "GET /api/v2/leaves/leave-balance HTTP/1.1" 500
2025-06-08 15:59:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57890 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 15:59:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 15:59:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 15:59:51 [INFO] app.api.routes.leaves_routes_v2:140 - get_my_leaves(): Retrieving leaves for current user: EMP003
2025-06-08 15:59:51 [INFO] app.api.controllers.employee_leave_controller:176 - get_employee_leaves(): Retrieving leaves for employee: EMP003 in org: localhost
2025-06-08 15:59:51 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:95 - get_employee_leaves_by_employee_id(): Retrieving leaves for employee: EMP003
2025-06-08 15:59:51 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:92 - _get_collection(): Successfully retrieved collection: employee_leaves from database: pms_localhost
2025-06-08 15:59:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57888 - "GET /api/v2/leaves/my-leaves HTTP/1.1" 200
2025-06-08 16:00:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57892 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 16:00:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57977 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 16:00:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 16:00:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 16:00:31 [INFO] app.infrastructure.services.user_service_impl:810 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 16:00:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 16:00:31 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:00:31 [ERROR] app.infrastructure.services.user_service_impl:814 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:00:31 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:00:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57892 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 16:00:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 16:00:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 16:00:31 [INFO] app.infrastructure.services.user_service_impl:810 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 16:00:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 16:00:31 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:00:31 [ERROR] app.infrastructure.services.user_service_impl:814 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:00:31 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:00:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57977 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 16:00:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57981 - "OPTIONS /api/v2/attendance/checkin HTTP/1.1" 200
2025-06-08 16:00:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 16:00:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 16:00:43 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 16:00:43 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 16:00:43 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 16:00:43 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 16:00:43 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 16:00:43 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 16:00:43 [INFO] app.application.use_cases.attendance.check_in_use_case:93 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 16:00:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 16:00:43 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 16:00:43 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 16:00:43 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 16:00:43 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 16:00:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57983 - "POST /api/v2/attendance/checkin HTTP/1.1" 422
2025-06-08 16:03:41 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 16:03:41 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 16:03:41 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 16:03:41 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-08 16:03:41 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-08 16:03:41 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP003
2025-06-08 16:03:41 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP003 in organisation: localhost
2025-06-08 16:03:41 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP003 in organisation localhost
2025-06-08 16:04:41 [INFO] app.application.use_cases.attendance.check_in_use_case:93 - execute(): Processing check-in for employee: EMP003 in organisation: localhost
2025-06-08 16:04:46 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 16:05:19 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-08 16:17:10 [ERROR] app.infrastructure.services.attendance_service_impl:73 - check_in(): Error processing check-in for employee EMP003 in organisation localhost: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 16:17:10 [WARNING] app.api.controllers.attendance_controller:67 - checkin(): Business rule error during check-in: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 16:17:10 [WARNING] app.api.routes.attendance_routes_v2:73 - checkin(): Business rule error during check-in: Employee EMP003 is already checked in for 2025-06-08
2025-06-08 16:21:19 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 16:21:19 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 16:21:19 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 16:21:19 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 16:21:19 [INFO] uvicorn.error:93 - _serve(): Finished server process [47367]
2025-06-08 16:21:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 16:21:29 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 16:21:29 [INFO] uvicorn.error:83 - _serve(): Started server process [47643]
2025-06-08 16:21:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 16:21:29 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 16:21:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 16:21:56 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 16:21:56 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 16:21:56 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 16:21:56 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 16:21:56 [INFO] uvicorn.error:93 - _serve(): Finished server process [47643]
2025-06-08 16:22:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 16:22:04 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 16:22:04 [INFO] uvicorn.error:83 - _serve(): Started server process [47659]
2025-06-08 16:22:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 16:22:05 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 16:22:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 16:23:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59936 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 16:23:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59937 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 16:23:01 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 16:23:01 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 16:23:01 [INFO] app.config.dependency_container:77 - initialize(): Initializing dependency container...
2025-06-08 16:23:01 [INFO] app.config.dependency_container:102 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 16:23:01 [INFO] app.config.dependency_container:103 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 16:23:01 [INFO] app.config.dependency_container:193 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 16:23:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 16:23:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 16:23:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 16:23:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 16:23:01 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 16:23:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 16:23:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 16:23:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 16:23:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 16:23:01 [INFO] app.config.dependency_container:503 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 16:23:01 [INFO] app.config.dependency_container:318 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 16:23:01 [INFO] app.config.dependency_container:269 - _setup_services(): Services initialized
2025-06-08 16:23:01 [INFO] app.config.dependency_container:340 - _setup_controllers(): Controllers setup deferred
2025-06-08 16:23:01 [INFO] app.config.dependency_container:86 - initialize(): Dependency container initialized successfully
2025-06-08 16:23:01 [INFO] app.infrastructure.services.user_service_impl:810 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 16:23:01 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 16:23:01 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 16:23:02 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 16:23:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 16:23:02 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 16:23:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 16:23:02 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:23:02 [ERROR] app.infrastructure.services.user_service_impl:814 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:23:02 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:23:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59936 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 16:23:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 16:23:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 16:23:02 [INFO] app.infrastructure.services.user_service_impl:810 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 16:23:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 16:23:02 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:23:02 [ERROR] app.infrastructure.services.user_service_impl:814 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:23:02 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:23:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59936 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 16:27:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 16:27:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 16:27:48 [INFO] app.infrastructure.services.user_service_impl:810 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 16:27:48 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 16:27:48 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:27:48 [ERROR] app.infrastructure.services.user_service_impl:814 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:27:48 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:27:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60715 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 16:27:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60734 - "OPTIONS /api/v2/users/analytics/statistics HTTP/1.1" 200
2025-06-08 16:27:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 16:27:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 16:27:51 [INFO] app.infrastructure.services.user_service_impl:810 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 16:27:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 16:27:51 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:27:51 [ERROR] app.infrastructure.services.user_service_impl:814 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:27:51 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:27:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60734 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 16:27:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 16:27:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 16:27:51 [INFO] app.infrastructure.services.user_service_impl:810 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 16:27:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 16:27:51 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:27:51 [ERROR] app.infrastructure.services.user_service_impl:814 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:27:51 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:27:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60734 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 16:31:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 16:31:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 16:31:29 [INFO] app.infrastructure.services.user_service_impl:810 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 16:31:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 16:31:30 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:30 [ERROR] app.infrastructure.services.user_service_impl:814 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:30 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61413 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 16:31:30 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 16:31:30 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 16:31:30 [INFO] app.infrastructure.services.user_service_impl:810 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 16:31:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 16:31:30 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:30 [ERROR] app.infrastructure.services.user_service_impl:814 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:30 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61413 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 16:31:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 16:31:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 16:31:31 [INFO] app.infrastructure.services.user_service_impl:810 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 16:31:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 16:31:31 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:31 [ERROR] app.infrastructure.services.user_service_impl:814 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:31 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61418 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 16:31:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 16:31:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 16:31:31 [INFO] app.infrastructure.services.user_service_impl:810 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 16:31:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 16:31:31 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:31 [ERROR] app.infrastructure.services.user_service_impl:814 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:31 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61418 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 16:31:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 16:31:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 16:31:31 [INFO] app.infrastructure.services.user_service_impl:810 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 16:31:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 16:31:32 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:32 [ERROR] app.infrastructure.services.user_service_impl:814 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:32 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61418 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 16:31:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 16:31:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 16:31:32 [INFO] app.infrastructure.services.user_service_impl:810 - get_user_statistics(): Getting user statistics for organisation localhost
2025-06-08 16:31:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 16:31:32 [ERROR] app.infrastructure.repositories.mongodb_user_repository:885 - get_statistics(): Error getting user statistics: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:32 [ERROR] app.infrastructure.services.user_service_impl:814 - get_user_statistics(): Error getting user statistics for organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:32 [ERROR] app.api.controllers.user_controller:197 - get_user_statistics(): Error getting user statistics in organisation localhost: UserStatisticsDTO.__init__() got an unexpected keyword argument 'total_roles'. Did you mean 'total_users'?
2025-06-08 16:31:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61421 - "GET /api/v2/users/analytics/statistics HTTP/1.1" 500
2025-06-08 16:37:30 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-08 16:39:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63015 - "OPTIONS /api/v2/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 16:39:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63016 - "OPTIONS /api/v2/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 16:39:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63018 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:39:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63018 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:39:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63016 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:39:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63016 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:39:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63022 - "OPTIONS /api/v2/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 16:39:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63024 - "OPTIONS /api/v2/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 16:39:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63022 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:39:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63024 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:39:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63024 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:39:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63022 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:40:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63026 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:40:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63026 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:40:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63092 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:40:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63092 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:44:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63710 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:44:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63712 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:44:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63712 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:44:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63710 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:44:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63712 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:45:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63892 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:45:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63894 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:45:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63894 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:45:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63892 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:45:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63892 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 16:55:57 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 16:55:57 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 16:55:57 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 16:55:57 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 16:55:57 [INFO] uvicorn.error:93 - _serve(): Finished server process [47659]
2025-06-08 16:56:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 16:56:10 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 16:56:10 [INFO] uvicorn.error:83 - _serve(): Started server process [48694]
2025-06-08 16:56:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 16:56:10 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 16:56:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 16:56:15 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 16:56:15 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 16:56:15 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 16:56:15 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 16:56:15 [INFO] uvicorn.error:93 - _serve(): Finished server process [48694]
2025-06-08 16:56:20 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 16:56:27 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 16:56:27 [INFO] uvicorn.error:83 - _serve(): Started server process [48715]
2025-06-08 16:56:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 16:56:27 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 16:56:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 16:57:07 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 16:57:08 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 16:57:08 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 16:57:08 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 16:57:08 [INFO] uvicorn.error:93 - _serve(): Finished server process [48715]
2025-06-08 16:57:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 16:57:26 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 16:57:26 [INFO] uvicorn.error:83 - _serve(): Started server process [48740]
2025-06-08 16:57:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 16:57:26 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 16:57:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 16:57:36 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 16:57:36 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 16:57:36 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 16:57:36 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 16:57:36 [INFO] uvicorn.error:93 - _serve(): Finished server process [48740]
2025-06-08 16:57:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 16:57:46 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 16:57:46 [INFO] uvicorn.error:83 - _serve(): Started server process [48762]
2025-06-08 16:57:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 16:57:46 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 16:57:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 16:58:19 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 16:58:19 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 16:58:19 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 16:58:19 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 16:58:19 [INFO] uvicorn.error:93 - _serve(): Finished server process [48762]
2025-06-08 16:58:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 16:58:31 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 16:58:31 [INFO] uvicorn.error:83 - _serve(): Started server process [48790]
2025-06-08 16:58:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 16:58:31 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 16:58:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 16:58:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 16:58:54 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 16:58:54 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 16:58:54 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 16:58:54 [INFO] uvicorn.error:93 - _serve(): Finished server process [48790]
2025-06-08 16:59:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 16:59:09 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 16:59:09 [INFO] uvicorn.error:83 - _serve(): Started server process [48811]
2025-06-08 16:59:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 16:59:09 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 16:59:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 16:59:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 16:59:18 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 16:59:18 [INFO] uvicorn.error:83 - _serve(): Started server process [48837]
2025-06-08 16:59:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 16:59:18 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 16:59:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:00:03 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 17:00:04 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 17:00:04 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 17:00:04 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 17:00:04 [INFO] uvicorn.error:93 - _serve(): Finished server process [48837]
2025-06-08 17:00:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:00:15 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:00:15 [INFO] uvicorn.error:83 - _serve(): Started server process [48855]
2025-06-08 17:00:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:00:15 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:00:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:00:51 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 17:00:51 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 17:00:51 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 17:00:51 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 17:00:51 [INFO] uvicorn.error:93 - _serve(): Finished server process [48855]
2025-06-08 17:00:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:01:02 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:01:02 [INFO] uvicorn.error:83 - _serve(): Started server process [48947]
2025-06-08 17:01:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:01:02 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:01:02 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:01:06 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:01:12 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:01:12 [INFO] uvicorn.error:83 - _serve(): Started server process [48968]
2025-06-08 17:01:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:01:12 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:01:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:01:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:01:29 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:01:29 [INFO] uvicorn.error:83 - _serve(): Started server process [48994]
2025-06-08 17:01:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:01:29 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:01:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:03:25 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 17:03:25 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 17:03:25 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 17:03:25 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 17:03:25 [INFO] uvicorn.error:93 - _serve(): Finished server process [48994]
2025-06-08 17:03:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:03:35 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:03:35 [INFO] uvicorn.error:83 - _serve(): Started server process [49028]
2025-06-08 17:03:35 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:03:35 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:03:35 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:03:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:03:46 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:03:46 [INFO] uvicorn.error:83 - _serve(): Started server process [49045]
2025-06-08 17:03:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:03:46 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:03:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:04:14 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 17:04:14 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 17:04:14 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 17:04:14 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 17:04:14 [INFO] uvicorn.error:93 - _serve(): Finished server process [49045]
2025-06-08 17:04:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:04:32 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:04:32 [INFO] uvicorn.error:83 - _serve(): Started server process [49067]
2025-06-08 17:04:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:04:32 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:04:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:04:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:04:45 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:04:45 [INFO] uvicorn.error:83 - _serve(): Started server process [49101]
2025-06-08 17:04:45 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:04:45 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:04:45 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:04:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 17:04:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 17:04:59 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 17:04:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 17:04:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [49101]
2025-06-08 17:05:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:05:09 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:05:09 [INFO] uvicorn.error:83 - _serve(): Started server process [49114]
2025-06-08 17:05:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:05:09 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:05:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:05:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:05:21 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:05:21 [INFO] uvicorn.error:83 - _serve(): Started server process [49128]
2025-06-08 17:05:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:05:21 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:05:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:06:55 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 17:06:55 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 17:06:55 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 17:06:55 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 17:06:55 [INFO] uvicorn.error:93 - _serve(): Finished server process [49128]
2025-06-08 17:07:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:07:15 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:07:15 [INFO] uvicorn.error:83 - _serve(): Started server process [49151]
2025-06-08 17:07:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:07:15 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:07:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:07:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:07:29 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:07:29 [INFO] uvicorn.error:83 - _serve(): Started server process [49184]
2025-06-08 17:07:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:07:29 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:07:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:07:58 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 17:07:58 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 17:07:58 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 17:07:58 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 17:07:58 [INFO] uvicorn.error:93 - _serve(): Finished server process [49184]
2025-06-08 17:08:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:08:18 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:08:18 [INFO] uvicorn.error:83 - _serve(): Started server process [49210]
2025-06-08 17:08:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:08:19 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:08:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:08:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:08:32 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:08:32 [INFO] uvicorn.error:83 - _serve(): Started server process [49240]
2025-06-08 17:08:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:08:32 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:08:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:08:52 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 17:08:52 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 17:08:52 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 17:08:52 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 17:08:52 [INFO] uvicorn.error:93 - _serve(): Finished server process [49240]
2025-06-08 17:09:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:09:10 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:09:10 [INFO] uvicorn.error:83 - _serve(): Started server process [49261]
2025-06-08 17:09:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:09:10 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:09:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:09:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:09:24 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:09:24 [INFO] uvicorn.error:83 - _serve(): Started server process [49292]
2025-06-08 17:09:24 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:09:24 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:09:24 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:09:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:09:35 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:09:35 [INFO] uvicorn.error:83 - _serve(): Started server process [49312]
2025-06-08 17:09:35 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:09:35 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:09:35 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:09:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:09:46 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:09:46 [INFO] uvicorn.error:83 - _serve(): Started server process [49325]
2025-06-08 17:09:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:09:46 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:09:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:09:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:09:58 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:09:58 [INFO] uvicorn.error:83 - _serve(): Started server process [49338]
2025-06-08 17:09:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:09:58 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:09:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:10:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:10:09 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:10:09 [INFO] uvicorn.error:83 - _serve(): Started server process [49351]
2025-06-08 17:10:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:10:09 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:10:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:10:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:10:21 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:10:21 [INFO] uvicorn.error:83 - _serve(): Started server process [49370]
2025-06-08 17:10:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:10:21 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:10:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:10:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:10:32 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:10:32 [INFO] uvicorn.error:83 - _serve(): Started server process [49385]
2025-06-08 17:10:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:10:32 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:10:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:10:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:10:43 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:10:43 [INFO] uvicorn.error:83 - _serve(): Started server process [49399]
2025-06-08 17:10:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:10:43 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:10:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:10:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:10:55 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:10:55 [INFO] uvicorn.error:83 - _serve(): Started server process [49412]
2025-06-08 17:10:55 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:10:55 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:10:55 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:11:06 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 17:11:07 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 17:11:07 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-08 17:11:07 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 17:11:07 [INFO] uvicorn.error:93 - _serve(): Finished server process [49412]
2025-06-08 17:11:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:11:19 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:11:19 [INFO] uvicorn.error:83 - _serve(): Started server process [49429]
2025-06-08 17:11:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:11:19 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:11:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:11:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:11:31 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:11:31 [INFO] uvicorn.error:83 - _serve(): Started server process [49446]
2025-06-08 17:11:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:11:31 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-08 17:11:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:11:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:12:03 [INFO] app.main:84 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes
2025-06-08 17:12:03 [INFO] uvicorn.error:83 - _serve(): Started server process [49470]
2025-06-08 17:12:03 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:12:03 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 17:12:03 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:58:38 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 17:58:39 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 17:58:39 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 17:58:39 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 17:58:39 [INFO] uvicorn.error:93 - _serve(): Finished server process [49470]
2025-06-08 17:58:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:58:49 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 17:58:49 [INFO] uvicorn.error:83 - _serve(): Started server process [49741]
2025-06-08 17:58:49 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:58:49 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 17:58:49 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 17:58:54 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 17:59:01 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 17:59:01 [INFO] uvicorn.error:83 - _serve(): Started server process [49757]
2025-06-08 17:59:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 17:59:01 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 17:59:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:04:13 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 18:04:14 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 18:04:14 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 18:04:14 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 18:04:14 [INFO] uvicorn.error:93 - _serve(): Finished server process [49757]
2025-06-08 18:04:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:04:31 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:04:31 [INFO] uvicorn.error:83 - _serve(): Started server process [49819]
2025-06-08 18:04:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:04:31 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:04:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:04:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52059 - "OPTIONS /api/v2/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 18:04:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52061 - "OPTIONS /api/v2/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 18:04:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52059 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 18:04:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52059 - "GET /api/v2/dashboard/analytics/statistics HTTP/1.1" 404
2025-06-08 18:05:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52084 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 18:05:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 18:05:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 18:05:28 [INFO] app.config.dependency_container:79 - initialize(): Initializing dependency container...
2025-06-08 18:05:28 [INFO] app.config.dependency_container:104 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 18:05:28 [INFO] app.config.dependency_container:105 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 18:05:28 [INFO] app.config.dependency_container:198 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 18:05:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 18:05:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 18:05:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 18:05:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 18:05:28 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 18:05:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 18:05:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 18:05:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 18:05:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 18:05:28 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 18:05:28 [INFO] app.config.dependency_container:330 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 18:05:28 [INFO] app.config.dependency_container:281 - _setup_services(): Services initialized
2025-06-08 18:05:28 [INFO] app.config.dependency_container:352 - _setup_controllers(): Controllers setup deferred
2025-06-08 18:05:28 [INFO] app.config.dependency_container:88 - initialize(): Dependency container initialized successfully
2025-06-08 18:05:28 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-08 18:05:28 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:05:28 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:05:28 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:127 - _get_user_statistics(): Error getting user statistics: 'MongoDBUserRepository' object has no attribute 'find_with_filters'
2025-06-08 18:05:28 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:154 - _get_reimbursement_statistics(): Error getting reimbursement statistics: 'MongoDBReimbursementRepository' object has no attribute 'get_pending_reimbursements'
2025-06-08 18:05:28 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:188 - _get_distributions(): Error getting distributions: 'MongoDBUserRepository' object has no attribute 'find_with_filters'
2025-06-08 18:05:28 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:05:28 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:05:28 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-08 18:05:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52084 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 18:05:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52120 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 18:05:35 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 18:05:35 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 18:05:35 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: EMP003
2025-06-08 18:05:35 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:05:35 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:05:35 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:127 - _get_user_statistics(): Error getting user statistics: 'MongoDBUserRepository' object has no attribute 'find_with_filters'
2025-06-08 18:05:35 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:154 - _get_reimbursement_statistics(): Error getting reimbursement statistics: 'MongoDBReimbursementRepository' object has no attribute 'get_pending_reimbursements'
2025-06-08 18:05:35 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:188 - _get_distributions(): Error getting distributions: 'MongoDBUserRepository' object has no attribute 'find_with_filters'
2025-06-08 18:05:35 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:05:35 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:05:35 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-08 18:05:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52122 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 18:05:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP003
2025-06-08 18:05:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP003 from organisation: localhost
2025-06-08 18:05:36 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: EMP003
2025-06-08 18:05:36 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:05:36 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:05:36 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:127 - _get_user_statistics(): Error getting user statistics: 'MongoDBUserRepository' object has no attribute 'find_with_filters'
2025-06-08 18:05:36 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:154 - _get_reimbursement_statistics(): Error getting reimbursement statistics: 'MongoDBReimbursementRepository' object has no attribute 'get_pending_reimbursements'
2025-06-08 18:05:36 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:188 - _get_distributions(): Error getting distributions: 'MongoDBUserRepository' object has no attribute 'find_with_filters'
2025-06-08 18:05:36 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:05:36 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:05:36 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-08 18:05:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52122 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 18:05:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 18:05:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 18:05:43 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-08 18:05:43 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:05:43 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:05:43 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:127 - _get_user_statistics(): Error getting user statistics: 'MongoDBUserRepository' object has no attribute 'find_with_filters'
2025-06-08 18:05:43 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:154 - _get_reimbursement_statistics(): Error getting reimbursement statistics: 'MongoDBReimbursementRepository' object has no attribute 'get_pending_reimbursements'
2025-06-08 18:05:43 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:188 - _get_distributions(): Error getting distributions: 'MongoDBUserRepository' object has no attribute 'find_with_filters'
2025-06-08 18:05:43 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:05:43 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:05:43 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-08 18:05:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52115 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 18:05:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 18:05:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 18:05:43 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-08 18:05:43 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:05:43 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:05:43 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:127 - _get_user_statistics(): Error getting user statistics: 'MongoDBUserRepository' object has no attribute 'find_with_filters'
2025-06-08 18:05:43 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:154 - _get_reimbursement_statistics(): Error getting reimbursement statistics: 'MongoDBReimbursementRepository' object has no attribute 'get_pending_reimbursements'
2025-06-08 18:05:43 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:188 - _get_distributions(): Error getting distributions: 'MongoDBUserRepository' object has no attribute 'find_with_filters'
2025-06-08 18:05:43 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:05:43 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:05:43 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-08 18:05:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52132 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 18:06:06 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 18:06:06 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 18:06:06 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-08 18:06:06 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:06:06 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:06:06 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:127 - _get_user_statistics(): Error getting user statistics: 'MongoDBUserRepository' object has no attribute 'find_with_filters'
2025-06-08 18:06:06 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:154 - _get_reimbursement_statistics(): Error getting reimbursement statistics: 'MongoDBReimbursementRepository' object has no attribute 'get_pending_reimbursements'
2025-06-08 18:06:06 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:188 - _get_distributions(): Error getting distributions: 'MongoDBUserRepository' object has no attribute 'find_with_filters'
2025-06-08 18:06:06 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:06:06 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:06:06 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-08 18:06:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52138 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 18:06:06 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 18:06:06 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 18:06:06 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-08 18:06:06 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:06:06 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:06:06 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:127 - _get_user_statistics(): Error getting user statistics: 'MongoDBUserRepository' object has no attribute 'find_with_filters'
2025-06-08 18:06:06 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:154 - _get_reimbursement_statistics(): Error getting reimbursement statistics: 'MongoDBReimbursementRepository' object has no attribute 'get_pending_reimbursements'
2025-06-08 18:06:06 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:188 - _get_distributions(): Error getting distributions: 'MongoDBUserRepository' object has no attribute 'find_with_filters'
2025-06-08 18:06:06 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:06:06 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:06:06 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-08 18:06:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52138 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 18:10:07 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 18:10:07 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 18:10:07 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 18:10:07 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 18:10:08 [INFO] uvicorn.error:93 - _serve(): Finished server process [49819]
2025-06-08 18:10:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:10:21 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:10:21 [INFO] uvicorn.error:83 - _serve(): Started server process [49944]
2025-06-08 18:10:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:10:21 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:10:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:10:26 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 18:10:27 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 18:10:27 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 18:10:27 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 18:10:27 [INFO] uvicorn.error:93 - _serve(): Finished server process [49944]
2025-06-08 18:10:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:10:37 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:10:37 [INFO] uvicorn.error:83 - _serve(): Started server process [49964]
2025-06-08 18:10:37 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:10:37 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:10:37 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:13:13 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Signature verification failed.
2025-06-08 18:13:13 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Signature verification failed.
2025-06-08 18:13:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52600 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 401
2025-06-08 18:13:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52604 - "POST /api/v1/auth/login HTTP/1.1" 404
2025-06-08 18:13:38 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-08 18:13:38 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-08 18:13:38 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-08 18:13:39 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 18:13:39 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 18:13:39 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-08 18:13:39 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-08 18:13:39 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-08 18:13:39 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: superadmin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-08 18:13:39 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-08 18:13:39 [WARNING] app.auth.password_handler:24 - verify_password(): Password verification failed.
2025-06-08 18:13:39 [WARNING] app.api.controllers.auth_controller:123 - login(): Invalid password for user superadmin
2025-06-08 18:13:39 [ERROR] app.api.controllers.auth_controller:178 - login(): Login error: Invalid username or password
2025-06-08 18:13:39 [WARNING] app.api.routes.auth_routes_v2:80 - login(): Login failed for user superadmin: Invalid username or password
2025-06-08 18:13:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52609 - "POST /api/v2/auth/login HTTP/1.1" 400
2025-06-08 18:14:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52629 - "POST /api/v2/users HTTP/1.1" 403
2025-06-08 18:14:53 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: admin @ localhost
2025-06-08 18:14:53 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: admin @ localhost
2025-06-08 18:14:53 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-08 18:14:54 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 18:14:54 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 18:14:54 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-08 18:14:54 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-08 18:14:54 [WARNING] app.api.controllers.auth_controller:118 - login(): User admin not found in database
2025-06-08 18:14:54 [ERROR] app.api.controllers.auth_controller:178 - login(): Login error: Invalid username or password
2025-06-08 18:14:54 [WARNING] app.api.routes.auth_routes_v2:80 - login(): Login failed for user admin: Invalid username or password
2025-06-08 18:14:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52648 - "POST /api/v2/auth/login HTTP/1.1" 400
2025-06-08 18:15:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: TEST001
2025-06-08 18:15:54 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: TEST001 from organisation: localhost
2025-06-08 18:15:55 [INFO] app.config.dependency_container:79 - initialize(): Initializing dependency container...
2025-06-08 18:15:55 [INFO] app.config.dependency_container:104 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 18:15:55 [INFO] app.config.dependency_container:105 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 18:15:55 [INFO] app.config.dependency_container:198 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 18:15:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 18:15:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 18:15:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 18:15:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 18:15:55 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 18:15:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 18:15:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 18:15:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 18:15:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 18:15:55 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 18:15:55 [INFO] app.config.dependency_container:330 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 18:15:55 [INFO] app.config.dependency_container:281 - _setup_services(): Services initialized
2025-06-08 18:15:55 [INFO] app.config.dependency_container:352 - _setup_controllers(): Controllers setup deferred
2025-06-08 18:15:55 [INFO] app.config.dependency_container:88 - initialize(): Dependency container initialized successfully
2025-06-08 18:15:55 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: TEST001
2025-06-08 18:15:55 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:15:55 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:15:55 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 18:15:55 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 18:15:55 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 18:15:55 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 18:15:55 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 18:15:55 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 18:15:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:1551 - find_with_filters(): Found 3 users with filters for organisation: localhost
2025-06-08 18:15:56 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-08 18:15:56 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-08 18:15:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 18:15:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:1551 - find_with_filters(): Found 3 users with filters for organisation: localhost
2025-06-08 18:15:56 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:188 - _get_distributions(): Error getting distributions: 'SimpleUser' object has no attribute 'permissions'
2025-06-08 18:15:56 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:15:56 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:15:56 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-08 18:15:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52791 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 18:35:51 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 18:35:52 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 18:35:52 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 18:35:52 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 18:35:52 [INFO] uvicorn.error:93 - _serve(): Finished server process [49964]
2025-06-08 18:35:56 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:36:05 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:36:05 [INFO] uvicorn.error:83 - _serve(): Started server process [50311]
2025-06-08 18:36:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:36:05 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:36:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:36:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55711 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 18:36:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55713 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 18:36:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 18:36:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 18:36:05 [INFO] app.config.dependency_container:79 - initialize(): Initializing dependency container...
2025-06-08 18:36:05 [INFO] app.config.dependency_container:104 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 18:36:05 [INFO] app.config.dependency_container:105 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 18:36:05 [INFO] app.config.dependency_container:198 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 18:36:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 18:36:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 18:36:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 18:36:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 18:36:05 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 18:36:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 18:36:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 18:36:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 18:36:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 18:36:05 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 18:36:05 [INFO] app.config.dependency_container:330 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 18:36:05 [INFO] app.config.dependency_container:281 - _setup_services(): Services initialized
2025-06-08 18:36:05 [INFO] app.config.dependency_container:352 - _setup_controllers(): Controllers setup deferred
2025-06-08 18:36:05 [INFO] app.config.dependency_container:88 - initialize(): Dependency container initialized successfully
2025-06-08 18:36:05 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-08 18:36:05 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:36:05 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:36:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 18:36:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 18:36:07 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 18:36:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 18:36:07 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 18:36:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 18:36:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:1551 - find_with_filters(): Found 3 users with filters for organisation: localhost
2025-06-08 18:36:07 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-08 18:36:07 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-08 18:36:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 18:36:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:1551 - find_with_filters(): Found 3 users with filters for organisation: localhost
2025-06-08 18:36:07 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:188 - _get_distributions(): Error getting distributions: 'SimpleUser' object has no attribute 'permissions'
2025-06-08 18:36:07 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:36:07 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:36:07 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-08 18:36:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55711 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 18:36:07 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 18:36:07 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 18:36:07 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-08 18:36:07 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:36:07 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-08 18:36:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 18:36:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:1551 - find_with_filters(): Found 3 users with filters for organisation: localhost
2025-06-08 18:36:07 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-08 18:36:07 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-08 18:36:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 18:36:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:1551 - find_with_filters(): Found 3 users with filters for organisation: localhost
2025-06-08 18:36:07 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:188 - _get_distributions(): Error getting distributions: 'SimpleUser' object has no attribute 'permissions'
2025-06-08 18:36:07 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:36:07 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 18:36:07 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-08 18:36:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55711 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 18:37:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55926 - "OPTIONS /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 18:37:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55928 - "OPTIONS /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 18:37:26 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 18:37:26 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 18:37:26 [INFO] app.api.controllers.organisation_controller:68 - list_organisations(): Listing organisations with filters
2025-06-08 18:37:26 [INFO] app.application.use_cases.organisation.list_organisations_use_case:57 - execute(): Listing organisations with filters: OrganisationSearchFiltersDTO(name=None, organisation_type=None, status=None, city=None, state=None, country=None, min_employee_strength=None, max_employee_strength=None, has_available_capacity=None, is_gst_registered=None, created_after=None, created_before=None, page=1, page_size=10, sort_by='created_at', sort_order='desc')
2025-06-08 18:37:26 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-08 18:37:26 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-08 18:37:26 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-08 18:37:26 [INFO] app.application.use_cases.organisation.list_organisations_use_case:89 - execute(): Listed 1 organisations (total: 1)
2025-06-08 18:37:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55926 - "GET /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 18:37:26 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 18:37:26 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 18:37:26 [INFO] app.api.controllers.organisation_controller:68 - list_organisations(): Listing organisations with filters
2025-06-08 18:37:26 [INFO] app.application.use_cases.organisation.list_organisations_use_case:57 - execute(): Listing organisations with filters: OrganisationSearchFiltersDTO(name=None, organisation_type=None, status=None, city=None, state=None, country=None, min_employee_strength=None, max_employee_strength=None, has_available_capacity=None, is_gst_registered=None, created_after=None, created_before=None, page=1, page_size=10, sort_by='created_at', sort_order='desc')
2025-06-08 18:37:26 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-08 18:37:26 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-08 18:37:26 [INFO] app.application.use_cases.organisation.list_organisations_use_case:89 - execute(): Listed 1 organisations (total: 1)
2025-06-08 18:37:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55926 - "GET /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 18:37:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55926 - "OPTIONS /api/v2/organisations/a485b5b9-8344-408c-bef1-496b8b3cbeba/ HTTP/1.1" 200
2025-06-08 18:37:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55930 - "OPTIONS /api/v2/organisations/a485b5b9-8344-408c-bef1-496b8b3cbeba/ HTTP/1.1" 200
2025-06-08 18:37:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55938 - "GET /api/v2/organisations/a485b5b9-8344-408c-bef1-496b8b3cbeba/ HTTP/1.1" 307
2025-06-08 18:37:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55938 - "GET /api/v2/organisations/a485b5b9-8344-408c-bef1-496b8b3cbeba/ HTTP/1.1" 307
2025-06-08 18:37:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55930 - "OPTIONS /api/v2/organisations/a485b5b9-8344-408c-bef1-496b8b3cbeba HTTP/1.1" 200
2025-06-08 18:37:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55938 - "OPTIONS /api/v2/organisations/a485b5b9-8344-408c-bef1-496b8b3cbeba HTTP/1.1" 200
2025-06-08 18:37:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 18:37:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 18:37:31 [INFO] app.api.controllers.organisation_controller:73 - get_organisation_by_id(): Getting organisation: a485b5b9-8344-408c-bef1-496b8b3cbeba
2025-06-08 18:37:31 [INFO] app.application.use_cases.organisation.get_organisation_use_case:54 - execute_by_id(): Getting organisation by ID: a485b5b9-8344-408c-bef1-496b8b3cbeba
2025-06-08 18:37:31 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-08 18:37:31 [INFO] app.application.use_cases.organisation.get_organisation_use_case:63 - execute_by_id(): Organisation retrieved successfully: a485b5b9-8344-408c-bef1-496b8b3cbeba
2025-06-08 18:37:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55926 - "GET /api/v2/organisations/a485b5b9-8344-408c-bef1-496b8b3cbeba HTTP/1.1" 200
2025-06-08 18:37:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 18:37:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 18:37:31 [INFO] app.api.controllers.organisation_controller:73 - get_organisation_by_id(): Getting organisation: a485b5b9-8344-408c-bef1-496b8b3cbeba
2025-06-08 18:37:31 [INFO] app.application.use_cases.organisation.get_organisation_use_case:54 - execute_by_id(): Getting organisation by ID: a485b5b9-8344-408c-bef1-496b8b3cbeba
2025-06-08 18:37:31 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-08 18:37:31 [INFO] app.application.use_cases.organisation.get_organisation_use_case:63 - execute_by_id(): Organisation retrieved successfully: a485b5b9-8344-408c-bef1-496b8b3cbeba
2025-06-08 18:37:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55926 - "GET /api/v2/organisations/a485b5b9-8344-408c-bef1-496b8b3cbeba HTTP/1.1" 200
2025-06-08 18:37:44 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 18:37:44 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 18:37:44 [INFO] app.api.controllers.organisation_controller:68 - list_organisations(): Listing organisations with filters
2025-06-08 18:37:44 [INFO] app.application.use_cases.organisation.list_organisations_use_case:57 - execute(): Listing organisations with filters: OrganisationSearchFiltersDTO(name=None, organisation_type=None, status=None, city=None, state=None, country=None, min_employee_strength=None, max_employee_strength=None, has_available_capacity=None, is_gst_registered=None, created_after=None, created_before=None, page=1, page_size=10, sort_by='created_at', sort_order='desc')
2025-06-08 18:37:44 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-08 18:37:44 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-08 18:37:44 [INFO] app.application.use_cases.organisation.list_organisations_use_case:89 - execute(): Listed 1 organisations (total: 1)
2025-06-08 18:37:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55973 - "GET /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 18:37:44 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 18:37:44 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 18:37:44 [INFO] app.api.controllers.organisation_controller:68 - list_organisations(): Listing organisations with filters
2025-06-08 18:37:44 [INFO] app.application.use_cases.organisation.list_organisations_use_case:57 - execute(): Listing organisations with filters: OrganisationSearchFiltersDTO(name=None, organisation_type=None, status=None, city=None, state=None, country=None, min_employee_strength=None, max_employee_strength=None, has_available_capacity=None, is_gst_registered=None, created_after=None, created_before=None, page=1, page_size=10, sort_by='created_at', sort_order='desc')
2025-06-08 18:37:44 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-08 18:37:44 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-08 18:37:44 [INFO] app.application.use_cases.organisation.list_organisations_use_case:89 - execute(): Listed 1 organisations (total: 1)
2025-06-08 18:37:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55973 - "GET /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-08 18:37:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55973 - "OPTIONS /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 18:37:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56006 - "OPTIONS /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 18:37:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 18:37:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 18:37:48 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-08 18:37:48 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 18:37:48 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 18:37:48 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 18:37:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56008 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 18:37:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 18:37:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 18:37:48 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-08 18:37:48 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 18:37:48 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 18:37:48 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 18:37:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56006 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 18:38:12 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 18:38:12 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 18:38:12 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-08 18:38:12 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 18:38:12 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 18:38:12 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 18:38:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56025 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 18:38:12 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 18:38:12 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 18:38:12 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-08 18:38:12 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 18:38:12 [INFO] app.infrastructure.repositories.mongodb_user_repository:577 - get_all(): Retrieved 3 users
2025-06-08 18:38:12 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 18:38:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56027 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 18:41:44 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 18:41:44 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 18:41:44 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 18:41:44 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 18:41:44 [INFO] uvicorn.error:93 - _serve(): Finished server process [50311]
2025-06-08 18:41:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:42:01 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:42:01 [INFO] uvicorn.error:83 - _serve(): Started server process [50397]
2025-06-08 18:42:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:42:01 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:42:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:47:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 18:47:22 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 18:47:22 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 18:47:22 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 18:47:22 [INFO] uvicorn.error:93 - _serve(): Finished server process [50397]
2025-06-08 18:47:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:47:36 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:47:36 [INFO] uvicorn.error:83 - _serve(): Started server process [50483]
2025-06-08 18:47:36 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:47:36 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:47:36 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:47:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:47:49 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:47:49 [INFO] uvicorn.error:83 - _serve(): Started server process [50507]
2025-06-08 18:47:49 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:47:49 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:47:49 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:47:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:48:01 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:48:01 [INFO] uvicorn.error:83 - _serve(): Started server process [50534]
2025-06-08 18:48:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:48:01 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:48:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:48:06 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:48:14 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:48:14 [INFO] uvicorn.error:83 - _serve(): Started server process [50552]
2025-06-08 18:48:14 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:48:14 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:48:14 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:48:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:48:25 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:48:25 [INFO] uvicorn.error:83 - _serve(): Started server process [50569]
2025-06-08 18:48:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:48:25 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:48:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:48:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:48:37 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:48:37 [INFO] uvicorn.error:83 - _serve(): Started server process [50582]
2025-06-08 18:48:37 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:48:37 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:48:37 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:48:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:48:48 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:48:48 [INFO] uvicorn.error:83 - _serve(): Started server process [50596]
2025-06-08 18:48:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:48:48 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:48:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:49:01 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 18:49:01 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 18:49:01 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 18:49:01 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 18:49:01 [INFO] uvicorn.error:93 - _serve(): Finished server process [50596]
2025-06-08 18:49:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:49:13 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:49:13 [INFO] uvicorn.error:83 - _serve(): Started server process [50614]
2025-06-08 18:49:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:49:13 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:49:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:49:13 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 18:49:13 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 18:49:13 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 18:49:13 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 18:49:13 [INFO] uvicorn.error:93 - _serve(): Finished server process [50614]
2025-06-08 18:49:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:49:25 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:49:25 [INFO] uvicorn.error:83 - _serve(): Started server process [50632]
2025-06-08 18:49:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:49:25 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:49:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:49:28 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:49:35 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:49:35 [INFO] uvicorn.error:83 - _serve(): Started server process [50652]
2025-06-08 18:49:35 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:49:35 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:49:35 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:49:40 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 18:49:40 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 18:49:40 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 18:49:40 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 18:49:40 [INFO] uvicorn.error:93 - _serve(): Finished server process [50652]
2025-06-08 18:49:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:49:53 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:49:53 [INFO] uvicorn.error:83 - _serve(): Started server process [50684]
2025-06-08 18:49:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:49:53 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:49:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:49:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:50:05 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:50:05 [INFO] uvicorn.error:83 - _serve(): Started server process [50708]
2025-06-08 18:50:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:50:05 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:50:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:50:25 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 18:50:25 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 18:50:25 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 18:50:25 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 18:50:25 [INFO] uvicorn.error:93 - _serve(): Finished server process [50708]
2025-06-08 18:50:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:50:38 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:50:38 [INFO] uvicorn.error:83 - _serve(): Started server process [50726]
2025-06-08 18:50:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:50:38 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:50:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:50:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:50:48 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:50:48 [INFO] uvicorn.error:83 - _serve(): Started server process [50746]
2025-06-08 18:50:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:50:48 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:50:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:51:41 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 18:51:41 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 18:51:41 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 18:51:41 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 18:51:41 [INFO] uvicorn.error:93 - _serve(): Finished server process [50746]
2025-06-08 18:51:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:51:53 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:51:53 [INFO] uvicorn.error:83 - _serve(): Started server process [50766]
2025-06-08 18:51:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:51:53 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:51:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:51:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:52:06 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:52:06 [INFO] uvicorn.error:83 - _serve(): Started server process [50781]
2025-06-08 18:52:06 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:52:06 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:52:06 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:52:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:52:16 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:52:16 [INFO] uvicorn.error:83 - _serve(): Started server process [50802]
2025-06-08 18:52:16 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:52:16 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:52:16 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:52:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:52:28 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 18:52:28 [INFO] uvicorn.error:83 - _serve(): Started server process [50815]
2025-06-08 18:52:28 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 18:52:28 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 18:52:28 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 18:52:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 18:52:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 19:11:20 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 19:11:47 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 19:15:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 19:15:39 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 19:15:39 [INFO] uvicorn.error:83 - _serve(): Started server process [51191]
2025-06-08 19:15:39 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 19:15:39 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 19:15:39 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 19:15:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58863 - "OPTIONS /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 19:15:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58865 - "OPTIONS /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 19:15:52 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 19:15:52 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 19:15:52 [INFO] app.config.dependency_container:79 - initialize(): Initializing dependency container...
2025-06-08 19:15:52 [INFO] app.config.dependency_container:104 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 19:15:52 [INFO] app.config.dependency_container:105 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 19:15:52 [INFO] app.config.dependency_container:198 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 19:15:52 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 19:15:52 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 19:15:52 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 19:15:52 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 19:15:52 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 19:15:52 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 19:15:52 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 19:15:52 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 19:15:52 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 19:15:52 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 19:15:52 [INFO] app.config.dependency_container:330 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 19:15:52 [INFO] app.config.dependency_container:281 - _setup_services(): Services initialized
2025-06-08 19:15:52 [INFO] app.config.dependency_container:352 - _setup_controllers(): Controllers setup deferred
2025-06-08 19:15:52 [INFO] app.config.dependency_container:88 - initialize(): Dependency container initialized successfully
2025-06-08 19:15:52 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-08 19:15:52 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 19:15:52 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 19:15:53 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 19:15:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 19:15:53 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 19:15:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:15:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:592 - get_all(): Retrieved 3 users
2025-06-08 19:15:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:15:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58863 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 19:15:53 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 19:15:53 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 19:15:53 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-08 19:15:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:15:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:592 - get_all(): Retrieved 3 users
2025-06-08 19:15:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:15:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58863 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 19:25:44 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 19:25:44 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 19:25:45 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 19:25:45 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 19:25:45 [INFO] uvicorn.error:93 - _serve(): Finished server process [51191]
2025-06-08 19:25:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 19:25:57 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 19:25:57 [INFO] uvicorn.error:83 - _serve(): Started server process [51281]
2025-06-08 19:25:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 19:25:57 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 19:25:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 19:27:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60216 - "OPTIONS /api/v2/users/with-files HTTP/1.1" 200
2025-06-08 19:27:42 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 19:27:42 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 19:27:42 [INFO] app.config.dependency_container:79 - initialize(): Initializing dependency container...
2025-06-08 19:27:42 [INFO] app.config.dependency_container:104 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 19:27:42 [INFO] app.config.dependency_container:105 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 19:27:42 [INFO] app.config.dependency_container:198 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 19:27:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 19:27:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 19:27:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 19:27:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 19:27:42 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 19:27:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 19:27:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 19:27:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 19:27:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 19:27:42 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 19:27:42 [INFO] app.config.dependency_container:330 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 19:27:42 [INFO] app.config.dependency_container:281 - _setup_services(): Services initialized
2025-06-08 19:27:42 [INFO] app.config.dependency_container:352 - _setup_controllers(): Controllers setup deferred
2025-06-08 19:27:42 [INFO] app.config.dependency_container:88 - initialize(): Dependency container initialized successfully
2025-06-08 19:31:32 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: photos/localhost/c3a0226e-f326-4497-996d-d98381a604c2.png
2025-06-08 19:31:32 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: pan/localhost/13021374-84c5-4468-80d4-15fb1ea45826.png
2025-06-08 19:31:32 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: aadhar/localhost/bfadd78a-0627-42c9-aa0f-7c11caa49753.png
2025-06-08 19:31:32 [INFO] app.infrastructure.services.user_service_impl:97 - create_user(): Creating user: emp005 in organisation: localhost
2025-06-08 19:31:32 [INFO] app.application.use_cases.user.create_user_use_case:94 - execute(): Creating user: clickankit1@gmail.com in organisation: localhost
2025-06-08 19:31:32 [ERROR] app.infrastructure.services.user_service_impl:101 - create_user(): Error creating user emp005 in organisation localhost: User creation data is invalid
2025-06-08 19:31:32 [ERROR] app.api.controllers.user_controller:105 - create_user_with_files(): Error creating user with files in organisation localhost: User creation data is invalid
2025-06-08 19:31:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60216 - "POST /api/v2/users/with-files HTTP/1.1" 400
2025-06-08 19:31:50 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 19:31:50 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 19:31:50 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: photos/localhost/4e4fdd12-0fcd-4bca-a78c-f5a63e626ca2.png
2025-06-08 19:31:50 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: pan/localhost/421c6de9-8da8-494c-8e4e-7e565c9dea33.png
2025-06-08 19:31:50 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: aadhar/localhost/10cba504-88d8-42df-8ee7-d62914c4f9b8.png
2025-06-08 19:31:50 [INFO] app.infrastructure.services.user_service_impl:97 - create_user(): Creating user: emp005 in organisation: localhost
2025-06-08 19:31:50 [INFO] app.application.use_cases.user.create_user_use_case:94 - execute(): Creating user: clickankit1@gmail.com in organisation: localhost
2025-06-08 19:31:50 [ERROR] app.infrastructure.services.user_service_impl:101 - create_user(): Error creating user emp005 in organisation localhost: User creation data is invalid
2025-06-08 19:31:50 [ERROR] app.api.controllers.user_controller:105 - create_user_with_files(): Error creating user with files in organisation localhost: User creation data is invalid
2025-06-08 19:31:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60332 - "POST /api/v2/users/with-files HTTP/1.1" 400
2025-06-08 19:32:08 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 19:32:08 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 19:32:08 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: photos/localhost/b6f8e69a-acfe-4b9b-a91a-92d26f21ec46.png
2025-06-08 19:32:08 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: pan/localhost/004ea650-8eb7-4fe7-a49b-004abab9318b.png
2025-06-08 19:32:08 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: aadhar/localhost/05c56bc5-f3c9-43dc-8c00-a2efc65aec43.png
2025-06-08 19:32:08 [INFO] app.infrastructure.services.user_service_impl:97 - create_user(): Creating user: emp005 in organisation: localhost
2025-06-08 19:32:08 [INFO] app.application.use_cases.user.create_user_use_case:94 - execute(): Creating user: clickankit1@gmail.com in organisation: localhost
2025-06-08 19:32:08 [ERROR] app.infrastructure.services.user_service_impl:101 - create_user(): Error creating user emp005 in organisation localhost: User creation data is invalid
2025-06-08 19:32:08 [ERROR] app.api.controllers.user_controller:105 - create_user_with_files(): Error creating user with files in organisation localhost: User creation data is invalid
2025-06-08 19:32:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60334 - "POST /api/v2/users/with-files HTTP/1.1" 400
2025-06-08 19:32:47 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 19:32:47 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 19:32:47 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: photos/localhost/ce294906-87a3-4a81-bfd2-9ae0ed71d04e.png
2025-06-08 19:32:47 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: pan/localhost/25463bd4-90f9-4d1d-8bf1-a856f165ee20.png
2025-06-08 19:32:47 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: aadhar/localhost/6273b78e-97a2-4b30-a5c7-3aae03cbf425.png
2025-06-08 19:32:47 [INFO] app.infrastructure.services.user_service_impl:97 - create_user(): Creating user: emp005 in organisation: localhost
2025-06-08 19:32:47 [INFO] app.application.use_cases.user.create_user_use_case:94 - execute(): Creating user: clickankit1@gmail.com in organisation: localhost
2025-06-08 19:32:47 [ERROR] app.infrastructure.services.user_service_impl:101 - create_user(): Error creating user emp005 in organisation localhost: User creation data is invalid
2025-06-08 19:32:47 [ERROR] app.api.controllers.user_controller:105 - create_user_with_files(): Error creating user with files in organisation localhost: User creation data is invalid
2025-06-08 19:32:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60414 - "POST /api/v2/users/with-files HTTP/1.1" 400
2025-06-08 19:34:03 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 19:34:03 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 19:34:03 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 19:34:03 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 19:34:03 [INFO] uvicorn.error:93 - _serve(): Finished server process [51281]
2025-06-08 19:34:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 19:34:21 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 19:34:21 [INFO] uvicorn.error:83 - _serve(): Started server process [51458]
2025-06-08 19:34:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 19:34:21 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 19:34:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 19:34:28 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 19:34:35 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 19:34:36 [INFO] uvicorn.error:83 - _serve(): Started server process [51487]
2025-06-08 19:34:36 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 19:34:36 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 19:34:36 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 19:34:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 19:34:48 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 19:34:48 [INFO] uvicorn.error:83 - _serve(): Started server process [51500]
2025-06-08 19:34:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 19:34:48 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 19:34:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 19:34:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 19:34:57 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 19:34:57 [INFO] uvicorn.error:83 - _serve(): Started server process [51519]
2025-06-08 19:34:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 19:34:57 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 19:34:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 19:35:53 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-08 19:35:53 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-08 19:35:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61438 - "POST /api/v2/users/with-files HTTP/1.1" 401
2025-06-08 19:36:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61512 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-08 19:36:09 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-08 19:36:09 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-08 19:36:09 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-08 19:36:11 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 19:36:11 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 19:36:11 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-08 19:36:11 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-08 19:36:11 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-08 19:36:11 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-08 19:36:11 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-08 19:36:12 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-08 19:36:12 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-08 19:36:12 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-08T22:06:12.309350
2025-06-08 19:36:12 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-08 19:36:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61512 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-08 19:36:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61512 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 19:36:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61514 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 19:36:12 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 19:36:12 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 19:36:12 [INFO] app.config.dependency_container:79 - initialize(): Initializing dependency container...
2025-06-08 19:36:12 [INFO] app.config.dependency_container:104 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 19:36:12 [INFO] app.config.dependency_container:105 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 19:36:12 [INFO] app.config.dependency_container:198 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 19:36:12 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 19:36:12 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 19:36:12 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 19:36:12 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 19:36:12 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 19:36:12 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 19:36:12 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 19:36:12 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 19:36:12 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 19:36:12 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 19:36:12 [INFO] app.config.dependency_container:330 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 19:36:12 [INFO] app.config.dependency_container:281 - _setup_services(): Services initialized
2025-06-08 19:36:12 [INFO] app.config.dependency_container:352 - _setup_controllers(): Controllers setup deferred
2025-06-08 19:36:12 [INFO] app.config.dependency_container:88 - initialize(): Dependency container initialized successfully
2025-06-08 19:36:13 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-08 19:36:13 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-08 19:36:13 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-08 19:36:13 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 19:36:13 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 19:36:13 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 19:36:13 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 19:36:13 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 19:36:13 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:36:14 [INFO] app.infrastructure.repositories.mongodb_user_repository:1566 - find_with_filters(): Found 3 users with filters for organisation: localhost
2025-06-08 19:36:14 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-08 19:36:14 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-08 19:36:14 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:36:14 [INFO] app.infrastructure.repositories.mongodb_user_repository:1566 - find_with_filters(): Found 3 users with filters for organisation: localhost
2025-06-08 19:36:14 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:188 - _get_distributions(): Error getting distributions: 'SimpleUser' object has no attribute 'permissions'
2025-06-08 19:36:14 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 19:36:14 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 19:36:14 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-08 19:36:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61541 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 19:36:14 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 19:36:14 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 19:36:14 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-08 19:36:14 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-08 19:36:14 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-08 19:36:14 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:36:14 [INFO] app.infrastructure.repositories.mongodb_user_repository:1566 - find_with_filters(): Found 3 users with filters for organisation: localhost
2025-06-08 19:36:14 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-08 19:36:14 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-08 19:36:14 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:36:14 [INFO] app.infrastructure.repositories.mongodb_user_repository:1566 - find_with_filters(): Found 3 users with filters for organisation: localhost
2025-06-08 19:36:14 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:188 - _get_distributions(): Error getting distributions: 'SimpleUser' object has no attribute 'permissions'
2025-06-08 19:36:14 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 19:36:14 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-08 19:36:14 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-08 19:36:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61541 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-08 19:36:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61664 - "OPTIONS /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 19:36:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61665 - "OPTIONS /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 19:36:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 19:36:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 19:36:24 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-08 19:36:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:36:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:592 - get_all(): Retrieved 3 users
2025-06-08 19:36:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:36:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61664 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 19:36:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 19:36:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 19:36:24 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-08 19:36:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:36:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:592 - get_all(): Retrieved 3 users
2025-06-08 19:36:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:36:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61665 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 19:37:46 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-08 19:38:28 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 19:38:28 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 19:38:28 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 19:38:28 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 19:38:28 [INFO] uvicorn.error:93 - _serve(): Finished server process [51519]
2025-06-08 19:38:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 19:38:51 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 19:38:51 [INFO] uvicorn.error:83 - _serve(): Started server process [51584]
2025-06-08 19:38:51 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 19:38:51 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 19:38:51 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 19:39:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62027 - "OPTIONS /api/v2/users/with-files HTTP/1.1" 200
2025-06-08 19:39:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 19:39:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 19:39:05 [INFO] app.config.dependency_container:79 - initialize(): Initializing dependency container...
2025-06-08 19:39:05 [INFO] app.config.dependency_container:104 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 19:39:05 [INFO] app.config.dependency_container:105 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 19:39:05 [INFO] app.config.dependency_container:198 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 19:39:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 19:39:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 19:39:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 19:39:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 19:39:05 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 19:39:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 19:39:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 19:39:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 19:39:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 19:39:05 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 19:39:05 [INFO] app.config.dependency_container:330 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 19:39:05 [INFO] app.config.dependency_container:281 - _setup_services(): Services initialized
2025-06-08 19:39:05 [INFO] app.config.dependency_container:352 - _setup_controllers(): Controllers setup deferred
2025-06-08 19:39:05 [INFO] app.config.dependency_container:88 - initialize(): Dependency container initialized successfully
2025-06-08 19:39:23 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: photos/localhost/9bd9996f-9b98-46ad-9799-cc259379d4a7.png
2025-06-08 19:39:23 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: pan/localhost/abc3ce49-7324-400a-9c69-9d50967a7388.png
2025-06-08 19:39:23 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: aadhar/localhost/d1ccfb92-aba3-4327-854b-22031701beed.png
2025-06-08 19:39:23 [INFO] app.infrastructure.services.user_service_impl:97 - create_user(): Creating user: emp005 in organisation: localhost
2025-06-08 19:39:23 [INFO] app.application.use_cases.user.create_user_use_case:94 - execute(): Creating user: ankittest@gmail.com in organisation: localhost
2025-06-08 19:39:23 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 19:39:23 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 19:39:24 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 19:39:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 19:39:24 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 19:39:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:39:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:39:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:39:24 [ERROR] app.infrastructure.services.user_service_impl:101 - create_user(): Error creating user emp005 in organisation localhost: User conflicts with existing data {'email_exists': False, 'mobile_exists': False, 'pan_exists': True}
2025-06-08 19:39:24 [ERROR] app.api.controllers.user_controller:105 - create_user_with_files(): Error creating user with files in organisation localhost: User conflicts with existing data {'email_exists': False, 'mobile_exists': False, 'pan_exists': True}
2025-06-08 19:39:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62027 - "POST /api/v2/users/with-files HTTP/1.1" 400
2025-06-08 19:41:00 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 19:41:00 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 19:41:06 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: photos/localhost/0317c7dd-4db5-49a7-8280-ebfcf71d8629.png
2025-06-08 19:41:06 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: pan/localhost/91cdcb84-e7aa-4e99-be24-b87b9a3e672d.png
2025-06-08 19:41:06 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: aadhar/localhost/60873968-01af-4aa8-a7fb-e6a1925e02c3.png
2025-06-08 19:41:06 [INFO] app.infrastructure.services.user_service_impl:97 - create_user(): Creating user: emp005 in organisation: localhost
2025-06-08 19:41:06 [INFO] app.application.use_cases.user.create_user_use_case:94 - execute(): Creating user: ankittest@gmail.com in organisation: localhost
2025-06-08 19:41:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:41:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:41:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:41:06 [ERROR] app.infrastructure.services.user_service_impl:101 - create_user(): Error creating user emp005 in organisation localhost: Invalid personal details: Invalid mobile number format. Must be a 10-digit Indian mobile number
2025-06-08 19:41:06 [ERROR] app.api.controllers.user_controller:105 - create_user_with_files(): Error creating user with files in organisation localhost: Invalid personal details: Invalid mobile number format. Must be a 10-digit Indian mobile number
2025-06-08 19:41:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62272 - "POST /api/v2/users/with-files HTTP/1.1" 400
2025-06-08 19:41:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 19:41:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 19:41:32 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: photos/localhost/7ba2d495-9ce4-4400-9794-99c73ea2fb65.png
2025-06-08 19:41:32 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: pan/localhost/ef422f24-93c5-45d2-aba2-950f8fd5cdec.png
2025-06-08 19:41:32 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: aadhar/localhost/754bdfcb-100d-441d-a7a1-39401bd87d02.png
2025-06-08 19:41:32 [INFO] app.infrastructure.services.user_service_impl:97 - create_user(): Creating user: emp005 in organisation: localhost
2025-06-08 19:41:32 [INFO] app.application.use_cases.user.create_user_use_case:94 - execute(): Creating user: ankittest@gmail.com in organisation: localhost
2025-06-08 19:41:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:41:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:41:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:41:51 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-08 19:42:09 [INFO] app.application.use_cases.user.create_user_use_case:273 - _calculate_initial_leave_balance(): Calculated initial leave balances from company policies for organisation localhost: {'Sick Leave': 1.8333333333333333}
2025-06-08 19:42:09 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-08 19:42:10 [INFO] app.auth.password_handler:12 - hash_password(): Password hashed successfully. Password: admin123 Hashed: $2b$12$Iv9HuPXBZuPZgRuGNC62LeKQjgI6Jq9X/tG9xXwwPmzTxB3Tc2bKi
2025-06-08 19:42:10 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:42:10 [ERROR] app.infrastructure.repositories.mongodb_user_repository:385 - save(): Error saving user EMP005: Invalid document {'q': {'employee_id': 'EMP005'}, 'u': {'employee_id': 'EMP005', 'username': 'EMP005', 'email': 'ankittest@gmail.com', 'name': 'AnkitTest', 'gender': 'male', 'date_of_birth': datetime.datetime(1982, 3, 4, 0, 0), 'date_of_joining': datetime.datetime(2004, 4, 1, 0, 0), 'date_of_leaving': None, 'mobile': '9891800836', 'password_hash': '$2b$12$Iv9HuPXBZuPZgRuGNC62LeKQjgI6Jq9X/tG9xXwwPmzTxB3Tc2bKi', 'role': 'user', 'status': 'active', 'department': 'Software', 'designation': 'SE', 'location': 'Delhi', 'manager_id': 'SUPERADMIN', 'salary': None, 'pan_number': 'AJYAQ6335B', 'aadhar_number': '099999999999', 'bank_account_number': None, 'ifsc_code': None, 'bank_details': <bound method BankDetails.to_dict of BankDetails(bank_name='ICICI', ifsc='ICIC0001234', account='19******9999')>, 'photo_path': 'photos/localhost/7ba2d495-9ce4-4400-9794-99c73ea2fb65.png', 'pan_document_path': 'pan/localhost/ef422f24-93c5-45d2-aba2-950f8fd5cdec.png', 'aadhar_document_path': 'aadhar/localhost/754bdfcb-100d-441d-a7a1-39401bd87d02.png', 'leave_balance': {'Sick Leave': 1}, 'is_active': True, 'created_at': datetime.datetime(2025, 6, 8, 14, 12, 10, 217275), 'updated_at': datetime.datetime(2025, 6, 8, 14, 12, 10, 217614), 'created_by': None, 'updated_by': 'system', 'last_login': None, 'login_count': 0, 'failed_login_attempts': 0, 'locked_until': None, 'password_changed_at': None, 'custom_permissions': [], 'profile_completion_percentage': 0.0, 'version': 1}, 'multi': False, 'upsert': True} | cannot encode object: <bound method BankDetails.to_dict of BankDetails(bank_name='ICICI', ifsc='ICIC0001234', account='19******9999')>, of type: <class 'method'>
2025-06-08 19:42:10 [ERROR] app.infrastructure.services.user_service_impl:101 - create_user(): Error creating user emp005 in organisation localhost: Invalid document {'q': {'employee_id': 'EMP005'}, 'u': {'employee_id': 'EMP005', 'username': 'EMP005', 'email': 'ankittest@gmail.com', 'name': 'AnkitTest', 'gender': 'male', 'date_of_birth': datetime.datetime(1982, 3, 4, 0, 0), 'date_of_joining': datetime.datetime(2004, 4, 1, 0, 0), 'date_of_leaving': None, 'mobile': '9891800836', 'password_hash': '$2b$12$Iv9HuPXBZuPZgRuGNC62LeKQjgI6Jq9X/tG9xXwwPmzTxB3Tc2bKi', 'role': 'user', 'status': 'active', 'department': 'Software', 'designation': 'SE', 'location': 'Delhi', 'manager_id': 'SUPERADMIN', 'salary': None, 'pan_number': 'AJYAQ6335B', 'aadhar_number': '099999999999', 'bank_account_number': None, 'ifsc_code': None, 'bank_details': <bound method BankDetails.to_dict of BankDetails(bank_name='ICICI', ifsc='ICIC0001234', account='19******9999')>, 'photo_path': 'photos/localhost/7ba2d495-9ce4-4400-9794-99c73ea2fb65.png', 'pan_document_path': 'pan/localhost/ef422f24-93c5-45d2-aba2-950f8fd5cdec.png', 'aadhar_document_path': 'aadhar/localhost/754bdfcb-100d-441d-a7a1-39401bd87d02.png', 'leave_balance': {'Sick Leave': 1}, 'is_active': True, 'created_at': datetime.datetime(2025, 6, 8, 14, 12, 10, 217275), 'updated_at': datetime.datetime(2025, 6, 8, 14, 12, 10, 217614), 'created_by': None, 'updated_by': 'system', 'last_login': None, 'login_count': 0, 'failed_login_attempts': 0, 'locked_until': None, 'password_changed_at': None, 'custom_permissions': [], 'profile_completion_percentage': 0.0, 'version': 1}, 'multi': False, 'upsert': True} | cannot encode object: <bound method BankDetails.to_dict of BankDetails(bank_name='ICICI', ifsc='ICIC0001234', account='19******9999')>, of type: <class 'method'>
2025-06-08 19:42:10 [ERROR] app.api.controllers.user_controller:105 - create_user_with_files(): Error creating user with files in organisation localhost: Invalid document {'q': {'employee_id': 'EMP005'}, 'u': {'employee_id': 'EMP005', 'username': 'EMP005', 'email': 'ankittest@gmail.com', 'name': 'AnkitTest', 'gender': 'male', 'date_of_birth': datetime.datetime(1982, 3, 4, 0, 0), 'date_of_joining': datetime.datetime(2004, 4, 1, 0, 0), 'date_of_leaving': None, 'mobile': '9891800836', 'password_hash': '$2b$12$Iv9HuPXBZuPZgRuGNC62LeKQjgI6Jq9X/tG9xXwwPmzTxB3Tc2bKi', 'role': 'user', 'status': 'active', 'department': 'Software', 'designation': 'SE', 'location': 'Delhi', 'manager_id': 'SUPERADMIN', 'salary': None, 'pan_number': 'AJYAQ6335B', 'aadhar_number': '099999999999', 'bank_account_number': None, 'ifsc_code': None, 'bank_details': <bound method BankDetails.to_dict of BankDetails(bank_name='ICICI', ifsc='ICIC0001234', account='19******9999')>, 'photo_path': 'photos/localhost/7ba2d495-9ce4-4400-9794-99c73ea2fb65.png', 'pan_document_path': 'pan/localhost/ef422f24-93c5-45d2-aba2-950f8fd5cdec.png', 'aadhar_document_path': 'aadhar/localhost/754bdfcb-100d-441d-a7a1-39401bd87d02.png', 'leave_balance': {'Sick Leave': 1}, 'is_active': True, 'created_at': datetime.datetime(2025, 6, 8, 14, 12, 10, 217275), 'updated_at': datetime.datetime(2025, 6, 8, 14, 12, 10, 217614), 'created_by': None, 'updated_by': 'system', 'last_login': None, 'login_count': 0, 'failed_login_attempts': 0, 'locked_until': None, 'password_changed_at': None, 'custom_permissions': [], 'profile_completion_percentage': 0.0, 'version': 1}, 'multi': False, 'upsert': True} | cannot encode object: <bound method BankDetails.to_dict of BankDetails(bank_name='ICICI', ifsc='ICIC0001234', account='19******9999')>, of type: <class 'method'>
2025-06-08 19:43:44 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 19:43:44 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 19:43:44 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 19:43:44 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 19:43:44 [INFO] uvicorn.error:93 - _serve(): Finished server process [51584]
2025-06-08 19:43:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 19:43:59 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 19:43:59 [INFO] uvicorn.error:83 - _serve(): Started server process [51685]
2025-06-08 19:43:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 19:43:59 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 19:43:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 19:44:10 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 19:44:10 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 19:44:10 [INFO] app.config.dependency_container:79 - initialize(): Initializing dependency container...
2025-06-08 19:44:10 [INFO] app.config.dependency_container:104 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-08 19:44:10 [INFO] app.config.dependency_container:105 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-08 19:44:10 [INFO] app.config.dependency_container:198 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-08 19:44:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 19:44:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 19:44:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 19:44:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 19:44:10 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 19:44:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-08 19:44:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-08 19:44:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-08 19:44:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-08 19:44:10 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-08 19:44:10 [INFO] app.config.dependency_container:330 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-08 19:44:10 [INFO] app.config.dependency_container:281 - _setup_services(): Services initialized
2025-06-08 19:44:10 [INFO] app.config.dependency_container:352 - _setup_controllers(): Controllers setup deferred
2025-06-08 19:44:10 [INFO] app.config.dependency_container:88 - initialize(): Dependency container initialized successfully
2025-06-08 19:44:16 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: photos/localhost/d32588f8-d4f0-4c4d-b791-9263670e168c.png
2025-06-08 19:44:16 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: pan/localhost/5e28ceb5-29b9-4889-8637-efbef07d6209.png
2025-06-08 19:44:16 [INFO] app.infrastructure.services.file_upload_service:158 - upload_document(): File uploaded successfully: aadhar/localhost/9a6fe68a-b510-47d9-a28c-c73a6239400d.png
2025-06-08 19:44:16 [INFO] app.infrastructure.services.user_service_impl:97 - create_user(): Creating user: emp005 in organisation: localhost
2025-06-08 19:44:16 [INFO] app.application.use_cases.user.create_user_use_case:94 - execute(): Creating user: ankittest@gmail.com in organisation: localhost
2025-06-08 19:44:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-08 19:44:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-08 19:44:17 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-08 19:44:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-08 19:44:17 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-08 19:44:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:44:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:44:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:44:22 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-08 19:44:22 [INFO] app.application.use_cases.user.create_user_use_case:273 - _calculate_initial_leave_balance(): Calculated initial leave balances from company policies for organisation localhost: {'Sick Leave': 1.8333333333333333}
2025-06-08 19:44:22 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-08 19:44:22 [INFO] app.auth.password_handler:12 - hash_password(): Password hashed successfully. Password: admin123 Hashed: $2b$12$iyoutjXcD0MXgAKs3l7/5uejkLO2dQcawDikrgYpNSxm6olQEn/Ai
2025-06-08 19:44:22 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:44:23 [INFO] app.infrastructure.repositories.mongodb_user_repository:378 - save(): User saved: EMP005
2025-06-08 19:44:23 [ERROR] app.infrastructure.services.notification_service:173 - send_user_created_notification(): Error sending user created notification: 'str' object has no attribute 'value'
2025-06-08 19:44:23 [INFO] app.application.use_cases.user.create_user_use_case:151 - execute(): User created successfully: EMP005
2025-06-08 19:44:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62757 - "POST /api/v2/users/with-files HTTP/1.1" 200
2025-06-08 19:44:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 19:44:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 19:44:24 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-08 19:44:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:44:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:592 - get_all(): Retrieved 4 users
2025-06-08 19:44:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:44:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62757 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 19:44:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-08 19:44:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-08 19:44:24 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-08 19:44:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:44:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:592 - get_all(): Retrieved 4 users
2025-06-08 19:44:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-08 19:44:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62757 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-08 19:48:34 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 19:48:34 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 19:48:34 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 19:48:34 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 19:48:34 [INFO] uvicorn.error:93 - _serve(): Finished server process [51685]
2025-06-08 19:48:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 19:48:50 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 19:48:50 [INFO] uvicorn.error:83 - _serve(): Started server process [51745]
2025-06-08 19:48:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 19:48:50 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 19:48:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 19:48:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 19:49:02 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 19:49:02 [INFO] uvicorn.error:83 - _serve(): Started server process [51758]
2025-06-08 19:49:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 19:49:02 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 19:49:02 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 19:49:04 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 19:49:05 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 19:49:05 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 19:49:05 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 19:49:05 [INFO] uvicorn.error:93 - _serve(): Finished server process [51758]
2025-06-08 19:49:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 19:49:19 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 19:49:19 [INFO] uvicorn.error:83 - _serve(): Started server process [51763]
2025-06-08 19:49:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 19:49:19 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 19:49:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 19:49:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 19:49:32 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 19:49:32 [INFO] uvicorn.error:83 - _serve(): Started server process [51774]
2025-06-08 19:49:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 19:49:32 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 19:49:33 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 19:49:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 19:49:46 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 19:49:46 [INFO] uvicorn.error:83 - _serve(): Started server process [51785]
2025-06-08 19:49:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 19:49:46 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 19:49:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 19:49:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-08 19:49:58 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-08 19:49:58 [INFO] uvicorn.error:83 - _serve(): Started server process [51794]
2025-06-08 19:49:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-08 19:49:58 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-08 19:49:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-08 19:50:02 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-08 19:50:02 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-08 19:50:02 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-08 19:50:02 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-08 19:50:02 [INFO] uvicorn.error:93 - _serve(): Finished server process [51794]
