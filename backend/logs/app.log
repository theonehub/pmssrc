2025-06-09 23:44:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-09 23:44:21 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-09 23:44:21 [INFO] uvicorn.error:83 - _serve(): Started server process [2724]
2025-06-09 23:44:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-09 23:44:21 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-09 23:44:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-09 23:44:38 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-09 23:44:38 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-09 23:44:38 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-09 23:44:38 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-09 23:44:38 [INFO] uvicorn.error:93 - _serve(): Finished server process [2724]
2025-06-09 23:44:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-09 23:44:50 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-09 23:44:50 [INFO] uvicorn.error:83 - _serve(): Started server process [2748]
2025-06-09 23:44:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-09 23:44:50 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-09 23:44:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-10 00:00:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53296 - "OPTIONS /api/v2/taxation/all-taxation HTTP/1.1" 200
2025-06-10 00:00:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53298 - "OPTIONS /api/v2/taxation/all-taxation HTTP/1.1" 200
2025-06-10 00:00:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53302 - "GET /api/v2/taxation/all-taxation HTTP/1.1" 404
2025-06-10 00:00:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53302 - "GET /api/v2/taxation/all-taxation HTTP/1.1" 404
2025-06-10 00:01:00 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-10 00:01:01 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-10 00:01:01 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-10 00:01:01 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-10 00:01:01 [INFO] uvicorn.error:93 - _serve(): Finished server process [2748]
2025-06-10 00:02:20 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:03:47 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:04:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:06:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:06:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:06:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:07:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:07:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:07:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:07:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:07:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:24:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:42:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:43:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:43:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:43:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:48:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:48:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 00:48:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 01:46:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 01:46:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 01:46:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 01:46:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 01:47:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 01:47:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 01:48:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 01:48:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 01:49:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 02:36:28 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 02:39:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 02:40:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 02:41:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-10 02:42:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 21:50:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 21:51:10 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 21:51:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 21:53:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:02:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:03:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:07:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:13:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:13:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:17:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:17:20 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:17:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:17:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:17:54 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:18:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:18:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:18:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:18:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:18:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:18:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:18:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:19:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:19:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:26:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:28:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:29:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:29:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:29:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:30:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:30:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:30:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:30:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:30:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:30:38 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-11 22:30:38 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-11 22:30:38 [INFO] uvicorn.error:83 - _serve(): Started server process [6729]
2025-06-11 22:30:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-11 22:30:38 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-11 22:30:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-11 22:30:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-11 22:30:50 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-11 22:30:50 [INFO] uvicorn.error:83 - _serve(): Started server process [6751]
2025-06-11 22:30:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-11 22:30:50 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-11 22:30:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-12 00:17:10 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-12 00:17:10 [INFO] uvicorn.error:93 - _serve(): Finished server process [6751]
2025-06-12 00:17:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-12 00:17:42 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-12 00:17:42 [INFO] uvicorn.error:83 - _serve(): Started server process [8565]
2025-06-12 00:17:42 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-12 00:17:42 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-12 00:17:42 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-12 19:39:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-12 19:39:51 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-12 19:39:51 [INFO] uvicorn.error:83 - _serve(): Started server process [27216]
2025-06-12 19:39:51 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-12 19:39:51 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-12 19:39:51 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 02:52:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 02:52:36 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 02:52:36 [INFO] uvicorn.error:83 - _serve(): Started server process [36444]
2025-06-13 02:52:36 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 02:52:36 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 02:52:36 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 02:52:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51928 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-13 02:52:52 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-13 02:52:52 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-13 02:52:52 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-13 02:52:59 [ERROR] app.infrastructure.database.mongodb_connector:72 - connect(): Failed to connect to MongoDB: SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 684b452e9dd7f3f28c0486e0, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-13 02:52:59 [ERROR] app.api.controllers.auth_controller:178 - login(): Login error: SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 684b452e9dd7f3f28c0486e0, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-13 02:52:59 [ERROR] app.api.routes.auth_routes_v2:83 - login(): Login error for user superadmin: SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 684b452e9dd7f3f28c0486e0, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-13 02:52:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51928 - "POST /api/v2/auth/login HTTP/1.1" 500
2025-06-13 02:56:52 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-13 02:56:52 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-13 02:56:52 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-13 02:56:52 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 02:56:52 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 02:56:53 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-13 02:56:53 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-13 02:56:53 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-13 02:56:53 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-13 02:56:53 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-13 02:56:53 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-13 02:56:53 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-13 02:56:53 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-13T05:26:53.769402
2025-06-13 02:56:53 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-13 02:56:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53104 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-13 02:56:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53104 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 02:56:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 02:56:54 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 02:56:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53127 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 02:56:54 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 02:56:54 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 02:56:54 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 02:56:54 [ERROR] app.config.dependency_container:212 - _setup_repositories(): Error setting up repositories: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 02:56:54 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 02:56:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53104 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 02:56:54 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 99, in initialize
    self._setup_repositories()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 165, in _setup_repositories
    taxation_repository = MongoDBTaxationRepository(self._database_connector)
TypeError: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 02:56:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 02:56:54 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 02:56:54 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 02:56:54 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 02:56:54 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 02:56:54 [ERROR] app.config.dependency_container:212 - _setup_repositories(): Error setting up repositories: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 02:56:54 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 02:56:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53127 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 02:56:54 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 99, in initialize
    self._setup_repositories()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 165, in _setup_repositories
    taxation_repository = MongoDBTaxationRepository(self._database_connector)
TypeError: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 02:56:55 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 02:56:55 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 02:56:55 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 02:56:55 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 02:56:55 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 02:56:55 [ERROR] app.config.dependency_container:212 - _setup_repositories(): Error setting up repositories: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 02:56:55 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 02:56:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53129 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 02:56:55 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 99, in initialize
    self._setup_repositories()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 165, in _setup_repositories
    taxation_repository = MongoDBTaxationRepository(self._database_connector)
TypeError: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 02:56:55 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 02:56:55 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 02:56:55 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 02:56:55 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 02:56:55 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 02:56:55 [ERROR] app.config.dependency_container:212 - _setup_repositories(): Error setting up repositories: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 02:56:55 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 02:56:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53133 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 02:56:55 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 99, in initialize
    self._setup_repositories()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 165, in _setup_repositories
    taxation_repository = MongoDBTaxationRepository(self._database_connector)
TypeError: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 02:56:57 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 02:56:57 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 02:56:57 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 02:56:57 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 02:56:57 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 02:56:57 [ERROR] app.config.dependency_container:212 - _setup_repositories(): Error setting up repositories: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 02:56:57 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 02:56:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53141 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 02:56:57 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 99, in initialize
    self._setup_repositories()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 165, in _setup_repositories
    taxation_repository = MongoDBTaxationRepository(self._database_connector)
TypeError: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 02:56:57 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 02:56:57 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 02:56:57 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 02:56:57 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 02:56:57 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 02:56:57 [ERROR] app.config.dependency_container:212 - _setup_repositories(): Error setting up repositories: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 02:56:57 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 02:56:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53144 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 02:56:57 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 99, in initialize
    self._setup_repositories()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 165, in _setup_repositories
    taxation_repository = MongoDBTaxationRepository(self._database_connector)
TypeError: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 14:42:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51938 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-13 14:42:26 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-13 14:42:26 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-13 14:42:26 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-13 14:42:26 [ERROR] app.infrastructure.database.mongodb_connector:75 - connect(): Unexpected error connecting to MongoDB: All nameservers failed to answer the query _mongodb._tcp.mongodbtest.jhfj7s3.mongodb.net. IN SRV: Server Do53:2401:4900:50:9::7dd@53 answered [Errno 65] No route to host; Server Do53:2401:4900:50:9::8@53 answered [Errno 65] No route to host; Server Do53:192.168.1.1@53 answered [Errno 51] Network is unreachable
2025-06-13 14:42:26 [ERROR] app.api.controllers.auth_controller:178 - login(): Login error: All nameservers failed to answer the query _mongodb._tcp.mongodbtest.jhfj7s3.mongodb.net. IN SRV: Server Do53:2401:4900:50:9::7dd@53 answered [Errno 65] No route to host; Server Do53:2401:4900:50:9::8@53 answered [Errno 65] No route to host; Server Do53:192.168.1.1@53 answered [Errno 51] Network is unreachable
2025-06-13 14:42:26 [ERROR] app.api.routes.auth_routes_v2:83 - login(): Login error for user superadmin: All nameservers failed to answer the query _mongodb._tcp.mongodbtest.jhfj7s3.mongodb.net. IN SRV: Server Do53:2401:4900:50:9::7dd@53 answered [Errno 65] No route to host; Server Do53:2401:4900:50:9::8@53 answered [Errno 65] No route to host; Server Do53:192.168.1.1@53 answered [Errno 51] Network is unreachable
2025-06-13 14:42:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51940 - "POST /api/v2/auth/login HTTP/1.1" 500
2025-06-13 14:44:18 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 14:44:18 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 14:44:18 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 14:44:18 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 14:44:18 [INFO] uvicorn.error:93 - _serve(): Finished server process [36444]
2025-06-13 14:44:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 14:44:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 14:44:45 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 14:44:45 [INFO] uvicorn.error:83 - _serve(): Started server process [47492]
2025-06-13 14:44:45 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 14:44:45 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 14:44:45 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 14:51:46 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 14:51:46 [INFO] uvicorn.error:93 - _serve(): Finished server process [47492]
2025-06-13 15:58:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 15:59:01 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 15:59:01 [INFO] uvicorn.error:83 - _serve(): Started server process [1024]
2025-06-13 15:59:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 15:59:01 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 15:59:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:02:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49687 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-13 16:02:56 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-13 16:02:56 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-13 16:02:56 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-13 16:02:58 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 16:02:58 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 16:02:58 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-13 16:02:58 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-13 16:02:58 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-13 16:02:58 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-13 16:02:58 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-13 16:02:58 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-13 16:02:58 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-13 16:02:58 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-13T18:32:58.891708
2025-06-13 16:02:58 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-13 16:02:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49689 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-13 16:02:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49689 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 16:02:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49687 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 16:02:59 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:02:59 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:02:59 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:02:59 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:02:59 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:02:59 [ERROR] app.config.dependency_container:212 - _setup_repositories(): Error setting up repositories: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:02:59 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:02:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49689 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:02:59 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 99, in initialize
    self._setup_repositories()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 165, in _setup_repositories
    taxation_repository = MongoDBTaxationRepository(self._database_connector)
TypeError: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:02:59 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:02:59 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:02:59 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:02:59 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:02:59 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:02:59 [ERROR] app.config.dependency_container:212 - _setup_repositories(): Error setting up repositories: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:02:59 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:02:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49687 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:02:59 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 99, in initialize
    self._setup_repositories()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 165, in _setup_repositories
    taxation_repository = MongoDBTaxationRepository(self._database_connector)
TypeError: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:03:00 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:03:00 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:03:00 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:03:00 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:03:00 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:03:00 [ERROR] app.config.dependency_container:212 - _setup_repositories(): Error setting up repositories: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:03:00 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:03:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49707 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:03:00 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 99, in initialize
    self._setup_repositories()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 165, in _setup_repositories
    taxation_repository = MongoDBTaxationRepository(self._database_connector)
TypeError: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:03:00 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:03:00 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:03:00 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:03:00 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:03:00 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:03:00 [ERROR] app.config.dependency_container:212 - _setup_repositories(): Error setting up repositories: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:03:00 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:03:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49710 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:03:00 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 99, in initialize
    self._setup_repositories()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 165, in _setup_repositories
    taxation_repository = MongoDBTaxationRepository(self._database_connector)
TypeError: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:03:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:03:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:03:02 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:03:02 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:03:02 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:03:02 [ERROR] app.config.dependency_container:212 - _setup_repositories(): Error setting up repositories: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:03:02 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:03:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49712 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:03:02 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 99, in initialize
    self._setup_repositories()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 165, in _setup_repositories
    taxation_repository = MongoDBTaxationRepository(self._database_connector)
TypeError: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:03:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:03:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:03:02 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:03:02 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:03:02 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:03:02 [ERROR] app.config.dependency_container:212 - _setup_repositories(): Error setting up repositories: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:03:02 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:03:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49714 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:03:02 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 99, in initialize
    self._setup_repositories()
    ~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 165, in _setup_repositories
    taxation_repository = MongoDBTaxationRepository(self._database_connector)
TypeError: MongoDBTaxationRepository.__init__() missing 1 required positional argument: 'database_name'
2025-06-13 16:05:07 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 16:05:07 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 16:05:07 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 16:05:07 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 16:05:07 [INFO] uvicorn.error:93 - _serve(): Finished server process [1024]
2025-06-13 16:05:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:05:23 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:05:23 [INFO] uvicorn.error:83 - _serve(): Started server process [1237]
2025-06-13 16:05:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:05:23 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:05:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:05:25 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 16:05:25 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 16:05:25 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 16:05:25 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 16:05:25 [INFO] uvicorn.error:93 - _serve(): Finished server process [1237]
2025-06-13 16:05:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:05:38 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:05:38 [INFO] uvicorn.error:83 - _serve(): Started server process [1263]
2025-06-13 16:05:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:05:38 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:05:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:05:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:05:55 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:05:55 [INFO] uvicorn.error:83 - _serve(): Started server process [1282]
2025-06-13 16:05:55 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:05:55 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:05:55 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:06:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:06:09 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:06:09 [INFO] uvicorn.error:83 - _serve(): Started server process [1309]
2025-06-13 16:06:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:06:09 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:06:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:06:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:06:21 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:06:21 [INFO] uvicorn.error:83 - _serve(): Started server process [1332]
2025-06-13 16:06:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:06:21 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:06:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:06:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:06:32 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:06:32 [INFO] uvicorn.error:83 - _serve(): Started server process [1346]
2025-06-13 16:06:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:06:32 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:06:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:06:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:06:45 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:06:45 [INFO] uvicorn.error:83 - _serve(): Started server process [1359]
2025-06-13 16:06:45 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:06:45 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:06:45 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:06:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:06:57 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:06:57 [INFO] uvicorn.error:83 - _serve(): Started server process [1377]
2025-06-13 16:06:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:06:57 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:06:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:07:04 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 16:07:04 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 16:07:04 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 16:07:04 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 16:07:04 [INFO] uvicorn.error:93 - _serve(): Finished server process [1377]
2025-06-13 16:07:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:07:17 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:07:17 [INFO] uvicorn.error:83 - _serve(): Started server process [1395]
2025-06-13 16:07:17 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:07:17 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:07:17 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:07:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:07:30 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:07:30 [INFO] uvicorn.error:83 - _serve(): Started server process [1411]
2025-06-13 16:07:30 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:07:30 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:07:30 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:07:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:07:43 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:07:43 [INFO] uvicorn.error:83 - _serve(): Started server process [1426]
2025-06-13 16:07:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:07:43 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:07:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:07:47 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:07:57 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:07:57 [INFO] uvicorn.error:83 - _serve(): Started server process [1451]
2025-06-13 16:07:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:07:57 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:07:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:08:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:08:10 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:08:10 [INFO] uvicorn.error:83 - _serve(): Started server process [1468]
2025-06-13 16:08:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:08:10 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:08:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:08:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:08:21 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:08:21 [INFO] uvicorn.error:83 - _serve(): Started server process [1489]
2025-06-13 16:08:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:08:21 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:08:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:08:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:08:33 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:08:33 [INFO] uvicorn.error:83 - _serve(): Started server process [1502]
2025-06-13 16:08:33 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:08:33 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:08:33 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:08:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:08:48 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:08:48 [INFO] uvicorn.error:83 - _serve(): Started server process [1639]
2025-06-13 16:08:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:08:48 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:08:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:20:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51262 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 16:20:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51264 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 16:20:27 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:20:27 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:20:27 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:20:27 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:20:27 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:20:27 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 16:20:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 16:20:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 16:20:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 16:20:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 16:20:27 [INFO] app.config.dependency_container:526 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 16:20:27 [ERROR] app.config.dependency_container:292 - _setup_services(): Error setting up services: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:20:27 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:20:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51262 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:20:27 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 100, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 250, in _setup_services
    self._services['regime_comparison'] = RegimeComparisonServiceImpl(
                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tax_calculation_service=self._services['tax_calculation']
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:20:27 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:20:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:20:28 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:20:28 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:20:28 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:20:28 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 16:20:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 16:20:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 16:20:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 16:20:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 16:20:28 [INFO] app.config.dependency_container:526 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 16:20:28 [ERROR] app.config.dependency_container:292 - _setup_services(): Error setting up services: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:20:28 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:20:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51264 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:20:28 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 100, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 250, in _setup_services
    self._services['regime_comparison'] = RegimeComparisonServiceImpl(
                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tax_calculation_service=self._services['tax_calculation']
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:20:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:20:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:20:28 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:20:28 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:20:28 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:20:28 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 16:20:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 16:20:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 16:20:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 16:20:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 16:20:28 [INFO] app.config.dependency_container:526 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 16:20:28 [ERROR] app.config.dependency_container:292 - _setup_services(): Error setting up services: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:20:28 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:20:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51268 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:20:28 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 100, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 250, in _setup_services
    self._services['regime_comparison'] = RegimeComparisonServiceImpl(
                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tax_calculation_service=self._services['tax_calculation']
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:20:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:20:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:20:29 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:20:29 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:20:29 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:20:29 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 16:20:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 16:20:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 16:20:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 16:20:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 16:20:29 [INFO] app.config.dependency_container:526 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 16:20:29 [ERROR] app.config.dependency_container:292 - _setup_services(): Error setting up services: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:20:29 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:20:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51270 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:20:29 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 100, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 250, in _setup_services
    self._services['regime_comparison'] = RegimeComparisonServiceImpl(
                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tax_calculation_service=self._services['tax_calculation']
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:20:30 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:20:30 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:20:30 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:20:30 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:20:30 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:20:30 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 16:20:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 16:20:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 16:20:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 16:20:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 16:20:30 [INFO] app.config.dependency_container:526 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 16:20:30 [ERROR] app.config.dependency_container:292 - _setup_services(): Error setting up services: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:20:30 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:20:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51272 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:20:30 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 100, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 250, in _setup_services
    self._services['regime_comparison'] = RegimeComparisonServiceImpl(
                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tax_calculation_service=self._services['tax_calculation']
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:20:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:20:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:20:31 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:20:31 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:20:31 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:20:31 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 16:20:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 16:20:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 16:20:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 16:20:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 16:20:31 [INFO] app.config.dependency_container:526 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 16:20:31 [ERROR] app.config.dependency_container:292 - _setup_services(): Error setting up services: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:20:31 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:20:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51274 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:20:31 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 100, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 250, in _setup_services
    self._services['regime_comparison'] = RegimeComparisonServiceImpl(
                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tax_calculation_service=self._services['tax_calculation']
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:29:13 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 16:29:13 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 16:29:13 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 16:29:13 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 16:29:13 [INFO] uvicorn.error:93 - _serve(): Finished server process [1639]
2025-06-13 16:30:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:30:52 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:30:52 [INFO] uvicorn.error:83 - _serve(): Started server process [2273]
2025-06-13 16:30:52 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:30:52 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:30:52 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:31:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51940 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 16:31:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51942 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 16:31:56 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:31:56 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:31:56 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:31:56 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:31:56 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:31:56 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 16:31:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 16:31:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 16:31:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 16:31:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 16:31:56 [INFO] app.config.dependency_container:526 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 16:31:56 [ERROR] app.config.dependency_container:292 - _setup_services(): Error setting up services: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:31:56 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:31:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51940 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:31:56 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 100, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 250, in _setup_services
    self._services['regime_comparison'] = RegimeComparisonServiceImpl(
                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tax_calculation_service=self._services['tax_calculation']
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:31:56 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:31:56 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:31:56 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:31:56 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:31:56 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:31:56 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 16:31:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 16:31:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 16:31:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 16:31:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 16:31:56 [INFO] app.config.dependency_container:526 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 16:31:56 [ERROR] app.config.dependency_container:292 - _setup_services(): Error setting up services: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:31:56 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:31:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51942 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:31:56 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 100, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 250, in _setup_services
    self._services['regime_comparison'] = RegimeComparisonServiceImpl(
                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tax_calculation_service=self._services['tax_calculation']
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:31:57 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:31:57 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:31:57 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:31:57 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:31:57 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:31:57 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 16:31:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 16:31:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 16:31:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 16:31:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 16:31:57 [INFO] app.config.dependency_container:526 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 16:31:57 [ERROR] app.config.dependency_container:292 - _setup_services(): Error setting up services: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:31:57 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:31:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51946 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:31:57 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 100, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 250, in _setup_services
    self._services['regime_comparison'] = RegimeComparisonServiceImpl(
                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tax_calculation_service=self._services['tax_calculation']
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:31:57 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:31:57 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:31:57 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:31:57 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:31:57 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:31:57 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 16:31:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 16:31:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 16:31:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 16:31:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 16:31:57 [INFO] app.config.dependency_container:526 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 16:31:57 [ERROR] app.config.dependency_container:292 - _setup_services(): Error setting up services: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:31:57 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:31:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51948 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:31:57 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 100, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 250, in _setup_services
    self._services['regime_comparison'] = RegimeComparisonServiceImpl(
                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tax_calculation_service=self._services['tax_calculation']
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:31:59 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:31:59 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:31:59 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:31:59 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:31:59 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:31:59 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 16:31:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 16:31:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 16:31:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 16:31:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 16:31:59 [INFO] app.config.dependency_container:526 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 16:31:59 [ERROR] app.config.dependency_container:292 - _setup_services(): Error setting up services: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:31:59 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:31:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51950 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:31:59 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 100, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 250, in _setup_services
    self._services['regime_comparison'] = RegimeComparisonServiceImpl(
                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tax_calculation_service=self._services['tax_calculation']
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:31:59 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:31:59 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:31:59 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:31:59 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:31:59 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:31:59 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 16:31:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 16:31:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 16:31:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 16:31:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 16:31:59 [INFO] app.config.dependency_container:526 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 16:31:59 [ERROR] app.config.dependency_container:292 - _setup_services(): Error setting up services: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:31:59 [ERROR] app.config.dependency_container:107 - initialize(): Error initializing dependency container: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:31:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51952 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 500
2025-06-13 16:31:59 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1082, in get_reporting_controller
    return container.get_reporting_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 727, in get_reporting_controller
    self.initialize()
    ~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 100, in initialize
    self._setup_services()
    ~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 250, in _setup_services
    self._services['regime_comparison'] = RegimeComparisonServiceImpl(
                                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        tax_calculation_service=self._services['tax_calculation']
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: RegimeComparisonServiceImpl.__init__() got an unexpected keyword argument 'tax_calculation_service'
2025-06-13 16:36:38 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 16:36:38 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 16:36:38 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 16:36:38 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 16:36:38 [INFO] uvicorn.error:93 - _serve(): Finished server process [2273]
2025-06-13 16:36:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:36:50 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:36:50 [INFO] uvicorn.error:83 - _serve(): Started server process [2320]
2025-06-13 16:36:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:36:50 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:36:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:37:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:37:06 [INFO] __main__:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:37:06 [INFO] __main__:160 - <module>(): Starting PMS application by TheOne
2025-06-13 16:39:33 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:39:33 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:39:33 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:39:33 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:39:33 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:39:33 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 16:39:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 16:39:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 16:39:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 16:39:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 16:39:33 [INFO] app.config.dependency_container:524 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 16:39:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 16:39:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 16:39:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 16:39:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 16:39:33 [INFO] app.config.dependency_container:524 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 16:39:33 [INFO] app.config.dependency_container:336 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-13 16:39:33 [INFO] app.config.dependency_container:287 - _setup_services(): Services initialized
2025-06-13 16:39:33 [INFO] app.config.dependency_container:358 - _setup_controllers(): Controllers setup deferred
2025-06-13 16:39:33 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-13 16:39:33 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 16:39:33 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 16:39:33 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 16:39:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-13 16:39:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-13 16:39:34 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 16:39:34 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-13 16:39:34 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 16:39:34 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 16:39:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 16:39:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 16:39:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 16:39:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 16:39:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 16:39:35 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:188 - _get_distributions(): Error getting distributions: 'SimpleUser' object has no attribute 'permissions'
2025-06-13 16:39:35 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 16:39:35 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 16:39:35 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 16:39:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52562 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 16:39:35 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:39:35 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:39:35 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 16:39:35 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 16:39:35 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 16:39:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 16:39:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 16:39:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 16:39:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 16:39:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 16:39:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 16:39:35 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:188 - _get_distributions(): Error getting distributions: 'SimpleUser' object has no attribute 'permissions'
2025-06-13 16:39:35 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 16:39:35 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 16:39:35 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 16:39:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52562 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 16:42:24 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 16:42:24 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 16:42:24 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 16:42:24 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 16:42:24 [INFO] uvicorn.error:93 - _serve(): Finished server process [2320]
2025-06-13 16:42:28 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:42:36 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:42:36 [INFO] uvicorn.error:83 - _serve(): Started server process [2509]
2025-06-13 16:42:36 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:42:36 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:42:36 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:42:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:42:46 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:42:46 [INFO] uvicorn.error:83 - _serve(): Started server process [2528]
2025-06-13 16:42:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 16:42:46 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 16:42:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 16:42:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 16:42:53 [INFO] __main__:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 16:42:53 [INFO] __main__:160 - <module>(): Starting PMS application by TheOne
2025-06-13 16:43:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53269 - "GET /health HTTP/1.1" 404
2025-06-13 16:45:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53703 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 16:45:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53704 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 16:45:15 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:45:15 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:45:15 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 16:45:15 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 16:45:15 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 16:45:15 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 16:45:15 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 16:45:15 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 16:45:15 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 16:45:15 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 16:45:15 [INFO] app.config.dependency_container:524 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 16:45:15 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 16:45:15 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 16:45:15 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 16:45:15 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 16:45:15 [INFO] app.config.dependency_container:524 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 16:45:15 [INFO] app.config.dependency_container:336 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-13 16:45:15 [INFO] app.config.dependency_container:287 - _setup_services(): Services initialized
2025-06-13 16:45:15 [INFO] app.config.dependency_container:358 - _setup_controllers(): Controllers setup deferred
2025-06-13 16:45:15 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-13 16:45:15 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 16:45:15 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 16:45:15 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 16:45:15 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-13 16:45:15 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-13 16:45:16 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 16:45:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-13 16:45:16 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 16:45:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 16:45:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 16:45:16 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 16:45:16 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 16:45:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 16:45:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 16:45:16 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 16:45:16 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 16:45:16 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 16:45:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53708 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 16:45:16 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:45:16 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:45:16 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 16:45:16 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 16:45:16 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 16:45:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 16:45:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 16:45:16 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 16:45:17 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 16:45:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 16:45:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 16:45:17 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 16:45:17 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 16:45:17 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 16:45:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53708 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 16:45:39 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:45:39 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:45:39 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 16:45:39 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 16:45:39 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 16:45:39 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 16:45:39 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 16:45:39 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 16:45:40 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 16:45:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 16:45:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 16:45:40 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 16:45:40 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 16:45:40 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 16:45:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53881 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 16:45:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:45:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:45:40 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 16:45:40 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 16:45:40 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 16:45:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 16:45:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 16:45:40 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 16:45:40 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 16:45:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 16:45:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 16:45:40 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 16:45:40 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 16:45:40 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 16:45:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53881 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 16:50:30 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 16:50:30 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 16:50:30 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 16:50:30 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 16:50:30 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 16:50:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 16:50:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 16:50:30 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 16:50:30 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 16:50:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 16:50:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 16:50:30 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 16:50:30 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 16:50:30 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 16:50:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55973 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 16:50:34 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Not enough segments
2025-06-13 16:50:34 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Not enough segments
2025-06-13 16:50:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56018 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 401
2025-06-13 16:50:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56075 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 403
2025-06-13 17:00:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59894 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 17:00:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59895 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 17:00:27 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 17:00:27 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 17:00:27 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 17:00:27 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:00:27 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:00:27 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:00:27 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:00:27 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 17:00:27 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 17:00:27 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:00:27 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:00:27 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:00:27 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:00:27 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 17:00:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59899 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 17:00:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 17:00:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 17:00:28 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 17:00:28 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:00:28 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:00:28 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:00:28 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:00:28 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 17:00:28 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 17:00:28 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:00:28 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:00:28 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:00:28 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:00:28 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 17:00:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59899 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 17:01:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 17:01:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 17:01:43 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 17:01:43 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:01:43 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:01:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:01:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:01:43 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 17:01:43 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 17:01:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:01:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:01:43 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:01:43 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:01:43 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 17:01:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60528 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 17:01:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 17:01:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 17:01:43 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 17:01:43 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:01:43 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:01:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:01:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:01:43 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 17:01:43 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 17:01:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:01:44 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:01:44 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:01:44 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:01:44 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 17:01:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60528 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 17:03:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61241 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-13 17:03:14 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: emp005 @ localhost
2025-06-13 17:03:14 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: emp005 @ localhost
2025-06-13 17:03:14 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-13 17:03:15 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 17:03:15 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 17:03:15 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-13 17:03:15 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: emp005
2025-06-13 17:03:15 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$iyoutjXcD0MXgAKs3l7/5uejkLO2dQcawDikrgYpNSxm6olQEn/Ai
2025-06-13 17:03:15 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-13 17:03:16 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-13 17:03:16 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: EMP005
2025-06-13 17:03:16 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-13T19:33:16.099358
2025-06-13 17:03:16 [INFO] app.api.controllers.auth_controller:165 - login(): User emp005 logged in successfully
2025-06-13 17:03:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61241 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-13 17:03:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61241 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 17:03:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61243 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 17:03:16 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP005
2025-06-13 17:03:16 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP005 from organisation: localhost
2025-06-13 17:03:16 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: EMP005
2025-06-13 17:03:16 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:03:16 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:03:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:03:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:03:16 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 17:03:16 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 17:03:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:03:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:03:16 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:03:16 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:03:16 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 17:03:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61241 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 17:03:16 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP005
2025-06-13 17:03:16 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP005 from organisation: localhost
2025-06-13 17:03:16 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: EMP005
2025-06-13 17:03:16 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:03:16 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:03:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:03:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:03:16 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 17:03:16 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 17:03:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:03:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:03:16 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:03:16 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:03:16 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 17:03:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61243 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 17:03:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61267 - "OPTIONS /api/v2/attendance/checkin HTTP/1.1" 200
2025-06-13 17:03:26 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP005
2025-06-13 17:03:26 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP005 from organisation: localhost
2025-06-13 17:03:26 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 17:03:26 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 17:03:26 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 17:03:26 [INFO] app.api.routes.attendance_routes_v2:57 - checkin(): Check-in request for employee: EMP005
2025-06-13 17:03:26 [INFO] app.api.controllers.attendance_controller:60 - checkin(): Check-in request for employee: EMP005 in organisation: localhost
2025-06-13 17:03:26 [INFO] app.infrastructure.services.attendance_service_impl:63 - check_in(): Processing check-in for employee EMP005 in organisation localhost
2025-06-13 17:03:26 [INFO] app.application.use_cases.attendance.check_in_use_case:93 - execute(): Processing check-in for employee: EMP005 in organisation: localhost
2025-06-13 17:03:26 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:03:26 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 17:03:26 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 17:03:26 [INFO] app.domain.entities.attendance:138 - check_in(): Employee EMP005 checked in at 2025-06-13 17:03:26.282556
2025-06-13 17:03:26 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 17:03:26 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:339 - save(): Created attendance: EMP005
2025-06-13 17:03:26 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:310 - _publish_events(): Publishing event: AttendanceCreatedEvent
2025-06-13 17:03:26 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-13 17:03:26 [ERROR] app.infrastructure.services.enhanced_event_publisher:107 - save_event(): Error saving event to store: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-13 17:03:26 [WARNING] app.application.use_cases.attendance.check_in_use_case:256 - _publish_events(): Failed to publish check-in event: 'dict' object has no attribute 'get_event_type'
2025-06-13 17:03:26 [INFO] app.application.use_cases.attendance.check_in_use_case:134 - execute(): Check-in completed successfully for employee: EMP005 in organisation: localhost
2025-06-13 17:03:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61267 - "POST /api/v2/attendance/checkin HTTP/1.1" 200
2025-06-13 17:08:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 17:08:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 17:08:17 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 17:08:17 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:08:17 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:08:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:08:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:08:17 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 17:08:17 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 17:08:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:08:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:08:17 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:08:17 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:08:17 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 17:08:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63202 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 17:08:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 17:08:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 17:08:17 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 17:08:17 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:08:17 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:08:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:08:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:08:17 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 17:08:17 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 17:08:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:08:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:08:17 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:08:17 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:08:17 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 17:08:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63202 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 17:15:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49613 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 17:15:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49615 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 17:15:45 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 17:15:45 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 17:15:45 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 17:15:45 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:15:45 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:15:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:15:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:15:45 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 17:15:45 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 17:15:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:15:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:15:45 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:15:45 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:15:45 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 17:15:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49613 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 17:15:45 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 17:15:45 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 17:15:45 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 17:15:45 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:15:45 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:48 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 17:15:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:15:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:15:45 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 17:15:46 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 17:15:46 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 17:15:46 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 17:15:46 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:92 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:15:46 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 17:15:46 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 17:15:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49613 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 17:59:53 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 513, in _configured_socket_interface
    ssl_sock = ssl_context.wrap_socket(sock, server_hostname=host)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 455, in wrap_socket
    return self.sslsocket_class._create(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sock=sock,
        ^^^^^^^^^^
    ...<5 lines>...
        session=session
        ^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1076, in _create
    self.do_handshake()
    ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1372, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
TimeoutError: _ssl.c:1011: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 527, in _configured_socket_interface
    _raise_connection_failure(address, exc, "SSL handshake failed: ", timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: _ssl.c:1011: The handshake operation timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-13 18:13:04 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 18:13:04 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 18:13:04 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 18:13:04 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 18:13:04 [INFO] uvicorn.error:93 - _serve(): Finished server process [2528]
2025-06-13 18:13:10 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 18:13:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 18:13:28 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 18:13:28 [INFO] uvicorn.error:83 - _serve(): Started server process [3406]
2025-06-13 18:13:28 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 18:13:28 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 18:13:28 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 18:13:34 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 18:13:40 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 18:13:40 [INFO] uvicorn.error:83 - _serve(): Started server process [3421]
2025-06-13 18:13:40 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 18:13:40 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 18:13:40 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 18:13:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 18:13:49 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 18:13:49 [INFO] uvicorn.error:83 - _serve(): Started server process [3435]
2025-06-13 18:13:49 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 18:13:49 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 18:13:49 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 18:14:03 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 18:14:03 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 18:14:03 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 18:14:03 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 18:14:03 [INFO] uvicorn.error:93 - _serve(): Finished server process [3435]
2025-06-13 18:14:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 18:14:13 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 18:14:13 [INFO] uvicorn.error:83 - _serve(): Started server process [3449]
2025-06-13 18:14:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 18:14:13 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 18:14:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 18:14:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 18:14:25 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 18:14:25 [INFO] uvicorn.error:83 - _serve(): Started server process [3464]
2025-06-13 18:14:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 18:14:25 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 18:14:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 18:14:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 18:14:35 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 18:14:35 [INFO] uvicorn.error:83 - _serve(): Started server process [3483]
2025-06-13 18:14:35 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 18:14:35 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 18:14:35 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 18:14:35 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 18:14:36 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 18:14:36 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 18:14:36 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 18:14:36 [INFO] uvicorn.error:93 - _serve(): Finished server process [3483]
2025-06-13 18:14:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 18:14:45 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 18:14:45 [INFO] uvicorn.error:83 - _serve(): Started server process [3496]
2025-06-13 18:14:45 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 18:14:45 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 18:14:45 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 18:16:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56395 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:16:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56396 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:16:33 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 18:16:33 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 18:16:33 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 18:16:33 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 18:16:33 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 18:16:33 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 18:16:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 18:16:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 18:16:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 18:16:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 18:16:33 [INFO] app.config.dependency_container:524 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 18:16:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 18:16:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 18:16:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 18:16:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 18:16:33 [INFO] app.config.dependency_container:524 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 18:16:33 [INFO] app.config.dependency_container:336 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-13 18:16:33 [INFO] app.config.dependency_container:287 - _setup_services(): Services initialized
2025-06-13 18:16:33 [INFO] app.config.dependency_container:358 - _setup_controllers(): Controllers setup deferred
2025-06-13 18:16:33 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-13 18:16:33 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 18:16:33 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:16:33 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:49 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:16:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-13 18:16:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-13 18:16:34 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 18:16:34 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-13 18:16:34 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 18:16:34 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:16:34 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:16:34 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 18:16:34 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 18:16:34 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:16:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:16:35 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:100 - execute(): Error getting dashboard analytics for organisation localhost: 'GetDashboardAnalyticsUseCase' object has no attribute '_get_attendance_statistics'
2025-06-13 18:16:35 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:16:35 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 18:16:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56395 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:16:35 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 18:16:35 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 18:16:35 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 18:16:35 [INFO] app.infrastructure.services.reporting_service_impl:257 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:16:35 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:49 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:16:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:16:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:16:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 18:16:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 18:16:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:16:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:16:35 [ERROR] app.application.use_cases.reporting.get_dashboard_analytics_use_case:100 - execute(): Error getting dashboard analytics for organisation localhost: 'GetDashboardAnalyticsUseCase' object has no attribute '_get_attendance_statistics'
2025-06-13 18:16:35 [INFO] app.infrastructure.services.reporting_service_impl:262 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:16:35 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 18:16:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56395 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:20:35 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 18:20:35 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 18:20:35 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 18:20:35 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 18:20:35 [INFO] uvicorn.error:93 - _serve(): Finished server process [3496]
2025-06-13 18:20:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 18:20:47 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 18:20:47 [INFO] uvicorn.error:83 - _serve(): Started server process [3537]
2025-06-13 18:20:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 18:20:47 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 18:20:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 18:21:18 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 18:21:18 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 18:21:18 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 18:21:18 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 18:21:18 [INFO] uvicorn.error:93 - _serve(): Finished server process [3537]
2025-06-13 18:21:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 18:21:29 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 18:21:29 [INFO] uvicorn.error:83 - _serve(): Started server process [3560]
2025-06-13 18:21:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 18:21:29 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 18:21:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 18:22:04 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 18:22:05 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 18:22:05 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 18:22:05 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 18:22:05 [INFO] uvicorn.error:93 - _serve(): Finished server process [3560]
2025-06-13 18:22:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 18:22:20 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 18:22:20 [INFO] uvicorn.error:83 - _serve(): Started server process [3580]
2025-06-13 18:22:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 18:22:20 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 18:22:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 18:22:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 18:22:31 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 18:22:31 [INFO] uvicorn.error:83 - _serve(): Started server process [3599]
2025-06-13 18:22:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 18:22:31 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 18:22:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 18:22:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 18:22:35 [INFO] __main__:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 18:22:35 [INFO] __main__:160 - <module>(): Starting PMS application by TheOne
2025-06-13 18:22:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58882 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 403
2025-06-13 18:23:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 18:23:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 18:23:59 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 18:23:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 18:23:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [3599]
2025-06-13 18:24:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 18:24:15 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 18:24:15 [INFO] uvicorn.error:83 - _serve(): Started server process [3786]
2025-06-13 18:24:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 18:24:15 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 18:24:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 18:24:15 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 18:24:15 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 18:24:15 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 18:24:15 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 18:24:15 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 18:24:15 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 18:24:15 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 18:24:15 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 18:24:15 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 18:24:15 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 18:24:15 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 18:24:15 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 18:24:15 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 18:24:15 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 18:24:15 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 18:24:15 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 18:24:15 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-13 18:24:15 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-13 18:24:15 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-13 18:24:15 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-13 18:24:15 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 18:24:15 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:24:15 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:24:15 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-13 18:24:15 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-13 18:24:16 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 18:24:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-13 18:24:16 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 18:24:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:24:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:24:16 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 18:24:16 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 18:24:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:24:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:24:16 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 18:24:17 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:24:17 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:24:17 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 18:24:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59483 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:24:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 18:24:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 18:24:17 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 18:24:17 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:24:17 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:24:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:24:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:24:17 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 18:24:17 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 18:24:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:24:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:24:17 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 18:24:17 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:24:17 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:24:17 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 18:24:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59483 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:24:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59787 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:24:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59789 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:24:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP005
2025-06-13 18:24:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP005 from organisation: localhost
2025-06-13 18:24:40 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: EMP005
2025-06-13 18:24:40 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:24:40 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:24:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:24:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:24:40 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 18:24:40 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 18:24:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:24:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:24:40 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 18:24:40 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:24:40 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:24:40 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 18:24:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59787 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:24:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP005
2025-06-13 18:24:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP005 from organisation: localhost
2025-06-13 18:24:40 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: EMP005
2025-06-13 18:24:40 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:24:40 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:24:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:24:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:24:40 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 18:24:40 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 18:24:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:24:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:24:40 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 18:24:41 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:24:41 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:24:41 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 18:24:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59789 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:24:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59789 - "OPTIONS /api/v2/attendance/checkout HTTP/1.1" 200
2025-06-13 18:24:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP005
2025-06-13 18:24:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP005 from organisation: localhost
2025-06-13 18:24:43 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 18:24:43 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 18:24:43 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 18:24:43 [INFO] app.api.routes.attendance_routes_v2:88 - checkout(): Check-out request for employee: EMP005
2025-06-13 18:24:43 [INFO] app.api.controllers.attendance_controller:80 - checkout(): Check-out request for employee: EMP005 in organisation: localhost
2025-06-13 18:24:43 [INFO] app.infrastructure.services.attendance_service_impl:79 - check_out(): Processing check-out for employee EMP005 in organisation localhost
2025-06-13 18:24:43 [INFO] app.application.use_cases.attendance.check_out_use_case:93 - execute(): Processing check-out for employee: EMP005 in organisation: localhost
2025-06-13 18:24:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:24:43 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 18:24:43 [INFO] app.domain.entities.attendance:185 - check_out(): Employee EMP005 checked out at 2025-06-13 18:24:43.453970
2025-06-13 18:24:43 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 18:24:43 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:349 - save(): Updated attendance: EMP005
2025-06-13 18:24:43 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:310 - _publish_events(): Publishing event: AttendanceUpdatedEvent
2025-06-13 18:24:43 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-13 18:24:43 [ERROR] app.infrastructure.services.enhanced_event_publisher:107 - save_event(): Error saving event to store: object AsyncIOMotorDatabase can't be used in 'await' expression
2025-06-13 18:24:43 [WARNING] app.application.use_cases.attendance.check_out_use_case:257 - _publish_events(): Failed to publish check-out event: 'dict' object has no attribute 'get_event_type'
2025-06-13 18:24:43 [WARNING] app.application.use_cases.attendance.check_out_use_case:275 - _send_notifications(): Failed to send check-out notifications: '>' not supported between instances of 'method' and 'int'
2025-06-13 18:24:43 [ERROR] app.application.use_cases.attendance.check_out_use_case:137 - execute(): Unexpected error during check-out: 3 validation errors for WorkingHoursResponseDTO
is_complete_day
  Input should be a valid boolean [type=bool_type, input_value=<bound method WorkingHour...reshold=Decimal('8.0'))>, input_type=method]
    For further information visit https://errors.pydantic.dev/2.11/v/bool_type
is_full_day
  Input should be a valid boolean [type=bool_type, input_value=<bound method WorkingHour...reshold=Decimal('8.0'))>, input_type=method]
    For further information visit https://errors.pydantic.dev/2.11/v/bool_type
is_half_day
  Input should be a valid boolean [type=bool_type, input_value=<bound method WorkingHour...reshold=Decimal('8.0'))>, input_type=method]
    For further information visit https://errors.pydantic.dev/2.11/v/bool_type
2025-06-13 18:24:43 [ERROR] app.infrastructure.services.attendance_service_impl:89 - check_out(): Error processing check-out for employee EMP005 in organisation localhost: Failed to process check-out: 3 validation errors for WorkingHoursResponseDTO
is_complete_day
  Input should be a valid boolean [type=bool_type, input_value=<bound method WorkingHour...reshold=Decimal('8.0'))>, input_type=method]
    For further information visit https://errors.pydantic.dev/2.11/v/bool_type
is_full_day
  Input should be a valid boolean [type=bool_type, input_value=<bound method WorkingHour...reshold=Decimal('8.0'))>, input_type=method]
    For further information visit https://errors.pydantic.dev/2.11/v/bool_type
is_half_day
  Input should be a valid boolean [type=bool_type, input_value=<bound method WorkingHour...reshold=Decimal('8.0'))>, input_type=method]
    For further information visit https://errors.pydantic.dev/2.11/v/bool_type
2025-06-13 18:24:43 [WARNING] app.api.controllers.attendance_controller:87 - checkout(): Business rule error during check-out: Failed to process check-out: 3 validation errors for WorkingHoursResponseDTO
is_complete_day
  Input should be a valid boolean [type=bool_type, input_value=<bound method WorkingHour...reshold=Decimal('8.0'))>, input_type=method]
    For further information visit https://errors.pydantic.dev/2.11/v/bool_type
is_full_day
  Input should be a valid boolean [type=bool_type, input_value=<bound method WorkingHour...reshold=Decimal('8.0'))>, input_type=method]
    For further information visit https://errors.pydantic.dev/2.11/v/bool_type
is_half_day
  Input should be a valid boolean [type=bool_type, input_value=<bound method WorkingHour...reshold=Decimal('8.0'))>, input_type=method]
    For further information visit https://errors.pydantic.dev/2.11/v/bool_type
2025-06-13 18:24:43 [WARNING] app.api.routes.attendance_routes_v2:104 - checkout(): Business rule error during check-out: Failed to process check-out: 3 validation errors for WorkingHoursResponseDTO
is_complete_day
  Input should be a valid boolean [type=bool_type, input_value=<bound method WorkingHour...reshold=Decimal('8.0'))>, input_type=method]
    For further information visit https://errors.pydantic.dev/2.11/v/bool_type
is_full_day
  Input should be a valid boolean [type=bool_type, input_value=<bound method WorkingHour...reshold=Decimal('8.0'))>, input_type=method]
    For further information visit https://errors.pydantic.dev/2.11/v/bool_type
is_half_day
  Input should be a valid boolean [type=bool_type, input_value=<bound method WorkingHour...reshold=Decimal('8.0'))>, input_type=method]
    For further information visit https://errors.pydantic.dev/2.11/v/bool_type
2025-06-13 18:24:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59787 - "POST /api/v2/attendance/checkout HTTP/1.1" 422
2025-06-13 18:29:31 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 18:29:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 18:29:31 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 18:29:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 18:29:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [3786]
2025-06-13 18:29:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 18:29:42 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 18:29:42 [INFO] uvicorn.error:83 - _serve(): Started server process [3842]
2025-06-13 18:29:42 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 18:29:42 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 18:29:42 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 18:29:52 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 18:29:52 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 18:29:52 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 18:29:52 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 18:29:52 [INFO] uvicorn.error:93 - _serve(): Finished server process [3842]
2025-06-13 18:29:56 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 18:30:04 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 18:30:04 [INFO] uvicorn.error:83 - _serve(): Started server process [3860]
2025-06-13 18:30:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 18:30:04 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 18:30:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 18:31:07 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP005
2025-06-13 18:31:07 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP005 from organisation: localhost
2025-06-13 18:31:07 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 18:31:07 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 18:31:07 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 18:31:07 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 18:31:07 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 18:31:07 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 18:31:07 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 18:31:07 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 18:31:07 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 18:31:07 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 18:31:07 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 18:31:07 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 18:31:07 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 18:31:07 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 18:31:07 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 18:31:07 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 18:31:07 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 18:31:07 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-13 18:31:07 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-13 18:31:07 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-13 18:31:07 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-13 18:31:07 [INFO] app.api.routes.attendance_routes_v2:88 - checkout(): Check-out request for employee: EMP005
2025-06-13 18:31:07 [INFO] app.api.controllers.attendance_controller:80 - checkout(): Check-out request for employee: EMP005 in organisation: localhost
2025-06-13 18:31:07 [INFO] app.infrastructure.services.attendance_service_impl:79 - check_out(): Processing check-out for employee EMP005 in organisation localhost
2025-06-13 18:31:07 [INFO] app.application.use_cases.attendance.check_out_use_case:93 - execute(): Processing check-out for employee: EMP005 in organisation: localhost
2025-06-13 18:31:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-13 18:31:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-13 18:31:08 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 18:31:08 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-13 18:31:08 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 18:31:08 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:31:09 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 18:31:09 [ERROR] app.infrastructure.services.attendance_service_impl:89 - check_out(): Error processing check-out for employee EMP005 in organisation localhost: Employee EMP005 is already checked out
2025-06-13 18:31:09 [WARNING] app.api.controllers.attendance_controller:87 - checkout(): Business rule error during check-out: Employee EMP005 is already checked out
2025-06-13 18:31:09 [WARNING] app.api.routes.attendance_routes_v2:104 - checkout(): Business rule error during check-out: Employee EMP005 is already checked out
2025-06-13 18:31:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62448 - "POST /api/v2/attendance/checkout HTTP/1.1" 422
2025-06-13 18:31:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62617 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:31:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62618 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:31:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 18:31:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 18:31:28 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 18:31:28 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:31:28 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:31:28 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:31:28 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:31:28 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 18:31:28 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 18:31:28 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:31:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:31:29 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 18:31:29 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:31:29 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:31:29 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 18:31:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62617 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:31:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 18:31:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 18:31:29 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 18:31:29 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:31:29 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:31:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:31:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:31:29 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 18:31:29 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 18:31:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:31:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:31:29 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 18:31:29 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:31:29 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:31:29 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 18:31:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62617 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:35:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63712 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:35:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63714 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:35:35 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP005
2025-06-13 18:35:35 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP005 from organisation: localhost
2025-06-13 18:35:35 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: EMP005
2025-06-13 18:35:35 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:35:35 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:35:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:35:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:35:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 18:35:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 18:35:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:35:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:35:35 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 18:35:35 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:35:35 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:35:35 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 18:35:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63712 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:35:35 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: EMP005
2025-06-13 18:35:35 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: EMP005 from organisation: localhost
2025-06-13 18:35:35 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: EMP005
2025-06-13 18:35:35 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:35:35 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 18:35:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:35:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:35:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 18:35:35 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 18:35:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 18:35:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 18:35:36 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 18:35:36 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:35:36 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 18:35:36 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 18:35:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63714 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 18:50:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52051 - "OPTIONS /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-13 18:50:22 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 18:50:22 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 18:50:22 [INFO] app.api.controllers.organisation_controller:68 - list_organisations(): Listing organisations with filters
2025-06-13 18:50:22 [INFO] app.application.use_cases.organisation.list_organisations_use_case:57 - execute(): Listing organisations with filters: OrganisationSearchFiltersDTO(name=None, organisation_type=None, status=None, city=None, state=None, country=None, min_employee_strength=None, max_employee_strength=None, has_available_capacity=None, is_gst_registered=None, created_after=None, created_before=None, page=1, page_size=10, sort_by='created_at', sort_order='desc')
2025-06-13 18:50:22 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-13 18:50:22 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-13 18:50:22 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-13 18:50:22 [INFO] app.application.use_cases.organisation.list_organisations_use_case:89 - execute(): Listed 1 organisations (total: 1)
2025-06-13 18:50:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52051 - "GET /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-13 19:44:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56588 - "OPTIONS /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-13 19:44:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 19:44:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 19:44:28 [INFO] app.api.controllers.organisation_controller:68 - list_organisations(): Listing organisations with filters
2025-06-13 19:44:28 [INFO] app.application.use_cases.organisation.list_organisations_use_case:57 - execute(): Listing organisations with filters: OrganisationSearchFiltersDTO(name=None, organisation_type=None, status=None, city=None, state=None, country=None, min_employee_strength=None, max_employee_strength=None, has_available_capacity=None, is_gst_registered=None, created_after=None, created_before=None, page=1, page_size=10, sort_by='created_at', sort_order='desc')
2025-06-13 19:44:28 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-13 19:44:28 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-13 19:44:28 [INFO] app.application.use_cases.organisation.list_organisations_use_case:89 - execute(): Listed 1 organisations (total: 1)
2025-06-13 19:44:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56588 - "GET /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-13 19:46:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56874 - "OPTIONS /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 19:46:27 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 19:46:27 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 19:46:27 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-13 19:46:27 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 19:46:27 [INFO] app.infrastructure.repositories.mongodb_user_repository:583 - get_all(): Retrieved 5 users
2025-06-13 19:46:27 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 19:46:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56876 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 19:52:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58286 - "OPTIONS /api/v2/reimbursements/ HTTP/1.1" 200
2025-06-13 19:52:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58286 - "GET /api/v2/reimbursements/ HTTP/1.1" 307
2025-06-13 19:52:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58286 - "OPTIONS /api/v2/reimbursements HTTP/1.1" 200
2025-06-13 19:52:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58288 - "GET /api/v2/reimbursements HTTP/1.1" 405
2025-06-13 19:52:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58288 - "GET /api/v2/reimbursements/ HTTP/1.1" 307
2025-06-13 19:52:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58288 - "GET /api/v2/reimbursements HTTP/1.1" 405
2025-06-13 19:56:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59180 - "GET /api/v2/reimbursements/ HTTP/1.1" 307
2025-06-13 19:56:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59180 - "GET /api/v2/reimbursements HTTP/1.1" 405
2025-06-13 19:56:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59180 - "GET /api/v2/reimbursements/ HTTP/1.1" 307
2025-06-13 19:56:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59180 - "GET /api/v2/reimbursements HTTP/1.1" 405
2025-06-13 19:57:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59180 - "GET /api/v2/reimbursements/ HTTP/1.1" 307
2025-06-13 19:57:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59180 - "GET /api/v2/reimbursements HTTP/1.1" 405
2025-06-13 19:57:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59180 - "GET /api/v2/reimbursements/ HTTP/1.1" 307
2025-06-13 19:57:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59180 - "GET /api/v2/reimbursements HTTP/1.1" 405
2025-06-13 19:57:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59199 - "GET /api/v2/reimbursements/ HTTP/1.1" 307
2025-06-13 19:57:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59199 - "GET /api/v2/reimbursements HTTP/1.1" 405
2025-06-13 19:57:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59199 - "GET /api/v2/reimbursements/ HTTP/1.1" 307
2025-06-13 19:57:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59199 - "GET /api/v2/reimbursements HTTP/1.1" 405
2025-06-13 19:57:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59255 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-13 19:57:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59255 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-13 19:57:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59255 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-13 19:57:34 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 19:57:34 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 19:57:34 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-13 19:57:34 [INFO] app.infrastructure.services.company_leave_service_impl:286 - list_company_leaves(): Listing company leaves in organisation localhost
2025-06-13 19:57:34 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:249 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-13 19:57:34 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-13 19:57:34 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:260 - list_with_filters(): MongoDB query: {}
2025-06-13 19:57:34 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:264 - list_with_filters(): Pagination: skip=0, limit=100
2025-06-13 19:57:34 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:269 - list_with_filters(): Sort: field=created_at, direction=-1
2025-06-13 19:57:34 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:280 - list_with_filters(): Retrieved 1 company leave documents from MongoDB with filters
2025-06-13 19:57:34 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:283 - list_with_filters(): Successfully converted 1 filtered documents to entities
2025-06-13 19:57:34 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-13 19:57:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59257 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-13 19:57:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59257 - "OPTIONS /api/v2/attendance/?skip=0&limit=10 HTTP/1.1" 200
2025-06-13 19:57:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59255 - "GET /api/v2/attendance/?skip=0&limit=10 HTTP/1.1" 404
2025-06-13 19:57:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59255 - "GET /api/v2/attendance/?skip=0&limit=10 HTTP/1.1" 404
2025-06-13 20:05:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61098 - "GET /api/v2/attendance/?skip=0&limit=10 HTTP/1.1" 404
2025-06-13 20:05:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61098 - "GET /api/v2/attendance/?skip=0&limit=10 HTTP/1.1" 404
2025-06-13 20:08:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61587 - "OPTIONS /api/v2/attendance/?skip=0&limit=10 HTTP/1.1" 200
2025-06-13 20:08:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61587 - "GET /api/v2/attendance/?skip=0&limit=10 HTTP/1.1" 404
2025-06-13 20:08:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61587 - "GET /api/v2/attendance/?skip=0&limit=10 HTTP/1.1" 404
2025-06-13 20:09:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61813 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-13 20:09:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61815 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-13 20:09:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61815 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-13 20:09:11 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 20:09:11 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 20:09:11 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-13 20:09:11 [INFO] app.infrastructure.services.company_leave_service_impl:286 - list_company_leaves(): Listing company leaves in organisation localhost
2025-06-13 20:09:11 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:249 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-13 20:09:11 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-13 20:09:11 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:260 - list_with_filters(): MongoDB query: {}
2025-06-13 20:09:11 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:264 - list_with_filters(): Pagination: skip=0, limit=100
2025-06-13 20:09:11 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:269 - list_with_filters(): Sort: field=created_at, direction=-1
2025-06-13 20:09:11 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:280 - list_with_filters(): Retrieved 1 company leave documents from MongoDB with filters
2025-06-13 20:09:11 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:283 - list_with_filters(): Successfully converted 1 filtered documents to entities
2025-06-13 20:09:11 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-13 20:09:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61813 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-13 20:09:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61813 - "GET /api/v2/attendance/?skip=0&limit=10 HTTP/1.1" 404
2025-06-13 20:09:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61813 - "GET /api/v2/attendance/?skip=0&limit=10 HTTP/1.1" 404
2025-06-13 20:09:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61813 - "OPTIONS /api/v2/employee-leave/ HTTP/1.1" 200
2025-06-13 20:09:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61815 - "GET /api/v2/employee-leave/ HTTP/1.1" 404
2025-06-13 20:09:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61815 - "GET /api/v2/employee-leave/ HTTP/1.1" 404
2025-06-13 20:26:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65262 - "OPTIONS /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-13 20:26:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 20:26:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 20:26:51 [INFO] app.api.controllers.organisation_controller:68 - list_organisations(): Listing organisations with filters
2025-06-13 20:26:51 [INFO] app.application.use_cases.organisation.list_organisations_use_case:57 - execute(): Listing organisations with filters: OrganisationSearchFiltersDTO(name=None, organisation_type=None, status=None, city=None, state=None, country=None, min_employee_strength=None, max_employee_strength=None, has_available_capacity=None, is_gst_registered=None, created_after=None, created_before=None, page=1, page_size=10, sort_by='created_at', sort_order='desc')
2025-06-13 20:26:51 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-13 20:26:51 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-13 20:26:51 [INFO] app.application.use_cases.organisation.list_organisations_use_case:89 - execute(): Listed 1 organisations (total: 1)
2025-06-13 20:26:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65262 - "GET /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-13 20:26:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65262 - "OPTIONS /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 20:26:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 20:26:54 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 20:26:54 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-13 20:26:54 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 20:26:54 [INFO] app.infrastructure.repositories.mongodb_user_repository:583 - get_all(): Retrieved 5 users
2025-06-13 20:26:54 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 20:26:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65262 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 20:29:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49873 - "GET /api/v2/public-holidays/health HTTP/1.1" 200
2025-06-13 20:29:41 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Not enough segments
2025-06-13 20:29:41 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Not enough segments
2025-06-13 20:29:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49914 - "GET /api/v2/public-holidays/ HTTP/1.1" 401
2025-06-13 20:30:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50289 - "OPTIONS /api/v2/public-holidays HTTP/1.1" 200
2025-06-13 20:30:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50291 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-13 20:30:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50291 - "OPTIONS /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-13 20:30:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 20:30:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 20:30:29 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:100 - _get_collection(): Successfully retrieved collection: public_holidays from database: pms_localhost
2025-06-13 20:30:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50289 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-13 20:30:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50406 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-13 20:30:39 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 20:30:39 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 20:30:39 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:100 - _get_collection(): Successfully retrieved collection: public_holidays from database: pms_localhost
2025-06-13 20:30:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50406 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-13 20:31:06 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Not enough segments
2025-06-13 20:31:06 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Not enough segments
2025-06-13 20:31:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50674 - "GET /api/v2/public-holidays/ HTTP/1.1" 401
2025-06-13 20:33:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51681 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-13 20:33:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51681 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-13 20:33:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 20:33:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 20:33:05 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:100 - _get_collection(): Successfully retrieved collection: public_holidays from database: pms_localhost
2025-06-13 20:33:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51681 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-13 20:33:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 20:33:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 20:33:05 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:100 - _get_collection(): Successfully retrieved collection: public_holidays from database: pms_localhost
2025-06-13 20:33:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51681 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-13 20:33:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51982 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-13 20:33:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51982 - "GET /api/v2/public-holidays HTTP/1.1" 307
2025-06-13 20:33:47 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 20:33:47 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 20:33:47 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:100 - _get_collection(): Successfully retrieved collection: public_holidays from database: pms_localhost
2025-06-13 20:33:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51982 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-13 20:33:47 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 20:33:47 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 20:33:47 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:100 - _get_collection(): Successfully retrieved collection: public_holidays from database: pms_localhost
2025-06-13 20:33:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51982 - "GET /api/v2/public-holidays/ HTTP/1.1" 200
2025-06-13 20:33:56 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 20:33:56 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 20:33:56 [INFO] app.api.controllers.organisation_controller:68 - list_organisations(): Listing organisations with filters
2025-06-13 20:33:56 [INFO] app.application.use_cases.organisation.list_organisations_use_case:57 - execute(): Listing organisations with filters: OrganisationSearchFiltersDTO(name=None, organisation_type=None, status=None, city=None, state=None, country=None, min_employee_strength=None, max_employee_strength=None, has_available_capacity=None, is_gst_registered=None, created_after=None, created_before=None, page=1, page_size=10, sort_by='created_at', sort_order='desc')
2025-06-13 20:33:56 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-13 20:33:56 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-13 20:33:56 [INFO] app.application.use_cases.organisation.list_organisations_use_case:89 - execute(): Listed 1 organisations (total: 1)
2025-06-13 20:33:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52013 - "GET /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-13 20:46:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54471 - "OPTIONS /api/v2/public-holidays/?limit=100&sort_by=holiday_date&sort_order=asc HTTP/1.1" 200
2025-06-13 20:46:55 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 20:46:55 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 20:46:55 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:100 - _get_collection(): Successfully retrieved collection: public_holidays from database: pms_localhost
2025-06-13 20:46:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54471 - "GET /api/v2/public-holidays/?limit=100&sort_by=holiday_date&sort_order=asc HTTP/1.1" 200
2025-06-13 20:47:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54473 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-13 20:47:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54473 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-13 20:47:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54473 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-13 20:47:12 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 20:47:12 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 20:47:12 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-13 20:47:12 [INFO] app.infrastructure.services.company_leave_service_impl:286 - list_company_leaves(): Listing company leaves in organisation localhost
2025-06-13 20:47:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:249 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-13 20:47:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-13 20:47:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:260 - list_with_filters(): MongoDB query: {}
2025-06-13 20:47:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:264 - list_with_filters(): Pagination: skip=0, limit=100
2025-06-13 20:47:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:269 - list_with_filters(): Sort: field=created_at, direction=-1
2025-06-13 20:47:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:280 - list_with_filters(): Retrieved 1 company leave documents from MongoDB with filters
2025-06-13 20:47:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:283 - list_with_filters(): Successfully converted 1 filtered documents to entities
2025-06-13 20:47:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-13 20:47:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54505 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-13 20:50:09 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 20:50:09 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 20:50:09 [INFO] app.infrastructure.repositories.mongodb_public_holiday_repository:100 - _get_collection(): Successfully retrieved collection: public_holidays from database: pms_localhost
2025-06-13 20:50:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55119 - "GET /api/v2/public-holidays/?limit=100&sort_by=holiday_date&sort_order=asc HTTP/1.1" 200
2025-06-13 20:50:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55244 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-13 20:50:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 20:50:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 20:50:29 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-13 20:50:29 [INFO] app.infrastructure.services.company_leave_service_impl:286 - list_company_leaves(): Listing company leaves in organisation localhost
2025-06-13 20:50:29 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:249 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-13 20:50:29 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-13 20:50:29 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:260 - list_with_filters(): MongoDB query: {}
2025-06-13 20:50:29 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:264 - list_with_filters(): Pagination: skip=0, limit=100
2025-06-13 20:50:29 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:269 - list_with_filters(): Sort: field=created_at, direction=-1
2025-06-13 20:50:30 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:280 - list_with_filters(): Retrieved 1 company leave documents from MongoDB with filters
2025-06-13 20:50:30 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:283 - list_with_filters(): Successfully converted 1 filtered documents to entities
2025-06-13 20:50:30 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-13 20:50:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55244 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-13 20:54:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57049 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-13 20:54:10 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 20:54:10 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 20:54:10 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-13 20:54:10 [INFO] app.infrastructure.services.company_leave_service_impl:286 - list_company_leaves(): Listing company leaves in organisation localhost
2025-06-13 20:54:10 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:249 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-13 20:54:10 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-13 20:54:10 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:260 - list_with_filters(): MongoDB query: {}
2025-06-13 20:54:10 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:264 - list_with_filters(): Pagination: skip=0, limit=100
2025-06-13 20:54:10 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:269 - list_with_filters(): Sort: field=created_at, direction=-1
2025-06-13 20:54:10 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:280 - list_with_filters(): Retrieved 1 company leave documents from MongoDB with filters
2025-06-13 20:54:10 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:283 - list_with_filters(): Successfully converted 1 filtered documents to entities
2025-06-13 20:54:10 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-13 20:54:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57049 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-13 20:58:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58851 - "OPTIONS /api/v2/company-leaves HTTP/1.1" 200
2025-06-13 20:58:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58853 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-13 20:58:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58853 - "OPTIONS /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-13 20:58:12 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 20:58:12 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 20:58:12 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-13 20:58:12 [INFO] app.infrastructure.services.company_leave_service_impl:286 - list_company_leaves(): Listing company leaves in organisation localhost
2025-06-13 20:58:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:249 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-13 20:58:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-13 20:58:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:260 - list_with_filters(): MongoDB query: {}
2025-06-13 20:58:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:264 - list_with_filters(): Pagination: skip=0, limit=100
2025-06-13 20:58:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:269 - list_with_filters(): Sort: field=created_at, direction=-1
2025-06-13 20:58:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:280 - list_with_filters(): Retrieved 1 company leave documents from MongoDB with filters
2025-06-13 20:58:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:283 - list_with_filters(): Successfully converted 1 filtered documents to entities
2025-06-13 20:58:12 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-13 20:58:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58851 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-13 21:02:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60574 - "GET /api/v2/company-leaves HTTP/1.1" 307
2025-06-13 21:02:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:02:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:02:37 [INFO] app.api.controllers.company_leave_controller:62 - list_company_leaves(): Listing company leaves with filters
2025-06-13 21:02:37 [INFO] app.infrastructure.services.company_leave_service_impl:286 - list_company_leaves(): Listing company leaves in organisation localhost
2025-06-13 21:02:37 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:249 - list_with_filters(): Retrieving company leaves with filters: {'is_active': None, 'accrual_type': None, 'sort_by': 'created_at', 'sort_order': 'desc', 'page': 1, 'page_size': 100}
2025-06-13 21:02:37 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-13 21:02:37 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:260 - list_with_filters(): MongoDB query: {}
2025-06-13 21:02:37 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:264 - list_with_filters(): Pagination: skip=0, limit=100
2025-06-13 21:02:37 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:269 - list_with_filters(): Sort: field=created_at, direction=-1
2025-06-13 21:02:37 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:280 - list_with_filters(): Retrieved 1 company leave documents from MongoDB with filters
2025-06-13 21:02:37 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:283 - list_with_filters(): Successfully converted 1 filtered documents to entities
2025-06-13 21:02:37 [INFO] app.infrastructure.repositories.mongodb_company_leave_repository:101 - _get_collection(): Successfully retrieved collection: company_leaves from database: pms_localhost
2025-06-13 21:02:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60574 - "GET /api/v2/company-leaves/ HTTP/1.1" 200
2025-06-13 21:03:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60786 - "OPTIONS /api/v2/attendance/?skip=0&limit=10 HTTP/1.1" 200
2025-06-13 21:03:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60788 - "GET /api/v2/attendance/?skip=0&limit=10 HTTP/1.1" 404
2025-06-13 21:03:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60788 - "GET /api/v2/attendance/?skip=0&limit=10 HTTP/1.1" 404
2025-06-13 21:06:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61617 - "OPTIONS /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 21:06:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:06:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:06:24 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-13 21:06:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:06:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:583 - get_all(): Retrieved 5 users
2025-06-13 21:06:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:06:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61617 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 21:07:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62022 - "OPTIONS /api/v2/attendance/?employee_id=EMP002&month=6&year=2025 HTTP/1.1" 200
2025-06-13 21:07:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62022 - "GET /api/v2/attendance/?employee_id=EMP002&month=6&year=2025 HTTP/1.1" 404
2025-06-13 21:07:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62022 - "GET /api/v2/attendance/?employee_id=EMP002&month=6&year=2025 HTTP/1.1" 404
2025-06-13 21:08:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62024 - "OPTIONS /api/v2/attendance/?employee_id=EMP005&month=6&year=2025 HTTP/1.1" 200
2025-06-13 21:08:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62024 - "GET /api/v2/attendance/?employee_id=EMP005&month=6&year=2025 HTTP/1.1" 404
2025-06-13 21:08:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62024 - "GET /api/v2/attendance/?employee_id=EMP005&month=6&year=2025 HTTP/1.1" 404
2025-06-13 21:14:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:14:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:14:31 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-13 21:14:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:14:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:583 - get_all(): Retrieved 5 users
2025-06-13 21:14:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:14:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63292 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 21:15:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63381 - "OPTIONS /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 200
2025-06-13 21:15:07 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:15:07 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:15:07 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:15:07 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:15:07 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:15:07 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:15:07 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025
2025-06-13 21:15:07 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025 in organisation: localhost
2025-06-13 21:15:07 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:15:07 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:15:07 [ERROR] app.application.use_cases.attendance.attendance_query_use_case:78 - get_employee_attendance_by_month(): Error getting employee attendance by month: 'MongoDBAttendanceRepository' object has no attribute 'get_by_employee_and_month'
2025-06-13 21:15:07 [ERROR] app.infrastructure.services.attendance_service_impl:107 - get_employee_attendance_by_month(): Error getting employee attendance for EMP005 in organisation localhost: Failed to get attendance records: 'MongoDBAttendanceRepository' object has no attribute 'get_by_employee_and_month'
2025-06-13 21:15:07 [WARNING] app.api.controllers.attendance_controller:104 - get_employee_attendance_by_month(): Attendance not found: Failed to get attendance records: 'MongoDBAttendanceRepository' object has no attribute 'get_by_employee_and_month'
2025-06-13 21:15:07 [WARNING] app.api.routes.attendance_routes_v2:136 - get_employee_attendance_by_month(): Attendance not found: Failed to get attendance records: 'MongoDBAttendanceRepository' object has no attribute 'get_by_employee_and_month'
2025-06-13 21:15:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63383 - "GET /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 404
2025-06-13 21:15:08 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:15:08 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:15:08 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:15:08 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:15:08 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:15:08 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:15:08 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025
2025-06-13 21:15:08 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025 in organisation: localhost
2025-06-13 21:15:08 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:15:08 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:15:08 [ERROR] app.application.use_cases.attendance.attendance_query_use_case:78 - get_employee_attendance_by_month(): Error getting employee attendance by month: 'MongoDBAttendanceRepository' object has no attribute 'get_by_employee_and_month'
2025-06-13 21:15:08 [ERROR] app.infrastructure.services.attendance_service_impl:107 - get_employee_attendance_by_month(): Error getting employee attendance for EMP005 in organisation localhost: Failed to get attendance records: 'MongoDBAttendanceRepository' object has no attribute 'get_by_employee_and_month'
2025-06-13 21:15:08 [WARNING] app.api.controllers.attendance_controller:104 - get_employee_attendance_by_month(): Attendance not found: Failed to get attendance records: 'MongoDBAttendanceRepository' object has no attribute 'get_by_employee_and_month'
2025-06-13 21:15:08 [WARNING] app.api.routes.attendance_routes_v2:136 - get_employee_attendance_by_month(): Attendance not found: Failed to get attendance records: 'MongoDBAttendanceRepository' object has no attribute 'get_by_employee_and_month'
2025-06-13 21:15:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63383 - "GET /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 404
2025-06-13 21:15:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:15:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:15:43 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-13 21:15:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:15:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:583 - get_all(): Retrieved 5 users
2025-06-13 21:15:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:15:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63460 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 21:15:58 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:15:58 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:15:58 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:15:58 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:15:58 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:15:58 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:15:59 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025
2025-06-13 21:15:59 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025 in organisation: localhost
2025-06-13 21:15:59 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:15:59 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:15:59 [ERROR] app.application.use_cases.attendance.attendance_query_use_case:78 - get_employee_attendance_by_month(): Error getting employee attendance by month: 'MongoDBAttendanceRepository' object has no attribute 'get_by_employee_and_month'
2025-06-13 21:15:59 [ERROR] app.infrastructure.services.attendance_service_impl:107 - get_employee_attendance_by_month(): Error getting employee attendance for EMP005 in organisation localhost: Failed to get attendance records: 'MongoDBAttendanceRepository' object has no attribute 'get_by_employee_and_month'
2025-06-13 21:15:59 [WARNING] app.api.controllers.attendance_controller:104 - get_employee_attendance_by_month(): Attendance not found: Failed to get attendance records: 'MongoDBAttendanceRepository' object has no attribute 'get_by_employee_and_month'
2025-06-13 21:15:59 [WARNING] app.api.routes.attendance_routes_v2:136 - get_employee_attendance_by_month(): Attendance not found: Failed to get attendance records: 'MongoDBAttendanceRepository' object has no attribute 'get_by_employee_and_month'
2025-06-13 21:15:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63508 - "GET /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 404
2025-06-13 21:16:00 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:16:00 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:16:00 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:16:00 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:16:00 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:16:00 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:16:00 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025
2025-06-13 21:16:00 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025 in organisation: localhost
2025-06-13 21:16:00 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:16:00 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:16:00 [ERROR] app.application.use_cases.attendance.attendance_query_use_case:78 - get_employee_attendance_by_month(): Error getting employee attendance by month: 'MongoDBAttendanceRepository' object has no attribute 'get_by_employee_and_month'
2025-06-13 21:16:00 [ERROR] app.infrastructure.services.attendance_service_impl:107 - get_employee_attendance_by_month(): Error getting employee attendance for EMP005 in organisation localhost: Failed to get attendance records: 'MongoDBAttendanceRepository' object has no attribute 'get_by_employee_and_month'
2025-06-13 21:16:00 [WARNING] app.api.controllers.attendance_controller:104 - get_employee_attendance_by_month(): Attendance not found: Failed to get attendance records: 'MongoDBAttendanceRepository' object has no attribute 'get_by_employee_and_month'
2025-06-13 21:16:00 [WARNING] app.api.routes.attendance_routes_v2:136 - get_employee_attendance_by_month(): Attendance not found: Failed to get attendance records: 'MongoDBAttendanceRepository' object has no attribute 'get_by_employee_and_month'
2025-06-13 21:16:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63508 - "GET /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 404
2025-06-13 21:17:17 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 21:17:17 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 21:17:17 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 21:17:17 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 21:17:17 [INFO] uvicorn.error:93 - _serve(): Finished server process [3860]
2025-06-13 21:17:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 21:17:29 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 21:17:29 [INFO] uvicorn.error:83 - _serve(): Started server process [7853]
2025-06-13 21:17:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 21:17:29 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 21:17:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 21:17:39 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 21:17:39 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 21:17:39 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 21:17:39 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 21:17:39 [INFO] uvicorn.error:93 - _serve(): Finished server process [7853]
2025-06-13 21:17:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 21:17:52 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 21:17:52 [INFO] uvicorn.error:83 - _serve(): Started server process [7876]
2025-06-13 21:17:52 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 21:17:52 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 21:17:52 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 21:18:07 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 21:18:07 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 21:18:07 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 21:18:07 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 21:18:07 [INFO] uvicorn.error:93 - _serve(): Finished server process [7876]
2025-06-13 21:18:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 21:18:18 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 21:18:18 [INFO] uvicorn.error:83 - _serve(): Started server process [7907]
2025-06-13 21:18:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 21:18:18 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 21:18:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 21:18:30 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Not enough segments
2025-06-13 21:18:30 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Not enough segments
2025-06-13 21:18:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64063 - "GET /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 401
2025-06-13 21:20:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64147 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-13 21:20:44 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-13 21:20:44 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-13 21:20:45 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-13 21:20:46 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 21:20:46 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 21:20:47 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-13 21:20:47 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-13 21:20:47 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-13 21:20:47 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-13 21:20:47 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-13 21:20:47 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-13 21:20:47 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-13 21:20:47 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-13T23:50:47.626461
2025-06-13 21:20:47 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-13 21:20:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64149 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-13 21:20:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64149 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 21:20:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64147 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 21:20:47 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:20:47 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:20:47 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 21:20:47 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 21:20:47 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 21:20:48 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 21:20:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 21:20:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 21:20:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 21:20:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 21:20:48 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 21:20:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 21:20:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 21:20:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 21:20:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 21:20:48 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 21:20:48 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-13 21:20:48 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-13 21:20:48 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-13 21:20:48 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-13 21:20:48 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 21:20:48 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 21:20:48 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 21:20:48 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-13 21:20:48 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-13 21:20:49 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 21:20:49 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-13 21:20:49 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 21:20:49 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:20:50 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 21:20:50 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 21:20:50 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 21:20:50 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:20:50 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 21:20:50 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 21:20:50 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 21:20:50 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 21:20:50 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 21:20:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64149 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 21:20:50 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:20:50 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:20:50 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 21:20:50 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 21:20:50 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 21:20:50 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:20:50 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 21:20:50 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 21:20:50 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 21:20:50 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:20:50 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 21:20:50 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 21:20:50 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 21:20:50 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 21:20:50 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 21:20:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64147 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 21:20:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64147 - "OPTIONS /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 21:20:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:20:54 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:20:54 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-13 21:20:54 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:20:55 [INFO] app.infrastructure.repositories.mongodb_user_repository:583 - get_all(): Retrieved 5 users
2025-06-13 21:20:55 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:20:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64149 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 21:21:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:21:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:21:03 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:21:03 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:21:03 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:21:03 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:21:03 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025
2025-06-13 21:21:03 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025 in organisation: localhost
2025-06-13 21:21:03 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:21:03 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:21:03 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 21:21:03 [ERROR] app.application.use_cases.attendance.attendance_query_use_case:78 - get_employee_attendance_by_month(): Error getting employee attendance by month: 'str' object has no attribute 'value'
2025-06-13 21:21:03 [ERROR] app.infrastructure.services.attendance_service_impl:107 - get_employee_attendance_by_month(): Error getting employee attendance for EMP005 in organisation localhost: Failed to get attendance records: 'str' object has no attribute 'value'
2025-06-13 21:21:03 [WARNING] app.api.controllers.attendance_controller:104 - get_employee_attendance_by_month(): Attendance not found: Failed to get attendance records: 'str' object has no attribute 'value'
2025-06-13 21:21:03 [WARNING] app.api.routes.attendance_routes_v2:136 - get_employee_attendance_by_month(): Attendance not found: Failed to get attendance records: 'str' object has no attribute 'value'
2025-06-13 21:21:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64172 - "GET /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 404
2025-06-13 21:21:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:21:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:21:04 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:21:04 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:21:04 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:21:04 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:21:04 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025
2025-06-13 21:21:04 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025 in organisation: localhost
2025-06-13 21:21:04 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:21:04 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:21:04 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 21:21:04 [ERROR] app.application.use_cases.attendance.attendance_query_use_case:78 - get_employee_attendance_by_month(): Error getting employee attendance by month: 'str' object has no attribute 'value'
2025-06-13 21:21:04 [ERROR] app.infrastructure.services.attendance_service_impl:107 - get_employee_attendance_by_month(): Error getting employee attendance for EMP005 in organisation localhost: Failed to get attendance records: 'str' object has no attribute 'value'
2025-06-13 21:21:04 [WARNING] app.api.controllers.attendance_controller:104 - get_employee_attendance_by_month(): Attendance not found: Failed to get attendance records: 'str' object has no attribute 'value'
2025-06-13 21:21:04 [WARNING] app.api.routes.attendance_routes_v2:136 - get_employee_attendance_by_month(): Attendance not found: Failed to get attendance records: 'str' object has no attribute 'value'
2025-06-13 21:21:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64172 - "GET /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 404
2025-06-13 21:25:10 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-13 21:25:10 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-13 21:25:10 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-13 21:25:11 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 21:25:11 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 21:25:11 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-13 21:25:11 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-13 21:25:11 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-13 21:25:11 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-13 21:25:12 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-13 21:25:12 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-13 21:25:12 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-13T23:55:12.606822
2025-06-13 21:25:12 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-13 21:25:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64810 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-13 21:25:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64833 - "OPTIONS /api/v2/attendance/employee/EMP002/month/6/year/2025 HTTP/1.1" 200
2025-06-13 21:25:12 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:25:12 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:25:12 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:25:12 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:25:12 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:25:12 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:25:12 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-13 21:25:12 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025 in organisation: localhost
2025-06-13 21:25:12 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP002 for 6/2025 in organisation localhost
2025-06-13 21:25:12 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP002 for 6/2025 in organisation localhost
2025-06-13 21:25:12 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 21:25:12 [INFO] app.application.use_cases.attendance.attendance_query_use_case:74 - get_employee_attendance_by_month(): Found 0 attendance records for employee EMP002
2025-06-13 21:25:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64838 - "GET /api/v2/attendance/employee/EMP002/month/6/year/2025 HTTP/1.1" 200
2025-06-13 21:25:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:25:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:25:29 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:25:29 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:25:29 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:25:29 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:25:29 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025
2025-06-13 21:25:29 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025 in organisation: localhost
2025-06-13 21:25:29 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:25:29 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:25:29 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 21:25:29 [ERROR] app.application.use_cases.attendance.attendance_query_use_case:78 - get_employee_attendance_by_month(): Error getting employee attendance by month: 'str' object has no attribute 'value'
2025-06-13 21:25:29 [ERROR] app.infrastructure.services.attendance_service_impl:107 - get_employee_attendance_by_month(): Error getting employee attendance for EMP005 in organisation localhost: Failed to get attendance records: 'str' object has no attribute 'value'
2025-06-13 21:25:29 [WARNING] app.api.controllers.attendance_controller:104 - get_employee_attendance_by_month(): Attendance not found: Failed to get attendance records: 'str' object has no attribute 'value'
2025-06-13 21:25:29 [WARNING] app.api.routes.attendance_routes_v2:136 - get_employee_attendance_by_month(): Attendance not found: Failed to get attendance records: 'str' object has no attribute 'value'
2025-06-13 21:25:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64865 - "GET /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 404
2025-06-13 21:26:20 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 21:26:20 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 21:26:20 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 21:26:20 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 21:26:20 [INFO] uvicorn.error:93 - _serve(): Finished server process [7907]
2025-06-13 21:26:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 21:26:31 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 21:26:31 [INFO] uvicorn.error:83 - _serve(): Started server process [8281]
2025-06-13 21:26:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 21:26:31 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 21:26:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 21:28:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:28:55 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:28:55 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:28:55 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:28:55 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:28:55 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:28:55 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 21:28:55 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 21:28:55 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 21:28:55 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 21:28:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 21:28:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 21:28:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 21:28:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 21:28:55 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 21:28:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 21:28:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 21:28:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 21:28:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 21:28:55 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 21:28:55 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-13 21:28:55 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-13 21:28:55 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-13 21:28:55 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-13 21:28:55 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025
2025-06-13 21:28:55 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025 in organisation: localhost
2025-06-13 21:28:55 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:28:55 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:28:55 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:77 - _get_collection(): Database not connected, establishing connection...
2025-06-13 21:28:55 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:82 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-13 21:28:56 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 21:28:56 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-13 21:28:56 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 21:28:56 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 21:28:56 [INFO] app.application.use_cases.attendance.attendance_query_use_case:74 - get_employee_attendance_by_month(): Found 1 attendance records for employee EMP005
2025-06-13 21:28:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65329 - "GET /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 200
2025-06-13 21:29:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:29:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:29:05 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:29:05 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:29:05 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:29:05 [INFO] app.api.routes.attendance_routes_v2:295 - get_my_attendance_by_month(): Getting my attendance for 6/2025
2025-06-13 21:29:05 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee superadmin for 6/2025 in organisation: localhost
2025-06-13 21:29:05 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for superadmin for 6/2025 in organisation localhost
2025-06-13 21:29:05 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for superadmin for 6/2025 in organisation localhost
2025-06-13 21:29:05 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 21:29:05 [INFO] app.application.use_cases.attendance.attendance_query_use_case:74 - get_employee_attendance_by_month(): Found 0 attendance records for employee superadmin
2025-06-13 21:29:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65430 - "GET /api/v2/attendance/my/month/6/year/2025 HTTP/1.1" 200
2025-06-13 21:29:15 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:29:15 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:29:15 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:29:15 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:29:15 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:29:15 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:29:15 [INFO] app.api.routes.attendance_routes_v2:217 - get_team_attendance_by_month(): Getting team attendance for 6/2025
2025-06-13 21:29:15 [INFO] app.api.controllers.attendance_controller:151 - get_team_attendance_by_month(): Getting team attendance for 6/2025 in organisation: localhost
2025-06-13 21:29:15 [INFO] app.infrastructure.services.attendance_service_impl:145 - get_team_attendance_by_month(): Getting team attendance for 6/2025 in organisation localhost
2025-06-13 21:29:15 [INFO] app.application.use_cases.attendance.attendance_query_use_case:153 - get_team_attendance_by_month(): Getting team attendance for 6/2025 in organisation localhost
2025-06-13 21:29:15 [WARNING] app.application.use_cases.attendance.attendance_query_use_case:256 - _get_team_members(): Error getting team members for manager superadmin: 'MongoDBUserRepository' object has no attribute 'get_by_manager_id'
2025-06-13 21:29:15 [INFO] app.application.use_cases.attendance.attendance_query_use_case:175 - get_team_attendance_by_month(): Found 0 team attendance records
2025-06-13 21:29:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65459 - "GET /api/v2/attendance/team/month/6/year/2025 HTTP/1.1" 200
2025-06-13 21:33:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49696 - "OPTIONS /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 21:33:11 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:33:11 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:33:11 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-13 21:33:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:33:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:583 - get_all(): Retrieved 5 users
2025-06-13 21:33:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:33:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49696 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 21:33:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49698 - "OPTIONS /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 200
2025-06-13 21:33:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:33:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:33:17 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:33:17 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:33:17 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:33:17 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:33:17 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025
2025-06-13 21:33:17 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025 in organisation: localhost
2025-06-13 21:33:17 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:33:17 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:33:17 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 21:33:17 [INFO] app.application.use_cases.attendance.attendance_query_use_case:74 - get_employee_attendance_by_month(): Found 1 attendance records for employee EMP005
2025-06-13 21:33:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49720 - "GET /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 200
2025-06-13 21:34:06 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:34:06 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:34:06 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-13 21:34:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:34:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:583 - get_all(): Retrieved 5 users
2025-06-13 21:34:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:34:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49906 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 21:34:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49954 - "OPTIONS /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-13 21:34:23 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:34:23 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:34:23 [INFO] app.api.controllers.organisation_controller:68 - list_organisations(): Listing organisations with filters
2025-06-13 21:34:23 [INFO] app.application.use_cases.organisation.list_organisations_use_case:57 - execute(): Listing organisations with filters: OrganisationSearchFiltersDTO(name=None, organisation_type=None, status=None, city=None, state=None, country=None, min_employee_strength=None, max_employee_strength=None, has_available_capacity=None, is_gst_registered=None, created_after=None, created_before=None, page=1, page_size=10, sort_by='created_at', sort_order='desc')
2025-06-13 21:34:23 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-13 21:34:23 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-13 21:34:23 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-13 21:34:23 [INFO] app.application.use_cases.organisation.list_organisations_use_case:89 - execute(): Listed 1 organisations (total: 1)
2025-06-13 21:34:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49956 - "GET /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-13 21:35:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50104 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-13 21:35:28 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-13 21:35:28 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-13 21:35:28 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-13 21:35:29 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 21:35:29 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 21:35:29 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-13 21:35:29 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-13 21:35:29 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-13 21:35:29 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-13 21:35:29 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-13 21:35:29 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-13 21:35:29 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-13 21:35:29 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-14T00:05:29.852399
2025-06-13 21:35:29 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-13 21:35:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50104 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-13 21:35:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50104 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 21:35:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50106 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 21:35:30 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:35:30 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:35:30 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 21:35:30 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 21:35:30 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 21:35:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:35:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 21:35:30 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 21:35:30 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 21:35:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:35:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 21:35:30 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 21:35:30 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 21:35:30 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 21:35:30 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 21:35:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50124 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 21:35:30 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:35:30 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:35:30 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 21:35:30 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 21:35:30 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 21:35:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:35:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 21:35:30 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 21:35:30 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 21:35:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:35:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 21:35:30 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 21:35:30 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 21:35:30 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 21:35:30 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 21:35:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50124 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 21:35:45 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:35:45 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:35:45 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-13 21:35:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:35:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:583 - get_all(): Retrieved 5 users
2025-06-13 21:35:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:35:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50152 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 21:35:57 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:35:57 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:35:57 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:35:57 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:35:57 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:35:57 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:35:57 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025
2025-06-13 21:35:57 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025 in organisation: localhost
2025-06-13 21:35:57 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:35:57 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:35:57 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 21:35:57 [INFO] app.application.use_cases.attendance.attendance_query_use_case:74 - get_employee_attendance_by_month(): Found 1 attendance records for employee EMP005
2025-06-13 21:35:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50194 - "GET /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 200
2025-06-13 21:36:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50223 - "OPTIONS /api/v2/attendance/employee/EMP002/month/6/year/2025 HTTP/1.1" 200
2025-06-13 21:36:12 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:36:12 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:36:12 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:36:12 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:36:12 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:36:12 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:36:12 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025
2025-06-13 21:36:12 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP002 for 6/2025 in organisation: localhost
2025-06-13 21:36:12 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP002 for 6/2025 in organisation localhost
2025-06-13 21:36:12 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP002 for 6/2025 in organisation localhost
2025-06-13 21:36:12 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 21:36:12 [INFO] app.application.use_cases.attendance.attendance_query_use_case:74 - get_employee_attendance_by_month(): Found 0 attendance records for employee EMP002
2025-06-13 21:36:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50223 - "GET /api/v2/attendance/employee/EMP002/month/6/year/2025 HTTP/1.1" 200
2025-06-13 21:37:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50680 - "OPTIONS /api/v2/attendance/employee/EMP004/month/6/year/2025 HTTP/1.1" 200
2025-06-13 21:37:34 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:37:34 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:37:34 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:37:34 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:37:34 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:37:34 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:37:34 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP004 for 6/2025
2025-06-13 21:37:34 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP004 for 6/2025 in organisation: localhost
2025-06-13 21:37:34 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP004 for 6/2025 in organisation localhost
2025-06-13 21:37:34 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP004 for 6/2025 in organisation localhost
2025-06-13 21:37:34 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 21:37:34 [INFO] app.application.use_cases.attendance.attendance_query_use_case:74 - get_employee_attendance_by_month(): Found 0 attendance records for employee EMP004
2025-06-13 21:37:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50682 - "GET /api/v2/attendance/employee/EMP004/month/6/year/2025 HTTP/1.1" 200
2025-06-13 21:38:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:38:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:38:03 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-13 21:38:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:38:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:583 - get_all(): Retrieved 5 users
2025-06-13 21:38:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:38:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50997 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 21:38:09 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:38:09 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:38:09 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:38:09 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:38:09 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:38:09 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:38:09 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025
2025-06-13 21:38:09 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025 in organisation: localhost
2025-06-13 21:38:09 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:38:09 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:38:09 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 21:38:09 [INFO] app.application.use_cases.attendance.attendance_query_use_case:74 - get_employee_attendance_by_month(): Found 1 attendance records for employee EMP005
2025-06-13 21:38:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51031 - "GET /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 200
2025-06-13 21:38:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:38:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:38:29 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:38:29 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:38:29 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:38:29 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:38:29 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025
2025-06-13 21:38:29 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025 in organisation: localhost
2025-06-13 21:38:29 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:38:29 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:38:29 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 21:38:29 [INFO] app.application.use_cases.attendance.attendance_query_use_case:74 - get_employee_attendance_by_month(): Found 1 attendance records for employee EMP005
2025-06-13 21:38:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51124 - "GET /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 200
2025-06-13 21:39:11 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:39:11 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:39:11 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-13 21:39:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:39:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:583 - get_all(): Retrieved 5 users
2025-06-13 21:39:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 21:39:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51357 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 21:39:46 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:39:46 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:39:46 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:39:46 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:39:46 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:39:46 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:39:46 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025
2025-06-13 21:39:46 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025 in organisation: localhost
2025-06-13 21:39:46 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:39:46 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 21:39:46 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 21:39:46 [INFO] app.application.use_cases.attendance.attendance_query_use_case:74 - get_employee_attendance_by_month(): Found 1 attendance records for employee EMP005
2025-06-13 21:39:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51571 - "GET /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 200
2025-06-13 21:52:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56688 - "OPTIONS /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 200
2025-06-13 21:52:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 21:52:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 21:52:40 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 21:52:40 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:52:40 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 21:52:40 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 21:52:40 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025
2025-06-13 22:13:02 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025 in organisation: localhost
2025-06-13 22:20:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:20:42 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:20:42 [INFO] uvicorn.error:83 - _serve(): Started server process [9455]
2025-06-13 22:20:42 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:20:42 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 22:20:42 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:21:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50326 - "OPTIONS /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 22:21:00 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 22:21:00 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 22:21:00 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 22:21:00 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 22:21:00 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 22:21:00 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 22:21:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 22:21:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 22:21:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 22:21:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 22:21:01 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 22:21:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 22:21:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 22:21:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 22:21:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 22:21:01 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 22:21:01 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-13 22:21:01 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-13 22:21:01 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-13 22:21:01 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-13 22:21:01 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-13 22:21:01 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-13 22:21:01 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-13 22:21:03 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 22:21:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-13 22:21:03 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 22:21:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 22:21:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:583 - get_all(): Retrieved 5 users
2025-06-13 22:21:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 22:21:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50326 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 22:21:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50328 - "OPTIONS /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 200
2025-06-13 22:21:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 22:21:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 22:21:19 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 22:21:19 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 22:21:19 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 22:21:19 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 22:21:19 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025
2025-06-13 22:21:19 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025 in organisation: localhost
2025-06-13 22:21:19 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 22:21:19 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 22:21:19 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 22:21:19 [INFO] app.application.use_cases.attendance.attendance_query_use_case:74 - get_employee_attendance_by_month(): Found 1 attendance records for employee EMP005
2025-06-13 22:21:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50328 - "GET /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 200
2025-06-13 22:28:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51558 - "OPTIONS /api/v2/employee-leave/ HTTP/1.1" 200
2025-06-13 22:28:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51560 - "GET /api/v2/employee-leave/ HTTP/1.1" 404
2025-06-13 22:28:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51560 - "GET /api/v2/employee-leave/ HTTP/1.1" 404
2025-06-13 22:28:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51560 - "GET /api/v2/employee-leave/ HTTP/1.1" 404
2025-06-13 22:28:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51560 - "GET /api/v2/employee-leave/ HTTP/1.1" 404
2025-06-13 22:28:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51560 - "OPTIONS /lwp HTTP/1.1" 200
2025-06-13 22:28:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51592 - "OPTIONS /lwp HTTP/1.1" 200
2025-06-13 22:28:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51594 - "GET /lwp HTTP/1.1" 404
2025-06-13 22:28:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51594 - "GET /lwp HTTP/1.1" 404
2025-06-13 22:29:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 22:29:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 22:29:03 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-13 22:29:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 22:29:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:583 - get_all(): Retrieved 5 users
2025-06-13 22:29:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 22:29:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51699 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 22:29:09 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 22:29:09 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 22:29:10 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 22:29:10 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 22:29:10 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 22:29:10 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 22:29:10 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025
2025-06-13 22:29:10 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025 in organisation: localhost
2025-06-13 22:29:10 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 22:29:10 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 22:29:10 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 22:29:10 [INFO] app.application.use_cases.attendance.attendance_query_use_case:74 - get_employee_attendance_by_month(): Found 1 attendance records for employee EMP005
2025-06-13 22:29:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51725 - "GET /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 200
2025-06-13 22:32:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52321 - "OPTIONS /api/v2/attendance/employee/EMP005/month/7/year/2025 HTTP/1.1" 200
2025-06-13 22:32:15 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 22:32:15 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 22:32:15 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 22:32:15 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 22:32:15 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 22:32:15 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 22:32:15 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 7/2025
2025-06-13 22:32:15 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 7/2025 in organisation: localhost
2025-06-13 22:32:15 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 7/2025 in organisation localhost
2025-06-13 22:32:15 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 7/2025 in organisation localhost
2025-06-13 22:32:15 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 22:32:15 [INFO] app.application.use_cases.attendance.attendance_query_use_case:74 - get_employee_attendance_by_month(): Found 0 attendance records for employee EMP005
2025-06-13 22:32:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52321 - "GET /api/v2/attendance/employee/EMP005/month/7/year/2025 HTTP/1.1" 200
2025-06-13 22:32:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52323 - "OPTIONS /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 22:32:35 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 22:32:35 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 22:32:35 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-13 22:32:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 22:32:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:583 - get_all(): Retrieved 5 users
2025-06-13 22:32:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 22:32:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52323 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 22:33:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 22:33:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 22:33:36 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-13 22:33:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 22:33:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:583 - get_all(): Retrieved 5 users
2025-06-13 22:33:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 22:33:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52563 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 22:39:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 22:39:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 22:39:29 [INFO] app.infrastructure.services.user_service_impl:421 - get_all_users(): Getting all users from organisation localhost
2025-06-13 22:39:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 22:39:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:583 - get_all(): Retrieved 5 users
2025-06-13 22:39:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 22:39:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53594 - "GET /api/v2/users?skip=0&limit=10&include_inactive=false&include_deleted=false HTTP/1.1" 200
2025-06-13 22:39:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53623 - "OPTIONS /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 200
2025-06-13 22:39:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 22:39:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 22:39:36 [INFO] app.auth.auth:83 - checker(): Checking role for user: superadmin
2025-06-13 22:39:36 [INFO] app.api.routes.attendance_routes_v2:36 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 22:39:36 [INFO] app.api.routes.attendance_routes_v2:38 - get_attendance_controller(): Getting dependency container
2025-06-13 22:39:36 [INFO] app.api.routes.attendance_routes_v2:40 - get_attendance_controller(): Getting attendance controller from container
2025-06-13 22:39:36 [INFO] app.api.routes.attendance_routes_v2:123 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025
2025-06-13 22:39:36 [INFO] app.api.controllers.attendance_controller:100 - get_employee_attendance_by_month(): Getting attendance for employee EMP005 for 6/2025 in organisation: localhost
2025-06-13 22:39:36 [INFO] app.infrastructure.services.attendance_service_impl:97 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 22:39:36 [INFO] app.application.use_cases.attendance.attendance_query_use_case:58 - get_employee_attendance_by_month(): Getting employee attendance for EMP005 for 6/2025 in organisation localhost
2025-06-13 22:39:36 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 22:39:36 [INFO] app.application.use_cases.attendance.attendance_query_use_case:74 - get_employee_attendance_by_month(): Found 1 attendance records for employee EMP005
2025-06-13 22:39:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53623 - "GET /api/v2/attendance/employee/EMP005/month/6/year/2025 HTTP/1.1" 200
2025-06-13 22:41:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53952 - "OPTIONS /lwp HTTP/1.1" 200
2025-06-13 22:41:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53952 - "GET /lwp HTTP/1.1" 404
2025-06-13 22:41:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53952 - "GET /lwp HTTP/1.1" 404
2025-06-13 22:41:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53954 - "OPTIONS /api/v2/employee-leave/ HTTP/1.1" 200
2025-06-13 22:41:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53954 - "GET /api/v2/employee-leave/ HTTP/1.1" 404
2025-06-13 22:41:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53954 - "GET /api/v2/employee-leave/ HTTP/1.1" 404
2025-06-13 22:43:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 22:43:54 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 22:43:54 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 22:43:54 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 22:43:54 [INFO] uvicorn.error:93 - _serve(): Finished server process [9455]
2025-06-13 22:44:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:44:18 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:44:18 [INFO] uvicorn.error:83 - _serve(): Started server process [9927]
2025-06-13 22:44:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:44:18 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 22:44:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:45:01 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 22:45:01 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 22:45:01 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 22:45:01 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 22:45:01 [INFO] uvicorn.error:93 - _serve(): Finished server process [9927]
2025-06-13 22:45:06 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:45:13 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:45:13 [INFO] uvicorn.error:83 - _serve(): Started server process [9956]
2025-06-13 22:45:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:45:13 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 22:45:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:45:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:45:26 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:45:26 [INFO] uvicorn.error:83 - _serve(): Started server process [9971]
2025-06-13 22:45:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:45:26 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 22:45:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:45:49 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 22:45:49 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 22:45:49 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 22:45:49 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 22:45:49 [INFO] uvicorn.error:93 - _serve(): Finished server process [9971]
2025-06-13 22:45:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:46:02 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:46:02 [INFO] uvicorn.error:83 - _serve(): Started server process [9985]
2025-06-13 22:46:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:46:02 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 22:46:02 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:46:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:46:13 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:46:13 [INFO] uvicorn.error:83 - _serve(): Started server process [10000]
2025-06-13 22:46:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:46:13 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 22:46:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:46:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 22:46:22 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 22:46:22 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 22:46:22 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 22:46:22 [INFO] uvicorn.error:93 - _serve(): Finished server process [10000]
2025-06-13 22:46:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:46:33 [INFO] app.main:83 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:46:33 [INFO] uvicorn.error:83 - _serve(): Started server process [10011]
2025-06-13 22:46:33 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:46:33 [INFO] app.main:38 - lifespan(): Running startup tasks...
2025-06-13 22:46:33 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:46:35 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 22:46:36 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 22:46:36 [INFO] app.main:40 - lifespan(): Running shutdown tasks...
2025-06-13 22:46:36 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 22:46:36 [INFO] uvicorn.error:93 - _serve(): Finished server process [10011]
2025-06-13 22:46:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:47:02 [INFO] app.main:84 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:47:02 [INFO] uvicorn.error:83 - _serve(): Started server process [10034]
2025-06-13 22:47:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:47:02 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-13 22:47:03 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:47:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:47:18 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:47:18 [INFO] uvicorn.error:83 - _serve(): Started server process [10060]
2025-06-13 22:47:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:47:18 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-13 22:47:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:47:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:47:32 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:47:32 [INFO] uvicorn.error:83 - _serve(): Started server process [10083]
2025-06-13 22:47:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:47:32 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-13 22:47:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:47:34 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 22:47:34 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 22:47:34 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-13 22:47:34 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 22:47:34 [INFO] uvicorn.error:93 - _serve(): Finished server process [10083]
2025-06-13 22:47:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:47:46 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:47:46 [INFO] uvicorn.error:83 - _serve(): Started server process [10096]
2025-06-13 22:47:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:47:46 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-13 22:47:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:47:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:48:00 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:48:00 [INFO] uvicorn.error:83 - _serve(): Started server process [10109]
2025-06-13 22:48:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:48:00 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-13 22:48:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:48:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:48:12 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:48:12 [INFO] uvicorn.error:83 - _serve(): Started server process [10127]
2025-06-13 22:48:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:48:12 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-13 22:48:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:48:13 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 22:48:14 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 22:48:14 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-13 22:48:14 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 22:48:14 [INFO] uvicorn.error:93 - _serve(): Finished server process [10127]
2025-06-13 22:48:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:48:25 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:48:25 [INFO] uvicorn.error:83 - _serve(): Started server process [10140]
2025-06-13 22:48:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:48:25 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-13 22:48:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:48:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:48:38 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:48:38 [INFO] uvicorn.error:83 - _serve(): Started server process [10155]
2025-06-13 22:48:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:48:38 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-13 22:48:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:48:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:48:50 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:48:50 [INFO] uvicorn.error:83 - _serve(): Started server process [10173]
2025-06-13 22:48:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:48:50 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-13 22:48:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:49:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55221 - "GET /docs HTTP/1.1" 200
2025-06-13 22:49:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55239 - "GET /lwp/health HTTP/1.1" 200
2025-06-13 22:49:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55249 - "GET /api/v2/employee-leave/health HTTP/1.1" 403
2025-06-13 22:49:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55284 - "GET /api/v2/employee-leave/health HTTP/1.1" 403
2025-06-13 22:49:31 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 22:49:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 22:49:31 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-13 22:49:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 22:49:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [10173]
2025-06-13 22:49:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:49:43 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:49:43 [INFO] uvicorn.error:83 - _serve(): Started server process [10476]
2025-06-13 22:49:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:49:43 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-13 22:49:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:49:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55338 - "GET /openapi.json HTTP/1.1" 200
2025-06-13 22:50:56 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 22:50:56 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 22:50:56 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 22:50:56 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 22:50:56 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 22:50:56 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 22:50:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 22:50:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 22:50:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 22:50:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 22:50:56 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 22:50:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 22:50:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 22:50:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 22:50:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 22:50:56 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 22:50:56 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-13 22:50:56 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-13 22:50:56 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-13 22:50:56 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-13 22:50:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 22:50:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 22:50:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 22:50:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 22:50:56 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 22:50:56 [INFO] app.api.routes.employee_leave_routes_v2:105 - get_all_employee_leaves(): Retrieving all employee leaves by: superadmin
2025-06-13 22:50:56 [INFO] app.api.controllers.employee_leave_controller:287 - search_leaves(): Searching leaves with filters in org: localhost
2025-06-13 22:50:56 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:205 - search_employee_leaves(): Searching employee leaves with filters
2025-06-13 22:50:56 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:71 - _get_collection(): Database not connected, establishing connection...
2025-06-13 22:50:56 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:76 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-13 22:50:58 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 22:50:58 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:84 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-13 22:50:58 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 22:50:58 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:94 - _get_collection(): Successfully retrieved collection: employee_leaves from database: pms_localhost
2025-06-13 22:50:58 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:631 - search(): Search returned 1 employee leaves
2025-06-13 22:50:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55480 - "GET /api/v2/employee-leave/ HTTP/1.1" 200
2025-06-13 22:51:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55672 - "OPTIONS /lwp HTTP/1.1" 200
2025-06-13 22:51:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55673 - "OPTIONS /lwp HTTP/1.1" 200
2025-06-13 22:51:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55672 - "GET /lwp HTTP/1.1" 307
2025-06-13 22:51:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55672 - "GET /lwp HTTP/1.1" 307
2025-06-13 22:51:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55673 - "OPTIONS /lwp/ HTTP/1.1" 200
2025-06-13 22:51:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55672 - "OPTIONS /lwp/ HTTP/1.1" 200
2025-06-13 22:51:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55675 - "GET /lwp/ HTTP/1.1" 422
2025-06-13 22:51:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55675 - "GET /lwp/ HTTP/1.1" 422
2025-06-13 22:52:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55946 - "OPTIONS /api/v2/payouts?year=2025&page=1&limit=10 HTTP/1.1" 200
2025-06-13 22:52:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55948 - "GET /api/v2/payouts?year=2025&page=1&limit=10 HTTP/1.1" 404
2025-06-13 22:52:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55948 - "GET /api/v2/payouts?year=2025&page=1&limit=10 HTTP/1.1" 404
2025-06-13 22:52:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56006 - "OPTIONS /api/v2/reimbursements/ HTTP/1.1" 200
2025-06-13 22:52:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56008 - "GET /api/v2/reimbursements/ HTTP/1.1" 307
2025-06-13 22:52:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56008 - "OPTIONS /api/v2/reimbursements HTTP/1.1" 200
2025-06-13 22:52:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56006 - "GET /api/v2/reimbursements HTTP/1.1" 405
2025-06-13 22:52:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56006 - "GET /api/v2/reimbursements/ HTTP/1.1" 307
2025-06-13 22:52:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56006 - "GET /api/v2/reimbursements HTTP/1.1" 405
2025-06-13 22:53:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56223 - "GET /api/v2/reimbursements/ HTTP/1.1" 307
2025-06-13 22:53:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56223 - "GET /api/v2/reimbursements HTTP/1.1" 405
2025-06-13 22:53:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56223 - "GET /api/v2/reimbursements/ HTTP/1.1" 307
2025-06-13 22:53:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56223 - "GET /api/v2/reimbursements HTTP/1.1" 405
2025-06-13 22:54:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:54:43 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:54:43 [INFO] uvicorn.error:83 - _serve(): Started server process [10766]
2025-06-13 22:54:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:54:43 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-13 22:54:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:54:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56519 - "GET /health HTTP/1.1" 404
2025-06-13 22:54:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56549 - "GET /api/v2/reimbursements/ HTTP/1.1" 307
2025-06-13 22:55:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56566 - "GET /api/v2/reimbursements/ HTTP/1.1" 307
2025-06-13 22:55:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56584 - "GET /api/v2/reimbursements HTTP/1.1" 403
2025-06-13 22:55:26 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 22:55:26 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 22:55:26 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-13 22:55:26 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 22:55:26 [INFO] uvicorn.error:93 - _serve(): Finished server process [10766]
2025-06-13 22:55:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 22:55:29 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 22:55:29 [INFO] uvicorn.error:83 - _serve(): Started server process [10842]
2025-06-13 22:55:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 22:55:29 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-13 22:55:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 22:55:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56682 - "GET /api/v2/reimbursements/ HTTP/1.1" 403
2025-06-13 22:56:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56815 - "OPTIONS /api/v2/reimbursements/ HTTP/1.1" 200
2025-06-13 22:56:08 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 22:56:08 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 22:56:08 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 22:56:08 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 22:56:08 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 22:56:08 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 22:56:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 22:56:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 22:56:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 22:56:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 22:56:08 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 22:56:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 22:56:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 22:56:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 22:56:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 22:56:08 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 22:56:08 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-13 22:56:08 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-13 22:56:08 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-13 22:56:08 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-13 22:56:08 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-13 22:56:08 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: superadmin
2025-06-13 22:56:08 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:79 - _get_collection(): Database not connected, establishing connection...
2025-06-13 22:56:08 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:84 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-13 22:56:09 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 22:56:09 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-13 22:56:09 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 22:56:09 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 22:56:09 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 0 reimbursement requests for employee: superadmin
2025-06-13 22:56:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56815 - "GET /api/v2/reimbursements/ HTTP/1.1" 200
2025-06-13 23:00:01 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-13 23:00:01 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-13 23:00:01 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-13 23:00:01 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-13 23:00:01 [INFO] uvicorn.error:93 - _serve(): Finished server process [10842]
2025-06-13 23:00:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-13 23:00:20 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-13 23:00:20 [INFO] uvicorn.error:83 - _serve(): Started server process [10936]
2025-06-13 23:00:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-13 23:00:20 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-13 23:00:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-13 23:00:57 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 23:00:57 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 23:00:57 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-13 23:00:57 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-13 23:00:57 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-13 23:00:57 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-13 23:00:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 23:00:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 23:00:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 23:00:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 23:00:57 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 23:00:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-13 23:00:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-13 23:00:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-13 23:00:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-13 23:00:57 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-13 23:00:57 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-13 23:00:57 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-13 23:00:57 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-13 23:00:57 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-13 23:00:57 [INFO] app.infrastructure.services.reimbursement_service_impl:657 - list_reimbursement_requests(): Listing reimbursement requests in organisation: localhost
2025-06-13 23:00:57 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:109 - get_requests_by_employee(): Retrieving reimbursement requests for employee: superadmin
2025-06-13 23:00:57 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:79 - _get_collection(): Database not connected, establishing connection...
2025-06-13 23:00:57 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:84 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-13 23:00:59 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 23:00:59 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:94 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-13 23:00:59 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 23:00:59 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 23:00:59 [INFO] app.application.use_cases.reimbursement.get_reimbursement_requests_use_case:121 - get_requests_by_employee(): Retrieved 0 reimbursement requests for employee: superadmin
2025-06-13 23:00:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57468 - "GET /api/v2/reimbursements/ HTTP/1.1" 200
2025-06-13 23:40:21 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 513, in _configured_socket_interface
    ssl_sock = ssl_context.wrap_socket(sock, server_hostname=host)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 455, in wrap_socket
    return self.sslsocket_class._create(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sock=sock,
        ^^^^^^^^^^
    ...<5 lines>...
        session=session
        ^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1076, in _create
    self.do_handshake()
    ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1372, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
TimeoutError: _ssl.c:1011: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 527, in _configured_socket_interface
    _raise_connection_failure(address, exc, "SSL handshake failed: ", timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: _ssl.c:1011: The handshake operation timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-13 23:40:21 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 513, in _configured_socket_interface
    ssl_sock = ssl_context.wrap_socket(sock, server_hostname=host)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 455, in wrap_socket
    return self.sslsocket_class._create(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sock=sock,
        ^^^^^^^^^^
    ...<5 lines>...
        session=session
        ^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1076, in _create
    self.do_handshake()
    ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1372, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
TimeoutError: _ssl.c:1011: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 527, in _configured_socket_interface
    _raise_connection_failure(address, exc, "SSL handshake failed: ", timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: _ssl.c:1011: The handshake operation timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-13 23:40:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65278 - "OPTIONS /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-13 23:40:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 23:40:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 23:40:31 [INFO] app.api.controllers.organisation_controller:68 - list_organisations(): Listing organisations with filters
2025-06-13 23:40:31 [INFO] app.application.use_cases.organisation.list_organisations_use_case:57 - execute(): Listing organisations with filters: OrganisationSearchFiltersDTO(name=None, organisation_type=None, status=None, city=None, state=None, country=None, min_employee_strength=None, max_employee_strength=None, has_available_capacity=None, is_gst_registered=None, created_after=None, created_before=None, page=1, page_size=10, sort_by='created_at', sort_order='desc')
2025-06-13 23:40:31 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-13 23:40:31 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-13 23:40:31 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-13 23:40:31 [INFO] app.application.use_cases.organisation.list_organisations_use_case:89 - execute(): Listed 1 organisations (total: 1)
2025-06-13 23:40:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65278 - "GET /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-13 23:54:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51274 - "OPTIONS /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-13 23:54:09 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 23:54:09 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 23:54:09 [INFO] app.api.controllers.organisation_controller:68 - list_organisations(): Listing organisations with filters
2025-06-13 23:54:09 [INFO] app.application.use_cases.organisation.list_organisations_use_case:57 - execute(): Listing organisations with filters: OrganisationSearchFiltersDTO(name=None, organisation_type=None, status=None, city=None, state=None, country=None, min_employee_strength=None, max_employee_strength=None, has_available_capacity=None, is_gst_registered=None, created_after=None, created_before=None, page=1, page_size=10, sort_by='created_at', sort_order='desc')
2025-06-13 23:54:09 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-13 23:54:09 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-13 23:54:09 [INFO] app.application.use_cases.organisation.list_organisations_use_case:89 - execute(): Listed 1 organisations (total: 1)
2025-06-13 23:54:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51274 - "GET /api/v2/organisations/?skip=0&limit=10 HTTP/1.1" 200
2025-06-13 23:58:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51947 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-13 23:58:38 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-13 23:58:38 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-13 23:58:38 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-13 23:58:39 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-13 23:58:39 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-13 23:58:39 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-13 23:58:39 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-13 23:58:39 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-13 23:58:39 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-13 23:58:39 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-13 23:58:40 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-13 23:58:40 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-13 23:58:40 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-14T02:28:40.055759
2025-06-13 23:58:40 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-13 23:58:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51947 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-13 23:58:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51947 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 23:58:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51949 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 23:58:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 23:58:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 23:58:40 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 23:58:40 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 23:58:40 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 23:58:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 23:58:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 23:58:40 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 23:58:40 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 23:58:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 23:58:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 23:58:40 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 23:58:40 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 23:58:40 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 23:58:40 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 23:58:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51947 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-13 23:58:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-13 23:58:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-13 23:58:40 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-13 23:58:40 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-13 23:58:40 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-13 23:58:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 23:58:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 23:58:40 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-13 23:58:40 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-13 23:58:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-13 23:58:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-13 23:58:40 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-13 23:58:40 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 23:58:40 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-13 23:58:40 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-13 23:58:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51947 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 00:34:37 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 00:34:37 [INFO] uvicorn.error:93 - _serve(): Finished server process [10936]
2025-06-14 02:46:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 02:46:47 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 02:46:47 [INFO] uvicorn.error:83 - _serve(): Started server process [18005]
2025-06-14 02:46:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 02:46:47 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-14 02:46:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 02:47:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57608 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-14 02:47:03 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-14 02:47:03 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-14 02:47:03 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-14 02:47:04 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 02:47:04 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 02:47:04 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-14 02:47:04 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-14 02:47:04 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-14 02:47:04 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-14 02:47:04 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-14 02:47:04 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-14 02:47:04 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-14 02:47:04 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-14T05:17:04.766734
2025-06-14 02:47:04 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-14 02:47:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57608 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-14 02:47:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57608 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 02:47:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57610 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 02:47:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 02:47:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 02:47:05 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 02:47:05 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 02:47:05 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 02:47:05 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 02:47:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 02:47:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 02:47:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 02:47:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 02:47:05 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 02:47:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 02:47:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 02:47:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 02:47:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 02:47:05 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 02:47:05 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 02:47:05 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 02:47:05 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 02:47:05 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 02:47:05 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-14 02:47:05 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-14 02:47:05 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-14 02:47:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-14 02:47:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-14 02:47:05 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 02:47:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-14 02:47:05 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 02:47:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 02:47:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 02:47:05 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-14 02:47:05 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-14 02:47:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 02:47:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 02:47:05 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-14 02:47:05 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 02:47:05 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 02:47:05 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-14 02:47:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57608 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 02:47:06 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 02:47:06 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 02:47:06 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-14 02:47:06 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-14 02:47:06 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-14 02:47:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 02:47:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 02:47:06 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-14 02:47:06 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-14 02:47:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 02:47:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 02:47:06 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-14 02:47:06 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 02:47:06 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 02:47:06 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-14 02:47:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57608 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 02:47:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 02:47:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 02:47:19 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-14 02:47:19 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-14 02:47:19 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-14 02:47:19 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 02:47:19 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 02:47:19 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-14 02:47:19 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-14 02:47:19 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 02:47:19 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 02:47:19 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-14 02:47:19 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 02:47:19 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 02:47:19 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-14 02:47:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57625 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 02:47:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 02:47:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 02:47:19 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-14 02:47:19 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-14 02:47:19 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-14 02:47:19 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 02:47:19 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 02:47:19 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-14 02:47:20 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-14 02:47:20 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 02:47:20 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 02:47:20 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-14 02:47:20 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 02:47:20 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 02:47:20 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-14 02:47:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57625 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 03:47:06 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 03:47:06 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 03:47:06 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-14 03:47:06 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 03:47:06 [INFO] uvicorn.error:93 - _serve(): Finished server process [18005]
2025-06-14 05:08:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 05:08:25 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 05:08:25 [INFO] uvicorn.error:83 - _serve(): Started server process [30392]
2025-06-14 05:08:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 05:08:25 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-14 05:08:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 05:08:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60395 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-14 05:08:30 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-14 05:08:30 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-14 05:08:30 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-14 05:08:31 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 05:08:31 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 05:08:31 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-14 05:08:31 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-14 05:08:31 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-14 05:08:31 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-14 05:08:31 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-14 05:08:32 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-14 05:08:32 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-14 05:08:32 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-14T07:38:32.332640
2025-06-14 05:08:32 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-14 05:08:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60395 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-14 05:08:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60395 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 05:08:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60397 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 05:08:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 05:08:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 05:08:32 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 05:08:32 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 05:08:32 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 05:08:32 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 05:08:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 05:08:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 05:08:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 05:08:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 05:08:32 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 05:08:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 05:08:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 05:08:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 05:08:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 05:08:32 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 05:08:32 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 05:08:32 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 05:08:32 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 05:08:32 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 05:08:32 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-14 05:08:32 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-14 05:08:32 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-14 05:08:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-14 05:08:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-14 05:08:33 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 05:08:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-14 05:08:33 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 05:08:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 05:08:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 05:08:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-14 05:08:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-14 05:08:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 05:08:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 05:08:33 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-14 05:08:33 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 05:08:33 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 05:08:33 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-14 05:08:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60395 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 05:08:33 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 05:08:33 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 05:08:33 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-14 05:08:33 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-14 05:08:33 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-14 05:08:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 05:08:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 05:08:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-14 05:08:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-14 05:08:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 05:08:34 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 05:08:34 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-14 05:08:34 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 05:08:34 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 05:08:34 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-14 05:08:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60395 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 05:08:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 05:08:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 05:08:40 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-14 05:08:40 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-14 05:08:40 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-14 05:08:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 05:08:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 05:08:40 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-14 05:08:40 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-14 05:08:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 05:08:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 05:08:40 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-14 05:08:40 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 05:08:40 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 05:08:40 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-14 05:08:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60412 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 05:08:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 05:08:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 05:08:40 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-14 05:08:40 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-14 05:08:40 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-14 05:08:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 05:08:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 05:08:40 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-14 05:08:40 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-14 05:08:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 05:08:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 05:08:40 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-14 05:08:40 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 05:08:40 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 05:08:40 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-14 05:08:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60412 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 05:09:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60500 - "OPTIONS /api/v2/payouts?year=2025&page=1&limit=10 HTTP/1.1" 200
2025-06-14 05:09:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60500 - "GET /api/v2/payouts?year=2025&page=1&limit=10 HTTP/1.1" 404
2025-06-14 05:09:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60500 - "GET /api/v2/payouts?year=2025&page=1&limit=10 HTTP/1.1" 404
2025-06-14 05:09:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60500 - "OPTIONS /api/v2/employee-leave/ HTTP/1.1" 200
2025-06-14 05:09:11 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 05:09:11 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 05:09:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 05:09:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 05:09:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 05:09:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 05:09:11 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 05:09:11 [INFO] app.api.routes.employee_leave_routes_v2:105 - get_all_employee_leaves(): Retrieving all employee leaves by: superadmin
2025-06-14 05:09:11 [INFO] app.api.controllers.employee_leave_controller:287 - search_leaves(): Searching leaves with filters in org: localhost
2025-06-14 05:09:11 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:205 - search_employee_leaves(): Searching employee leaves with filters
2025-06-14 05:09:11 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:94 - _get_collection(): Successfully retrieved collection: employee_leaves from database: pms_localhost
2025-06-14 05:09:11 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:631 - search(): Search returned 1 employee leaves
2025-06-14 05:09:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60500 - "GET /api/v2/employee-leave/ HTTP/1.1" 200
2025-06-14 05:09:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60580 - "GET /api/v2/payouts?year=2025&page=1&limit=10 HTTP/1.1" 404
2025-06-14 05:09:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60580 - "GET /api/v2/payouts?year=2025&page=1&limit=10 HTTP/1.1" 404
2025-06-14 05:16:35 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-14 05:16:35 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-14 05:16:35 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-14 05:16:36 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 05:16:36 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 05:16:36 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-14 05:16:36 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-14 05:16:36 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-14 05:16:36 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-14 05:16:36 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-14 05:16:36 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-14 05:16:36 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-14T07:46:36.836764
2025-06-14 05:16:36 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-14 05:16:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62206 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-14 05:16:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 05:16:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 05:16:37 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-14 05:16:37 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-14 05:16:37 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-14 05:16:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 05:16:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 05:16:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-14 05:16:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-14 05:16:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 05:16:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 05:16:37 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-14 05:16:37 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 05:16:37 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 05:16:37 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-14 05:16:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62206 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 05:16:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 05:16:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 05:16:37 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-14 05:16:37 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-14 05:16:37 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-14 05:16:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 05:16:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 05:16:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-14 05:16:37 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-14 05:16:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 05:16:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 05:16:37 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-14 05:16:37 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 05:16:37 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 05:16:37 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-14 05:16:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62206 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 05:16:46 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 05:16:46 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 05:16:46 [INFO] app.api.routes.employee_leave_routes_v2:105 - get_all_employee_leaves(): Retrieving all employee leaves by: superadmin
2025-06-14 05:16:46 [INFO] app.api.controllers.employee_leave_controller:287 - search_leaves(): Searching leaves with filters in org: localhost
2025-06-14 05:16:46 [INFO] app.application.use_cases.employee_leave.get_employee_leaves_use_case:205 - search_employee_leaves(): Searching employee leaves with filters
2025-06-14 05:16:46 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:94 - _get_collection(): Successfully retrieved collection: employee_leaves from database: pms_localhost
2025-06-14 05:16:46 [INFO] app.infrastructure.repositories.employee_leave_repository_impl:631 - search(): Search returned 1 employee leaves
2025-06-14 05:16:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62230 - "GET /api/v2/employee-leave/ HTTP/1.1" 200
2025-06-14 14:03:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:03:56 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:03:56 [INFO] uvicorn.error:83 - _serve(): Started server process [34332]
2025-06-14 14:03:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:03:56 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-14 14:03:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:04:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:04:05 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:04:05 [INFO] uvicorn.error:83 - _serve(): Started server process [34345]
2025-06-14 14:04:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:04:05 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-14 14:04:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:04:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57620 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-14 14:04:47 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-14 14:04:47 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-14 14:04:47 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-14 14:04:48 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 14:04:48 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 14:04:49 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-14 14:04:49 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-14 14:04:49 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-14 14:04:49 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-14 14:04:49 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-14 14:04:49 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-14 14:04:49 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-14 14:04:49 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-14T16:34:49.637144
2025-06-14 14:04:49 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-14 14:04:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57620 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-14 14:04:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57620 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 14:04:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57622 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 14:04:49 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:04:49 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:04:49 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 14:04:49 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 14:04:49 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 14:04:49 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 14:04:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 14:04:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 14:04:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 14:04:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 14:04:49 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 14:04:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 14:04:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 14:04:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 14:04:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 14:04:49 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 14:04:49 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 14:04:49 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 14:04:49 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 14:04:49 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 14:04:49 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-14 14:04:49 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-14 14:04:49 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-14 14:04:49 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-14 14:04:49 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-14 14:04:52 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 14:04:52 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-14 14:04:52 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 14:04:52 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:04:52 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 14:04:52 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-14 14:04:53 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-14 14:04:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:04:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 14:04:53 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-14 14:04:53 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 14:04:53 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 14:04:53 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-14 14:04:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57639 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 14:04:53 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:04:53 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:04:53 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-14 14:04:53 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-14 14:04:53 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-14 14:04:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:04:54 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 14:04:54 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-14 14:04:54 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-14 14:04:54 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:04:54 [INFO] app.infrastructure.repositories.mongodb_user_repository:1557 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 14:04:54 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-14 14:04:55 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 14:04:55 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 14:04:55 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-14 14:04:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57639 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 14:10:06 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 14:10:06 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 14:10:06 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-14 14:10:06 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 14:10:06 [INFO] uvicorn.error:93 - _serve(): Finished server process [34345]
2025-06-14 14:10:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:10:16 [INFO] app.main:85 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:10:16 [INFO] uvicorn.error:83 - _serve(): Started server process [34409]
2025-06-14 14:10:16 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:10:16 [INFO] app.main:39 - lifespan(): Running startup tasks...
2025-06-14 14:10:16 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:24:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59704 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 200
2025-06-14 14:24:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59706 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:24:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59737 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:24:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59737 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:25:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59848 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:25:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59848 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:25:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59848 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:34:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60309 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:34:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60309 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:34:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60309 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:34:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60431 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 200
2025-06-14 14:34:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60432 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 200
2025-06-14 14:34:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60431 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:34:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60432 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:34:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60432 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:34:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60432 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:34:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60432 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:34:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60432 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:34:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60432 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:34:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60432 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:34:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60432 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 404
2025-06-14 14:37:22 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 14:37:22 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 14:37:22 [INFO] app.main:41 - lifespan(): Running shutdown tasks...
2025-06-14 14:37:22 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 14:37:22 [INFO] uvicorn.error:93 - _serve(): Finished server process [34409]
2025-06-14 14:37:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:37:35 [INFO] app.main:86 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:37:35 [INFO] uvicorn.error:83 - _serve(): Started server process [35058]
2025-06-14 14:37:35 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:37:35 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 14:37:35 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:37:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:37:46 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:37:46 [INFO] uvicorn.error:83 - _serve(): Started server process [35068]
2025-06-14 14:37:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:37:46 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 14:37:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:38:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61043 - "GET /api/v2/taxation/employee-selection?skip=0&limit=10 HTTP/1.1" 403
2025-06-14 14:38:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61051 - "GET /docs HTTP/1.1" 200
2025-06-14 14:38:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61053 - "GET /openapi.json HTTP/1.1" 200
2025-06-14 14:38:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61057 - "GET /api/v2/taxation/health HTTP/1.1" 500
2025-06-14 14:38:54 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'string_type', 'loc': ('response', 'features'), 'msg': 'Input should be a valid string', 'input': ['Comprehensive tax calculation', 'All income types supported', 'Perquisites calculation', 'House property income', 'Capital gains', 'Retirement benefits', 'Monthly payroll with LWP', 'Mid-year scenarios', 'Scenario comparison', 'Tax optimization']}

2025-06-14 14:39:09 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 14:39:09 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 14:39:09 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 14:39:09 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 14:39:09 [INFO] uvicorn.error:93 - _serve(): Finished server process [35068]
2025-06-14 14:39:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:39:26 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:39:26 [INFO] uvicorn.error:83 - _serve(): Started server process [35383]
2025-06-14 14:39:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:39:26 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 14:39:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:39:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61128 - "GET /api/v2/taxation/health HTTP/1.1" 500
2025-06-14 14:39:26 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'string_type', 'loc': ('response', 'features'), 'msg': 'Input should be a valid string', 'input': ['Comprehensive tax calculation', 'All income types supported', 'Perquisites calculation', 'House property income', 'Capital gains', 'Retirement benefits', 'Monthly payroll with LWP', 'Mid-year scenarios', 'Scenario comparison', 'Tax optimization']}

2025-06-14 14:39:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61146 - "GET /docs HTTP/1.1" 200
2025-06-14 14:39:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:39:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:40:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61160 - "GET /api/v2/taxation/employee-selection?skip=0&limit=10 HTTP/1.1" 403
2025-06-14 14:40:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 14:40:54 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 14:40:54 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 14:40:54 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 14:40:54 [INFO] uvicorn.error:93 - _serve(): Finished server process [35383]
2025-06-14 14:41:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:41:22 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:41:22 [INFO] uvicorn.error:83 - _serve(): Started server process [35581]
2025-06-14 14:41:22 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:41:22 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 14:41:22 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:41:25 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:41:25 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:41:25 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 14:41:25 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 14:41:25 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 14:41:25 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 14:41:25 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 14:41:25 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 14:41:25 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 14:41:25 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 14:41:25 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 14:41:25 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 14:41:25 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 14:41:25 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 14:41:25 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 14:41:25 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 14:41:25 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 14:41:25 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 14:41:25 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 14:41:25 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 14:41:25 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:41:25 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: UserSearchFiltersDTO.__init__() got an unexpected keyword argument 'skip'
2025-06-14 14:41:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61468 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:41:25 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/routes/taxation_routes.py", line 517, in get_employees_for_selection
    response = await controller.get_employees_for_selection(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        query, current_user
        ^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/controllers/taxation_controller.py", line 187, in get_employees_for_selection
    response = await self.get_employees_for_selection_use_case.execute(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        query, current_user
        ^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/application/use_cases/taxation/get_employees_for_selection_use_case.py", line 55, in execute
    user_filters = UserSearchFiltersDTO(
        skip=query.skip,
    ...<5 lines>...
        include_inactive=query.status == "inactive" if query.status else False
    )
TypeError: UserSearchFiltersDTO.__init__() got an unexpected keyword argument 'skip'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/routes/taxation_routes.py", line 524, in get_employees_for_selection
    status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
2025-06-14 14:41:25 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:41:25 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:41:25 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:41:25 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: UserSearchFiltersDTO.__init__() got an unexpected keyword argument 'skip'
2025-06-14 14:41:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61501 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:41:25 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/routes/taxation_routes.py", line 517, in get_employees_for_selection
    response = await controller.get_employees_for_selection(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        query, current_user
        ^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/controllers/taxation_controller.py", line 187, in get_employees_for_selection
    response = await self.get_employees_for_selection_use_case.execute(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        query, current_user
        ^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/application/use_cases/taxation/get_employees_for_selection_use_case.py", line 55, in execute
    user_filters = UserSearchFiltersDTO(
        skip=query.skip,
    ...<5 lines>...
        include_inactive=query.status == "inactive" if query.status else False
    )
TypeError: UserSearchFiltersDTO.__init__() got an unexpected keyword argument 'skip'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/routes/taxation_routes.py", line 524, in get_employees_for_selection
    status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
2025-06-14 14:41:26 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:41:26 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:41:26 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:41:26 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: UserSearchFiltersDTO.__init__() got an unexpected keyword argument 'skip'
2025-06-14 14:41:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61474 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:41:26 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/routes/taxation_routes.py", line 517, in get_employees_for_selection
    response = await controller.get_employees_for_selection(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        query, current_user
        ^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/controllers/taxation_controller.py", line 187, in get_employees_for_selection
    response = await self.get_employees_for_selection_use_case.execute(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        query, current_user
        ^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/application/use_cases/taxation/get_employees_for_selection_use_case.py", line 55, in execute
    user_filters = UserSearchFiltersDTO(
        skip=query.skip,
    ...<5 lines>...
        include_inactive=query.status == "inactive" if query.status else False
    )
TypeError: UserSearchFiltersDTO.__init__() got an unexpected keyword argument 'skip'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/routes/taxation_routes.py", line 524, in get_employees_for_selection
    status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
2025-06-14 14:41:26 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:41:26 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:41:26 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:41:26 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: UserSearchFiltersDTO.__init__() got an unexpected keyword argument 'skip'
2025-06-14 14:41:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61505 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:41:26 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/routes/taxation_routes.py", line 517, in get_employees_for_selection
    response = await controller.get_employees_for_selection(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        query, current_user
        ^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/controllers/taxation_controller.py", line 187, in get_employees_for_selection
    response = await self.get_employees_for_selection_use_case.execute(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        query, current_user
        ^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/application/use_cases/taxation/get_employees_for_selection_use_case.py", line 55, in execute
    user_filters = UserSearchFiltersDTO(
        skip=query.skip,
    ...<5 lines>...
        include_inactive=query.status == "inactive" if query.status else False
    )
TypeError: UserSearchFiltersDTO.__init__() got an unexpected keyword argument 'skip'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/routes/taxation_routes.py", line 524, in get_employees_for_selection
    status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
2025-06-14 14:41:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:41:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:41:28 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:41:28 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: UserSearchFiltersDTO.__init__() got an unexpected keyword argument 'skip'
2025-06-14 14:41:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61513 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:41:28 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/routes/taxation_routes.py", line 517, in get_employees_for_selection
    response = await controller.get_employees_for_selection(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        query, current_user
        ^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/controllers/taxation_controller.py", line 187, in get_employees_for_selection
    response = await self.get_employees_for_selection_use_case.execute(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        query, current_user
        ^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/application/use_cases/taxation/get_employees_for_selection_use_case.py", line 55, in execute
    user_filters = UserSearchFiltersDTO(
        skip=query.skip,
    ...<5 lines>...
        include_inactive=query.status == "inactive" if query.status else False
    )
TypeError: UserSearchFiltersDTO.__init__() got an unexpected keyword argument 'skip'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/routes/taxation_routes.py", line 524, in get_employees_for_selection
    status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
2025-06-14 14:41:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:41:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:41:28 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:41:28 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: UserSearchFiltersDTO.__init__() got an unexpected keyword argument 'skip'
2025-06-14 14:41:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61515 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:41:28 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/routes/taxation_routes.py", line 517, in get_employees_for_selection
    response = await controller.get_employees_for_selection(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        query, current_user
        ^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/controllers/taxation_controller.py", line 187, in get_employees_for_selection
    response = await self.get_employees_for_selection_use_case.execute(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        query, current_user
        ^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/application/use_cases/taxation/get_employees_for_selection_use_case.py", line 55, in execute
    user_filters = UserSearchFiltersDTO(
        skip=query.skip,
    ...<5 lines>...
        include_inactive=query.status == "inactive" if query.status else False
    )
TypeError: UserSearchFiltersDTO.__init__() got an unexpected keyword argument 'skip'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/api/routes/taxation_routes.py", line 524, in get_employees_for_selection
    status_code=status.HTTP_500_INTERNAL_SERVER_ERROR,
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'HTTP_500_INTERNAL_SERVER_ERROR'
2025-06-14 14:43:32 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 14:43:32 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 14:43:32 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 14:43:32 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 14:43:32 [INFO] uvicorn.error:93 - _serve(): Finished server process [35581]
2025-06-14 14:43:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:43:44 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:43:44 [INFO] uvicorn.error:83 - _serve(): Started server process [35616]
2025-06-14 14:43:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:43:44 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 14:43:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:44:07 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 14:44:08 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 14:44:08 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 14:44:08 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 14:44:08 [INFO] uvicorn.error:93 - _serve(): Finished server process [35616]
2025-06-14 14:44:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:44:22 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:44:22 [INFO] uvicorn.error:83 - _serve(): Started server process [35639]
2025-06-14 14:44:22 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:44:22 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 14:44:22 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:44:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:44:34 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:44:34 [INFO] uvicorn.error:83 - _serve(): Started server process [35664]
2025-06-14 14:44:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:44:34 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 14:44:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:44:52 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 14:44:52 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 14:44:52 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 14:44:52 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 14:44:52 [INFO] uvicorn.error:93 - _serve(): Finished server process [35664]
2025-06-14 14:44:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:45:09 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:45:09 [INFO] uvicorn.error:83 - _serve(): Started server process [35682]
2025-06-14 14:45:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:45:09 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 14:45:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:45:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:45:23 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:45:23 [INFO] uvicorn.error:83 - _serve(): Started server process [35718]
2025-06-14 14:45:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:45:23 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 14:45:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:45:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:45:34 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:45:34 [INFO] uvicorn.error:83 - _serve(): Started server process [35735]
2025-06-14 14:45:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:45:34 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 14:45:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:45:52 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 14:45:52 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 14:45:52 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 14:45:52 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 14:45:52 [INFO] uvicorn.error:93 - _serve(): Finished server process [35735]
2025-06-14 14:45:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:46:04 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:46:04 [INFO] uvicorn.error:83 - _serve(): Started server process [35750]
2025-06-14 14:46:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:46:04 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 14:46:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:46:11 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 14:46:11 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 14:46:11 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 14:46:11 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 14:46:11 [INFO] uvicorn.error:93 - _serve(): Finished server process [35750]
2025-06-14 14:46:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:46:23 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:46:23 [INFO] uvicorn.error:83 - _serve(): Started server process [35769]
2025-06-14 14:46:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:46:23 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 14:46:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:46:35 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Not enough segments
2025-06-14 14:46:35 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Not enough segments
2025-06-14 14:46:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62263 - "GET /api/v2/taxation/employee-selection?skip=0&limit=10 HTTP/1.1" 401
2025-06-14 14:46:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:46:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:48:57 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 14:48:57 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 14:48:57 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 14:48:57 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 14:48:57 [INFO] uvicorn.error:93 - _serve(): Finished server process [35769]
2025-06-14 14:49:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:49:09 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:49:09 [INFO] uvicorn.error:83 - _serve(): Started server process [35938]
2025-06-14 14:49:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:49:09 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 14:49:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:49:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62791 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 200
2025-06-14 14:49:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62793 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 200
2025-06-14 14:49:16 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:49:16 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:49:16 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 14:49:16 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 14:49:16 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 14:49:16 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 14:49:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 14:49:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 14:49:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 14:49:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 14:49:16 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 14:49:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 14:49:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 14:49:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 14:49:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 14:49:16 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 14:49:16 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 14:49:16 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 14:49:16 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 14:49:16 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 14:49:16 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:49:16 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:49:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-14 14:49:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-14 14:49:17 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 14:49:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-14 14:49:17 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 14:49:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:49:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:49:17 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: 'CurrentUser' object has no attribute 'organization_id'
2025-06-14 14:49:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62791 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:49:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:49:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:49:17 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:49:17 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:49:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:49:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:49:17 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: 'CurrentUser' object has no attribute 'organization_id'
2025-06-14 14:49:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62791 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:49:18 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:49:18 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:49:18 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:49:18 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:49:18 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:49:18 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:49:18 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: 'CurrentUser' object has no attribute 'organization_id'
2025-06-14 14:49:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62791 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:49:18 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:49:18 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:49:18 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:49:18 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:49:18 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:49:18 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:49:18 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: 'CurrentUser' object has no attribute 'organization_id'
2025-06-14 14:49:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62791 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:49:20 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:49:20 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:49:20 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:49:20 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:49:20 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:49:20 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:49:20 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: 'CurrentUser' object has no attribute 'organization_id'
2025-06-14 14:49:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62791 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:49:20 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:49:20 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:49:20 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:49:20 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:49:20 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:49:21 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:49:21 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: 'CurrentUser' object has no attribute 'organization_id'
2025-06-14 14:49:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62791 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:50:32 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 14:50:32 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 14:50:32 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 14:50:32 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 14:50:32 [INFO] uvicorn.error:93 - _serve(): Finished server process [35938]
2025-06-14 14:50:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:50:47 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:50:47 [INFO] uvicorn.error:83 - _serve(): Started server process [35968]
2025-06-14 14:50:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:50:47 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 14:50:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:50:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:50:57 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:50:57 [INFO] uvicorn.error:83 - _serve(): Started server process [35991]
2025-06-14 14:50:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:50:57 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 14:50:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:51:01 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:51:01 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:51:01 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 14:51:01 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 14:51:01 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 14:51:01 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 14:51:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 14:51:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 14:51:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 14:51:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 14:51:01 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 14:51:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 14:51:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 14:51:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 14:51:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 14:51:01 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 14:51:01 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 14:51:01 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 14:51:01 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 14:51:01 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 14:51:01 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:51:01 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:51:01 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-14 14:51:01 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-14 14:51:05 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 14:51:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-14 14:51:05 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 14:51:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:51:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:51:05 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: 'CurrentUser' object has no attribute 'localhost'
2025-06-14 14:51:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63076 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:51:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:51:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:51:05 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:51:05 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:51:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:51:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:51:06 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: 'CurrentUser' object has no attribute 'localhost'
2025-06-14 14:51:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63076 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:51:06 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:51:06 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:51:06 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:51:06 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:51:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:51:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:51:07 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: 'CurrentUser' object has no attribute 'localhost'
2025-06-14 14:51:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63076 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:51:07 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:51:07 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:51:07 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:51:07 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:51:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:51:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:51:07 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: 'CurrentUser' object has no attribute 'localhost'
2025-06-14 14:51:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63076 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:51:09 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:51:09 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:51:09 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:51:09 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:51:09 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:51:09 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:51:09 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: 'CurrentUser' object has no attribute 'localhost'
2025-06-14 14:51:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63076 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:51:09 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:51:09 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:51:09 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:51:09 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:51:09 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:51:10 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:51:10 [ERROR] app.api.controllers.taxation_controller:195 - get_employees_for_selection(): Error getting employees for selection: 'CurrentUser' object has no attribute 'localhost'
2025-06-14 14:51:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63076 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 500
2025-06-14 14:51:38 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 14:51:38 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 14:51:38 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 14:51:38 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 14:51:38 [INFO] uvicorn.error:93 - _serve(): Finished server process [35991]
2025-06-14 14:51:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 14:51:49 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 14:51:49 [INFO] uvicorn.error:83 - _serve(): Started server process [36015]
2025-06-14 14:51:49 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 14:51:49 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 14:51:49 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 14:51:56 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:51:56 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:51:56 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 14:51:56 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 14:51:56 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 14:51:56 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 14:51:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 14:51:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 14:51:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 14:51:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 14:51:56 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 14:51:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 14:51:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 14:51:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 14:51:56 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 14:51:56 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 14:51:56 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 14:51:56 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 14:51:56 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 14:51:56 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 14:51:56 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:51:56 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:51:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-14 14:51:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-14 14:52:04 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 14:52:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-14 14:52:04 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 14:52:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:52:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:52:04 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-14 14:52:06 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 14:52:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63172 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 200
2025-06-14 14:52:06 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:52:06 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:52:06 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:52:06 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:52:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:52:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:52:08 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 14:52:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63172 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 200
2025-06-14 14:53:44 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:53:44 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:53:44 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:54:07 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:54:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:54:07 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:54:07 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:54:24 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:54:25 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:54:25 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:54:25 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:54:25 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:54:28 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:54:30 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:54:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:54:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:54:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:54:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:54:49 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:54:52 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:54:52 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:55:08 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:55:08 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:55:08 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:55:08 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:55:08 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:55:08 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:55:08 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:55:08 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:55:08 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:55:08 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:55:08 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:55:08 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:55:09 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:55:09 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:55:10 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 14:55:10 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 14:55:10 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:55:10 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 14:55:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63838 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 200
2025-06-14 14:55:10 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 14:55:12 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 14:55:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63777 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 200
2025-06-14 14:55:12 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 14:56:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:56:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:56:24 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:56:24 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:56:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:56:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:56:25 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 14:56:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64401 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 200
2025-06-14 14:56:26 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:56:26 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:56:26 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:56:26 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:56:26 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:56:26 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:56:27 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 14:56:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64401 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 200
2025-06-14 14:58:15 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 14:58:15 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 14:58:15 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 14:58:15 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 14:58:15 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 14:58:15 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 14:58:16 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 14:58:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64907 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 200
2025-06-14 15:05:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49936 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 200
2025-06-14 15:05:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 15:05:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 15:05:24 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2023-24'
2025-06-14 15:05:24 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 15:05:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 15:05:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 15:05:25 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 15:05:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49936 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2023-24 HTTP/1.1" 200
2025-06-14 15:50:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58778 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 15:50:50 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 15:50:50 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 15:50:50 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 15:50:50 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 15:50:50 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 15:50:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 15:50:51 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 15:50:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58778 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 15:52:07 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 15:52:07 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 15:52:07 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 15:52:07 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 15:52:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 15:52:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 15:52:08 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 15:52:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58989 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 15:52:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59016 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2024-25 HTTP/1.1" 200
2025-06-14 15:52:18 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 15:52:18 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 15:52:18 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2024-25'
2025-06-14 15:52:18 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 15:52:18 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 15:52:18 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 15:52:19 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 15:52:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59018 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2024-25 HTTP/1.1" 200
2025-06-14 15:52:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 15:52:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 15:52:31 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 15:52:31 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 15:52:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 15:52:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 15:52:32 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 15:52:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59055 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 15:52:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 15:52:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 15:52:32 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 15:52:32 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 15:52:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 15:52:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 15:52:32 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 15:52:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59055 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 15:57:48 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 15:57:48 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 15:57:48 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 15:57:48 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 15:57:48 [INFO] uvicorn.error:93 - _serve(): Finished server process [36015]
2025-06-14 15:58:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 15:58:32 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 15:58:32 [INFO] uvicorn.error:83 - _serve(): Started server process [38663]
2025-06-14 15:58:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 15:58:32 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 15:58:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 15:58:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 15:59:10 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 15:59:10 [INFO] uvicorn.error:83 - _serve(): Started server process [38717]
2025-06-14 15:59:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 15:59:10 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 15:59:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 15:59:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 15:59:32 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 15:59:32 [INFO] uvicorn.error:83 - _serve(): Started server process [38744]
2025-06-14 15:59:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 15:59:32 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 15:59:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 15:59:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 15:59:52 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 15:59:52 [INFO] uvicorn.error:83 - _serve(): Started server process [38784]
2025-06-14 15:59:52 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 15:59:52 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 15:59:52 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 16:00:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:00:21 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 16:00:21 [INFO] uvicorn.error:83 - _serve(): Started server process [38820]
2025-06-14 16:00:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 16:00:21 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 16:00:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 16:06:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 16:06:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 16:06:59 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 16:06:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 16:06:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [38820]
2025-06-14 16:07:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:07:29 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 16:07:29 [INFO] uvicorn.error:83 - _serve(): Started server process [39218]
2025-06-14 16:07:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 16:07:29 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 16:07:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 16:07:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:09:05 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 16:09:05 [INFO] uvicorn.error:83 - _serve(): Started server process [39262]
2025-06-14 16:09:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 16:09:05 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 16:09:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 16:09:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61601 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:09:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:09:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:09:19 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 16:09:19 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 16:09:19 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 16:09:19 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 16:09:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 16:09:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 16:09:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 16:09:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 16:09:19 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 16:09:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 16:09:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 16:09:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 16:09:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 16:09:19 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 16:09:19 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 16:09:19 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 16:09:19 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 16:09:19 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 16:09:19 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 16:09:19 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 16:09:19 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-14 16:09:19 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-14 16:09:21 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 16:09:21 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-14 16:09:21 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 16:09:21 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 16:09:21 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 16:09:21 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-14 16:09:22 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 16:09:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61601 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:14:33 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 16:14:34 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 16:14:34 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 16:14:34 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 16:14:34 [INFO] uvicorn.error:93 - _serve(): Finished server process [39262]
2025-06-14 16:14:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:14:59 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 16:14:59 [INFO] uvicorn.error:83 - _serve(): Started server process [39629]
2025-06-14 16:14:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 16:14:59 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 16:14:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 16:15:17 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 16:15:17 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 16:15:17 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 16:15:17 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 16:15:17 [INFO] uvicorn.error:93 - _serve(): Finished server process [39629]
2025-06-14 16:15:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:15:37 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 16:15:37 [INFO] uvicorn.error:83 - _serve(): Started server process [39685]
2025-06-14 16:15:37 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 16:15:37 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 16:15:37 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 16:17:09 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:17:09 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:17:09 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 16:17:09 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 16:17:09 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 16:17:10 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 16:17:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 16:17:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 16:17:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 16:17:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 16:17:10 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 16:17:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 16:17:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 16:17:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 16:17:10 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 16:17:10 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 16:17:10 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 16:17:10 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 16:17:10 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 16:17:10 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 16:17:10 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 16:17:10 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 16:17:10 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-14 16:17:10 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-14 16:17:11 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 16:17:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-14 16:17:11 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 16:17:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 16:17:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 16:17:11 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-14 16:17:12 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 16:17:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62848 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:22:39 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 16:22:39 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 16:22:39 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 16:22:39 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 16:22:39 [INFO] uvicorn.error:93 - _serve(): Finished server process [39685]
2025-06-14 16:22:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:22:54 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 16:22:54 [INFO] uvicorn.error:83 - _serve(): Started server process [40177]
2025-06-14 16:22:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 16:22:54 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 16:22:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 16:22:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63956 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:22:58 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:22:58 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:22:58 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 16:22:58 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 16:22:58 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 16:22:58 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 16:22:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 16:22:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 16:22:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 16:22:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 16:22:58 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 16:22:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 16:22:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 16:22:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 16:22:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 16:22:58 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 16:22:58 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 16:22:58 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 16:22:58 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 16:22:58 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 16:22:58 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 16:22:58 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 16:22:58 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-14 16:22:58 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-14 16:23:00 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 16:23:00 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-14 16:23:00 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 16:23:00 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 16:23:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63956 - "OPTIONS /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:23:00 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 16:23:00 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-14 16:23:00 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:23:00 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:23:00 [INFO] app.api.controllers.taxation_controller:270 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:23:00 [ERROR] app.api.controllers.taxation_controller:422 - get_taxation_record_by_employee(): Error getting taxation record for employee EMP002: 2 validation errors for TaxationRecordSummaryDTO
organization_id
  Field required [type=missing, input_value={'taxation_id': 'tax_EMP0... '2024-01-20T15:45:00Z'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
status
  Field required [type=missing, input_value={'taxation_id': 'tax_EMP0... '2024-01-20T15:45:00Z'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-14 16:23:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63988 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 500
2025-06-14 16:23:01 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 16:23:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63958 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:23:01 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:23:01 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:23:02 [INFO] app.api.controllers.taxation_controller:270 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:23:02 [ERROR] app.api.controllers.taxation_controller:422 - get_taxation_record_by_employee(): Error getting taxation record for employee EMP002: 2 validation errors for TaxationRecordSummaryDTO
organization_id
  Field required [type=missing, input_value={'taxation_id': 'tax_EMP0... '2024-01-20T15:45:00Z'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
status
  Field required [type=missing, input_value={'taxation_id': 'tax_EMP0... '2024-01-20T15:45:00Z'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-14 16:23:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63958 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 500
2025-06-14 16:27:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:27:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:27:31 [INFO] app.api.controllers.taxation_controller:270 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:27:31 [ERROR] app.api.controllers.taxation_controller:422 - get_taxation_record_by_employee(): Error getting taxation record for employee EMP002: 2 validation errors for TaxationRecordSummaryDTO
organization_id
  Field required [type=missing, input_value={'taxation_id': 'tax_EMP0... '2024-01-20T15:45:00Z'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
status
  Field required [type=missing, input_value={'taxation_id': 'tax_EMP0... '2024-01-20T15:45:00Z'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-14 16:27:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64629 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 500
2025-06-14 16:27:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:27:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:27:37 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 16:27:37 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 16:27:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 16:27:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 16:27:37 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 16:27:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64638 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:27:42 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:27:42 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:27:42 [INFO] app.api.controllers.taxation_controller:270 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:27:42 [ERROR] app.api.controllers.taxation_controller:422 - get_taxation_record_by_employee(): Error getting taxation record for employee EMP002: 2 validation errors for TaxationRecordSummaryDTO
organization_id
  Field required [type=missing, input_value={'taxation_id': 'tax_EMP0... '2024-01-20T15:45:00Z'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
status
  Field required [type=missing, input_value={'taxation_id': 'tax_EMP0... '2024-01-20T15:45:00Z'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-14 16:27:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64638 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 500
2025-06-14 16:27:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:27:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:27:43 [INFO] app.api.controllers.taxation_controller:270 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:27:43 [ERROR] app.api.controllers.taxation_controller:422 - get_taxation_record_by_employee(): Error getting taxation record for employee EMP002: 2 validation errors for TaxationRecordSummaryDTO
organization_id
  Field required [type=missing, input_value={'taxation_id': 'tax_EMP0... '2024-01-20T15:45:00Z'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
status
  Field required [type=missing, input_value={'taxation_id': 'tax_EMP0... '2024-01-20T15:45:00Z'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-14 16:27:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64638 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 500
2025-06-14 16:27:45 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:27:45 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:27:45 [INFO] app.api.controllers.taxation_controller:270 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:27:45 [ERROR] app.api.controllers.taxation_controller:422 - get_taxation_record_by_employee(): Error getting taxation record for employee EMP002: 2 validation errors for TaxationRecordSummaryDTO
organization_id
  Field required [type=missing, input_value={'taxation_id': 'tax_EMP0... '2024-01-20T15:45:00Z'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
status
  Field required [type=missing, input_value={'taxation_id': 'tax_EMP0... '2024-01-20T15:45:00Z'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-14 16:27:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64638 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 500
2025-06-14 16:27:59 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:27:59 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:28:23 [INFO] app.api.controllers.taxation_controller:270 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:28:23 [ERROR] app.api.controllers.taxation_controller:422 - get_taxation_record_by_employee(): Error getting taxation record for employee EMP002: 2 validation errors for TaxationRecordSummaryDTO
organization_id
  Field required [type=missing, input_value={'taxation_id': 'tax_EMP0... '2024-01-20T15:45:00Z'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
status
  Field required [type=missing, input_value={'taxation_id': 'tax_EMP0... '2024-01-20T15:45:00Z'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-14 16:28:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64696 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 500
2025-06-14 16:29:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 16:29:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 16:29:59 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 16:29:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 16:29:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [40177]
2025-06-14 16:30:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:33:10 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 16:33:10 [INFO] uvicorn.error:83 - _serve(): Started server process [40718]
2025-06-14 16:33:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 16:33:10 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 16:33:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 16:33:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:36:07 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 16:36:07 [INFO] uvicorn.error:83 - _serve(): Started server process [40978]
2025-06-14 16:36:07 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 16:36:07 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 16:36:07 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 16:36:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:36:34 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 16:36:34 [INFO] uvicorn.error:83 - _serve(): Started server process [41279]
2025-06-14 16:36:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 16:36:34 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 16:36:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 16:36:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65526 - "OPTIONS /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:36:34 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:36:34 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:36:34 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 16:36:34 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 16:36:34 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 16:36:34 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 16:36:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 16:36:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 16:36:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 16:36:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 16:36:34 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 16:36:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 16:36:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 16:36:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 16:36:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 16:36:34 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 16:36:34 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 16:36:34 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 16:36:34 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 16:36:34 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 16:36:41 [INFO] app.api.controllers.taxation_controller:270 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:36:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65526 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:36:41 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 16:36:42 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 16:36:42 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 16:36:42 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 16:36:42 [INFO] uvicorn.error:93 - _serve(): Finished server process [41279]
2025-06-14 16:36:47 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:37:32 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 16:37:32 [INFO] uvicorn.error:83 - _serve(): Started server process [41330]
2025-06-14 16:37:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 16:37:32 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 16:37:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 16:37:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49189 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:37:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:37:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:37:32 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 16:37:32 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 16:37:32 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 16:37:32 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 16:37:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 16:37:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 16:37:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 16:37:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 16:37:32 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 16:37:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 16:37:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 16:37:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 16:37:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 16:37:32 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 16:37:32 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 16:37:32 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 16:37:32 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 16:37:32 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 16:37:32 [INFO] app.api.controllers.taxation_controller:183 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 16:37:32 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 16:37:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-14 16:37:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-14 16:37:33 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 16:37:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-14 16:37:33 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 16:37:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 16:37:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 16:37:33 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-14 16:37:33 [INFO] app.api.controllers.taxation_controller:191 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 16:37:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49189 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:37:47 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:37:47 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:45:30 [INFO] app.api.controllers.taxation_controller:270 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:45:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49199 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:45:30 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 16:45:30 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 16:45:30 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 16:45:30 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 16:45:30 [INFO] uvicorn.error:93 - _serve(): Finished server process [41330]
2025-06-14 16:45:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:45:54 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 16:45:54 [INFO] uvicorn.error:83 - _serve(): Started server process [42096]
2025-06-14 16:45:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 16:45:54 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 16:45:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 16:45:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:45:54 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:45:54 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 16:45:54 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 16:45:54 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 16:45:54 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 16:45:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 16:45:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 16:45:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 16:45:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 16:45:55 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 16:45:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 16:45:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 16:45:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 16:45:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 16:45:55 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 16:45:55 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 16:45:55 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 16:45:55 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 16:45:55 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 16:46:04 [INFO] app.api.controllers.taxation_controller:270 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:46:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49703 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:46:04 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 16:46:04 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 16:46:04 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 16:46:04 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 16:46:04 [INFO] uvicorn.error:93 - _serve(): Finished server process [42096]
2025-06-14 16:46:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:46:25 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 16:46:25 [INFO] uvicorn.error:83 - _serve(): Started server process [42151]
2025-06-14 16:46:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 16:46:25 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 16:46:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 16:46:45 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 16:46:45 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 16:46:45 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 16:46:45 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 16:46:45 [INFO] uvicorn.error:93 - _serve(): Finished server process [42151]
2025-06-14 16:47:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:47:21 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 16:47:21 [INFO] uvicorn.error:83 - _serve(): Started server process [42195]
2025-06-14 16:47:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 16:47:21 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 16:47:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 16:47:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:47:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:48:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:48:04 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 16:48:04 [INFO] uvicorn.error:83 - _serve(): Started server process [42267]
2025-06-14 16:48:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 16:48:04 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 16:48:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 16:48:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:48:16 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 16:48:16 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 16:48:16 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 16:48:16 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 16:48:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 16:48:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 16:48:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 16:48:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 16:48:16 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 16:48:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 16:48:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 16:48:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 16:48:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 16:48:16 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 16:48:16 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 16:48:16 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 16:48:16 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 16:48:16 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 16:49:01 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 16:49:01 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 16:49:01 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 16:49:01 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 16:49:01 [INFO] uvicorn.error:93 - _serve(): Finished server process [42267]
2025-06-14 16:49:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 16:49:13 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 16:49:13 [INFO] uvicorn.error:83 - _serve(): Started server process [42420]
2025-06-14 16:49:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 16:49:13 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 16:49:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 16:51:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50278 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:51:44 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:51:44 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:51:44 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 16:51:44 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 16:51:44 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 16:51:44 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 16:51:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 16:51:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 16:51:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 16:51:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 16:51:44 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 16:51:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 16:51:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 16:51:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 16:51:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 16:51:44 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 16:51:44 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 16:51:44 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 16:51:44 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 16:51:44 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 16:51:44 [INFO] app.api.controllers.taxation_controller:186 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 16:51:44 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 16:51:44 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-14 16:51:44 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-14 16:51:45 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 16:51:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-14 16:51:45 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 16:51:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 16:51:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 16:51:45 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-14 16:51:46 [INFO] app.api.controllers.taxation_controller:194 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 16:51:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50278 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:51:47 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:51:47 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:51:47 [INFO] app.api.controllers.taxation_controller:186 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 16:51:47 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 16:51:47 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 16:51:47 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 16:51:48 [INFO] app.api.controllers.taxation_controller:194 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 16:51:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50278 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:52:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50280 - "OPTIONS /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:52:21 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:52:21 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:52:21 [INFO] app.api.controllers.taxation_controller:273 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:52:21 [INFO] app.application.use_cases.taxation.get_taxation_record_by_employee_use_case:54 - execute(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:52:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50384 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:55:58 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:55:58 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:55:58 [INFO] app.api.controllers.taxation_controller:186 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 16:55:58 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 16:55:58 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 16:55:59 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 16:55:59 [INFO] app.api.controllers.taxation_controller:194 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 16:55:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50918 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:56:07 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:56:07 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:56:12 [INFO] app.api.controllers.taxation_controller:273 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:56:12 [INFO] app.application.use_cases.taxation.get_taxation_record_by_employee_use_case:54 - execute(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:56:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50936 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:56:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:56:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:56:40 [INFO] app.api.controllers.taxation_controller:186 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 16:56:40 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 16:56:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 16:56:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 16:56:40 [INFO] app.api.controllers.taxation_controller:194 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 16:56:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51014 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:56:42 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:56:42 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:56:42 [INFO] app.api.controllers.taxation_controller:273 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:56:42 [INFO] app.application.use_cases.taxation.get_taxation_record_by_employee_use_case:54 - execute(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:57:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51014 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:57:57 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:57:57 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:57:57 [INFO] app.api.controllers.taxation_controller:273 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:57:57 [INFO] app.application.use_cases.taxation.get_taxation_record_by_employee_use_case:54 - execute(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:58:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51046 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 16:58:01 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 16:58:01 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 16:58:01 [INFO] app.api.controllers.taxation_controller:273 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:58:01 [INFO] app.application.use_cases.taxation.get_taxation_record_by_employee_use_case:54 - execute(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 16:58:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51172 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 17:02:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53105 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 17:02:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 17:02:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 17:02:37 [INFO] app.api.controllers.taxation_controller:186 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 17:02:37 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 17:02:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 17:02:38 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 17:02:38 [INFO] app.api.controllers.taxation_controller:194 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 17:02:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53105 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 17:07:39 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 17:07:39 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 17:07:39 [INFO] app.api.controllers.taxation_controller:186 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 17:07:39 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 17:07:39 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 17:07:39 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 17:07:39 [INFO] app.api.controllers.taxation_controller:194 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 17:07:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54401 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 17:10:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54792 - "OPTIONS /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 17:10:21 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 17:10:21 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 17:10:21 [INFO] app.api.controllers.taxation_controller:273 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 17:10:21 [INFO] app.application.use_cases.taxation.get_taxation_record_by_employee_use_case:54 - execute(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 17:10:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54794 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 17:10:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54794 - "OPTIONS /api/v2/taxation/taxation/EMP002 HTTP/1.1" 200
2025-06-14 17:10:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54792 - "OPTIONS /api/v2/taxation/taxation/EMP002 HTTP/1.1" 200
2025-06-14 17:10:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54794 - "GET /api/v2/taxation/taxation/EMP002 HTTP/1.1" 404
2025-06-14 17:10:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54794 - "GET /api/v2/taxation/taxation/EMP002 HTTP/1.1" 404
2025-06-14 17:10:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54794 - "GET /api/v2/taxation/taxation/EMP002 HTTP/1.1" 404
2025-06-14 17:10:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54792 - "GET /api/v2/taxation/taxation/EMP002 HTTP/1.1" 404
2025-06-14 17:10:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54792 - "GET /api/v2/taxation/taxation/EMP002 HTTP/1.1" 404
2025-06-14 17:10:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54792 - "GET /api/v2/taxation/taxation/EMP002 HTTP/1.1" 404
2025-06-14 17:28:07 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-14 17:46:01 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 17:46:01 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 17:46:01 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 17:46:01 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 17:46:01 [INFO] uvicorn.error:93 - _serve(): Finished server process [42420]
2025-06-14 17:46:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 17:46:22 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 17:46:22 [INFO] uvicorn.error:83 - _serve(): Started server process [45599]
2025-06-14 17:46:22 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 17:46:22 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 17:46:22 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 17:47:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60683 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 17:47:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 17:47:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 17:47:02 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 17:47:02 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 17:47:02 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 17:47:02 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 17:47:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 17:47:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 17:47:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 17:47:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 17:47:02 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 17:47:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 17:47:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 17:47:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 17:47:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 17:47:02 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 17:47:02 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 17:47:02 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 17:47:02 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 17:47:02 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 17:47:02 [INFO] app.api.controllers.taxation_controller:186 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 17:47:02 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 17:47:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-14 17:47:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-14 17:47:04 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 17:47:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-14 17:47:04 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 17:47:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 17:47:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 17:47:04 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-14 17:47:04 [INFO] app.api.controllers.taxation_controller:194 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 17:47:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60687 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 17:50:14 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 17:50:14 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 17:50:14 [INFO] app.api.controllers.taxation_controller:186 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 17:50:14 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 17:50:14 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 17:50:14 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 17:50:14 [INFO] app.api.controllers.taxation_controller:194 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 17:50:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61460 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 17:50:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61522 - "OPTIONS /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 17:50:27 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 17:50:27 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 17:50:27 [INFO] app.api.controllers.taxation_controller:273 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 17:50:27 [INFO] app.application.use_cases.taxation.get_taxation_record_by_employee_use_case:54 - execute(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 17:50:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61522 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 17:50:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61522 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 17:50:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61524 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 17:50:33 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 17:50:33 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 17:50:33 [INFO] app.api.controllers.taxation_controller:273 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: None
2025-06-14 17:50:33 [INFO] app.application.use_cases.taxation.get_taxation_record_by_employee_use_case:54 - execute(): Getting taxation record for employee EMP002, tax_year: None
2025-06-14 17:50:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61522 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 17:50:35 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 17:50:35 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 17:50:35 [INFO] app.api.controllers.taxation_controller:273 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: None
2025-06-14 17:50:35 [INFO] app.application.use_cases.taxation.get_taxation_record_by_employee_use_case:54 - execute(): Getting taxation record for employee EMP002, tax_year: None
2025-06-14 17:50:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61522 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 18:33:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50960 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 18:33:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 18:33:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 18:33:03 [INFO] app.api.controllers.taxation_controller:186 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 18:33:03 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 18:33:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 18:33:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 18:33:03 [INFO] app.api.controllers.taxation_controller:194 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 18:33:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50960 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 18:33:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50960 - "OPTIONS /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 18:33:07 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 18:33:07 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 18:33:07 [INFO] app.api.controllers.taxation_controller:273 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 18:33:07 [INFO] app.application.use_cases.taxation.get_taxation_record_by_employee_use_case:54 - execute(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 18:34:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50962 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 18:34:45 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 18:34:45 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 18:34:45 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 18:34:45 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 18:34:45 [INFO] app.api.controllers.taxation_controller:273 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 18:34:45 [INFO] app.application.use_cases.taxation.get_taxation_record_by_employee_use_case:54 - execute(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 18:34:45 [INFO] app.api.controllers.taxation_controller:273 - get_taxation_record_by_employee(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 18:34:45 [INFO] app.application.use_cases.taxation.get_taxation_record_by_employee_use_case:54 - execute(): Getting taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 18:43:30 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 18:43:30 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 18:43:30 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 18:43:30 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 18:43:30 [INFO] uvicorn.error:93 - _serve(): Finished server process [45599]
2025-06-14 18:43:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 18:43:45 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 18:43:45 [INFO] uvicorn.error:83 - _serve(): Started server process [46140]
2025-06-14 18:43:45 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 18:43:45 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 18:43:45 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 18:44:05 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 18:44:05 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 18:44:05 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 18:44:05 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 18:44:05 [INFO] uvicorn.error:93 - _serve(): Finished server process [46140]
2025-06-14 18:44:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 18:44:23 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 18:44:23 [INFO] uvicorn.error:83 - _serve(): Started server process [46163]
2025-06-14 18:44:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 18:44:23 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 18:44:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 18:44:30 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 18:44:30 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 18:44:30 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 18:44:30 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 18:44:30 [INFO] uvicorn.error:93 - _serve(): Finished server process [46163]
2025-06-14 18:44:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 18:44:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 18:45:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 18:45:09 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 18:45:09 [INFO] uvicorn.error:83 - _serve(): Started server process [46230]
2025-06-14 18:45:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 18:45:09 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 18:45:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 18:45:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 18:45:24 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 18:45:24 [INFO] uvicorn.error:83 - _serve(): Started server process [46243]
2025-06-14 18:45:24 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 18:45:24 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 18:45:24 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 18:45:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 18:45:38 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 18:45:38 [INFO] uvicorn.error:83 - _serve(): Started server process [46262]
2025-06-14 18:45:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 18:45:38 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 18:45:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 18:47:39 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 18:47:39 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 18:47:39 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 18:47:39 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 18:47:39 [INFO] uvicorn.error:93 - _serve(): Finished server process [46262]
2025-06-14 18:47:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 18:47:56 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 18:47:56 [INFO] uvicorn.error:83 - _serve(): Started server process [46294]
2025-06-14 18:47:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 18:47:56 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 18:47:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 18:48:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 18:48:14 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 18:48:14 [INFO] uvicorn.error:83 - _serve(): Started server process [46325]
2025-06-14 18:48:14 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 18:48:14 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 18:48:14 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 18:48:29 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 18:48:29 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 18:48:29 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 18:48:29 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 18:48:29 [INFO] uvicorn.error:93 - _serve(): Finished server process [46325]
2025-06-14 18:48:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 18:48:44 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 18:48:44 [INFO] uvicorn.error:83 - _serve(): Started server process [46401]
2025-06-14 18:48:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 18:48:44 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 18:48:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 18:56:16 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 18:56:16 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 18:56:16 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 18:56:16 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 18:56:16 [INFO] uvicorn.error:93 - _serve(): Finished server process [46401]
2025-06-14 18:56:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 18:56:33 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 18:56:33 [INFO] uvicorn.error:83 - _serve(): Started server process [46462]
2025-06-14 18:56:33 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 18:56:33 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 18:56:33 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 18:57:10 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 18:57:10 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 18:57:10 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 18:57:10 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 18:57:10 [INFO] uvicorn.error:93 - _serve(): Finished server process [46462]
2025-06-14 18:57:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 18:57:22 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 18:57:22 [INFO] uvicorn.error:83 - _serve(): Started server process [46486]
2025-06-14 18:57:22 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 18:57:22 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 18:57:22 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 18:57:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 18:57:40 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 18:57:40 [INFO] uvicorn.error:83 - _serve(): Started server process [46498]
2025-06-14 18:57:40 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 18:57:40 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 18:57:40 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 18:58:16 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 18:58:16 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 18:58:16 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 18:58:16 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 18:58:16 [INFO] uvicorn.error:93 - _serve(): Finished server process [46498]
2025-06-14 18:58:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 18:58:40 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 18:58:40 [INFO] uvicorn.error:83 - _serve(): Started server process [46527]
2025-06-14 18:58:40 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 18:58:40 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 18:58:40 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 18:58:48 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 18:58:49 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 18:58:49 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 18:58:49 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 18:58:49 [INFO] uvicorn.error:93 - _serve(): Finished server process [46527]
2025-06-14 18:58:54 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 18:59:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 18:59:28 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 18:59:28 [INFO] uvicorn.error:83 - _serve(): Started server process [46580]
2025-06-14 18:59:28 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 18:59:28 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 18:59:28 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 18:59:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 18:59:50 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 18:59:50 [INFO] uvicorn.error:83 - _serve(): Started server process [46592]
2025-06-14 18:59:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 18:59:50 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 18:59:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 18:59:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 19:00:10 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 19:00:10 [INFO] uvicorn.error:83 - _serve(): Started server process [46603]
2025-06-14 19:00:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 19:00:10 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 19:00:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 19:00:14 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 19:00:14 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 19:00:14 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 19:00:14 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 19:00:14 [INFO] uvicorn.error:93 - _serve(): Finished server process [46603]
2025-06-14 19:00:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 19:00:32 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 19:00:32 [INFO] uvicorn.error:83 - _serve(): Started server process [46612]
2025-06-14 19:00:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 19:00:32 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 19:00:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 19:00:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 19:00:57 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 19:00:57 [INFO] uvicorn.error:83 - _serve(): Started server process [46624]
2025-06-14 19:00:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 19:00:57 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 19:00:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 19:01:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 19:01:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 19:01:26 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 19:01:27 [INFO] uvicorn.error:83 - _serve(): Started server process [46677]
2025-06-14 19:01:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 19:01:27 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 19:01:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 19:01:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 19:01:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 19:01:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 19:03:27 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 19:03:27 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 19:03:27 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 19:03:27 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 19:03:27 [INFO] uvicorn.error:93 - _serve(): Finished server process [46677]
2025-06-14 19:03:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 19:03:40 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 19:03:40 [INFO] uvicorn.error:83 - _serve(): Started server process [46785]
2025-06-14 19:03:40 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 19:03:40 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 19:03:40 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 19:03:56 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 19:03:56 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 19:03:56 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 19:03:56 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 19:03:56 [INFO] uvicorn.error:93 - _serve(): Finished server process [46785]
2025-06-14 19:04:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 19:04:10 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 19:04:10 [INFO] uvicorn.error:83 - _serve(): Started server process [46807]
2025-06-14 19:04:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 19:04:10 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 19:04:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 19:06:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53365 - "OPTIONS /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 19:06:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:06:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:06:36 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 19:06:36 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 19:06:36 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 19:06:36 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 19:06:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 19:06:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 19:06:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 19:06:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 19:06:36 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 19:06:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 19:06:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 19:06:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 19:06:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 19:06:36 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 19:06:36 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 19:06:36 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 19:06:36 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 19:06:36 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 19:06:36 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 19:06:36 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 19:06:37 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 19:06:37 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 19:06:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:06:37 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 19:06:37 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-14 19:06:37 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 19:06:37 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 19:06:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53365 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 19:06:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53365 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:06:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53380 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:06:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:06:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:06:37 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:06:37 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:06:38 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:06:38 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 19:06:38 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 19:06:38 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 19:06:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53382 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:06:38 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:06:38 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:06:38 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:06:38 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:06:38 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:06:38 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 19:06:38 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 19:06:38 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 19:06:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53382 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:07:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:07:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:07:17 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:07:17 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:07:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:07:17 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 19:07:17 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 19:07:18 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 19:07:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53511 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:07:18 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:07:18 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:07:18 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:07:18 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:07:18 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:07:18 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 19:07:18 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 19:07:18 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 19:07:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53511 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:09:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:09:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:09:17 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:09:17 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:09:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:09:17 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 19:09:17 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 19:09:17 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 19:09:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53791 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:09:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:09:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:09:17 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:09:17 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:09:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:09:17 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 19:09:17 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 19:09:17 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 19:09:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53800 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:19:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57953 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 19:19:59 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:19:59 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:19:59 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 19:19:59 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 19:19:59 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:19:59 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 19:19:59 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-14 19:19:59 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 19:19:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57953 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 19:20:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57955 - "OPTIONS /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 19:20:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:20:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:20:05 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 19:20:05 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 19:20:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:20:05 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 19:20:05 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 19:20:05 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 19:20:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57989 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 19:20:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57989 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:20:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57955 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:20:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:20:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:20:05 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:20:05 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:20:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:20:05 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 19:20:05 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 19:20:06 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 19:20:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57989 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:20:06 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:20:06 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:20:06 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:20:06 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:20:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:20:06 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 19:20:06 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 19:20:06 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 19:20:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57955 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:27:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:27:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:27:37 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:27:37 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:27:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:27:37 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 19:27:37 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 19:27:37 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 19:27:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61089 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:32:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62998 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:32:27 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:32:27 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:32:27 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:32:27 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:32:27 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:32:27 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 19:32:27 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 19:32:27 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 19:32:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62998 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:34:15 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:34:15 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:34:15 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:34:15 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:34:15 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:34:15 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 19:34:15 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 19:34:15 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 19:34:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63489 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:39:26 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:39:26 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:39:26 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:39:26 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:39:26 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:39:26 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 19:39:26 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 19:39:26 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 19:39:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64537 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:39:55 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:39:55 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:39:55 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:39:55 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:39:55 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:39:55 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 19:39:55 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 19:39:55 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 19:39:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64674 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:52:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50345 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-14 19:52:42 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:52:42 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:52:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50345 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-14 19:52:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50345 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:52:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:52:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:52:43 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:52:43 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:52:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:52:43 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 19:52:43 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 19:52:43 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 19:52:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50347 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 19:59:09 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 19:59:09 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 19:59:09 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:59:09 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 19:59:09 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 19:59:09 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 19:59:09 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 19:59:09 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 19:59:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51750 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 20:34:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58128 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 20:34:38 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 20:34:38 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 20:34:38 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 20:34:38 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 20:34:38 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 20:34:38 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 20:34:38 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 20:34:38 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 20:34:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58132 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 20:45:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59915 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 20:45:01 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 20:45:01 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 20:45:01 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 20:45:01 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 20:45:01 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 20:45:01 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 20:45:01 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 20:45:01 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 20:45:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59915 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 20:54:42 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 20:54:42 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 20:54:42 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 20:54:42 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 20:54:42 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 20:54:42 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 20:54:42 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 20:54:42 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 20:54:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63718 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 20:56:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64255 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 20:56:10 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 20:56:10 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 20:56:10 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 20:56:10 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 20:56:10 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 20:56:10 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 20:56:10 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 20:56:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64257 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 20:56:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64332 - "OPTIONS /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 20:56:21 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 20:56:21 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 20:56:21 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 20:56:21 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 20:56:21 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 20:56:21 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 20:56:21 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 20:56:21 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 20:56:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64334 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 20:59:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65519 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 20:59:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 20:59:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 20:59:28 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 20:59:28 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 20:59:28 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 20:59:28 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 20:59:28 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 20:59:28 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 20:59:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65523 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 21:04:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50398 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-14 21:04:37 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-14 21:04:37 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-14 21:04:37 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-14 21:04:39 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 21:04:39 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 21:04:39 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-14 21:04:39 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-14 21:04:39 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-14 21:04:39 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-14 21:04:39 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-14 21:04:41 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-14 21:04:41 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-14 21:04:42 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-14T23:34:41.882848
2025-06-14 21:04:42 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-14 21:04:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50398 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-14 21:04:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50398 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 21:04:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50400 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 21:04:42 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 21:04:42 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 21:04:42 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-14 21:04:42 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-14 21:04:42 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-14 21:04:42 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 21:04:42 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 21:04:42 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-14 21:04:43 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-14 21:04:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 21:04:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 21:04:43 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-14 21:04:43 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 21:04:43 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 21:04:43 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-14 21:04:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50398 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 21:04:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 21:04:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 21:04:43 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-14 21:04:43 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-14 21:04:43 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-14 21:04:43 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 21:04:44 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 21:04:44 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-14 21:04:44 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-14 21:04:44 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 21:04:44 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-14 21:04:44 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-14 21:04:44 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 21:04:44 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-14 21:04:44 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-14 21:04:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50398 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-14 21:04:50 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 21:04:50 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 21:04:50 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 21:04:50 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 21:04:50 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 21:04:50 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 21:04:50 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 21:04:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50434 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 21:05:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 21:05:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 21:05:17 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 21:05:17 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 21:05:18 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 21:05:18 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 21:05:18 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 21:05:18 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 21:05:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50574 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 21:05:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 21:05:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 21:05:19 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 21:05:19 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 21:05:19 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 21:05:19 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 21:05:19 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 21:05:19 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 21:05:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50574 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 21:19:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53912 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 21:19:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 21:19:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 21:19:03 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 21:19:03 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 21:19:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 21:19:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 21:19:03 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 21:19:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53912 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 21:19:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53915 - "OPTIONS /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 21:19:15 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 21:19:15 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 21:19:15 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 21:19:15 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 21:19:15 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 21:19:15 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 21:19:15 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 21:19:15 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 21:19:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53935 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 21:19:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53935 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 21:19:15 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 21:19:15 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 21:19:15 [INFO] app.api.controllers.taxation_controller:277 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 21:19:15 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 21:19:15 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 21:19:15 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 21:19:15 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 21:19:15 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 21:19:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53915 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 21:21:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54326 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-14 21:21:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 21:21:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 21:21:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54328 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-14 21:21:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 21:21:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 21:21:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54328 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-14 21:22:11 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 21:22:11 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 21:22:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54450 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-14 21:22:14 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 21:22:14 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 21:22:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54450 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-14 21:25:33 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 21:25:33 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 21:25:33 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 21:25:33 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 21:25:33 [INFO] uvicorn.error:93 - _serve(): Finished server process [46807]
2025-06-14 21:25:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 21:26:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 21:26:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 21:47:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 21:48:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 21:49:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 21:49:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 21:50:02 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 21:50:02 [INFO] uvicorn.error:83 - _serve(): Started server process [49832]
2025-06-14 21:50:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 21:50:02 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 21:50:02 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 21:50:06 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 21:50:13 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 21:50:13 [INFO] uvicorn.error:83 - _serve(): Started server process [49894]
2025-06-14 21:50:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 21:50:13 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 21:50:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 21:50:41 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Signature verification failed.
2025-06-14 21:50:41 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Signature verification failed.
2025-06-14 21:50:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63097 - "POST /api/v2/taxation/records HTTP/1.1" 401
2025-06-14 21:50:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63133 - "POST /api/v2/taxation/records HTTP/1.1" 403
2025-06-14 21:50:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63163 - "POST /api/v2/taxation/records HTTP/1.1" 403
2025-06-14 21:51:24 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 21:51:25 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 21:51:25 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 21:51:25 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 21:51:25 [INFO] uvicorn.error:93 - _serve(): Finished server process [49894]
2025-06-14 21:51:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 21:51:43 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 21:51:43 [INFO] uvicorn.error:83 - _serve(): Started server process [50082]
2025-06-14 21:51:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 21:51:43 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 21:51:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 21:57:37 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 21:57:37 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 21:57:37 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 21:57:37 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 21:57:37 [INFO] uvicorn.error:93 - _serve(): Finished server process [50082]
2025-06-14 21:57:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 21:57:54 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 21:57:54 [INFO] uvicorn.error:83 - _serve(): Started server process [50142]
2025-06-14 21:57:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 21:57:54 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 21:57:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 21:58:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65309 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-14 21:58:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 21:58:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 21:58:05 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 21:58:05 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 21:58:05 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 21:58:05 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 21:58:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 21:58:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 21:58:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 21:58:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 21:58:05 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 21:58:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 21:58:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 21:58:06 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 21:58:06 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 21:58:06 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 21:58:06 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 21:58:06 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 21:58:06 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 21:58:06 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 21:58:06 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 21:58:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65309 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-14 21:58:07 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 21:58:07 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 21:58:07 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 21:58:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65309 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-14 22:00:56 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 22:00:57 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 22:00:57 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 22:00:57 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 22:00:57 [INFO] uvicorn.error:93 - _serve(): Finished server process [50142]
2025-06-14 22:01:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:01:09 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:01:09 [INFO] uvicorn.error:83 - _serve(): Started server process [50219]
2025-06-14 22:01:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:01:09 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:01:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:01:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 22:01:54 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 22:01:54 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 22:01:54 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 22:01:54 [INFO] uvicorn.error:93 - _serve(): Finished server process [50219]
2025-06-14 22:02:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:02:10 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:02:10 [INFO] uvicorn.error:83 - _serve(): Started server process [50246]
2025-06-14 22:02:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:02:10 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:02:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:02:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:02:21 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:02:21 [INFO] uvicorn.error:83 - _serve(): Started server process [50273]
2025-06-14 22:02:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:02:21 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:02:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:02:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50453 - "POST /api/v2/taxation/records HTTP/1.1" 403
2025-06-14 22:02:58 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 22:02:58 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 22:02:58 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 22:02:58 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 22:02:58 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 22:02:58 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 22:02:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 22:02:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 22:02:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 22:02:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 22:02:58 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 22:02:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 22:02:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 22:02:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 22:02:59 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 22:02:59 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 22:02:59 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 22:02:59 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 22:02:59 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 22:02:59 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 22:02:59 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 22:02:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50502 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-14 22:03:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 22:03:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 22:03:02 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 22:03:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50502 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-14 22:03:28 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 22:03:28 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 22:03:28 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 22:03:28 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 22:03:28 [INFO] uvicorn.error:93 - _serve(): Finished server process [50273]
2025-06-14 22:03:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:03:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:03:42 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:03:42 [INFO] uvicorn.error:83 - _serve(): Started server process [50398]
2025-06-14 22:03:42 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:03:42 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:03:42 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:03:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50748 - "POST /docs HTTP/1.1" 405
2025-06-14 22:07:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 22:07:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 22:07:36 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 22:07:36 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 22:07:36 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 22:07:37 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 22:07:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 22:07:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 22:07:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 22:07:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 22:07:37 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 22:07:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 22:07:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 22:07:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 22:07:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 22:07:37 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 22:07:37 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 22:07:37 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 22:07:37 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 22:07:37 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 22:07:37 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 22:07:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51802 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-14 22:07:38 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 22:07:38 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 22:07:38 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 22:07:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51802 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-14 22:08:48 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 22:08:48 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 22:08:48 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 22:08:48 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 22:08:48 [INFO] uvicorn.error:93 - _serve(): Finished server process [50398]
2025-06-14 22:08:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:09:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:09:22 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:09:22 [INFO] uvicorn.error:83 - _serve(): Started server process [50502]
2025-06-14 22:09:22 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:09:22 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:09:22 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:09:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:11:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:11:21 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:22:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:22:12 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:22:12 [INFO] uvicorn.error:83 - _serve(): Started server process [51041]
2025-06-14 22:22:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:22:12 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:22:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:22:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56339 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-14 22:22:18 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 22:22:18 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 22:22:18 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 22:22:18 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 22:22:18 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 22:22:18 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 22:22:18 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 22:22:18 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 22:22:18 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 22:22:18 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 22:22:18 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 22:22:18 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 22:22:18 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 22:22:18 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 22:22:18 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 22:22:18 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 22:22:18 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 22:22:18 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 22:22:18 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 22:22:18 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 22:22:18 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 22:22:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 22:22:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 22:22:19 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 22:22:19 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 22:22:21 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 22:22:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56341 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-14 22:22:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56339 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-14 22:24:26 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 22:24:26 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 22:24:26 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 22:24:26 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 22:24:26 [INFO] uvicorn.error:93 - _serve(): Finished server process [51041]
2025-06-14 22:24:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:24:41 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:24:41 [INFO] uvicorn.error:83 - _serve(): Started server process [51069]
2025-06-14 22:24:41 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:24:41 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:24:41 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:24:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:24:54 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:24:54 [INFO] uvicorn.error:83 - _serve(): Started server process [51093]
2025-06-14 22:24:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:24:54 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:24:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:25:13 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 22:25:13 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 22:25:13 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 22:25:13 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 22:25:13 [INFO] uvicorn.error:93 - _serve(): Finished server process [51093]
2025-06-14 22:25:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:25:27 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:25:27 [INFO] uvicorn.error:83 - _serve(): Started server process [51115]
2025-06-14 22:25:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:25:27 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:25:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:25:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:25:39 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:25:39 [INFO] uvicorn.error:83 - _serve(): Started server process [51134]
2025-06-14 22:25:39 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:25:39 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:25:39 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:25:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 22:25:54 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 22:25:54 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 22:25:54 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 22:25:54 [INFO] uvicorn.error:93 - _serve(): Finished server process [51134]
2025-06-14 22:25:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:26:06 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:26:06 [INFO] uvicorn.error:83 - _serve(): Started server process [51152]
2025-06-14 22:26:06 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:26:06 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:26:06 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:26:15 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 22:26:15 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 22:26:15 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 22:26:15 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 22:26:15 [INFO] uvicorn.error:93 - _serve(): Finished server process [51152]
2025-06-14 22:26:20 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:26:30 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:26:30 [INFO] uvicorn.error:83 - _serve(): Started server process [51172]
2025-06-14 22:26:30 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:26:30 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:26:30 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:26:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:26:42 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:26:42 [INFO] uvicorn.error:83 - _serve(): Started server process [51192]
2025-06-14 22:26:42 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:26:42 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:26:42 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:26:53 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 22:26:53 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 22:26:53 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 22:26:53 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 22:26:53 [INFO] uvicorn.error:93 - _serve(): Finished server process [51192]
2025-06-14 22:26:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:27:09 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:27:09 [INFO] uvicorn.error:83 - _serve(): Started server process [51209]
2025-06-14 22:27:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:27:09 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:27:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:27:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:27:23 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:27:23 [INFO] uvicorn.error:83 - _serve(): Started server process [51230]
2025-06-14 22:27:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:27:23 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:27:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:27:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:27:34 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:27:34 [INFO] uvicorn.error:83 - _serve(): Started server process [51250]
2025-06-14 22:27:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:27:34 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:27:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:36:39 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 22:36:39 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 22:36:39 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 22:36:39 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 22:36:39 [INFO] uvicorn.error:93 - _serve(): Finished server process [51250]
2025-06-14 22:36:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:36:57 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:36:57 [INFO] uvicorn.error:83 - _serve(): Started server process [51313]
2025-06-14 22:36:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:36:57 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:36:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:37:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:37:13 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:37:13 [INFO] uvicorn.error:83 - _serve(): Started server process [51343]
2025-06-14 22:37:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:37:13 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:37:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:37:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:37:26 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:37:26 [INFO] uvicorn.error:83 - _serve(): Started server process [51362]
2025-06-14 22:37:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:37:26 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:37:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:37:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 22:37:54 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 22:37:54 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 22:37:54 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 22:37:54 [INFO] uvicorn.error:93 - _serve(): Finished server process [51362]
2025-06-14 22:37:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:38:10 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:38:10 [INFO] uvicorn.error:83 - _serve(): Started server process [51386]
2025-06-14 22:38:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:38:10 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:38:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:38:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:38:27 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:38:27 [INFO] uvicorn.error:83 - _serve(): Started server process [51413]
2025-06-14 22:38:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:38:27 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:38:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:39:07 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Not enough segments
2025-06-14 22:39:07 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Not enough segments
2025-06-14 22:39:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62248 - "POST /api/v2/taxation/records HTTP/1.1" 401
2025-06-14 22:39:40 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 22:39:40 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 22:39:40 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 22:39:40 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 22:39:40 [INFO] uvicorn.error:93 - _serve(): Finished server process [51413]
2025-06-14 22:39:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:39:55 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:39:55 [INFO] uvicorn.error:83 - _serve(): Started server process [51476]
2025-06-14 22:39:55 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:39:55 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:39:55 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:40:04 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 22:40:05 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 22:40:05 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 22:40:05 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 22:40:05 [INFO] uvicorn.error:93 - _serve(): Finished server process [51476]
2025-06-14 22:40:10 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:40:16 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:40:16 [INFO] uvicorn.error:83 - _serve(): Started server process [51501]
2025-06-14 22:40:16 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:40:16 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:40:16 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:40:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:40:31 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:40:31 [INFO] uvicorn.error:83 - _serve(): Started server process [51525]
2025-06-14 22:40:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:40:31 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:40:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:40:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:40:44 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:40:44 [INFO] uvicorn.error:83 - _serve(): Started server process [51541]
2025-06-14 22:40:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:40:44 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:40:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:40:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:40:59 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:40:59 [INFO] uvicorn.error:83 - _serve(): Started server process [51570]
2025-06-14 22:40:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:40:59 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:40:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:41:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:41:11 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:41:11 [INFO] uvicorn.error:83 - _serve(): Started server process [51586]
2025-06-14 22:41:11 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:41:11 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:41:11 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:41:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:41:29 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:41:29 [INFO] uvicorn.error:83 - _serve(): Started server process [51610]
2025-06-14 22:41:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:41:29 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:41:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:41:31 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 22:41:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 22:41:31 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 22:41:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 22:41:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [51610]
2025-06-14 22:41:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:41:44 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:41:44 [INFO] uvicorn.error:83 - _serve(): Started server process [51627]
2025-06-14 22:41:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:41:44 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:41:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:41:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:42:04 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:42:04 [INFO] uvicorn.error:83 - _serve(): Started server process [51645]
2025-06-14 22:42:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:42:04 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:42:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:48:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65168 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-14 22:48:27 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 22:48:27 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 22:48:27 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 22:48:27 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 22:48:27 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 22:48:27 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 22:48:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 22:48:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 22:48:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 22:48:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 22:48:27 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 22:48:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 22:48:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 22:48:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 22:48:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 22:48:27 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 22:48:27 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 22:48:27 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 22:48:27 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 22:48:27 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 22:48:27 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 22:48:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 22:48:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 22:48:29 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 22:48:29 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 22:48:30 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 22:48:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65168 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-14 22:48:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65170 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-14 22:49:55 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 22:49:55 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 22:49:56 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 22:49:56 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 22:49:56 [INFO] uvicorn.error:93 - _serve(): Finished server process [51645]
2025-06-14 22:50:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:50:12 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:50:12 [INFO] uvicorn.error:83 - _serve(): Started server process [51733]
2025-06-14 22:50:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:50:12 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:50:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:50:20 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:50:28 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:50:28 [INFO] uvicorn.error:83 - _serve(): Started server process [51761]
2025-06-14 22:50:28 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:50:28 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:50:28 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:51:02 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 22:51:02 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 22:51:02 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 22:51:02 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 22:51:02 [INFO] uvicorn.error:93 - _serve(): Finished server process [51761]
2025-06-14 22:51:06 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:51:13 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:51:13 [INFO] uvicorn.error:83 - _serve(): Started server process [51796]
2025-06-14 22:51:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:51:13 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:51:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 22:51:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 22:51:33 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 22:51:33 [INFO] uvicorn.error:83 - _serve(): Started server process [51816]
2025-06-14 22:51:33 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 22:51:33 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 22:51:33 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:01:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52832 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-14 23:01:38 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:01:38 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:01:38 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 23:01:38 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 23:01:38 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 23:01:38 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 23:01:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 23:01:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 23:01:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 23:01:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 23:01:38 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 23:01:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 23:01:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 23:01:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 23:01:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 23:01:38 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 23:01:38 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 23:01:38 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 23:01:38 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 23:01:38 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 23:01:38 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 23:01:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:01:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:01:40 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 23:01:40 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 23:01:41 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 23:01:42 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-14 23:01:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52834 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-14 23:01:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52832 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-14 23:03:28 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 23:03:28 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 23:03:28 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 23:03:28 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 23:03:28 [INFO] uvicorn.error:93 - _serve(): Finished server process [51816]
2025-06-14 23:03:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:03:43 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:03:43 [INFO] uvicorn.error:83 - _serve(): Started server process [51909]
2025-06-14 23:03:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:03:43 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:03:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:03:57 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 23:03:57 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 23:03:57 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 23:03:57 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 23:03:57 [INFO] uvicorn.error:93 - _serve(): Finished server process [51909]
2025-06-14 23:04:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:04:11 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:04:11 [INFO] uvicorn.error:83 - _serve(): Started server process [51937]
2025-06-14 23:04:11 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:04:11 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:04:11 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:04:55 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 23:04:55 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 23:04:55 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 23:04:55 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 23:04:55 [INFO] uvicorn.error:93 - _serve(): Finished server process [51937]
2025-06-14 23:04:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:05:10 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:05:10 [INFO] uvicorn.error:83 - _serve(): Started server process [51973]
2025-06-14 23:05:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:05:10 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:05:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:05:15 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 23:05:15 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 23:05:15 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 23:05:15 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 23:05:15 [INFO] uvicorn.error:93 - _serve(): Finished server process [51973]
2025-06-14 23:05:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:05:30 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:05:30 [INFO] uvicorn.error:83 - _serve(): Started server process [51994]
2025-06-14 23:05:30 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:05:30 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:05:30 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:05:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:05:47 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:05:47 [INFO] uvicorn.error:83 - _serve(): Started server process [52011]
2025-06-14 23:05:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:05:47 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:05:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:05:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:06:02 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:06:02 [INFO] uvicorn.error:83 - _serve(): Started server process [52031]
2025-06-14 23:06:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:06:02 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:06:02 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:06:27 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 23:06:27 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 23:06:27 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 23:06:27 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 23:06:27 [INFO] uvicorn.error:93 - _serve(): Finished server process [52031]
2025-06-14 23:06:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:06:44 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:06:44 [INFO] uvicorn.error:83 - _serve(): Started server process [52064]
2025-06-14 23:06:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:06:44 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:06:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:09:46 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:09:46 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:09:46 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 23:09:46 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 23:09:46 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 23:09:46 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 23:09:46 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 23:09:46 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 23:09:46 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 23:09:46 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 23:09:46 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 23:09:46 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 23:09:46 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 23:09:46 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 23:09:46 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 23:09:46 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 23:09:46 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 23:09:46 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 23:09:46 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 23:09:46 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 23:09:46 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 23:09:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:09:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:09:48 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 23:09:48 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 23:09:49 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 23:09:49 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-14 23:09:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55905 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-14 23:09:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55895 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-14 23:12:03 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-14 23:12:04 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 23:12:04 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 23:12:04 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 23:12:04 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 23:12:04 [INFO] uvicorn.error:93 - _serve(): Finished server process [52064]
2025-06-14 23:12:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:12:21 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:12:21 [INFO] uvicorn.error:83 - _serve(): Started server process [52131]
2025-06-14 23:12:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:12:21 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:12:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:12:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:12:34 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:12:34 [INFO] uvicorn.error:83 - _serve(): Started server process [52157]
2025-06-14 23:12:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:12:34 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:12:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:12:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 23:12:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 23:12:59 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 23:12:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 23:12:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [52157]
2025-06-14 23:13:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:13:13 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:13:13 [INFO] uvicorn.error:83 - _serve(): Started server process [52187]
2025-06-14 23:13:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:13:13 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:13:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:14:00 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 23:14:00 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 23:14:00 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 23:14:00 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 23:14:00 [INFO] uvicorn.error:93 - _serve(): Finished server process [52187]
2025-06-14 23:14:10 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:14:28 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:14:28 [INFO] uvicorn.error:83 - _serve(): Started server process [52221]
2025-06-14 23:14:28 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:14:28 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:14:28 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:14:51 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 23:14:51 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 23:14:51 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 23:14:51 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 23:14:51 [INFO] uvicorn.error:93 - _serve(): Finished server process [52221]
2025-06-14 23:14:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:15:05 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:15:05 [INFO] uvicorn.error:83 - _serve(): Started server process [52286]
2025-06-14 23:15:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:15:05 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:15:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:16:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58538 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-14 23:16:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:16:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:16:37 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 23:16:37 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 23:16:37 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 23:16:37 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 23:16:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 23:16:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 23:16:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 23:16:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 23:16:37 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 23:16:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 23:16:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 23:16:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 23:16:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 23:16:37 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 23:16:37 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 23:16:37 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 23:16:37 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 23:16:37 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 23:16:38 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 23:16:39 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:16:39 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:16:39 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 23:16:39 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 23:16:40 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-14 23:16:40 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 23:16:40 [INFO] app.api.controllers.taxation_controller:265 - create_taxation_record(): Created taxation record with comprehensive income: EMP002_2025
2025-06-14 23:16:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58538 - "POST /api/v2/taxation/records HTTP/1.1" 201
2025-06-14 23:16:41 [INFO] app.api.controllers.taxation_controller:265 - create_taxation_record(): Created taxation record with comprehensive income: EMP002_2025
2025-06-14 23:16:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58540 - "POST /api/v2/taxation/records HTTP/1.1" 201
2025-06-14 23:16:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58710 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 23:16:58 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:16:58 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:16:58 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 23:16:58 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 23:16:58 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 23:16:58 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 23:16:59 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 23:16:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58714 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 23:19:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59503 - "OPTIONS /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 23:19:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:19:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:19:03 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 23:19:03 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 23:19:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 23:19:03 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 23:19:03 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-14 23:19:03 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 23:19:03 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 23:19:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59503 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 23:19:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59503 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 23:19:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:19:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:19:03 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 23:19:03 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 23:19:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 23:19:03 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 23:19:03 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 23:19:03 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 23:19:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59505 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 23:32:49 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 23:32:49 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 23:32:49 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 23:32:49 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 23:32:49 [INFO] uvicorn.error:93 - _serve(): Finished server process [52286]
2025-06-14 23:32:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:33:08 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:33:08 [INFO] uvicorn.error:83 - _serve(): Started server process [52431]
2025-06-14 23:33:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:33:08 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:33:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:33:12 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 23:33:12 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 23:33:12 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 23:33:12 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 23:33:12 [INFO] uvicorn.error:93 - _serve(): Finished server process [52431]
2025-06-14 23:33:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:33:29 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:33:29 [INFO] uvicorn.error:83 - _serve(): Started server process [52474]
2025-06-14 23:33:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:33:30 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:33:30 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:34:16 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 23:34:16 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 23:34:16 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 23:34:16 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 23:34:16 [INFO] uvicorn.error:93 - _serve(): Finished server process [52474]
2025-06-14 23:34:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:34:33 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:34:33 [INFO] uvicorn.error:83 - _serve(): Started server process [52508]
2025-06-14 23:34:33 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:34:33 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:34:33 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:34:36 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 23:34:36 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 23:34:36 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 23:34:36 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 23:34:36 [INFO] uvicorn.error:93 - _serve(): Finished server process [52508]
2025-06-14 23:34:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:34:55 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:34:55 [INFO] uvicorn.error:83 - _serve(): Started server process [52548]
2025-06-14 23:34:55 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:34:55 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:34:55 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:35:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:35:12 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:35:12 [INFO] uvicorn.error:83 - _serve(): Started server process [52578]
2025-06-14 23:35:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:35:12 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:35:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:35:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:35:30 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:35:30 [INFO] uvicorn.error:83 - _serve(): Started server process [52601]
2025-06-14 23:35:30 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:35:31 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:35:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:35:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:35:45 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:35:45 [INFO] uvicorn.error:83 - _serve(): Started server process [52626]
2025-06-14 23:35:45 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:35:45 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:35:45 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:37:32 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 23:37:32 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 23:37:32 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 23:37:32 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 23:37:32 [INFO] uvicorn.error:93 - _serve(): Finished server process [52626]
2025-06-14 23:37:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:37:46 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:37:46 [INFO] uvicorn.error:83 - _serve(): Started server process [52652]
2025-06-14 23:37:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:37:46 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:37:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:37:56 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 23:37:56 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 23:37:56 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 23:37:56 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 23:37:56 [INFO] uvicorn.error:93 - _serve(): Finished server process [52652]
2025-06-14 23:38:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:38:09 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:38:09 [INFO] uvicorn.error:83 - _serve(): Started server process [52683]
2025-06-14 23:38:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:38:09 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:38:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:38:13 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-14 23:38:13 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-14 23:38:13 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-14 23:38:13 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-14 23:38:13 [INFO] uvicorn.error:93 - _serve(): Finished server process [52683]
2025-06-14 23:38:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:38:26 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:38:26 [INFO] uvicorn.error:83 - _serve(): Started server process [52700]
2025-06-14 23:38:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:38:26 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:38:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:38:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-14 23:38:40 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-14 23:38:40 [INFO] uvicorn.error:83 - _serve(): Started server process [52717]
2025-06-14 23:38:40 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-14 23:38:40 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-14 23:38:40 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-14 23:38:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62341 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 23:38:57 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:38:57 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:38:57 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-14 23:38:57 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-14 23:38:57 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-14 23:38:57 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-14 23:38:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 23:38:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 23:38:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 23:38:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 23:38:57 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 23:38:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-14 23:38:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-14 23:38:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-14 23:38:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-14 23:38:57 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-14 23:38:57 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-14 23:38:57 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-14 23:38:57 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-14 23:38:57 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-14 23:38:57 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 23:38:57 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 23:38:57 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-14 23:38:57 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-14 23:38:58 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-14 23:38:58 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-14 23:38:58 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-14 23:38:58 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 23:38:58 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 23:38:58 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-14 23:38:59 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 23:38:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62343 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 23:39:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62343 - "OPTIONS /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 23:39:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:39:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:39:02 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 23:39:02 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 23:39:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 23:39:02 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 23:39:02 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-14 23:39:02 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 23:39:02 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 23:39:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62392 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 23:39:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62392 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 23:39:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:39:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:39:02 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 23:39:02 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 23:39:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 23:39:02 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 23:39:02 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 23:39:02 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 23:39:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62343 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 23:42:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62779 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-14 23:42:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:42:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:42:02 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 23:42:03 [INFO] app.api.controllers.taxation_controller:265 - create_taxation_record(): Created taxation record with comprehensive income: EMP002_2025
2025-06-14 23:42:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62779 - "POST /api/v2/taxation/records HTTP/1.1" 201
2025-06-14 23:42:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:42:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:42:04 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 23:42:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62779 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-14 23:42:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:42:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:42:24 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 23:42:24 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 23:42:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 23:42:24 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 23:42:24 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 23:42:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62781 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 23:52:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64269 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 23:52:55 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:52:55 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:52:56 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-14 23:52:56 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-14 23:52:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 23:52:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-14 23:52:56 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-14 23:52:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64269 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-14 23:52:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64269 - "OPTIONS /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 23:52:58 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:52:58 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:52:58 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 23:52:58 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 23:52:58 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 23:52:58 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 23:52:58 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 23:52:58 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 23:52:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64271 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 23:52:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64271 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 23:52:58 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:52:58 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:52:58 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 23:52:58 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-14 23:52:58 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 23:52:58 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 23:52:58 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 23:52:58 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-14 23:52:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64269 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-14 23:54:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64425 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-14 23:54:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:54:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:54:16 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 23:54:28 [INFO] app.api.controllers.taxation_controller:265 - create_taxation_record(): Created taxation record with comprehensive income: EMP002_2025
2025-06-14 23:54:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64425 - "POST /api/v2/taxation/records HTTP/1.1" 201
2025-06-14 23:54:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:54:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:54:38 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 23:54:38 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-14 23:54:38 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-14 23:54:38 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-14 23:54:38 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-14 23:54:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64427 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-14 23:55:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:55:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:56:14 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-14 23:56:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-14 23:56:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-14 23:57:23 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-15 00:30:52 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 00:30:53 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 00:30:53 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 00:30:53 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 00:30:53 [INFO] uvicorn.error:93 - _serve(): Finished server process [52717]
2025-06-15 00:43:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 00:43:44 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 00:43:44 [INFO] uvicorn.error:83 - _serve(): Started server process [53553]
2025-06-15 00:43:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 00:43:44 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 00:43:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 00:45:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50054 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 00:45:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 00:45:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 00:45:48 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 00:45:48 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 00:45:48 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 00:45:48 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 00:45:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 00:45:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 00:45:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 00:45:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 00:45:48 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 00:45:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 00:45:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 00:45:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 00:45:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 00:45:48 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 00:45:48 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 00:45:48 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 00:45:48 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 00:45:48 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 00:45:48 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-15 00:45:48 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-15 00:45:48 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-15 00:45:48 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-15 00:45:49 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-15 00:45:49 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-15 00:45:49 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-15 00:45:49 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 00:45:50 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-15 00:45:50 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-15 00:45:50 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-15 00:45:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50054 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 00:46:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50058 - "OPTIONS /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-15 00:46:21 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 00:46:21 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 00:46:21 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-15 00:46:21 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-15 00:46:21 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 00:46:21 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-15 00:46:21 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-15 00:46:21 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 00:46:21 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-15 00:46:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50278 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-15 00:46:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50278 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-15 00:46:22 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 00:46:22 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 00:46:22 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 00:46:22 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 00:46:22 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 00:46:22 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-15 00:46:22 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 00:46:22 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-15 00:46:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50058 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-15 00:47:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50578 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-15 00:47:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 00:47:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 00:48:13 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-15 00:48:14 [INFO] app.api.controllers.taxation_controller:265 - create_taxation_record(): Created taxation record with comprehensive income: EMP002_2025
2025-06-15 01:26:58 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-15 01:42:23 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 01:42:24 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 01:42:24 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 01:42:24 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 01:42:24 [INFO] uvicorn.error:93 - _serve(): Finished server process [53553]
2025-06-15 01:42:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 01:42:56 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 01:42:56 [INFO] uvicorn.error:83 - _serve(): Started server process [55219]
2025-06-15 01:42:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 01:42:56 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 01:42:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 01:43:02 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 01:43:02 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 01:43:02 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 01:43:02 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 01:43:02 [INFO] uvicorn.error:93 - _serve(): Finished server process [55219]
2025-06-15 01:43:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 01:43:15 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 01:43:15 [INFO] uvicorn.error:83 - _serve(): Started server process [55266]
2025-06-15 01:43:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 01:43:15 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 01:43:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 01:43:42 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 01:43:42 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 01:43:42 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 01:43:42 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 01:43:42 [INFO] uvicorn.error:93 - _serve(): Finished server process [55266]
2025-06-15 01:43:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 01:44:01 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 01:44:01 [INFO] uvicorn.error:83 - _serve(): Started server process [55289]
2025-06-15 01:44:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 01:44:01 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 01:44:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 01:50:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54603 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-15 01:50:41 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 01:50:41 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 01:50:41 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 01:50:41 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 01:50:41 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 01:50:41 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 01:50:41 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 01:50:41 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 01:50:41 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 01:50:41 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 01:50:41 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 01:50:41 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 01:50:41 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 01:50:41 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 01:50:41 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 01:50:41 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 01:50:41 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 01:50:41 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 01:50:41 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 01:50:41 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 01:50:41 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 01:50:41 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 01:50:44 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-15 01:50:44 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-15 01:50:44 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 01:50:44 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-15 01:50:44 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-15 01:50:44 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 01:50:44 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-15 01:50:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54603 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-15 01:55:56 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 01:55:56 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 01:55:56 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 01:55:56 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 01:55:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 01:55:56 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-15 01:55:56 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 01:55:56 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-15 01:55:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55921 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-15 01:58:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56441 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 01:58:50 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 01:58:50 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 01:58:50 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-15 01:58:50 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-15 01:58:50 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 01:58:50 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-15 01:58:50 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-15 01:58:51 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-15 01:58:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56441 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 01:59:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56443 - "OPTIONS /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-15 01:59:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 01:59:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 01:59:24 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-15 01:59:24 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-15 01:59:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 01:59:24 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-15 01:59:24 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 01:59:25 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-15 01:59:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56443 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-15 02:01:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57057 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-15 02:01:14 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:01:14 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:01:15 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 02:01:15 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 02:01:15 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 02:01:15 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-15 02:01:15 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 02:01:15 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-15 02:01:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57057 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-15 02:04:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57706 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-15 02:04:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:04:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:04:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57706 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-15 02:04:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:04:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:04:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57708 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-15 02:07:11 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:07:11 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:07:11 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 02:07:11 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 02:07:12 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 02:07:12 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-15 02:07:12 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 02:07:12 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-15 02:07:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58974 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-15 02:12:56 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:12:56 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:12:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61378 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-15 02:13:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61482 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-15 02:13:11 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:13:11 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:13:11 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 02:13:11 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 02:13:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 02:13:11 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-15 02:13:11 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 02:13:11 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-15 02:13:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61484 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-15 02:15:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62242 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-15 02:15:49 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:15:49 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:15:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62244 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-15 02:16:08 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:16:08 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:16:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62315 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-15 02:20:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64249 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 02:20:44 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:20:44 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:20:44 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-15 02:20:44 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-15 02:20:44 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 02:20:44 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-15 02:20:44 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-15 02:20:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64251 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 02:20:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64296 - "OPTIONS /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-15 02:20:50 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:20:50 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:20:50 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-15 02:20:50 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: 2025-26
2025-06-15 02:20:50 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 02:20:50 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-15 02:20:50 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 02:20:50 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-15 02:20:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64296 - "GET /api/v2/taxation/records/employee/EMP002?tax_year=2025-26 HTTP/1.1" 200
2025-06-15 02:20:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:20:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:20:51 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 02:20:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 02:20:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 02:20:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-15 02:20:51 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 02:20:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-15 02:20:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64296 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-15 02:22:35 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:22:35 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:23:12 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-15 02:23:42 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:23:42 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:23:42 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-15 02:23:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65289 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-15 02:25:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:25:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:25:13 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-15 02:25:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49516 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-15 02:27:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50558 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-15 02:27:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:27:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:27:32 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 02:27:32 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 02:27:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 02:27:32 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-15 02:27:32 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 02:27:32 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-15 02:27:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50560 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-15 02:33:41 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:33:41 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:33:41 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 02:33:41 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 02:33:41 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 02:33:41 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-15 02:33:41 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 02:33:41 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-15 02:33:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53235 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-15 02:50:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60191 - "OPTIONS /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-15 02:50:11 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:50:11 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:50:11 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 02:50:11 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 02:50:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 02:50:11 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-15 02:50:11 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 02:50:11 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-15 02:50:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60191 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-15 02:51:55 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:51:55 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:51:55 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 02:51:55 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP002, tax_year: None
2025-06-15 02:51:55 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 02:51:56 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 40 for user EMP002 from DOB 1984-11-01
2025-06-15 02:51:56 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 02:51:56 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP002, age: 40, is_govt_employee: False
2025-06-15 02:51:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60892 - "GET /api/v2/taxation/records/employee/EMP002 HTTP/1.1" 200
2025-06-15 02:52:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61254 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-15 02:52:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:52:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:52:51 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP002, year 2025-26
2025-06-15 02:52:51 [INFO] app.api.controllers.taxation_controller:265 - create_taxation_record(): Created taxation record with comprehensive income: EMP002_2025
2025-06-15 02:52:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61254 - "POST /api/v2/taxation/records HTTP/1.1" 201
2025-06-15 02:59:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63775 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 02:59:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:59:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:59:28 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-15 02:59:28 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-15 02:59:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 02:59:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-15 02:59:29 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-15 02:59:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63777 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 02:59:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63777 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-15 02:59:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:59:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:59:32 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 02:59:32 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 02:59:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 02:59:32 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 02:59:32 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 02:59:32 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-15 02:59:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63775 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-15 02:59:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63775 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 02:59:33 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 02:59:33 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 02:59:33 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 02:59:33 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 02:59:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 02:59:33 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 02:59:33 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 02:59:33 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-15 02:59:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63777 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 03:08:09 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 03:08:09 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 03:08:09 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 03:08:09 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 03:08:09 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 03:08:09 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 03:08:09 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 03:08:09 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-15 03:08:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65178 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 03:09:29 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 03:09:29 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 03:09:29 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 03:09:29 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 03:09:29 [INFO] uvicorn.error:93 - _serve(): Finished server process [55289]
2025-06-15 03:09:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:09:53 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:09:53 [INFO] uvicorn.error:83 - _serve(): Started server process [57504]
2025-06-15 03:09:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:09:53 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:09:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:09:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:10:04 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:10:04 [INFO] uvicorn.error:83 - _serve(): Started server process [57536]
2025-06-15 03:10:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:10:04 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:10:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:10:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 03:10:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 03:10:59 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 03:10:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 03:10:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [57536]
2025-06-15 03:11:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:11:11 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:11:11 [INFO] uvicorn.error:83 - _serve(): Started server process [57568]
2025-06-15 03:11:11 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:11:11 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:11:11 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:11:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:11:20 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:11:20 [INFO] uvicorn.error:83 - _serve(): Started server process [57592]
2025-06-15 03:11:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:11:20 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:11:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:11:44 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 03:11:44 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 03:11:44 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 03:11:44 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 03:11:44 [INFO] uvicorn.error:93 - _serve(): Finished server process [57592]
2025-06-15 03:11:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:12:00 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:12:00 [INFO] uvicorn.error:83 - _serve(): Started server process [57604]
2025-06-15 03:12:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:12:00 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:12:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:12:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:12:14 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:12:14 [INFO] uvicorn.error:83 - _serve(): Started server process [57630]
2025-06-15 03:12:14 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:12:14 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:12:14 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:12:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:12:26 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:12:26 [INFO] uvicorn.error:83 - _serve(): Started server process [57645]
2025-06-15 03:12:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:12:26 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:12:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:12:46 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 03:12:46 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 03:12:46 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 03:12:46 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 03:12:46 [INFO] uvicorn.error:93 - _serve(): Finished server process [57645]
2025-06-15 03:12:56 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:13:03 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:13:03 [INFO] uvicorn.error:83 - _serve(): Started server process [57679]
2025-06-15 03:13:03 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:13:03 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:13:03 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:13:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:13:21 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:13:21 [INFO] uvicorn.error:83 - _serve(): Started server process [57711]
2025-06-15 03:13:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:13:21 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:13:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:13:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:13:34 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:13:34 [INFO] uvicorn.error:83 - _serve(): Started server process [57733]
2025-06-15 03:13:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:13:34 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:13:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:13:36 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 03:13:36 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 03:13:36 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 03:13:36 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 03:13:36 [INFO] uvicorn.error:93 - _serve(): Finished server process [57733]
2025-06-15 03:13:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:13:49 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:13:49 [INFO] uvicorn.error:83 - _serve(): Started server process [57756]
2025-06-15 03:13:49 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:13:49 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:13:49 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:13:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:13:59 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:13:59 [INFO] uvicorn.error:83 - _serve(): Started server process [57784]
2025-06-15 03:13:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:13:59 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:13:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:14:58 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 03:14:58 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 03:14:58 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 03:14:58 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 03:14:58 [INFO] uvicorn.error:93 - _serve(): Finished server process [57784]
2025-06-15 03:15:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:15:16 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:15:16 [INFO] uvicorn.error:83 - _serve(): Started server process [57823]
2025-06-15 03:15:16 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:15:16 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:15:16 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:15:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:15:31 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:15:31 [INFO] uvicorn.error:83 - _serve(): Started server process [57845]
2025-06-15 03:15:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:15:31 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:15:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:16:46 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 03:16:46 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 03:16:46 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 03:16:46 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 03:16:46 [INFO] uvicorn.error:93 - _serve(): Finished server process [57845]
2025-06-15 03:16:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:16:59 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:16:59 [INFO] uvicorn.error:83 - _serve(): Started server process [57883]
2025-06-15 03:16:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:16:59 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:16:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:17:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 03:17:21 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 03:17:21 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 03:17:21 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 03:17:21 [INFO] uvicorn.error:93 - _serve(): Finished server process [57883]
2025-06-15 03:17:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:17:41 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:17:41 [INFO] uvicorn.error:83 - _serve(): Started server process [57905]
2025-06-15 03:17:41 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:17:41 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:17:41 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:17:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:17:53 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:17:53 [INFO] uvicorn.error:83 - _serve(): Started server process [57934]
2025-06-15 03:17:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:17:53 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:17:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:18:10 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 03:18:10 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 03:18:10 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 03:18:10 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 03:18:10 [INFO] uvicorn.error:93 - _serve(): Finished server process [57934]
2025-06-15 03:18:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:18:23 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:18:23 [INFO] uvicorn.error:83 - _serve(): Started server process [57970]
2025-06-15 03:18:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:18:23 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:18:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:18:29 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 03:18:30 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 03:18:30 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 03:18:30 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 03:18:30 [INFO] uvicorn.error:93 - _serve(): Finished server process [57970]
2025-06-15 03:18:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:18:53 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:18:53 [INFO] uvicorn.error:83 - _serve(): Started server process [57994]
2025-06-15 03:18:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:18:53 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:18:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:19:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:19:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:19:24 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:19:24 [INFO] uvicorn.error:83 - _serve(): Started server process [58040]
2025-06-15 03:19:24 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:19:24 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:19:24 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:19:34 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:19:43 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:19:43 [INFO] uvicorn.error:83 - _serve(): Started server process [58059]
2025-06-15 03:19:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:19:43 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:19:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:19:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:19:58 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:19:58 [INFO] uvicorn.error:83 - _serve(): Started server process [58091]
2025-06-15 03:19:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:19:58 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:19:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:21:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49989 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 03:21:27 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 03:21:27 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 03:21:27 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 03:21:27 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 03:21:27 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 03:21:28 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 03:21:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 03:21:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 03:21:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 03:21:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 03:21:28 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 03:21:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 03:21:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 03:21:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 03:21:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 03:21:28 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 03:21:28 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 03:21:28 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 03:21:28 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 03:21:28 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 03:21:28 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 03:21:28 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 03:21:29 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-15 03:21:29 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-15 03:21:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 03:21:29 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 03:21:29 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-15 03:21:29 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 03:21:29 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-15 03:21:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49989 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 03:22:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 03:22:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 03:22:04 [INFO] app.api.controllers.taxation_controller:290 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 03:22:04 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 03:22:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 03:22:04 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 03:22:04 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 03:22:04 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:209 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-15 03:22:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49991 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 03:29:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51226 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-15 03:29:46 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 03:29:46 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 03:29:46 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-15 03:29:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51226 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-15 03:30:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 03:30:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 03:30:17 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-15 03:30:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51229 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-15 03:33:29 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 03:33:30 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 03:33:30 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 03:33:30 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 03:33:30 [INFO] uvicorn.error:93 - _serve(): Finished server process [58091]
2025-06-15 03:33:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:33:47 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:33:47 [INFO] uvicorn.error:83 - _serve(): Started server process [58261]
2025-06-15 03:33:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:33:47 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:33:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:33:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:34:04 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:34:04 [INFO] uvicorn.error:83 - _serve(): Started server process [58279]
2025-06-15 03:34:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:34:04 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:34:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:34:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:34:15 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:34:15 [INFO] uvicorn.error:83 - _serve(): Started server process [58306]
2025-06-15 03:34:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:34:15 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:34:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:34:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53307 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 403
2025-06-15 03:35:28 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:35:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53605 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 403
2025-06-15 03:36:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53675 - "GET /api/v2/taxation/health HTTP/1.1" 500
2025-06-15 03:36:03 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'string_type', 'loc': ('response', 'features'), 'msg': 'Input should be a valid string', 'input': ['Comprehensive tax calculation', 'All income types supported', 'Perquisites calculation', 'House property income', 'Capital gains', 'Retirement benefits', 'Monthly payroll with LWP', 'Mid-year scenarios', 'Scenario comparison', 'Tax optimization']}

2025-06-15 03:37:39 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 03:37:39 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 03:37:39 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 03:37:39 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 03:37:39 [INFO] uvicorn.error:93 - _serve(): Finished server process [58306]
2025-06-15 03:37:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:38:01 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:38:01 [INFO] uvicorn.error:83 - _serve(): Started server process [58686]
2025-06-15 03:38:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:38:01 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:38:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:38:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 03:38:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 03:38:31 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 03:38:31 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 03:38:31 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 03:38:31 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 03:38:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 03:38:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 03:38:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 03:38:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 03:38:31 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 03:38:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 03:38:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 03:38:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 03:38:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 03:38:31 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 03:38:31 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 03:38:31 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 03:38:31 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 03:38:31 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 03:38:31 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-15 03:38:32 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-15 03:38:32 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-15 03:38:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54488 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-15 03:41:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55637 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-15 03:41:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 03:41:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 03:41:58 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-15 03:47:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 03:47:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 03:47:36 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-15 03:49:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57711 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-15 03:49:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 03:49:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 03:49:19 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-15 03:49:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58235 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-15 03:50:44 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 03:50:44 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 03:50:44 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-15 03:50:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58785 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-15 03:52:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59485 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-15 03:52:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 03:52:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 03:52:36 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-15 03:52:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59485 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-15 03:52:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 03:52:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 03:52:40 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-15 03:52:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59485 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-15 03:57:53 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 03:57:53 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 03:57:53 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 03:57:53 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 03:57:53 [INFO] uvicorn.error:93 - _serve(): Finished server process [58686]
2025-06-15 03:57:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:58:08 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:58:08 [INFO] uvicorn.error:83 - _serve(): Started server process [58849]
2025-06-15 03:58:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:58:08 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:58:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:58:35 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Signature verification failed.
2025-06-15 03:58:35 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Signature verification failed.
2025-06-15 03:58:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61815 - "POST /api/v2/taxation/records HTTP/1.1" 401
2025-06-15 03:58:52 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 03:58:53 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 03:58:53 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 03:58:53 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 03:58:53 [INFO] uvicorn.error:93 - _serve(): Finished server process [58849]
2025-06-15 03:59:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 03:59:43 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 03:59:43 [INFO] uvicorn.error:83 - _serve(): Started server process [58995]
2025-06-15 03:59:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 03:59:43 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 03:59:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 03:59:47 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Signature verification failed.
2025-06-15 03:59:47 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Signature verification failed.
2025-06-15 03:59:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62274 - "POST /api/v2/taxation/records HTTP/1.1" 401
2025-06-15 04:02:55 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 04:02:55 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 04:02:55 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 04:02:55 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 04:02:55 [INFO] uvicorn.error:93 - _serve(): Finished server process [58995]
2025-06-15 04:03:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 04:03:26 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 04:03:26 [INFO] uvicorn.error:83 - _serve(): Started server process [59232]
2025-06-15 04:03:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 04:03:26 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 04:03:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 04:03:33 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Signature verification failed.
2025-06-15 04:03:33 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Signature verification failed.
2025-06-15 04:03:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63444 - "POST /api/v2/taxation/records HTTP/1.1" 401
2025-06-15 04:12:08 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 04:12:08 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 04:12:08 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 04:12:08 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 04:12:08 [INFO] uvicorn.error:93 - _serve(): Finished server process [59232]
2025-06-15 04:12:10 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 04:12:12 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 04:12:12 [INFO] uvicorn.error:83 - _serve(): Started server process [59327]
2025-06-15 04:12:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 04:12:12 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 04:12:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 04:13:34 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 04:13:34 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 04:13:34 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 04:13:34 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 04:13:34 [INFO] uvicorn.error:93 - _serve(): Finished server process [59327]
2025-06-15 04:15:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 04:15:10 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 04:15:10 [INFO] uvicorn.error:83 - _serve(): Started server process [59388]
2025-06-15 04:15:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 04:15:10 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 04:15:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 04:16:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51554 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-15 04:16:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:16:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:16:37 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 04:16:37 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 04:16:37 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 04:16:37 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 04:16:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 04:16:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 04:16:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 04:16:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 04:16:37 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 04:16:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 04:16:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 04:16:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 04:16:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 04:16:37 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 04:16:37 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 04:16:37 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 04:16:37 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 04:16:37 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 04:16:46 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-15 04:16:46 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-15 04:16:46 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-15 04:16:46 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,500,000.00
2025-06-15 04:16:46 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_received: ₹900,000.00
2025-06-15 04:16:46 [INFO] app.api.controllers.taxation_controller:252 - create_taxation_record(): 🔍 salary_income hra_city_type: metro
2025-06-15 04:16:46 [INFO] app.api.controllers.taxation_controller:270 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-15 04:16:46 [INFO] app.api.controllers.taxation_controller:277 - create_taxation_record(): 🔍 Executing command handler...
2025-06-15 04:16:49 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-15 04:16:50 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-15 04:16:52 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-15 04:16:52 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-15 04:16:52 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-15 04:16:52 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-15 04:16:52 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,500,000.00
2025-06-15 04:16:52 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹900,000.00
2025-06-15 04:16:52 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: metro
2025-06-15 04:16:52 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-15 04:16:52 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-15 04:16:52 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-15 04:16:52 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-15 04:16:52 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-15 04:16:52 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-15 04:16:52 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-15 04:16:52 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-15 04:16:52 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-15 04:16:52 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-15 04:16:52 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-15 04:17:44 [INFO] app.application.commands.taxation_commands:171 - handle(): ✅ TaxationRecord entity created successfully
2025-06-15 04:17:45 [INFO] app.application.commands.taxation_commands:178 - handle(): Saving taxation record to repository...
2025-06-15 04:18:15 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Command handler failed: SalaryIncome.__init__() missing 2 required positional arguments: 'hra_received' and 'hra_city_type'
2025-06-15 04:18:15 [ERROR] app.api.controllers.taxation_controller:283 - create_taxation_record(): ❌ Error type: <class 'TypeError'>
2025-06-15 04:18:27 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 04:18:27 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 04:18:27 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 04:18:27 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 04:18:27 [INFO] uvicorn.error:93 - _serve(): Finished server process [59388]
2025-06-15 04:18:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 04:18:47 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 04:18:47 [INFO] uvicorn.error:83 - _serve(): Started server process [59443]
2025-06-15 04:18:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 04:18:47 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 04:18:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 04:18:54 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 04:19:00 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 04:19:00 [INFO] uvicorn.error:83 - _serve(): Started server process [59469]
2025-06-15 04:19:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 04:19:00 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 04:19:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 04:19:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 04:19:10 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 04:19:10 [INFO] uvicorn.error:83 - _serve(): Started server process [59489]
2025-06-15 04:19:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 04:19:10 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 04:19:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 04:19:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:19:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:19:31 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 04:19:31 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 04:19:31 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 04:19:31 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 04:19:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 04:19:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 04:19:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 04:19:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 04:19:31 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 04:19:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 04:19:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 04:19:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 04:19:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 04:19:31 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 04:19:31 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 04:19:31 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 04:19:31 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 04:19:31 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 04:19:39 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-15 04:19:39 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-15 04:19:39 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-15 04:19:39 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,500,000.00
2025-06-15 04:19:39 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_received: ₹900,000.00
2025-06-15 04:19:39 [INFO] app.api.controllers.taxation_controller:252 - create_taxation_record(): 🔍 salary_income hra_city_type: metro
2025-06-15 04:19:39 [INFO] app.api.controllers.taxation_controller:270 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-15 04:19:39 [INFO] app.api.controllers.taxation_controller:277 - create_taxation_record(): 🔍 Executing command handler...
2025-06-15 04:19:45 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-15 04:19:49 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-15 04:19:50 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-15 04:19:50 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-15 04:19:50 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Command handler failed: 'hra_received'
2025-06-15 04:19:50 [ERROR] app.api.controllers.taxation_controller:283 - create_taxation_record(): ❌ Error type: <class 'KeyError'>
2025-06-15 04:19:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52551 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-15 04:22:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:22:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:22:33 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-15 04:22:33 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-15 04:22:33 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-15 04:22:33 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,500,000.00
2025-06-15 04:22:33 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_received: ₹900,000.00
2025-06-15 04:22:33 [INFO] app.api.controllers.taxation_controller:252 - create_taxation_record(): 🔍 salary_income hra_city_type: metro
2025-06-15 04:22:33 [INFO] app.api.controllers.taxation_controller:270 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-15 04:22:33 [INFO] app.api.controllers.taxation_controller:277 - create_taxation_record(): 🔍 Executing command handler...
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,500,000.00
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹900,000.00
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: metro
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-15 04:22:33 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-15 04:23:12 [INFO] app.application.commands.taxation_commands:171 - handle(): ✅ TaxationRecord entity created successfully
2025-06-15 04:23:17 [INFO] app.application.commands.taxation_commands:178 - handle(): Saving taxation record to repository...
2025-06-15 04:23:38 [INFO] app.application.commands.taxation_commands:180 - handle(): ✅ Taxation record saved successfully
2025-06-15 04:23:38 [INFO] app.api.controllers.taxation_controller:280 - create_taxation_record(): ✅ Command handler executed successfully
2025-06-15 04:23:38 [INFO] app.api.controllers.taxation_controller:286 - create_taxation_record(): Created taxation record with comprehensive income: EMP005_2025
2025-06-15 04:28:45 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 04:28:45 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 04:28:45 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 04:28:45 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 04:28:45 [INFO] uvicorn.error:93 - _serve(): Finished server process [59489]
2025-06-15 04:29:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 04:29:56 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 04:29:56 [INFO] uvicorn.error:83 - _serve(): Started server process [59593]
2025-06-15 04:29:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 04:29:56 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 04:29:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 04:30:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56484 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-15 04:30:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:30:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:30:51 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 04:30:51 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 04:30:51 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 04:30:51 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 04:30:51 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 04:30:51 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 04:30:51 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 04:30:51 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 04:30:51 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 04:30:51 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 04:30:51 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 04:30:51 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 04:30:51 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 04:30:51 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 04:30:51 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 04:30:51 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 04:30:51 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 04:30:51 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 04:30:51 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-15 04:30:51 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-15 04:30:51 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-15 04:30:51 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,500,000.00
2025-06-15 04:30:51 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_received: ₹900,000.00
2025-06-15 04:30:51 [INFO] app.api.controllers.taxation_controller:252 - create_taxation_record(): 🔍 salary_income hra_city_type: metro
2025-06-15 04:30:51 [INFO] app.api.controllers.taxation_controller:270 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-15 04:30:51 [INFO] app.api.controllers.taxation_controller:277 - create_taxation_record(): 🔍 Executing command handler...
2025-06-15 04:30:51 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-15 04:30:51 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-15 04:30:52 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-15 04:30:52 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-15 04:30:52 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-15 04:30:52 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-15 04:30:52 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,500,000.00
2025-06-15 04:30:52 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹900,000.00
2025-06-15 04:30:52 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: metro
2025-06-15 04:30:52 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-15 04:30:52 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-15 04:30:52 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-15 04:30:52 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-15 04:30:52 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-15 04:30:52 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-15 04:30:52 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-15 04:30:52 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-15 04:30:52 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-15 04:30:52 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-15 04:30:52 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-15 04:31:01 [INFO] app.application.commands.taxation_commands:171 - handle(): ✅ TaxationRecord entity created successfully
2025-06-15 04:31:01 [INFO] app.application.commands.taxation_commands:178 - handle(): Saving taxation record to repository...
2025-06-15 04:31:01 [INFO] app.application.commands.taxation_commands:180 - handle(): ✅ Taxation record saved successfully
2025-06-15 04:31:01 [INFO] app.api.controllers.taxation_controller:280 - create_taxation_record(): ✅ Command handler executed successfully
2025-06-15 04:31:01 [INFO] app.api.controllers.taxation_controller:286 - create_taxation_record(): Created taxation record with comprehensive income: EMP005_2025
2025-06-15 04:31:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56486 - "POST /api/v2/taxation/records HTTP/1.1" 201
2025-06-15 04:31:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56633 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 04:31:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:31:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:31:17 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-15 04:31:17 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-15 04:31:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:31:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-15 04:31:17 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-15 04:31:17 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-15 04:31:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56633 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 04:31:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56633 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-15 04:31:21 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:31:21 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:31:21 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 04:31:21 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 04:31:21 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:31:21 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:31:21 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-15 04:31:21 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:31:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56635 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-15 04:31:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56635 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 04:31:21 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:31:21 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:31:21 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:31:21 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:31:21 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:31:22 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:31:22 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:31:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56633 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 04:32:18 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:32:18 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:32:18 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 04:32:18 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 04:32:18 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:32:18 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:32:18 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:32:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56834 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-15 04:34:25 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:34:25 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:34:40 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:35:07 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:35:39 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:35:39 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:35:39 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:35:39 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:38:39 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:38:44 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:38:45 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:38:51 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:38:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:38:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:38:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:38:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:38:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:38:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:38:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:38:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:38:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:38:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:38:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:38:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:38:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:38:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:38:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:38:51 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:38:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:38:51 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:38:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:38:51 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:38:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:38:51 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:38:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:38:51 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:38:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:38:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:38:51 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:38:51 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:38:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:38:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:38:51 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:38:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:38:51 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:38:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:38:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:38:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:38:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:38:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:38:51 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:38:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:38:51 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:38:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:38:51 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:38:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:38:51 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:38:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:38:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:38:52 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:38:52 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:38:52 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:38:52 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:38:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58796 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 04:40:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:40:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:40:36 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:40:36 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:40:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:40:36 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:40:36 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:40:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59566 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 04:41:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:41:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:41:02 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:41:02 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:41:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:41:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59867 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 04:41:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:41:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:41:40 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:41:40 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 04:41:44 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:41:44 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:41:44 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:41:44 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:288 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:41:44 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:41:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59897 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 04:41:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60032 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 04:41:58 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:41:58 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:41:58 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-15 04:41:58 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-15 04:41:58 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:41:58 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-15 04:41:59 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-15 04:41:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60032 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 04:51:51 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 04:51:51 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 04:51:51 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 04:51:51 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 04:51:51 [INFO] uvicorn.error:93 - _serve(): Finished server process [59593]
2025-06-15 04:51:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 04:52:06 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 04:52:06 [INFO] uvicorn.error:83 - _serve(): Started server process [59773]
2025-06-15 04:52:06 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 04:52:06 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 04:52:06 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 04:54:45 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 04:54:45 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 04:54:45 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 04:54:45 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 04:54:45 [INFO] uvicorn.error:93 - _serve(): Finished server process [59773]
2025-06-15 04:54:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 04:54:56 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 04:54:56 [INFO] uvicorn.error:83 - _serve(): Started server process [59808]
2025-06-15 04:54:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 04:54:56 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 04:54:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 04:55:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64926 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 04:55:00 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:55:00 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:55:00 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 04:55:00 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 04:55:00 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 04:55:00 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 04:55:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 04:55:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 04:55:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 04:55:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 04:55:00 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 04:55:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 04:55:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 04:55:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 04:55:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 04:55:00 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 04:55:00 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 04:55:00 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 04:55:00 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 04:55:00 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 04:55:00 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-15 04:55:00 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-15 04:55:00 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-15 04:55:00 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-15 04:55:02 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-15 04:55:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-15 04:55:02 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-15 04:55:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:55:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-15 04:55:02 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-15 04:55:03 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-15 04:55:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64926 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 04:55:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64926 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-15 04:55:06 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:55:06 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:55:06 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 04:55:06 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 04:55:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:55:16 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:55:16 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-15 04:55:16 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:55:16 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 1 validation error for HousePropertyIncomeDTO
property_type
  Value error, Property type must be one of: ['Self-Occupied', 'Let-Out', 'Deemed Let-Out'] [type=value_error, input_value='self_occupied', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-15 04:55:16 [ERROR] app.api.controllers.taxation_controller:322 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 1 validation error for HousePropertyIncomeDTO
property_type
  Value error, Property type must be one of: ['Self-Occupied', 'Let-Out', 'Deemed Let-Out'] [type=value_error, input_value='self_occupied', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-15 04:55:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64930 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-15 04:55:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:55:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:55:17 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 04:55:17 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 04:55:20 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:55:20 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:55:20 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:55:20 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 1 validation error for HousePropertyIncomeDTO
property_type
  Value error, Property type must be one of: ['Self-Occupied', 'Let-Out', 'Deemed Let-Out'] [type=value_error, input_value='self_occupied', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-15 04:55:20 [ERROR] app.api.controllers.taxation_controller:322 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 1 validation error for HousePropertyIncomeDTO
property_type
  Value error, Property type must be one of: ['Self-Occupied', 'Let-Out', 'Deemed Let-Out'] [type=value_error, input_value='self_occupied', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-15 04:55:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64930 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-15 04:55:22 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:55:22 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:55:22 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 04:55:22 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 04:55:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:55:30 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:55:30 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:55:30 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 1 validation error for HousePropertyIncomeDTO
property_type
  Value error, Property type must be one of: ['Self-Occupied', 'Let-Out', 'Deemed Let-Out'] [type=value_error, input_value='self_occupied', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-15 04:55:30 [ERROR] app.api.controllers.taxation_controller:322 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 1 validation error for HousePropertyIncomeDTO
property_type
  Value error, Property type must be one of: ['Self-Occupied', 'Let-Out', 'Deemed Let-Out'] [type=value_error, input_value='self_occupied', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-06-15 04:55:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64930 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-15 04:56:39 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-15 04:57:04 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 04:57:04 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 04:57:04 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 04:57:04 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 04:57:04 [INFO] uvicorn.error:93 - _serve(): Finished server process [59808]
2025-06-15 04:57:10 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 04:57:18 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 04:57:18 [INFO] uvicorn.error:83 - _serve(): Started server process [59847]
2025-06-15 04:57:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 04:57:18 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 04:57:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 04:58:37 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 04:58:37 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 04:58:37 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 04:58:37 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 04:58:37 [INFO] uvicorn.error:93 - _serve(): Finished server process [59847]
2025-06-15 04:58:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 04:58:48 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 04:58:48 [INFO] uvicorn.error:83 - _serve(): Started server process [59874]
2025-06-15 04:58:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 04:58:48 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 04:58:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 04:58:49 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:58:49 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:58:49 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 04:58:49 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 04:58:49 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 04:58:49 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 04:58:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 04:58:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 04:58:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 04:58:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 04:58:49 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 04:58:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 04:58:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 04:58:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 04:58:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 04:58:49 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 04:58:49 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 04:58:49 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 04:58:49 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 04:58:49 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 04:58:49 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-15 04:58:49 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-15 04:58:49 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-15 04:58:49 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-15 04:58:52 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-15 04:58:52 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-15 04:58:52 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-15 04:58:52 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:58:52 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-15 04:58:52 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-15 04:58:52 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-15 04:58:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49951 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 04:59:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:59:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:59:02 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 04:59:02 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 04:59:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:59:03 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:59:03 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-15 04:59:03 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:59:03 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 1 validation error for RetirementBenefitsDTO
retrenchment_compensation
  Input should be a valid dictionary or instance of RetrenchmentCompensationDTO [type=model_type, input_value=0, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-06-15 04:59:03 [ERROR] app.api.controllers.taxation_controller:322 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 1 validation error for RetirementBenefitsDTO
retrenchment_compensation
  Input should be a valid dictionary or instance of RetrenchmentCompensationDTO [type=model_type, input_value=0, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-06-15 04:59:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50083 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-15 04:59:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:59:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:59:04 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 04:59:04 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 04:59:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:59:04 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:59:04 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:59:04 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 1 validation error for RetirementBenefitsDTO
retrenchment_compensation
  Input should be a valid dictionary or instance of RetrenchmentCompensationDTO [type=model_type, input_value=0, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-06-15 04:59:04 [ERROR] app.api.controllers.taxation_controller:322 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 1 validation error for RetirementBenefitsDTO
retrenchment_compensation
  Input should be a valid dictionary or instance of RetrenchmentCompensationDTO [type=model_type, input_value=0, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-06-15 04:59:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50083 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-15 04:59:06 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 04:59:06 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 04:59:06 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 04:59:06 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 04:59:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 04:59:06 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 04:59:06 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 04:59:06 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 1 validation error for RetirementBenefitsDTO
retrenchment_compensation
  Input should be a valid dictionary or instance of RetrenchmentCompensationDTO [type=model_type, input_value=0, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-06-15 04:59:06 [ERROR] app.api.controllers.taxation_controller:322 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 1 validation error for RetirementBenefitsDTO
retrenchment_compensation
  Input should be a valid dictionary or instance of RetrenchmentCompensationDTO [type=model_type, input_value=0, input_type=int]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
2025-06-15 04:59:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50083 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-15 05:00:12 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 05:00:12 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 05:00:12 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 05:00:12 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 05:00:12 [INFO] uvicorn.error:93 - _serve(): Finished server process [59874]
2025-06-15 05:00:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 05:00:25 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 05:00:25 [INFO] uvicorn.error:83 - _serve(): Started server process [59921]
2025-06-15 05:00:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 05:00:25 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 05:00:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 05:02:32 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 05:02:32 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 05:02:32 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 05:02:32 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 05:02:32 [INFO] uvicorn.error:93 - _serve(): Finished server process [59921]
2025-06-15 05:02:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 05:02:46 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 05:02:46 [INFO] uvicorn.error:83 - _serve(): Started server process [59940]
2025-06-15 05:02:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 05:02:46 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 05:02:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 05:02:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 05:02:54 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 05:02:54 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 05:02:54 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 05:02:54 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 05:02:54 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 05:02:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 05:02:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 05:02:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 05:02:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 05:02:54 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 05:02:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 05:02:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 05:02:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 05:02:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 05:02:54 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 05:02:54 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 05:02:54 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 05:02:54 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 05:02:54 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 05:02:54 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-15 05:02:54 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-15 05:02:54 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-15 05:02:54 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-15 05:02:56 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-15 05:02:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-15 05:02:56 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-15 05:02:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 05:02:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-15 05:02:56 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-15 05:02:56 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-15 05:02:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51360 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 05:03:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 05:03:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 05:03:05 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 05:03:05 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 05:03:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 05:03:05 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 05:03:05 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-15 05:03:05 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 05:03:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51476 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-15 05:03:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51476 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 05:03:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 05:03:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 05:03:05 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 05:03:05 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 05:03:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 05:03:05 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 05:03:05 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 05:03:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51482 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 05:09:42 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:09:42 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:09:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54221 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:09:44 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:09:44 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:09:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54221 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:09:46 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:09:46 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:09:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54221 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:09:48 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:09:48 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:09:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54221 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:09:49 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:09:49 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:09:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54221 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:09:52 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:09:52 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:09:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54221 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:09:54 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:09:54 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:09:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54221 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:09:56 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:09:56 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:09:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54221 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:09:58 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:09:58 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:09:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54221 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:10:58 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:10:58 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:10:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54718 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:11:00 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:11:00 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:11:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54718 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:11:02 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:11:02 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:11:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54718 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:11:03 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:11:03 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:11:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54718 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:11:05 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:11:05 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:11:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54718 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:11:08 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:11:08 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:11:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54718 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:11:11 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:11:11 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:11:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54718 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:11:14 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:11:14 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:11:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54718 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:11:17 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-15 05:11:17 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-15 05:11:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54718 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-15 05:11:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54949 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-15 05:11:36 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-15 05:11:36 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-15 05:11:36 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-15 05:11:36 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-15 05:11:36 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-15 05:11:37 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-15 05:11:37 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-15 05:11:37 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-15 05:11:37 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-15 05:11:37 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-15 05:11:37 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-15 05:11:37 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-15 05:11:37 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-15T07:41:37.845890
2025-06-15 05:11:37 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-15 05:11:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54949 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-15 05:11:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54949 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-15 05:11:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54951 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-15 05:11:38 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 05:11:38 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 05:11:38 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-15 05:11:38 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-15 05:11:38 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-15 05:11:38 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 05:11:38 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-15 05:11:38 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-15 05:11:38 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-15 05:11:38 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 05:11:38 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-15 05:11:38 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-15 05:11:38 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-15 05:11:38 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-15 05:11:38 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-15 05:11:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54966 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-15 05:11:38 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 05:11:38 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 05:11:38 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-15 05:11:38 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-15 05:11:38 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-15 05:11:38 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 05:11:38 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-15 05:11:38 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-15 05:11:39 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-15 05:11:39 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 05:11:39 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-15 05:11:39 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-15 05:11:39 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-15 05:11:39 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-15 05:11:39 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-15 05:11:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54966 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-15 05:15:41 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 05:15:41 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 05:15:41 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 05:15:41 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 05:15:41 [INFO] uvicorn.error:93 - _serve(): Finished server process [59940]
2025-06-15 05:16:34 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 05:16:43 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 05:16:43 [INFO] uvicorn.error:83 - _serve(): Started server process [60401]
2025-06-15 05:16:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 05:16:43 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 05:16:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 05:22:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56658 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 05:22:27 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 05:22:27 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 05:22:27 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 05:22:27 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 05:22:27 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 05:22:27 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 05:22:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 05:22:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 05:22:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 05:22:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 05:22:27 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 05:22:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 05:22:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 05:22:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 05:22:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 05:22:27 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 05:22:27 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 05:22:27 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 05:22:27 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 05:22:27 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 05:22:27 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-15 05:22:27 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-15 05:22:27 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-15 05:22:27 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-15 05:22:28 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-15 05:22:28 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-15 05:22:28 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-15 05:22:28 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 05:22:28 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-15 05:22:28 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-15 05:22:29 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-15 05:22:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56658 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 05:22:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56658 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-15 05:22:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 05:22:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 05:22:32 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 05:22:32 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 05:22:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 05:22:32 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 05:22:32 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-15 05:22:32 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 05:22:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56660 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-15 05:22:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56660 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 05:22:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 05:22:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 05:22:32 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 05:22:32 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 05:22:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 05:22:32 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 05:22:32 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 05:22:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56658 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 05:23:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56751 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-15 05:23:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 05:23:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 05:23:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56751 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-15 05:23:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 05:23:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 05:23:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56753 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-15 12:33:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 12:33:22 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 12:33:22 [INFO] uvicorn.error:83 - _serve(): Started server process [1445]
2025-06-15 12:33:22 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 12:33:22 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 12:33:22 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 13:11:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50920 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-15 13:11:32 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-15 13:11:32 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-15 13:11:32 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-15 13:11:34 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-15 13:11:34 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-15 13:11:34 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-15 13:11:34 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-15 13:11:34 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-15 13:11:34 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-15 13:11:34 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-15 13:11:34 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-15 13:11:34 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-15 13:11:34 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-15T15:41:34.838932
2025-06-15 13:11:34 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-15 13:11:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50920 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-15 13:11:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50920 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-15 13:11:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50922 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-15 13:11:35 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 13:11:35 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 13:11:35 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 13:11:35 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 13:11:35 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 13:11:35 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 13:11:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 13:11:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 13:11:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 13:11:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 13:11:35 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 13:11:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 13:11:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 13:11:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 13:11:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 13:11:35 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 13:11:35 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 13:11:35 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 13:11:35 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 13:11:35 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 13:11:35 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-15 13:11:35 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-15 13:11:35 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-15 13:11:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-15 13:11:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-15 13:11:35 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-15 13:11:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-15 13:11:35 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-15 13:11:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 13:11:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-15 13:11:36 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-15 13:11:36 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-15 13:11:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 13:11:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-15 13:11:36 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-15 13:11:36 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-15 13:11:36 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-15 13:11:36 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-15 13:11:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50920 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-15 13:11:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 13:11:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 13:11:36 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-15 13:11:36 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-15 13:11:36 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-15 13:11:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 13:11:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-15 13:11:36 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-15 13:11:36 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-15 13:11:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 13:11:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-15 13:11:36 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-15 13:11:36 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-15 13:11:36 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-15 13:11:36 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-15 13:11:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50922 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-15 13:11:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50922 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 13:11:41 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 13:11:41 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 13:11:41 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-15 13:11:41 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-15 13:11:41 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 13:11:41 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-15 13:11:41 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-15 13:11:42 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-15 13:11:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50938 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-15 13:11:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50938 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-15 13:11:45 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 13:11:45 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 13:11:45 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 13:11:45 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-15 13:11:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 13:11:45 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 13:11:45 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-15 13:11:45 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 13:11:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50922 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-15 13:11:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50922 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 13:11:45 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 13:11:45 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 13:11:46 [INFO] app.api.controllers.taxation_controller:311 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 13:11:46 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 13:11:46 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-15 13:11:46 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-15 13:11:46 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-15 13:11:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50938 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 13:12:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51058 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-15 13:12:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 13:12:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 13:12:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51060 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-15 13:17:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52187 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-15 13:17:33 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 13:17:33 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 13:17:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52187 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 13:17:56 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 13:17:56 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 13:17:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52189 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 13:18:31 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 13:18:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 13:18:31 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 13:18:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 13:18:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [1445]
2025-06-15 13:18:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 13:18:55 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 13:18:55 [INFO] uvicorn.error:83 - _serve(): Started server process [1971]
2025-06-15 13:18:55 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 13:18:55 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 13:18:55 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 13:18:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 13:19:08 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 13:19:08 [INFO] uvicorn.error:83 - _serve(): Started server process [2023]
2025-06-15 13:19:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 13:19:08 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 13:19:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 13:19:08 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 13:19:08 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 13:19:08 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 13:19:08 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 13:19:08 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 13:19:08 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 13:19:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 13:19:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 13:19:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 13:19:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 13:19:08 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 13:19:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 13:19:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 13:19:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 13:19:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 13:19:08 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 13:19:08 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 13:19:08 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 13:19:08 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 13:19:08 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 13:19:08 [INFO] app.api.controllers.taxation_controller:548 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 13:19:08 [ERROR] app.api.controllers.taxation_controller:563 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'UnifiedTaxationController' object has no attribute '_convert_dto_to_domain_input'
2025-06-15 13:19:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52741 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 13:21:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 13:21:54 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 13:21:54 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 13:21:54 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 13:21:54 [INFO] uvicorn.error:93 - _serve(): Finished server process [2023]
2025-06-15 13:22:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 13:22:10 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 13:22:10 [INFO] uvicorn.error:83 - _serve(): Started server process [2056]
2025-06-15 13:22:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 13:22:10 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 13:22:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 13:22:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 13:22:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 13:22:26 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 13:22:26 [INFO] uvicorn.error:83 - _serve(): Started server process [2203]
2025-06-15 13:22:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 13:22:26 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 13:22:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 13:22:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 13:22:37 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 13:23:04 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Not enough segments
2025-06-15 13:23:04 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Not enough segments
2025-06-15 13:23:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54058 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 401
2025-06-15 13:58:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63480 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-15 13:58:44 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 13:58:44 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 13:58:44 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 13:58:44 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 13:58:44 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 13:58:44 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 13:58:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 13:58:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 13:58:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 13:58:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 13:58:44 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 13:58:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 13:58:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 13:58:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 13:58:44 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 13:58:44 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 13:58:44 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 13:58:44 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 13:58:44 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 13:58:44 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 13:58:44 [INFO] app.api.controllers.taxation_controller:548 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 13:58:44 [ERROR] app.api.controllers.taxation_controller:563 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: unsupported operand type(s) for +: 'Money' and 'Money'
2025-06-15 13:58:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63480 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 14:03:45 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 14:03:45 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 14:03:45 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 14:03:45 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 14:03:45 [INFO] uvicorn.error:93 - _serve(): Finished server process [2203]
2025-06-15 14:03:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 14:03:58 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 14:03:58 [INFO] uvicorn.error:83 - _serve(): Started server process [2600]
2025-06-15 14:03:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 14:03:58 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 14:03:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 14:04:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 14:04:10 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 14:04:10 [INFO] uvicorn.error:83 - _serve(): Started server process [2625]
2025-06-15 14:04:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 14:04:10 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 14:04:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 14:04:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 14:04:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 14:04:20 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 14:04:53 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 14:04:53 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 14:04:53 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 14:04:53 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 14:04:53 [INFO] uvicorn.error:93 - _serve(): Finished server process [2625]
2025-06-15 14:04:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 14:05:06 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 14:05:06 [INFO] uvicorn.error:83 - _serve(): Started server process [2687]
2025-06-15 14:05:06 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 14:05:06 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 14:05:06 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 14:05:12 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 14:05:13 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 14:05:13 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 14:05:13 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 14:05:13 [INFO] uvicorn.error:93 - _serve(): Finished server process [2687]
2025-06-15 14:05:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 14:05:23 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 14:05:23 [INFO] uvicorn.error:83 - _serve(): Started server process [2714]
2025-06-15 14:05:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 14:05:23 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 14:05:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 14:05:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 14:05:38 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 14:05:38 [INFO] uvicorn.error:83 - _serve(): Started server process [2733]
2025-06-15 14:05:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 14:05:38 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 14:05:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 14:05:55 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 14:05:55 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 14:05:55 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 14:05:55 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 14:05:55 [INFO] uvicorn.error:93 - _serve(): Finished server process [2733]
2025-06-15 14:05:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 14:06:07 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 14:06:07 [INFO] uvicorn.error:83 - _serve(): Started server process [2757]
2025-06-15 14:06:07 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 14:06:07 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 14:06:07 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 14:06:10 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 14:06:10 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 14:06:10 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 14:06:10 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 14:06:10 [INFO] uvicorn.error:93 - _serve(): Finished server process [2757]
2025-06-15 14:06:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 14:06:22 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 14:06:22 [INFO] uvicorn.error:83 - _serve(): Started server process [2778]
2025-06-15 14:06:22 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 14:06:22 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 14:06:22 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 14:06:32 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 14:06:32 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 14:06:32 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 14:06:32 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 14:06:32 [INFO] uvicorn.error:93 - _serve(): Finished server process [2778]
2025-06-15 14:06:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 14:06:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 14:06:44 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 14:06:46 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 14:06:46 [INFO] uvicorn.error:83 - _serve(): Started server process [2795]
2025-06-15 14:06:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 14:06:46 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 14:06:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 14:07:21 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 14:07:21 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 14:07:21 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 14:07:21 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 14:07:21 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 14:07:21 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 14:07:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 14:07:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 14:07:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 14:07:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 14:07:21 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 14:07:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 14:07:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 14:07:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 14:07:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 14:07:21 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 14:07:21 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 14:07:21 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 14:07:21 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 14:07:21 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 14:07:21 [INFO] app.api.controllers.taxation_controller:548 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 14:07:21 [ERROR] app.api.controllers.taxation_controller:563 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'SalaryIncome' object has no attribute 'calculate_total_exemptions'
2025-06-15 14:07:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49789 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 14:59:48 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 14:59:48 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 14:59:48 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 14:59:48 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 14:59:48 [INFO] uvicorn.error:93 - _serve(): Finished server process [2795]
2025-06-15 14:59:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:00:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:00:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:01:06 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:01:06 [INFO] uvicorn.error:83 - _serve(): Started server process [3183]
2025-06-15 15:01:06 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:01:06 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:01:06 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:01:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:01:17 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:01:17 [INFO] uvicorn.error:83 - _serve(): Started server process [3207]
2025-06-15 15:01:17 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:01:17 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:01:17 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:01:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64275 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-15 15:01:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 15:01:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 15:01:17 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 15:01:17 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 15:01:17 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 15:01:17 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 15:01:17 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 15:01:17 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 15:01:17 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 15:01:17 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 15:01:17 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 15:01:17 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 15:01:17 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 15:01:17 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 15:01:17 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 15:01:17 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 15:01:17 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 15:01:17 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 15:01:17 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 15:01:17 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 15:01:17 [INFO] app.api.controllers.taxation_controller:548 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 15:01:17 [ERROR] app.api.controllers.taxation_controller:563 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: SalaryIncome.__init__() got an unexpected keyword argument 'house_rent_allowance'
2025-06-15 15:01:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64275 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 15:02:37 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 15:02:37 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 15:02:37 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 15:02:37 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 15:02:37 [INFO] uvicorn.error:93 - _serve(): Finished server process [3207]
2025-06-15 15:02:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:02:50 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:02:50 [INFO] uvicorn.error:83 - _serve(): Started server process [3230]
2025-06-15 15:02:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:02:50 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:02:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:03:51 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 15:03:51 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 15:03:51 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 15:03:51 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 15:03:51 [INFO] uvicorn.error:93 - _serve(): Finished server process [3230]
2025-06-15 15:03:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:04:05 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:04:05 [INFO] uvicorn.error:83 - _serve(): Started server process [3285]
2025-06-15 15:04:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:04:05 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:04:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:04:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:04:18 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:04:18 [INFO] uvicorn.error:83 - _serve(): Started server process [3301]
2025-06-15 15:04:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:04:18 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:04:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:04:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:04:31 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:04:31 [INFO] uvicorn.error:83 - _serve(): Started server process [3320]
2025-06-15 15:04:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:04:31 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:04:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:04:34 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:04:42 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:04:42 [INFO] uvicorn.error:83 - _serve(): Started server process [3335]
2025-06-15 15:04:42 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:04:42 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:04:42 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:05:01 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 15:05:01 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 15:05:01 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 15:05:01 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 15:05:01 [INFO] uvicorn.error:93 - _serve(): Finished server process [3335]
2025-06-15 15:05:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:05:17 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:05:17 [INFO] uvicorn.error:83 - _serve(): Started server process [3373]
2025-06-15 15:05:17 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:05:17 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:05:17 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:05:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:05:33 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:05:33 [INFO] uvicorn.error:83 - _serve(): Started server process [3399]
2025-06-15 15:05:33 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:05:33 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:05:33 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:05:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:05:50 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:05:50 [INFO] uvicorn.error:83 - _serve(): Started server process [3421]
2025-06-15 15:05:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:05:50 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:05:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:05:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:06:03 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:06:03 [INFO] uvicorn.error:83 - _serve(): Started server process [3455]
2025-06-15 15:06:03 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:06:03 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:06:03 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:06:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:06:24 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:06:24 [INFO] uvicorn.error:83 - _serve(): Started server process [3474]
2025-06-15 15:06:24 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:06:24 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:06:24 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:06:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 15:06:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 15:06:24 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 15:06:24 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 15:06:24 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 15:06:24 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 15:06:24 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 15:06:24 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 15:06:24 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 15:06:24 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 15:06:24 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 15:06:24 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 15:06:24 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 15:06:24 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 15:06:24 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 15:06:24 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 15:06:24 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 15:06:24 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 15:06:24 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 15:06:24 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 15:06:24 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 15:06:24 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: SalaryIncome.__init__() missing 1 required positional argument: 'actual_rent_paid'
2025-06-15 15:06:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49394 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 15:31:30 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 15:31:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 15:31:31 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 15:31:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 15:31:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [3474]
2025-06-15 15:31:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:31:45 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:31:45 [INFO] uvicorn.error:83 - _serve(): Started server process [3720]
2025-06-15 15:31:45 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:31:45 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:31:45 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:31:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:31:54 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:31:54 [INFO] uvicorn.error:83 - _serve(): Started server process [3752]
2025-06-15 15:31:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:31:54 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:31:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:51:27 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 15:51:27 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 15:51:27 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 15:51:27 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 15:51:27 [INFO] uvicorn.error:93 - _serve(): Finished server process [3752]
2025-06-15 15:51:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:51:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:51:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:52:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:52:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:52:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:52:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:52:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:52:52 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:52:52 [INFO] uvicorn.error:83 - _serve(): Started server process [3966]
2025-06-15 15:52:52 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:52:52 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:52:52 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:52:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:53:04 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:53:04 [INFO] uvicorn.error:83 - _serve(): Started server process [3992]
2025-06-15 15:53:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:53:04 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:53:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:53:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:53:14 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:53:14 [INFO] uvicorn.error:83 - _serve(): Started server process [4014]
2025-06-15 15:53:14 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:53:15 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:53:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:53:42 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 15:53:42 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 15:53:42 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 15:53:42 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 15:53:42 [INFO] uvicorn.error:93 - _serve(): Finished server process [4014]
2025-06-15 15:53:54 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:54:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:54:08 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:54:08 [INFO] uvicorn.error:83 - _serve(): Started server process [4062]
2025-06-15 15:54:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:54:08 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:54:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:54:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:54:18 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:54:18 [INFO] uvicorn.error:83 - _serve(): Started server process [4076]
2025-06-15 15:54:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:54:18 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:54:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:55:11 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 15:55:11 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 15:55:11 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 15:55:11 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 15:55:11 [INFO] uvicorn.error:93 - _serve(): Finished server process [4076]
2025-06-15 15:55:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:55:27 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:55:27 [INFO] uvicorn.error:83 - _serve(): Started server process [4113]
2025-06-15 15:55:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:55:27 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:55:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:55:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:55:39 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:55:39 [INFO] uvicorn.error:83 - _serve(): Started server process [4137]
2025-06-15 15:55:39 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:55:39 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:55:39 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:55:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:55:53 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:55:53 [INFO] uvicorn.error:83 - _serve(): Started server process [4156]
2025-06-15 15:55:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:55:53 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:55:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:55:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:56:06 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:56:06 [INFO] uvicorn.error:83 - _serve(): Started server process [4173]
2025-06-15 15:56:06 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:56:06 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:56:06 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:56:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:56:15 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 15:56:15 [INFO] uvicorn.error:83 - _serve(): Started server process [4193]
2025-06-15 15:56:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 15:56:15 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 15:56:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 15:56:40 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 15:56:40 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 15:56:40 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 15:56:40 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 15:56:40 [INFO] uvicorn.error:93 - _serve(): Finished server process [4193]
2025-06-15 15:56:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:57:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:57:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:57:20 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:57:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:57:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:57:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:58:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 15:58:28 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:05:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:05:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:05:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:05:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:05:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:06:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:06:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:06:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:06:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:06:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:06:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:06:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:10:56 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:11:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:11:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:11:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:11:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:11:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:12:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:12:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:12:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:12:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:15:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:15:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:15:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:15:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:15:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:15:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:16:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:16:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:20:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:34:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:36:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:42:54 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:45:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:45:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:45:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:54:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:54:32 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 16:54:32 [INFO] uvicorn.error:83 - _serve(): Started server process [5227]
2025-06-15 16:54:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 16:54:32 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 16:54:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 16:54:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:54:42 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 16:54:42 [INFO] uvicorn.error:83 - _serve(): Started server process [5273]
2025-06-15 16:54:42 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 16:54:42 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 16:54:42 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 16:55:22 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 16:55:22 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 16:55:22 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 16:55:22 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 16:55:22 [INFO] uvicorn.error:93 - _serve(): Finished server process [5273]
2025-06-15 16:55:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 16:55:51 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 16:55:51 [INFO] uvicorn.error:83 - _serve(): Started server process [5322]
2025-06-15 16:55:51 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 16:55:51 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 16:55:51 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 16:56:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64016 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-15 16:56:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 16:56:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 16:56:13 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 16:56:13 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 16:56:13 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 16:56:13 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 16:56:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 16:56:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 16:56:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 16:56:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 16:56:13 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 16:56:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 16:56:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 16:56:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 16:56:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 16:56:13 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 16:56:13 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 16:56:13 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 16:56:13 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 16:56:13 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 16:56:13 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 16:56:13 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: SalaryIncome.__init__() missing 1 required positional argument: 'actual_rent_paid'
2025-06-15 16:56:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64016 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 16:58:23 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 16:58:23 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 16:58:23 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 16:58:29 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: SalaryIncome.__init__() missing 1 required positional argument: 'actual_rent_paid'
2025-06-15 16:58:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64561 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 16:58:44 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 16:58:44 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 16:58:44 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 16:58:49 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: SalaryIncome.__init__() missing 1 required positional argument: 'actual_rent_paid'
2025-06-15 16:58:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64647 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 16:59:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 16:59:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 16:59:05 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 16:59:40 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: SalaryIncome.__init__() missing 1 required positional argument: 'actual_rent_paid'
2025-06-15 16:59:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64773 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 17:00:56 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:00:56 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:00:56 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:00:56 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:00:56 [INFO] uvicorn.error:93 - _serve(): Finished server process [5322]
2025-06-15 17:01:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:01:08 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:01:08 [INFO] uvicorn.error:83 - _serve(): Started server process [5381]
2025-06-15 17:01:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:01:08 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:01:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:01:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:01:18 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:01:18 [INFO] uvicorn.error:83 - _serve(): Started server process [5405]
2025-06-15 17:01:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:01:18 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:01:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:01:30 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:01:30 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:01:30 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:01:30 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:01:30 [INFO] uvicorn.error:93 - _serve(): Finished server process [5405]
2025-06-15 17:01:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:01:41 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:01:41 [INFO] uvicorn.error:83 - _serve(): Started server process [5429]
2025-06-15 17:01:41 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:01:41 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:01:41 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:01:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 17:01:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 17:01:48 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 17:01:48 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 17:01:48 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 17:01:48 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 17:01:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:01:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:01:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:01:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:01:48 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:01:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:01:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:01:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:01:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:01:48 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:01:48 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 17:01:48 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 17:01:48 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 17:01:48 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 17:01:48 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 17:01:51 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'SalaryIncome' object has no attribute 'get_total_salary'
2025-06-15 17:01:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49163 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 17:02:36 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:02:36 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:02:36 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:02:36 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:02:36 [INFO] uvicorn.error:93 - _serve(): Finished server process [5429]
2025-06-15 17:02:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:02:48 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:02:48 [INFO] uvicorn.error:83 - _serve(): Started server process [5460]
2025-06-15 17:02:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:02:48 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:02:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:03:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 17:03:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 17:03:02 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 17:03:02 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 17:03:02 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 17:03:02 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 17:03:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:03:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:03:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:03:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:03:02 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:03:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:03:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:03:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:03:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:03:02 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:03:02 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 17:03:02 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 17:03:02 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 17:03:02 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 17:03:02 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 17:03:23 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'TaxDeductions' object has no attribute 'calculate_total_eligible_deductions'
2025-06-15 17:03:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49506 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 17:10:12 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:10:12 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:10:12 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:10:12 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:10:12 [INFO] uvicorn.error:93 - _serve(): Finished server process [5460]
2025-06-15 17:10:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:10:24 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:10:24 [INFO] uvicorn.error:83 - _serve(): Started server process [5560]
2025-06-15 17:10:24 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:10:24 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:10:24 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:10:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51524 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-15 17:10:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 17:10:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 17:10:29 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 17:10:29 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 17:10:29 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 17:10:29 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 17:10:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:10:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:10:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:10:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:10:29 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:10:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:10:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:10:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:10:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:10:29 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:10:29 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 17:10:29 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 17:10:29 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 17:10:29 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 17:10:29 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 17:10:33 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: TaxDeductions.get_total_deductions() takes 1 positional argument but 2 were given
2025-06-15 17:10:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51524 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 17:10:55 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:10:55 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:10:55 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:10:55 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:10:55 [INFO] uvicorn.error:93 - _serve(): Finished server process [5560]
2025-06-15 17:10:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:11:09 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:11:09 [INFO] uvicorn.error:83 - _serve(): Started server process [5590]
2025-06-15 17:11:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:11:09 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:11:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:12:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 17:12:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 17:12:02 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 17:12:02 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 17:12:02 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 17:12:02 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 17:12:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:12:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:12:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:12:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:12:02 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:12:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:12:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:12:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:12:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:12:02 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:12:02 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 17:12:02 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 17:12:02 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 17:12:02 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 17:12:02 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 17:12:07 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'SalaryIncome' object has no attribute 'overtime'
2025-06-15 17:12:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51935 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 17:13:00 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:13:00 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:13:00 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:13:00 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:13:00 [INFO] uvicorn.error:93 - _serve(): Finished server process [5590]
2025-06-15 17:13:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:13:10 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:13:10 [INFO] uvicorn.error:83 - _serve(): Started server process [5638]
2025-06-15 17:13:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:13:10 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:13:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:14:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 17:14:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 17:14:38 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 17:14:38 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 17:14:38 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 17:14:38 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 17:14:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:14:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:14:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:14:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:14:38 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:14:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:14:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:14:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:14:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:14:38 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:14:38 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 17:14:38 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 17:14:38 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 17:14:38 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 17:14:38 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 17:14:40 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'SalaryIncome' object has no attribute 'arrears'
2025-06-15 17:14:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52675 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 17:14:55 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:14:56 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:14:56 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:14:56 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:14:56 [INFO] uvicorn.error:93 - _serve(): Finished server process [5638]
2025-06-15 17:15:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:15:06 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:15:06 [INFO] uvicorn.error:83 - _serve(): Started server process [5676]
2025-06-15 17:15:06 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:15:06 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:15:06 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:15:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 17:15:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 17:15:13 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 17:15:13 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 17:15:13 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 17:15:13 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 17:15:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:15:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:15:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:15:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:15:13 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:15:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:15:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:15:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:15:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:15:13 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:15:13 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 17:15:13 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 17:15:13 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 17:15:13 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 17:15:13 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 17:15:16 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'SalaryIncome' object has no attribute 'gratuity'
2025-06-15 17:15:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52851 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 17:15:29 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:15:29 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:15:29 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:15:29 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:15:29 [INFO] uvicorn.error:93 - _serve(): Finished server process [5676]
2025-06-15 17:15:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:15:39 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:15:39 [INFO] uvicorn.error:83 - _serve(): Started server process [5710]
2025-06-15 17:15:39 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:15:39 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:15:39 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:16:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 17:16:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 17:16:28 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 17:16:28 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 17:16:28 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 17:16:28 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 17:16:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:16:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:16:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:16:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:16:28 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:16:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:16:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:16:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:16:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:16:28 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:16:28 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 17:16:28 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 17:16:28 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 17:16:28 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 17:16:28 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 17:16:31 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'HousePropertyIncome' object has no attribute 'municipal_value'
2025-06-15 17:16:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53177 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 17:16:56 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:16:56 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:16:56 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:16:56 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:16:56 [INFO] uvicorn.error:93 - _serve(): Finished server process [5710]
2025-06-15 17:17:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:17:09 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:17:09 [INFO] uvicorn.error:83 - _serve(): Started server process [5751]
2025-06-15 17:17:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:17:09 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:17:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:17:09 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 17:17:09 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 17:17:09 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 17:17:09 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 17:17:09 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 17:17:09 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 17:17:09 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:17:09 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:17:09 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:17:09 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:17:09 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:17:09 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:17:09 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:17:09 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:17:09 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:17:09 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:17:09 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 17:17:09 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 17:17:09 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 17:17:09 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 17:17:09 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 17:17:14 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'HousePropertyIncome' object has no attribute 'actual_rent'
2025-06-15 17:17:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53359 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 17:22:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54921 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-15 17:22:59 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 17:22:59 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 17:23:00 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 17:23:00 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'HousePropertyIncome' object has no attribute 'actual_rent'
2025-06-15 17:23:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54923 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 17:23:11 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:23:11 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:23:11 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:23:11 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:23:11 [INFO] uvicorn.error:93 - _serve(): Finished server process [5751]
2025-06-15 17:23:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:23:23 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:23:23 [INFO] uvicorn.error:83 - _serve(): Started server process [5820]
2025-06-15 17:23:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:23:23 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:23:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:23:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 17:23:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 17:23:28 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 17:23:28 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 17:23:28 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 17:23:28 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 17:23:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:23:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:23:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:23:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:23:28 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:23:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:23:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:23:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:23:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:23:28 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:23:28 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 17:23:28 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 17:23:28 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 17:23:28 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 17:23:29 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 17:23:29 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'HousePropertyIncome' object has no attribute 'municipal_tax'
2025-06-15 17:23:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55058 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 17:23:37 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:23:38 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:23:38 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:23:38 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:23:38 [INFO] uvicorn.error:93 - _serve(): Finished server process [5820]
2025-06-15 17:23:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:23:50 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:23:50 [INFO] uvicorn.error:83 - _serve(): Started server process [5841]
2025-06-15 17:23:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:23:50 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:23:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:24:13 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:24:13 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:24:13 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:24:13 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:24:13 [INFO] uvicorn.error:93 - _serve(): Finished server process [5841]
2025-06-15 17:24:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:24:24 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:24:24 [INFO] uvicorn.error:83 - _serve(): Started server process [5871]
2025-06-15 17:24:24 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:24:24 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:24:24 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:24:27 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 17:24:27 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 17:24:27 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 17:24:27 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 17:24:27 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 17:24:27 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 17:24:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:24:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:24:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:24:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:24:27 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:24:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:24:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:24:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:24:27 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:24:27 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:24:27 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 17:24:27 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 17:24:27 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 17:24:27 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 17:24:27 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 17:24:27 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'HousePropertyIncome' object has no attribute 'actual_rent'
2025-06-15 17:24:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55413 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 17:26:55 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:26:55 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:26:55 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:26:55 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:26:55 [INFO] uvicorn.error:93 - _serve(): Finished server process [5871]
2025-06-15 17:26:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:27:07 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:27:07 [INFO] uvicorn.error:83 - _serve(): Started server process [5916]
2025-06-15 17:27:07 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:27:07 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:27:07 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:27:19 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:27:19 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:27:19 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:27:19 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:27:19 [INFO] uvicorn.error:93 - _serve(): Finished server process [5916]
2025-06-15 17:27:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:27:32 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:27:32 [INFO] uvicorn.error:83 - _serve(): Started server process [5940]
2025-06-15 17:27:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:27:32 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:27:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:27:42 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:27:42 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:27:42 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:27:42 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:27:42 [INFO] uvicorn.error:93 - _serve(): Finished server process [5940]
2025-06-15 17:27:47 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:27:56 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:27:56 [INFO] uvicorn.error:83 - _serve(): Started server process [5958]
2025-06-15 17:27:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:27:56 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:27:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:29:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57104 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 403
2025-06-15 17:32:34 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 17:32:34 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 17:32:34 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 17:32:34 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 17:32:34 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 17:32:34 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 17:32:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:32:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:32:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:32:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:32:34 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:32:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:32:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:32:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:32:34 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:32:34 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:32:34 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 17:32:34 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 17:32:34 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 17:32:34 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 17:32:34 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 17:32:34 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'HousePropertyIncome' object has no attribute 'calculate_net_income_from_house_property'
2025-06-15 17:32:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57928 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 17:33:49 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:33:49 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:33:49 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:33:49 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:33:49 [INFO] uvicorn.error:93 - _serve(): Finished server process [5958]
2025-06-15 17:33:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:34:06 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:34:06 [INFO] uvicorn.error:83 - _serve(): Started server process [6294]
2025-06-15 17:34:06 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:34:06 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:34:06 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:35:58 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:35:58 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:35:58 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:35:58 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:35:58 [INFO] uvicorn.error:93 - _serve(): Finished server process [6294]
2025-06-15 17:36:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:36:11 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:36:11 [INFO] uvicorn.error:83 - _serve(): Started server process [6373]
2025-06-15 17:36:11 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:36:11 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:36:11 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:36:22 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:36:22 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:36:22 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:36:22 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:36:22 [INFO] uvicorn.error:93 - _serve(): Finished server process [6373]
2025-06-15 17:36:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:36:34 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:36:34 [INFO] uvicorn.error:83 - _serve(): Started server process [6406]
2025-06-15 17:36:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:36:34 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:36:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:37:16 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:37:16 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:37:16 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:37:16 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:37:16 [INFO] uvicorn.error:93 - _serve(): Finished server process [6406]
2025-06-15 17:37:20 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:37:27 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:37:27 [INFO] uvicorn.error:83 - _serve(): Started server process [6456]
2025-06-15 17:37:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:37:27 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:37:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:38:18 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:38:18 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:38:18 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:38:18 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:38:18 [INFO] uvicorn.error:93 - _serve(): Finished server process [6456]
2025-06-15 17:38:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:38:28 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:38:28 [INFO] uvicorn.error:83 - _serve(): Started server process [6500]
2025-06-15 17:38:28 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:38:28 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:38:28 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:38:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59825 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-15 17:38:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 17:38:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 17:38:36 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 17:38:36 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 17:38:36 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 17:38:36 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 17:38:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:38:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:38:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:38:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:38:36 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:38:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:38:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:38:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:38:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:38:36 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:38:36 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 17:38:36 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 17:38:36 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 17:38:36 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 17:38:36 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 17:38:36 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'CapitalGainsIncome' object has no attribute 'asset_type'
2025-06-15 17:38:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59825 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 17:41:52 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:41:52 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:41:52 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:41:52 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:41:52 [INFO] uvicorn.error:93 - _serve(): Finished server process [6500]
2025-06-15 17:41:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:42:34 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:42:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:42:53 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:42:53 [INFO] uvicorn.error:83 - _serve(): Started server process [6614]
2025-06-15 17:42:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:42:53 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:42:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:42:56 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:43:03 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:43:03 [INFO] uvicorn.error:83 - _serve(): Started server process [6633]
2025-06-15 17:43:03 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:43:03 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:43:03 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:43:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 17:43:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 17:43:19 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 17:43:19 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 17:43:19 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 17:43:19 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 17:43:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:43:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:43:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:43:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:43:19 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:43:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:43:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:43:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:43:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:43:19 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:43:19 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 17:43:19 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 17:43:19 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 17:43:19 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 17:43:19 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 17:43:19 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'CapitalGainsIncome' object has no attribute 'asset_type'
2025-06-15 17:43:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61180 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 17:43:46 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:43:46 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:43:46 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:43:46 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:43:46 [INFO] uvicorn.error:93 - _serve(): Finished server process [6633]
2025-06-15 17:43:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:43:59 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:43:59 [INFO] uvicorn.error:83 - _serve(): Started server process [6671]
2025-06-15 17:43:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:43:59 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:43:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:44:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:44:11 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:44:11 [INFO] uvicorn.error:83 - _serve(): Started server process [6691]
2025-06-15 17:44:11 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:44:11 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:44:11 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:46:03 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:46:03 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:46:03 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:46:03 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:46:03 [INFO] uvicorn.error:93 - _serve(): Finished server process [6691]
2025-06-15 17:46:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:46:15 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:46:15 [INFO] uvicorn.error:83 - _serve(): Started server process [6726]
2025-06-15 17:46:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:46:15 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:46:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:46:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:46:27 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:46:27 [INFO] uvicorn.error:83 - _serve(): Started server process [6745]
2025-06-15 17:46:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:46:27 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:46:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:46:35 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:46:35 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:46:35 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:46:35 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:46:35 [INFO] uvicorn.error:93 - _serve(): Finished server process [6745]
2025-06-15 17:46:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:46:50 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:46:50 [INFO] uvicorn.error:83 - _serve(): Started server process [6763]
2025-06-15 17:46:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:46:50 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:46:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:46:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:47:00 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:47:00 [INFO] uvicorn.error:83 - _serve(): Started server process [6784]
2025-06-15 17:47:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:47:00 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:47:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:47:17 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:47:18 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:47:18 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:47:18 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:47:18 [INFO] uvicorn.error:93 - _serve(): Finished server process [6784]
2025-06-15 17:47:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:47:33 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:47:33 [INFO] uvicorn.error:83 - _serve(): Started server process [6805]
2025-06-15 17:47:33 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:47:33 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:47:33 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:47:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:47:47 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:47:47 [INFO] uvicorn.error:83 - _serve(): Started server process [6830]
2025-06-15 17:47:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:47:47 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:47:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:47:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:48:05 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:48:05 [INFO] uvicorn.error:83 - _serve(): Started server process [6856]
2025-06-15 17:48:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:48:05 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:48:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:48:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:48:22 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:48:22 [INFO] uvicorn.error:83 - _serve(): Started server process [6898]
2025-06-15 17:48:22 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:48:22 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:48:22 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:48:26 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:48:32 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:48:32 [INFO] uvicorn.error:83 - _serve(): Started server process [6920]
2025-06-15 17:48:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:48:32 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:48:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:48:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62793 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-15 17:48:46 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 17:48:46 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 17:48:47 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 17:48:47 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 17:48:47 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 17:48:47 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 17:48:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:48:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:48:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:48:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:48:47 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:48:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:48:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:48:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:48:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:48:47 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:48:47 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 17:48:47 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 17:48:47 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 17:48:47 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 17:48:47 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 17:48:47 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'RetirementBenefits' object has no attribute 'gratuity_amount'
2025-06-15 17:48:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62793 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 17:54:06 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:54:06 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:54:06 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:54:06 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:54:06 [INFO] uvicorn.error:93 - _serve(): Finished server process [6920]
2025-06-15 17:54:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:54:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:54:49 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:54:49 [INFO] uvicorn.error:83 - _serve(): Started server process [7016]
2025-06-15 17:54:49 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:54:49 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:54:49 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:54:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:54:59 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:54:59 [INFO] uvicorn.error:83 - _serve(): Started server process [7056]
2025-06-15 17:54:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:54:59 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:54:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:55:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 17:55:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 17:55:02 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 17:55:02 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 17:55:02 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 17:55:02 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 17:55:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:55:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:55:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:55:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:55:02 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:55:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 17:55:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 17:55:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 17:55:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 17:55:02 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 17:55:02 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 17:55:02 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 17:55:02 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 17:55:02 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 17:55:03 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 17:55:03 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'RetirementBenefits' object has no attribute 'gratuity_amount'
2025-06-15 17:55:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64595 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 17:56:07 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:56:07 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:56:07 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:56:07 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:56:07 [INFO] uvicorn.error:93 - _serve(): Finished server process [7056]
2025-06-15 17:56:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:56:21 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:56:21 [INFO] uvicorn.error:83 - _serve(): Started server process [7069]
2025-06-15 17:56:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:56:21 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:56:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:56:24 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:56:25 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:56:25 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:56:25 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:56:25 [INFO] uvicorn.error:93 - _serve(): Finished server process [7069]
2025-06-15 17:56:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:56:38 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:56:38 [INFO] uvicorn.error:83 - _serve(): Started server process [7091]
2025-06-15 17:56:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:56:38 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:56:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 17:56:46 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 17:56:46 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 17:56:46 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 17:56:46 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 17:56:46 [INFO] uvicorn.error:93 - _serve(): Finished server process [7091]
2025-06-15 17:56:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 17:56:59 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 17:56:59 [INFO] uvicorn.error:83 - _serve(): Started server process [7113]
2025-06-15 17:56:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 17:56:59 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 17:56:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 18:00:01 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 18:00:01 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 18:00:01 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 18:00:01 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 18:00:01 [INFO] uvicorn.error:93 - _serve(): Finished server process [7113]
2025-06-15 18:00:06 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:00:14 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 18:00:14 [INFO] uvicorn.error:83 - _serve(): Started server process [7194]
2025-06-15 18:00:14 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 18:00:14 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 18:00:14 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 18:00:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49842 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 403
2025-06-15 18:02:37 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 18:02:37 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 18:02:37 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 18:02:37 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 18:02:37 [INFO] uvicorn.error:93 - _serve(): Finished server process [7194]
2025-06-15 18:02:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:02:51 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 18:02:51 [INFO] uvicorn.error:83 - _serve(): Started server process [7283]
2025-06-15 18:02:51 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 18:02:51 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 18:02:51 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 18:02:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50609 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-15 18:02:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 18:02:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 18:02:51 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 18:02:51 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 18:02:51 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 18:02:51 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 18:02:51 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 18:02:51 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 18:02:51 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 18:02:51 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 18:02:51 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 18:02:51 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 18:02:51 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 18:02:51 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 18:02:51 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 18:02:51 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 18:02:51 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 18:02:51 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 18:02:51 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 18:02:51 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 18:02:51 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 18:02:51 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'OtherIncome' object has no attribute 'bank_interest'
2025-06-15 18:02:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50635 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 18:05:45 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 18:05:45 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 18:05:45 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 18:05:45 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 18:05:45 [INFO] uvicorn.error:93 - _serve(): Finished server process [7283]
2025-06-15 18:05:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:06:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:06:52 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 18:06:52 [INFO] uvicorn.error:83 - _serve(): Started server process [7372]
2025-06-15 18:06:52 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 18:06:52 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 18:06:52 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 18:06:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:07:04 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 18:07:04 [INFO] uvicorn.error:83 - _serve(): Started server process [7396]
2025-06-15 18:07:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 18:07:04 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 18:07:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 18:09:57 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 18:09:57 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 18:09:57 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 18:09:57 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 18:09:57 [INFO] uvicorn.error:93 - _serve(): Finished server process [7396]
2025-06-15 18:10:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:10:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:10:32 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 18:10:32 [INFO] uvicorn.error:83 - _serve(): Started server process [7465]
2025-06-15 18:10:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 18:10:32 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 18:10:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 18:12:11 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 18:12:11 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 18:12:11 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 18:12:11 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 18:12:11 [INFO] uvicorn.error:93 - _serve(): Finished server process [7465]
2025-06-15 18:12:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:12:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:12:39 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 18:12:39 [INFO] uvicorn.error:83 - _serve(): Started server process [7518]
2025-06-15 18:12:39 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 18:12:39 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 18:12:39 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 18:14:46 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 18:14:46 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 18:14:46 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 18:14:46 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 18:14:46 [INFO] uvicorn.error:93 - _serve(): Finished server process [7518]
2025-06-15 18:14:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:14:57 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 18:14:57 [INFO] uvicorn.error:83 - _serve(): Started server process [7548]
2025-06-15 18:14:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 18:14:57 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 18:14:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 18:16:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 18:16:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 18:16:59 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 18:16:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 18:16:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [7548]
2025-06-15 18:17:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:18:10 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:18:17 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 18:18:17 [INFO] uvicorn.error:83 - _serve(): Started server process [7619]
2025-06-15 18:18:17 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 18:18:17 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 18:18:17 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 18:22:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55919 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-15 18:22:16 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 18:22:16 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 18:22:16 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 18:22:16 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 18:22:16 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 18:22:16 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 18:22:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 18:22:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 18:22:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 18:22:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 18:22:16 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 18:22:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 18:22:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 18:22:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 18:22:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 18:22:16 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 18:22:16 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 18:22:16 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 18:22:16 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 18:22:16 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 18:22:16 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 18:22:16 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: HousePropertyIncome.__init__() got an unexpected keyword argument 'municipal_value'
2025-06-15 18:22:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55921 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 18:25:51 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 18:25:51 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 18:25:51 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 18:25:51 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 18:25:51 [INFO] uvicorn.error:93 - _serve(): Finished server process [7619]
2025-06-15 18:25:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:26:06 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 18:26:06 [INFO] uvicorn.error:83 - _serve(): Started server process [7709]
2025-06-15 18:26:06 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 18:26:06 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 18:26:06 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 18:26:10 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 18:26:11 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 18:26:11 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 18:26:11 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 18:26:11 [INFO] uvicorn.error:93 - _serve(): Finished server process [7709]
2025-06-15 18:26:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:26:26 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 18:26:26 [INFO] uvicorn.error:83 - _serve(): Started server process [7733]
2025-06-15 18:26:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 18:26:26 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 18:26:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 18:26:31 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 18:26:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 18:26:31 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 18:26:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 18:26:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [7733]
2025-06-15 18:26:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:26:44 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 18:26:44 [INFO] uvicorn.error:83 - _serve(): Started server process [7763]
2025-06-15 18:26:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 18:26:44 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 18:26:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 18:26:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:26:58 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 18:26:58 [INFO] uvicorn.error:83 - _serve(): Started server process [7783]
2025-06-15 18:26:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 18:26:58 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 18:26:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 18:27:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57426 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 403
2025-06-15 18:29:14 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 18:29:14 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 18:29:14 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 18:29:14 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 18:29:14 [INFO] uvicorn.error:93 - _serve(): Finished server process [7783]
2025-06-15 18:29:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:29:27 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 18:29:27 [INFO] uvicorn.error:83 - _serve(): Started server process [7893]
2025-06-15 18:29:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 18:29:27 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 18:29:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 18:29:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 18:29:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 18:29:36 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 18:29:37 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 18:29:37 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 18:29:37 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 18:29:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 18:29:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 18:29:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 18:29:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 18:29:37 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 18:29:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 18:29:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 18:29:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 18:29:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 18:29:37 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 18:29:37 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 18:29:37 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 18:29:37 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 18:29:37 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 18:29:37 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 18:29:37 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'Perquisites' object has no attribute 'get_total_perquisites'
2025-06-15 18:29:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58217 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 18:30:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 18:30:54 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 18:30:54 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 18:30:54 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 18:30:54 [INFO] uvicorn.error:93 - _serve(): Finished server process [7893]
2025-06-15 18:30:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:31:05 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 18:31:05 [INFO] uvicorn.error:83 - _serve(): Started server process [7940]
2025-06-15 18:31:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 18:31:05 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 18:31:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 18:31:45 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 18:31:45 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 18:31:45 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 18:31:45 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 18:31:45 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 18:31:45 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 18:31:45 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 18:31:45 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 18:31:45 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 18:31:45 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 18:31:45 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 18:31:45 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 18:31:45 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 18:31:45 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 18:31:45 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 18:31:45 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 18:31:45 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 18:31:45 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 18:31:45 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 18:31:45 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 18:31:45 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 18:31:45 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: Perquisites.calculate_total_perquisites() missing 1 required positional argument: 'regime'
2025-06-15 18:31:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58758 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 18:31:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 18:31:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 18:31:59 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 18:31:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 18:31:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [7940]
2025-06-15 18:32:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 18:32:12 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 18:32:12 [INFO] uvicorn.error:83 - _serve(): Started server process [7969]
2025-06-15 18:32:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 18:32:12 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 18:32:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 18:32:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58932 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-15 18:32:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 18:32:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 18:32:17 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 18:32:17 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 18:32:17 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 18:32:17 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 18:32:17 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 18:32:17 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 18:32:17 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 18:32:17 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 18:32:17 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 18:32:17 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 18:32:17 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 18:32:17 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 18:32:17 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 18:32:17 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 18:32:17 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 18:32:17 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 18:32:17 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 18:32:17 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 18:32:17 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 18:32:17 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'TaxDeductions' object has no attribute 'get_total_deductions'
2025-06-15 18:32:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58934 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 19:03:09 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 19:03:09 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 19:03:09 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 19:03:09 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 19:03:09 [INFO] uvicorn.error:93 - _serve(): Finished server process [7969]
2025-06-15 19:03:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 19:03:21 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 19:03:21 [INFO] uvicorn.error:83 - _serve(): Started server process [8124]
2025-06-15 19:03:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 19:03:21 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 19:03:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 19:03:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50920 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-15 19:03:57 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 19:03:57 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 19:03:57 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 19:03:57 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 19:03:57 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 19:03:57 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 19:03:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 19:03:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 19:03:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 19:03:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 19:03:57 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 19:03:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 19:03:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 19:03:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 19:03:57 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 19:03:57 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 19:03:57 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 19:03:57 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 19:03:57 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 19:03:57 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 19:03:57 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 19:03:57 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'TaxDeductions' object has no attribute 'get_total_deductions'
2025-06-15 19:03:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50923 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 19:04:16 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 19:04:16 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 19:04:16 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 19:04:16 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 19:04:16 [INFO] uvicorn.error:93 - _serve(): Finished server process [8124]
2025-06-15 19:04:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 19:04:28 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 19:04:28 [INFO] uvicorn.error:83 - _serve(): Started server process [8157]
2025-06-15 19:04:28 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 19:04:28 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 19:04:28 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 19:04:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 19:04:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 19:04:28 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 19:04:28 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 19:04:28 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 19:04:28 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 19:04:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 19:04:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 19:04:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 19:04:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 19:04:28 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 19:04:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 19:04:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 19:04:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 19:04:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 19:04:28 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 19:04:28 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 19:04:28 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 19:04:28 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 19:04:28 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 19:04:28 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 19:04:28 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'TaxDeductions' object has no attribute 'get_total_deductions'
2025-06-15 19:04:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51101 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 19:04:43 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 19:04:43 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 19:04:43 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 19:04:43 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 19:04:43 [INFO] uvicorn.error:93 - _serve(): Finished server process [8157]
2025-06-15 19:04:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 19:04:59 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 19:04:59 [INFO] uvicorn.error:83 - _serve(): Started server process [8177]
2025-06-15 19:04:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 19:04:59 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 19:04:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 19:05:30 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 19:05:30 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 19:05:30 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 19:05:30 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 19:05:30 [INFO] uvicorn.error:93 - _serve(): Finished server process [8177]
2025-06-15 19:05:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 19:05:42 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 19:05:42 [INFO] uvicorn.error:83 - _serve(): Started server process [8210]
2025-06-15 19:05:42 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 19:05:42 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 19:05:42 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 19:05:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-15 19:05:52 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-15 19:05:52 [INFO] uvicorn.error:83 - _serve(): Started server process [8231]
2025-06-15 19:05:52 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-15 19:05:52 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-15 19:05:52 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-15 19:06:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 19:06:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 19:06:02 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-15 19:06:02 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-15 19:06:02 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-15 19:06:02 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-15 19:06:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 19:06:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 19:06:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 19:06:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 19:06:02 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 19:06:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-15 19:06:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-15 19:06:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-15 19:06:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-15 19:06:02 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-15 19:06:02 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-15 19:06:02 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-15 19:06:02 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-15 19:06:02 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-15 19:06:02 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-15 19:06:02 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 'Perquisites' object has no attribute 'rent_free_accommodation'
2025-06-15 19:06:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51588 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-15 19:35:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59432 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-15 19:35:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 19:35:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 19:35:51 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:35:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:35:52 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-15 19:35:52 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-15 19:35:52 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:35:52 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:35:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59432 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-15 19:35:53 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 19:35:53 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 19:35:53 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:35:53 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:35:53 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:35:53 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:35:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59432 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-15 19:35:55 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 19:35:55 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 19:35:55 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:35:55 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:35:55 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:35:55 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:35:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59432 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-15 19:35:57 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 19:35:57 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 19:35:57 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:35:57 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:35:57 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:35:57 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:35:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59432 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-15 19:35:58 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 19:35:58 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 19:35:58 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:35:58 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:35:58 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:35:58 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:35:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59432 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-15 19:36:00 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 19:36:00 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 19:36:00 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:36:00 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:36:00 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:36:00 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:36:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59432 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-15 19:36:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 19:36:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 19:36:02 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:36:02 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:36:02 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:36:02 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:36:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59432 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-15 19:36:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 19:36:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 19:36:03 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:36:03 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:36:03 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:36:03 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:36:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59432 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-15 19:36:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-15 19:36:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-15 19:36:05 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:36:05 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-15 19:36:05 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:36:05 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-15 19:36:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59432 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-15 19:36:06 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-15 19:36:06 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-15 19:36:06 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-15 19:36:06 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-15 19:36:06 [INFO] uvicorn.error:93 - _serve(): Finished server process [8231]
2025-06-16 01:55:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 01:57:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 01:57:12 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 01:57:12 [INFO] uvicorn.error:83 - _serve(): Started server process [11646]
2025-06-16 01:57:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 01:57:12 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 01:57:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 01:57:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 01:57:25 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 01:57:25 [INFO] uvicorn.error:83 - _serve(): Started server process [11667]
2025-06-16 01:57:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 01:57:25 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 01:57:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 01:57:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62587 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-16 01:57:29 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-16 01:57:29 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-16 01:57:29 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-16 01:57:30 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 01:57:30 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 01:57:30 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-16 01:57:30 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-16 01:57:30 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-16 01:57:30 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-16 01:57:30 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-16 01:57:31 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-16 01:57:31 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-16 01:57:31 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-16T04:27:31.324326
2025-06-16 01:57:31 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-16 01:57:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62589 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-16 01:57:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62589 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-16 01:57:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62587 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-16 01:57:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 01:57:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 01:57:31 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 01:57:31 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 01:57:31 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 01:57:31 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 01:57:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 01:57:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 01:57:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 01:57:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 01:57:31 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 01:57:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 01:57:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 01:57:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 01:57:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 01:57:31 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 01:57:31 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 01:57:31 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 01:57:31 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 01:57:31 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 01:57:31 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-16 01:57:31 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-16 01:57:31 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-16 01:57:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-16 01:57:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-16 01:57:32 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 01:57:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-16 01:57:32 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 01:57:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 01:57:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-16 01:57:32 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-16 01:57:32 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-16 01:57:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 01:57:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-16 01:57:32 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-16 01:57:32 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-16 01:57:32 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-16 01:57:32 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-16 01:57:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62589 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-16 01:57:33 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 01:57:33 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 01:57:33 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-16 01:57:33 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-16 01:57:33 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-16 01:57:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 01:57:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-16 01:57:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-16 01:57:33 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-16 01:57:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 01:57:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-16 01:57:33 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-16 01:57:33 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-16 01:57:33 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-16 01:57:33 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-16 01:57:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62587 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-16 01:57:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62604 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 01:57:47 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 01:57:47 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 01:57:47 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-16 01:57:47 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-16 01:57:47 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 01:57:47 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-16 01:57:47 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-16 01:57:48 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-16 01:57:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62678 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 01:57:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62680 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 01:57:53 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 01:57:53 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 01:57:53 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 01:57:53 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 01:57:53 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-16 01:57:53 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-16 01:57:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62682 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 01:57:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 01:57:54 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 01:57:54 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 01:57:54 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 01:57:54 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-16 01:57:54 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-16 01:57:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62682 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 01:57:56 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 01:57:56 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 01:57:56 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 01:57:56 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 01:57:56 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-16 01:57:56 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-16 01:57:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62682 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 01:58:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 01:58:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 01:58:13 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 01:58:13 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 01:58:13 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-16 01:58:13 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-16 01:58:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62794 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 01:58:14 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 01:58:14 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 01:58:14 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 01:58:14 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 01:58:14 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-16 01:58:14 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-16 01:58:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62794 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 01:58:16 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 01:58:16 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 01:58:16 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 01:58:16 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 01:58:16 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-16 01:58:16 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() got an unexpected keyword argument 'overtime'
2025-06-16 01:58:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62794 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 02:00:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 02:00:54 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 02:00:54 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:00:54 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:00:54 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'overtime'
2025-06-16 02:00:54 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'overtime'
2025-06-16 02:00:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63888 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 02:00:55 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 02:00:55 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 02:00:55 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:00:55 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:00:55 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'overtime'
2025-06-16 02:00:55 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'overtime'
2025-06-16 02:00:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63888 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 02:00:57 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 02:00:57 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 02:00:57 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:00:57 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:00:57 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'overtime'
2025-06-16 02:00:57 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'overtime'
2025-06-16 02:00:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63888 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 02:03:50 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:03:50 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:03:50 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:03:50 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:03:50 [INFO] uvicorn.error:93 - _serve(): Finished server process [11667]
2025-06-16 02:03:56 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:04:05 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:04:05 [INFO] uvicorn.error:83 - _serve(): Started server process [11746]
2025-06-16 02:04:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:04:05 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:04:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:04:10 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:04:18 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:04:18 [INFO] uvicorn.error:83 - _serve(): Started server process [11770]
2025-06-16 02:04:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:04:18 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:04:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:05:07 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:05:08 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:05:08 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:05:08 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:05:08 [INFO] uvicorn.error:93 - _serve(): Finished server process [11770]
2025-06-16 02:05:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:05:21 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:05:21 [INFO] uvicorn.error:83 - _serve(): Started server process [11795]
2025-06-16 02:05:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:05:21 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:05:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:05:23 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:05:23 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:05:23 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:05:23 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:05:23 [INFO] uvicorn.error:93 - _serve(): Finished server process [11795]
2025-06-16 02:05:28 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:05:37 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:05:37 [INFO] uvicorn.error:83 - _serve(): Started server process [11811]
2025-06-16 02:05:37 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:05:37 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:05:37 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:05:38 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:05:38 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:05:38 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:05:38 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:05:38 [INFO] uvicorn.error:93 - _serve(): Finished server process [11811]
2025-06-16 02:05:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:05:51 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:05:51 [INFO] uvicorn.error:83 - _serve(): Started server process [11830]
2025-06-16 02:05:51 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:05:51 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:05:51 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:05:56 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:06:04 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:06:04 [INFO] uvicorn.error:83 - _serve(): Started server process [11849]
2025-06-16 02:06:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:06:04 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:06:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:06:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:06:17 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:06:17 [INFO] uvicorn.error:83 - _serve(): Started server process [11865]
2025-06-16 02:06:17 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:06:17 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:06:17 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:06:31 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:06:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:06:31 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:06:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:06:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [11865]
2025-06-16 02:06:35 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:06:45 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:06:45 [INFO] uvicorn.error:83 - _serve(): Started server process [11887]
2025-06-16 02:06:45 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:06:45 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:06:45 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:06:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:06:56 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:06:56 [INFO] uvicorn.error:83 - _serve(): Started server process [11903]
2025-06-16 02:06:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:06:56 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:06:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:09:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:09:07 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:09:07 [INFO] uvicorn.error:83 - _serve(): Started server process [12097]
2025-06-16 02:09:07 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:09:07 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:09:07 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:09:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50481 - "GET /health HTTP/1.1" 404
2025-06-16 02:09:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50522 - "GET /api/v2/taxation/employees?skip=0&limit=10 HTTP/1.1" 404
2025-06-16 02:09:29 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:09:29 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:09:29 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:09:29 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:09:29 [INFO] uvicorn.error:93 - _serve(): Finished server process [11903]
2025-06-16 02:09:30 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:09:30 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:09:30 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:09:30 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:09:30 [INFO] uvicorn.error:93 - _serve(): Finished server process [12097]
2025-06-16 02:09:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:09:44 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:09:44 [INFO] uvicorn.error:83 - _serve(): Started server process [12253]
2025-06-16 02:09:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:09:44 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:09:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:09:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50735 - "GET /docs HTTP/1.1" 200
2025-06-16 02:09:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50764 - "GET /api/v2/taxation/comprehensive/employee123?tax_year=2024-25 HTTP/1.1" 404
2025-06-16 02:09:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50786 - "GET /openapi.json HTTP/1.1" 200
2025-06-16 02:10:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50816 - "GET /openapi.json HTTP/1.1" 200
2025-06-16 02:10:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50834 - "GET /openapi.json HTTP/1.1" 200
2025-06-16 02:10:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50856 - "GET /api/v2/taxation/records/employee/test123 HTTP/1.1" 403
2025-06-16 02:10:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50882 - "GET /api/v2/taxation/employee-selection HTTP/1.1" 403
2025-06-16 02:10:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50908 - "GET /api/v2/taxation/health HTTP/1.1" 500
2025-06-16 02:10:23 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'string_type', 'loc': ('response', 'features'), 'msg': 'Input should be a valid string', 'input': ['Comprehensive tax calculation', 'All income types supported', 'Perquisites calculation', 'House property income', 'Capital gains', 'Retirement benefits', 'Monthly payroll with LWP', 'Mid-year scenarios', 'Scenario comparison', 'Tax optimization']}

2025-06-16 02:10:28 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:10:28 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:10:28 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:10:28 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:10:28 [INFO] uvicorn.error:93 - _serve(): Finished server process [12253]
2025-06-16 02:11:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:11:02 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:11:02 [INFO] uvicorn.error:83 - _serve(): Started server process [12490]
2025-06-16 02:11:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:11:02 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:11:02 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:11:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51109 - "GET /docs HTTP/1.1" 200
2025-06-16 02:16:38 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:16:38 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:16:38 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:16:38 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:16:38 [INFO] uvicorn.error:93 - _serve(): Finished server process [12490]
2025-06-16 02:16:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:16:43 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:16:43 [INFO] uvicorn.error:83 - _serve(): Started server process [12565]
2025-06-16 02:16:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:16:43 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:16:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:17:07 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:17:07 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:17:07 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:17:07 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:17:07 [INFO] uvicorn.error:93 - _serve(): Finished server process [12565]
2025-06-16 02:17:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:17:27 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:17:27 [INFO] uvicorn.error:83 - _serve(): Started server process [12612]
2025-06-16 02:17:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:17:27 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:17:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:17:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52966 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 02:17:42 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 02:17:42 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 02:17:42 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 02:17:42 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 02:17:42 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 02:17:42 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 02:17:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 02:17:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 02:17:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 02:17:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 02:17:42 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 02:17:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 02:17:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 02:17:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 02:17:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 02:17:42 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 02:17:42 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 02:17:42 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 02:17:42 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 02:17:42 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 02:17:42 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:17:42 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:17:44 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 02:17:44 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 02:17:44 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'overtime_allowance'
2025-06-16 02:17:44 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'overtime_allowance'
2025-06-16 02:17:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52966 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 02:17:45 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 02:17:45 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 02:17:45 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:17:45 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:17:45 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'overtime_allowance'
2025-06-16 02:17:45 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'overtime_allowance'
2025-06-16 02:17:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52966 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 02:17:47 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 02:17:47 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 02:17:47 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:17:47 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:17:47 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'overtime_allowance'
2025-06-16 02:17:47 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'overtime_allowance'
2025-06-16 02:17:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52966 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 02:19:29 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:19:30 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:19:30 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:19:30 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:19:30 [INFO] uvicorn.error:93 - _serve(): Finished server process [12612]
2025-06-16 02:19:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:19:47 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:19:47 [INFO] uvicorn.error:83 - _serve(): Started server process [12637]
2025-06-16 02:19:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:19:47 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:19:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:20:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54087 - "GET /api/v2/taxation/health HTTP/1.1" 500
2025-06-16 02:20:07 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'string_type', 'loc': ('response', 'features'), 'msg': 'Input should be a valid string', 'input': ['Comprehensive tax calculation', 'All income types supported', 'Perquisites calculation', 'House property income', 'Capital gains', 'Retirement benefits', 'Monthly payroll with LWP', 'Mid-year scenarios', 'Scenario comparison', 'Tax optimization']}

2025-06-16 02:20:13 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:20:13 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:20:13 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:20:13 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:20:13 [INFO] uvicorn.error:93 - _serve(): Finished server process [12637]
2025-06-16 02:20:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:20:28 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:20:28 [INFO] uvicorn.error:83 - _serve(): Started server process [12800]
2025-06-16 02:20:28 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:20:28 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:20:28 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:20:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54196 - "GET /api/v2/taxation/health HTTP/1.1" 500
2025-06-16 02:20:28 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'string_type', 'loc': ('response', 'features'), 'msg': 'Input should be a valid string', 'input': ['Comprehensive tax calculation', 'All income types supported', 'Perquisites calculation', 'House property income', 'Capital gains', 'Retirement benefits', 'Monthly payroll with LWP', 'Mid-year scenarios', 'Scenario comparison', 'Tax optimization']}

2025-06-16 02:20:35 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:20:35 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:20:35 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:20:35 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:20:35 [INFO] uvicorn.error:93 - _serve(): Finished server process [12800]
2025-06-16 02:20:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:21:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:21:07 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:21:20 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:21:23 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:21:23 [INFO] uvicorn.error:83 - _serve(): Started server process [12958]
2025-06-16 02:21:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:21:23 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:21:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:21:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54467 - "GET /docs HTTP/1.1" 200
2025-06-16 02:21:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54505 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 403
2025-06-16 02:27:28 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:27:28 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:27:28 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:27:28 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:27:28 [INFO] uvicorn.error:93 - _serve(): Finished server process [12958]
2025-06-16 02:27:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:27:47 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:27:47 [INFO] uvicorn.error:83 - _serve(): Started server process [13037]
2025-06-16 02:27:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:27:47 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:27:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:27:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56205 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 02:27:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 02:27:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 02:27:48 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 02:27:48 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 02:27:48 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 02:27:48 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 02:27:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 02:27:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 02:27:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 02:27:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 02:27:48 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 02:27:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 02:27:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 02:27:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 02:27:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 02:27:48 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 02:27:48 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 02:27:48 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 02:27:48 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 02:27:48 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 02:27:48 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:27:48 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:27:49 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 02:27:49 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 02:27:49 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'overtime_allowance'
2025-06-16 02:27:49 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'overtime_allowance'
2025-06-16 02:27:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56205 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 02:27:50 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 02:27:50 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 02:27:50 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:27:50 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:27:50 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'overtime_allowance'
2025-06-16 02:27:50 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'overtime_allowance'
2025-06-16 02:27:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56205 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 02:27:52 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 02:27:52 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 02:27:52 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:27:52 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:27:52 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'overtime_allowance'
2025-06-16 02:27:52 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'overtime_allowance'
2025-06-16 02:27:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56205 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 02:29:22 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 02:29:22 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 02:29:22 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:29:22 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 02:29:22 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 02:29:22 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 02:29:22 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-16 02:29:22 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 02:29:22 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:208 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-16 02:29:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56948 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 02:29:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56948 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 02:29:22 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 02:29:22 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 02:29:22 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 02:29:22 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 02:29:22 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 02:29:22 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 02:29:22 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 02:29:22 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:208 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-16 02:29:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56948 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 02:30:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56955 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-16 02:30:08 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 02:30:08 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 02:30:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56955 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-16 02:32:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:32:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:32:59 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:32:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:32:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [13037]
2025-06-16 02:33:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:33:19 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:33:19 [INFO] uvicorn.error:83 - _serve(): Started server process [13086]
2025-06-16 02:33:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:33:19 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:33:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:33:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:33:34 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:33:34 [INFO] uvicorn.error:83 - _serve(): Started server process [13111]
2025-06-16 02:33:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:33:34 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:33:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:34:01 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Signature verification failed.
2025-06-16 02:34:01 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Signature verification failed.
2025-06-16 02:34:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58819 - "POST /api/v2/taxation/records HTTP/1.1" 401
2025-06-16 02:34:15 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Signature verification failed.
2025-06-16 02:34:15 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Signature verification failed.
2025-06-16 02:34:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58873 - "POST /api/v2/taxation/records HTTP/1.1" 401
2025-06-16 02:34:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58922 - "GET /health HTTP/1.1" 404
2025-06-16 02:34:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58965 - "GET / HTTP/1.1" 404
2025-06-16 02:35:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 02:35:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 02:35:43 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 02:35:43 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 02:35:43 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 02:35:43 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 02:35:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 02:35:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 02:35:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 02:35:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 02:35:43 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 02:35:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 02:35:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 02:35:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 02:35:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 02:35:43 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 02:35:43 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 02:35:43 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 02:35:43 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 02:35:43 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 02:35:43 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 02:35:43 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 02:35:43 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 02:35:43 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 02:35:43 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 02:35:43 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 02:35:43 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 02:35:43 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 02:35:43 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 02:35:43 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 02:35:45 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 02:35:45 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:171 - handle(): ✅ TaxationRecord entity created successfully
2025-06-16 02:35:45 [INFO] app.application.commands.taxation_commands:178 - handle(): Saving taxation record to repository...
2025-06-16 02:35:45 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'Perquisites' object has no attribute 'rent_free_accommodation'
2025-06-16 02:35:45 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-16 02:35:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59338 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-16 02:36:00 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:36:00 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:36:00 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:36:00 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:36:00 [INFO] uvicorn.error:93 - _serve(): Finished server process [13111]
2025-06-16 02:36:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:36:13 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:36:13 [INFO] uvicorn.error:83 - _serve(): Started server process [13328]
2025-06-16 02:36:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:36:13 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:36:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:37:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:37:54 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:37:54 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:37:54 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:37:54 [INFO] uvicorn.error:93 - _serve(): Finished server process [13328]
2025-06-16 02:37:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:38:12 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:38:12 [INFO] uvicorn.error:83 - _serve(): Started server process [13360]
2025-06-16 02:38:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:38:12 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:38:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:38:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:38:37 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:38:37 [INFO] uvicorn.error:83 - _serve(): Started server process [13386]
2025-06-16 02:38:37 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:38:37 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:38:37 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:39:36 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Not enough segments
2025-06-16 02:39:36 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Not enough segments
2025-06-16 02:39:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60754 - "POST /api/v2/taxation/records HTTP/1.1" 401
2025-06-16 02:42:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61423 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-16 02:42:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 02:42:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 02:42:03 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 02:42:03 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 02:42:03 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 02:42:03 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 02:42:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 02:42:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 02:42:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 02:42:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 02:42:03 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 02:42:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 02:42:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 02:42:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 02:42:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 02:42:03 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 02:42:03 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 02:42:03 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 02:42:03 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 02:42:03 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 02:42:03 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 02:42:03 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 02:42:03 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 02:42:03 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 02:42:03 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 02:42:03 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 02:42:03 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 02:42:03 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 02:42:03 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 02:42:03 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 02:42:05 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 02:42:05 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:171 - handle(): ✅ TaxationRecord entity created successfully
2025-06-16 02:42:05 [INFO] app.application.commands.taxation_commands:178 - handle(): Saving taxation record to repository...
2025-06-16 02:42:05 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'HousePropertyIncome' object has no attribute 'municipal_value'
2025-06-16 02:42:05 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-16 02:42:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61423 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-16 02:43:18 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:43:18 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:43:18 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:43:18 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:43:18 [INFO] uvicorn.error:93 - _serve(): Finished server process [13386]
2025-06-16 02:43:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:43:37 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:43:37 [INFO] uvicorn.error:83 - _serve(): Started server process [13480]
2025-06-16 02:43:37 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:43:37 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:43:37 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:43:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:44:02 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:44:02 [INFO] uvicorn.error:83 - _serve(): Started server process [13490]
2025-06-16 02:44:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:44:02 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:44:02 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:45:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62559 - "POST /api/v2/taxation/records HTTP/1.1" 403
2025-06-16 02:45:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 02:45:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 02:45:48 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 02:45:48 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 02:45:48 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 02:45:48 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 02:45:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 02:45:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 02:45:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 02:45:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 02:45:49 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 02:45:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 02:45:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 02:45:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 02:45:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 02:45:49 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 02:45:49 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 02:45:49 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 02:45:49 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 02:45:49 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 02:45:49 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 02:45:49 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 02:45:49 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 02:45:49 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 02:45:49 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 02:45:49 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 02:45:49 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 02:45:49 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 02:45:49 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 02:45:49 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 02:45:50 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 02:45:50 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:171 - handle(): ✅ TaxationRecord entity created successfully
2025-06-16 02:45:50 [INFO] app.application.commands.taxation_commands:178 - handle(): Saving taxation record to repository...
2025-06-16 02:45:50 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'CapitalGainsIncome' object has no attribute 'asset_type'
2025-06-16 02:45:50 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-16 02:45:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62808 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-16 02:46:48 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:46:48 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:46:48 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:46:48 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:46:48 [INFO] uvicorn.error:93 - _serve(): Finished server process [13490]
2025-06-16 02:46:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:47:08 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:47:08 [INFO] uvicorn.error:83 - _serve(): Started server process [13563]
2025-06-16 02:47:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:47:08 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:47:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:47:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:47:29 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:47:29 [INFO] uvicorn.error:83 - _serve(): Started server process [13579]
2025-06-16 02:47:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:47:29 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:47:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:48:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63904 - "POST /api/v2/taxation/records HTTP/1.1" 403
2025-06-16 02:53:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65036 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-16 02:53:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 02:53:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 02:53:04 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 02:53:04 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 02:53:04 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 02:53:04 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 02:53:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 02:53:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 02:53:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 02:53:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 02:53:04 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 02:53:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 02:53:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 02:53:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 02:53:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 02:53:04 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 02:53:04 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 02:53:04 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 02:53:04 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 02:53:04 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 02:53:04 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 02:53:04 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 02:53:04 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 02:53:04 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 02:53:04 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 02:53:04 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 02:53:04 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 02:53:04 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 02:53:04 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 02:53:04 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 02:53:06 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 02:53:06 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:171 - handle(): ✅ TaxationRecord entity created successfully
2025-06-16 02:53:06 [INFO] app.application.commands.taxation_commands:178 - handle(): Saving taxation record to repository...
2025-06-16 02:53:06 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'str' object has no attribute 'isoformat'
2025-06-16 02:53:06 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-16 02:53:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65036 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-16 02:54:09 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:54:10 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:54:10 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:54:10 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:54:10 [INFO] uvicorn.error:93 - _serve(): Finished server process [13579]
2025-06-16 02:54:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:54:24 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:54:24 [INFO] uvicorn.error:83 - _serve(): Started server process [13665]
2025-06-16 02:54:24 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:54:24 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:54:24 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:56:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49741 - "POST /api/v2/taxation/records HTTP/1.1" 403
2025-06-16 02:57:14 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 02:57:14 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 02:57:14 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 02:57:14 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 02:57:14 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 02:57:14 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 02:57:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 02:57:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 02:57:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 02:57:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 02:57:14 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 02:57:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 02:57:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 02:57:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 02:57:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 02:57:14 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 02:57:14 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 02:57:14 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 02:57:14 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 02:57:14 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 02:57:14 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 02:57:14 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 02:57:14 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 02:57:14 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 02:57:14 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 02:57:14 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 02:57:14 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 02:57:14 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 02:57:14 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 02:57:14 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 02:57:15 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 02:57:15 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:171 - handle(): ✅ TaxationRecord entity created successfully
2025-06-16 02:57:15 [INFO] app.application.commands.taxation_commands:178 - handle(): Saving taxation record to repository...
2025-06-16 02:57:15 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'OtherIncome' object has no attribute 'bank_interest'
2025-06-16 02:57:15 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-16 02:57:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50100 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-16 02:58:12 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:58:12 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:58:12 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:58:12 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:58:12 [INFO] uvicorn.error:93 - _serve(): Finished server process [13665]
2025-06-16 02:58:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:58:27 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:58:27 [INFO] uvicorn.error:83 - _serve(): Started server process [13777]
2025-06-16 02:58:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:58:27 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:58:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 02:58:31 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 02:58:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 02:58:31 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 02:58:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 02:58:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [13777]
2025-06-16 02:58:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 02:58:46 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 02:58:46 [INFO] uvicorn.error:83 - _serve(): Started server process [13797]
2025-06-16 02:58:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 02:58:46 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 02:58:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:00:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51161 - "POST /api/v2/taxation/records HTTP/1.1" 403
2025-06-16 03:00:52 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:00:52 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:00:52 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 03:00:52 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 03:00:52 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 03:00:52 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 03:00:52 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:00:52 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:00:52 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:00:52 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:00:52 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:00:52 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:00:52 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:00:52 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:00:52 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:00:52 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:00:52 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 03:00:52 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 03:00:52 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 03:00:52 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 03:00:52 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 03:00:52 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 03:00:52 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 03:00:52 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 03:00:52 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 03:00:52 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 03:00:52 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 03:00:52 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 03:00:52 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 03:00:52 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 03:00:55 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 03:00:55 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:171 - handle(): ✅ TaxationRecord entity created successfully
2025-06-16 03:00:55 [INFO] app.application.commands.taxation_commands:178 - handle(): Saving taxation record to repository...
2025-06-16 03:00:55 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'TaxDeductions' object has no attribute 'education_loan_interest'
2025-06-16 03:00:55 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-16 03:00:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51367 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-16 03:03:10 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:03:10 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:03:10 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:03:10 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:03:10 [INFO] uvicorn.error:93 - _serve(): Finished server process [13797]
2025-06-16 03:03:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:03:26 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:03:26 [INFO] uvicorn.error:83 - _serve(): Started server process [13906]
2025-06-16 03:03:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:03:26 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:03:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:03:27 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:03:28 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:03:28 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:03:28 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:03:28 [INFO] uvicorn.error:93 - _serve(): Finished server process [13906]
2025-06-16 03:03:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:03:47 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:03:47 [INFO] uvicorn.error:83 - _serve(): Started server process [13925]
2025-06-16 03:03:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:03:47 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:03:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:04:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52912 - "POST /api/v2/taxation/comprehensive-record HTTP/1.1" 404
2025-06-16 03:05:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53058 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 403
2025-06-16 03:06:09 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:06:09 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:06:09 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:06:09 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:06:09 [INFO] uvicorn.error:93 - _serve(): Finished server process [13925]
2025-06-16 03:06:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:06:20 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:06:20 [INFO] uvicorn.error:83 - _serve(): Started server process [14036]
2025-06-16 03:06:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:06:20 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:06:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:06:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53403 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-16 03:06:30 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:06:30 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:06:30 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 03:06:30 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 03:06:30 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 03:06:31 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 03:06:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:06:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:06:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:06:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:06:31 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:06:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:06:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:06:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:06:31 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:06:31 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:06:31 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 03:06:31 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 03:06:31 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 03:06:31 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 03:06:31 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 03:06:31 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 03:06:31 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 03:06:31 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 03:06:31 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 03:06:31 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 03:06:31 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 03:06:31 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 03:06:31 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 03:06:31 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 03:06:32 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 03:06:32 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:171 - handle(): ✅ TaxationRecord entity created successfully
2025-06-16 03:06:32 [INFO] app.application.commands.taxation_commands:178 - handle(): Saving taxation record to repository...
2025-06-16 03:06:32 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: Invalid document {'employee_id': 'EMP005', 'financial_year': 2025, 'assessment_year': 2026, 'salary_income': {'basic_salary': 1000000.0, 'dearness_allowance': 0.0, 'special_allowance': 0.0, 'conveyance_allowance': 0.0, 'medical_allowance': 0.0, 'hra_received': 400000.0, 'hra_city_type': 'non_metro', 'bonus': 0.0, 'commission': 0.0, 'overtime_allowance': 0.0, 'arrears': 0.0, 'gratuity': 0.0, 'leave_encashment': 0.0, 'other_allowances': 0.0}, 'perquisites': {'rent_free_accommodation': 50000.0, 'concessional_accommodation': 0.0, 'car_perquisite': 0.0, 'driver_perquisite': 0.0, 'fuel_perquisite': 0.0, 'education_perquisite': 0.0, 'domestic_servant_perquisite': 0.0, 'utility_perquisite': 0.0, 'loan_perquisite': 0.0, 'esop_perquisite': 0.0, 'club_membership_perquisite': 0.0, 'other_perquisites': 0.0}, 'house_property_income': {'property_type': <PropertyType.SELF_OCCUPIED: 'Self-Occupied'>, 'municipal_value': 0.0, 'fair_rental_value': 0.0, 'standard_rent': 0.0, 'actual_rent': 0.0, 'municipal_tax': 0.0, 'interest_on_loan': 0.0, 'pre_construction_interest': 0.0, 'other_deductions': 0.0}, 'capital_gains_income': {'asset_type': 'equity', 'purchase_date': '2025-01-01', 'sale_date': '2025-06-16', 'purchase_price': 0.0, 'sale_price': 0.0, 'transfer_expenses': 0.0, 'improvement_cost': 0.0}, 'retirement_benefits': {'gratuity_amount': 0.0, 'years_of_service': 0, 'is_government_employee': False, 'leave_encashment_amount': 0.0, 'leave_balance': 0, 'pension_amount': 0.0, 'is_commuted_pension': False, 'commutation_percentage': 0.0, 'vrs_compensation': 0.0, 'other_retirement_benefits': 0.0}, 'other_income': {'bank_interest': 0.0, 'fixed_deposit_interest': 0.0, 'recurring_deposit_interest': 0.0, 'post_office_interest': 0.0, 'other_interest': 0.0, 'equity_dividend': 0.0, 'mutual_fund_dividend': 0.0, 'other_dividend': 0.0, 'house_property_rent': 0.0, 'commercial_property_rent': 0.0, 'other_rental': 0.0, 'business_income': 0.0, 'professional_income': 0.0, 'short_term_capital_gains': 0.0, 'long_term_capital_gains': 0.0, 'lottery_winnings': 0.0, 'horse_race_winnings': 0.0, 'crossword_puzzle_winnings': 0.0, 'card_game_winnings': 0.0, 'other_speculative_income': 0.0, 'agricultural_income': 0.0, 'share_of_profit_partnership': 0.0, 'interest_on_tax_free_bonds': 0.0, 'other_exempt_income': 0.0}, 'tax_deductions': {'life_insurance_premium': 0.0, 'elss_investments': 0.0, 'public_provident_fund': 0.0, 'employee_provident_fund': 0.0, 'sukanya_samriddhi': 0.0, 'national_savings_certificate': 0.0, 'tax_saving_fixed_deposits': 0.0, 'principal_repayment_home_loan': 0.0, 'tuition_fees': 0.0, 'other_80c_deductions': 0.0, 'health_insurance_self': 0.0, 'health_insurance_parents': 0.0, 'preventive_health_checkup': 0.0, 'education_loan_interest': 0.0, 'donations_80g': 0.0, 'savings_account_interest': 0.0, 'senior_citizen_interest': 0.0, 'disability_deduction': 0.0, 'medical_treatment_deduction': 0.0, 'scientific_research_donation': 0.0, 'political_donation': 0.0, 'infrastructure_deduction': 0.0, 'industrial_undertaking_deduction': 0.0, 'special_category_state_deduction': 0.0, 'hotel_deduction': 0.0, 'north_eastern_state_deduction': 0.0, 'employment_deduction': 0.0, 'employment_generation_deduction': 0.0, 'offshore_banking_deduction': 0.0, 'co_operative_society_deduction': 0.0, 'royalty_deduction': 0.0, 'patent_deduction': 0.0, 'interest_on_savings_deduction': 0.0, 'disability_deduction_amount': 0.0}, 'regime': {'regime_type': 'old'}, 'age': 43, 'is_senior_citizen': False, 'is_super_senior_citizen': False, 'is_government_employee': False, 'created_at': None, 'updated_at': None, '_id': ObjectId('684f3ce08add7da8a15eb7db')} | cannot encode object: <PropertyType.SELF_OCCUPIED: 'Self-Occupied'>, of type: <enum 'PropertyType'>
2025-06-16 03:06:32 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'bson.errors.InvalidDocument'>
2025-06-16 03:06:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53405 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-16 03:08:02 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:08:02 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:08:02 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:08:02 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:08:02 [INFO] uvicorn.error:93 - _serve(): Finished server process [14036]
2025-06-16 03:08:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:08:20 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:08:20 [INFO] uvicorn.error:83 - _serve(): Started server process [14063]
2025-06-16 03:08:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:08:20 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:08:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:11:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:11:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:11:03 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 03:11:03 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 03:11:03 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 03:11:03 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 03:11:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:11:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:11:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:11:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:11:03 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:11:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:11:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:11:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:11:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:11:03 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:11:03 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 03:11:03 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 03:11:03 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 03:11:03 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 03:11:03 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 03:11:03 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 03:11:03 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 03:11:03 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 03:11:03 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 03:11:03 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 03:11:03 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 03:11:03 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 03:11:03 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 03:11:03 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 03:11:05 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 03:11:05 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:171 - handle(): ✅ TaxationRecord entity created successfully
2025-06-16 03:11:05 [INFO] app.application.commands.taxation_commands:178 - handle(): Saving taxation record to repository...
2025-06-16 03:11:05 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: SalaryIncome.__init__() missing 1 required positional argument: 'actual_rent_paid'
2025-06-16 03:11:05 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'TypeError'>
2025-06-16 03:11:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55031 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-16 03:11:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:11:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:11:59 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:11:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:11:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [14063]
2025-06-16 03:12:06 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:12:15 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:12:15 [INFO] uvicorn.error:83 - _serve(): Started server process [14152]
2025-06-16 03:12:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:12:15 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:12:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:12:22 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:12:22 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:12:22 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:12:22 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:12:22 [INFO] uvicorn.error:93 - _serve(): Finished server process [14152]
2025-06-16 03:12:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:12:35 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:12:35 [INFO] uvicorn.error:83 - _serve(): Started server process [14182]
2025-06-16 03:12:35 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:12:35 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:12:35 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:12:47 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:12:47 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:12:47 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:12:47 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:12:47 [INFO] uvicorn.error:93 - _serve(): Finished server process [14182]
2025-06-16 03:12:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:13:00 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:13:00 [INFO] uvicorn.error:83 - _serve(): Started server process [14200]
2025-06-16 03:13:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:13:00 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:13:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:13:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:13:14 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:13:14 [INFO] uvicorn.error:83 - _serve(): Started server process [14222]
2025-06-16 03:13:14 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:13:14 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:13:14 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:13:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:13:21 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:13:21 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:13:21 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:13:21 [INFO] uvicorn.error:93 - _serve(): Finished server process [14222]
2025-06-16 03:13:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:13:39 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:13:39 [INFO] uvicorn.error:83 - _serve(): Started server process [14244]
2025-06-16 03:13:39 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:13:39 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:13:39 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:15:08 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:15:08 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:15:08 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:15:08 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:15:08 [INFO] uvicorn.error:93 - _serve(): Finished server process [14244]
2025-06-16 03:15:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:15:23 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:15:23 [INFO] uvicorn.error:83 - _serve(): Started server process [14304]
2025-06-16 03:15:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:15:23 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:15:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:15:23 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:15:23 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:15:23 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 03:15:23 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 03:15:23 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 03:15:23 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 03:15:23 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:15:23 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:15:23 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:15:23 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:15:23 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:15:23 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:15:23 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:15:23 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:15:23 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:15:23 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:15:23 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 03:15:23 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 03:15:23 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 03:15:23 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 03:15:23 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 03:15:23 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 03:15:23 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 03:15:23 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 03:15:23 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 03:15:23 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 03:15:23 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 03:15:23 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 03:15:23 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 03:15:23 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 03:15:24 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 03:15:24 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 03:15:24 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: RetirementBenefits.__init__() got an unexpected keyword argument 'gratuity_amount'
2025-06-16 03:15:24 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'TypeError'>
2025-06-16 03:15:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56567 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-16 03:16:32 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:16:32 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:16:32 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:16:32 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:16:32 [INFO] uvicorn.error:93 - _serve(): Finished server process [14304]
2025-06-16 03:16:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:16:46 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:16:46 [INFO] uvicorn.error:83 - _serve(): Started server process [14324]
2025-06-16 03:16:46 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:16:46 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:16:46 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:17:42 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:17:42 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:17:42 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:17:42 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:17:42 [INFO] uvicorn.error:93 - _serve(): Finished server process [14324]
2025-06-16 03:17:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:17:58 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:17:58 [INFO] uvicorn.error:83 - _serve(): Started server process [14368]
2025-06-16 03:17:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:17:58 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:17:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:18:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57826 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-16 03:18:42 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:18:42 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:18:42 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 03:18:42 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 03:18:42 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 03:18:42 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 03:18:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:18:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:18:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:18:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:18:42 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:18:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:18:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:18:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:18:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:18:42 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:18:42 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 03:18:42 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 03:18:42 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 03:18:42 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 03:18:42 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 03:18:42 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 03:18:42 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 03:18:42 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 03:18:42 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 03:18:42 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 03:18:42 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 03:18:42 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 03:18:42 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 03:18:42 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 03:18:43 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 03:18:43 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 03:18:43 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: TaxDeductions.__init__() got an unexpected keyword argument 'life_insurance_premium'
2025-06-16 03:18:43 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'TypeError'>
2025-06-16 03:18:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57828 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-16 03:20:08 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:20:09 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:20:09 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:20:09 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:20:09 [INFO] uvicorn.error:93 - _serve(): Finished server process [14368]
2025-06-16 03:20:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:20:23 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:20:23 [INFO] uvicorn.error:83 - _serve(): Started server process [14448]
2025-06-16 03:20:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:20:23 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:20:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:20:27 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:20:28 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:20:28 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:20:28 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:20:28 [INFO] uvicorn.error:93 - _serve(): Finished server process [14448]
2025-06-16 03:20:34 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:20:41 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:20:41 [INFO] uvicorn.error:83 - _serve(): Started server process [14472]
2025-06-16 03:20:41 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:20:41 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:20:41 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:20:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:20:56 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:20:56 [INFO] uvicorn.error:83 - _serve(): Started server process [14487]
2025-06-16 03:20:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:20:56 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:20:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:23:11 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:23:11 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:23:11 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 03:23:11 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 03:23:11 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 03:23:11 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 03:23:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:23:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:23:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:23:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:23:11 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:23:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:23:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:23:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:23:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:23:11 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:23:11 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 03:23:11 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 03:23:11 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 03:23:11 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 03:23:12 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 03:23:12 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 03:23:12 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 03:23:12 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 03:23:12 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 03:23:12 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 03:23:12 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 03:23:12 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 03:23:12 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 03:23:12 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 03:23:14 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 03:23:14 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 03:23:14 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: Taxation record already exists for user EMP005 in 2025-26
2025-06-16 03:23:14 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'app.domain.exceptions.taxation_exceptions.TaxationValidationError'>
2025-06-16 03:23:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59436 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-16 03:24:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:24:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:24:13 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 03:24:13 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 03:24:13 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 03:24:13 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 03:24:13 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 03:24:13 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 03:24:13 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 03:24:13 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:171 - handle(): ✅ TaxationRecord entity created successfully
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:178 - handle(): Saving taxation record to repository...
2025-06-16 03:24:13 [INFO] app.application.commands.taxation_commands:180 - handle(): ✅ Taxation record saved successfully
2025-06-16 03:24:13 [INFO] app.api.controllers.taxation_controller:279 - create_taxation_record(): ✅ Command handler executed successfully
2025-06-16 03:24:13 [INFO] app.api.controllers.taxation_controller:285 - create_taxation_record(): Created taxation record with comprehensive income: EMP005_2025
2025-06-16 03:24:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59861 - "POST /api/v2/taxation/records HTTP/1.1" 201
2025-06-16 03:24:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59968 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 03:24:22 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:24:22 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:24:22 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-16 03:24:22 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-16 03:24:22 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 03:24:22 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-16 03:24:22 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-16 03:24:23 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-16 03:24:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59970 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 03:24:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60013 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 03:24:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:24:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:24:28 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 03:24:28 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 03:24:28 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 03:24:28 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 03:24:28 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-16 03:24:28 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 03:24:28 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: float() argument must be a string or a real number, not 'LeaveEncashment'
2025-06-16 03:24:28 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: float() argument must be a string or a real number, not 'LeaveEncashment'
2025-06-16 03:24:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60015 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 03:24:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:24:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:24:29 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 03:24:29 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 03:24:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 03:24:29 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 03:24:29 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 03:24:29 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: float() argument must be a string or a real number, not 'LeaveEncashment'
2025-06-16 03:24:29 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: float() argument must be a string or a real number, not 'LeaveEncashment'
2025-06-16 03:24:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60015 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 03:24:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:24:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:24:31 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 03:24:31 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 03:24:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 03:24:32 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 03:24:32 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 03:24:32 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: float() argument must be a string or a real number, not 'LeaveEncashment'
2025-06-16 03:24:32 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: float() argument must be a string or a real number, not 'LeaveEncashment'
2025-06-16 03:24:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60015 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 03:25:37 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:25:37 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:25:37 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:25:37 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:25:37 [INFO] uvicorn.error:93 - _serve(): Finished server process [14487]
2025-06-16 03:25:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:25:52 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:25:52 [INFO] uvicorn.error:83 - _serve(): Started server process [14593]
2025-06-16 03:25:52 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:25:52 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:25:52 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:27:35 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:27:35 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:27:35 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 03:27:35 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 03:27:35 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 03:27:35 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 03:27:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:27:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:27:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:27:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:27:35 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:27:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:27:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:27:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:27:35 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:27:35 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:27:35 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 03:27:35 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 03:27:35 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 03:27:35 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 03:27:35 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 03:27:35 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 03:27:36 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 03:27:36 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 03:27:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 03:27:36 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 03:27:36 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-16 03:27:36 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 03:27:36 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: float() argument must be a string or a real number, not 'LeaveEncashment'
2025-06-16 03:27:36 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: float() argument must be a string or a real number, not 'LeaveEncashment'
2025-06-16 03:27:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61088 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 03:27:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:27:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:27:37 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 03:27:37 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 03:27:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 03:27:37 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 03:27:37 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 03:27:37 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: float() argument must be a string or a real number, not 'LeaveEncashment'
2025-06-16 03:27:37 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: float() argument must be a string or a real number, not 'LeaveEncashment'
2025-06-16 03:27:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61088 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 03:27:39 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:27:39 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:27:39 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 03:27:39 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 03:27:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 03:27:40 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 03:27:40 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 03:27:40 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: float() argument must be a string or a real number, not 'LeaveEncashment'
2025-06-16 03:27:40 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: float() argument must be a string or a real number, not 'LeaveEncashment'
2025-06-16 03:27:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61088 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 03:28:43 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:28:43 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:28:43 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:28:43 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:28:43 [INFO] uvicorn.error:93 - _serve(): Finished server process [14593]
2025-06-16 03:28:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:29:02 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:29:02 [INFO] uvicorn.error:83 - _serve(): Started server process [14678]
2025-06-16 03:29:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:29:02 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:29:02 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:29:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:29:18 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:29:18 [INFO] uvicorn.error:83 - _serve(): Started server process [14709]
2025-06-16 03:29:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:29:18 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:29:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:29:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:29:36 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:29:36 [INFO] uvicorn.error:83 - _serve(): Started server process [14732]
2025-06-16 03:29:36 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:29:36 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:29:36 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:29:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:29:51 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:29:51 [INFO] uvicorn.error:83 - _serve(): Started server process [14754]
2025-06-16 03:29:51 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:29:51 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:29:51 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:30:46 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:30:46 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:30:46 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:30:46 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:30:46 [INFO] uvicorn.error:93 - _serve(): Finished server process [14754]
2025-06-16 03:30:56 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:31:05 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:31:05 [INFO] uvicorn.error:83 - _serve(): Started server process [14801]
2025-06-16 03:31:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:31:05 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:31:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:31:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:31:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:31:05 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 03:31:05 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 03:31:05 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 03:31:05 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 03:31:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:31:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:31:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:31:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:31:05 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:31:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:31:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:31:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:31:05 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:31:05 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:31:05 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 03:31:05 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 03:31:05 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 03:31:05 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 03:31:05 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 03:31:05 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 03:31:06 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 03:31:06 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 03:31:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 03:31:06 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 03:31:06 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-16 03:31:06 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 03:31:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62376 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 03:31:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62376 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 03:31:07 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:31:07 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:31:07 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 03:31:07 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 03:31:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 03:31:07 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 03:31:07 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 03:31:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62376 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 03:31:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62500 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 03:31:27 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:31:27 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:31:27 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-16 03:31:27 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: Cannot subtract to negative amount
2025-06-16 03:31:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62649 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 422
2025-06-16 03:32:30 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:32:30 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:32:30 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:32:30 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:32:30 [INFO] uvicorn.error:93 - _serve(): Finished server process [14801]
2025-06-16 03:32:34 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:32:43 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:32:43 [INFO] uvicorn.error:83 - _serve(): Started server process [14841]
2025-06-16 03:32:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:32:43 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:32:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:32:48 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:32:48 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:32:48 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:32:48 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:32:48 [INFO] uvicorn.error:93 - _serve(): Finished server process [14841]
2025-06-16 03:32:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:33:03 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:33:03 [INFO] uvicorn.error:83 - _serve(): Started server process [14858]
2025-06-16 03:33:03 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:33:03 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:33:03 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:33:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:33:17 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:33:17 [INFO] uvicorn.error:83 - _serve(): Started server process [14880]
2025-06-16 03:33:17 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:33:17 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:33:17 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:33:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:33:34 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:33:34 [INFO] uvicorn.error:83 - _serve(): Started server process [14895]
2025-06-16 03:33:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:33:34 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:33:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:33:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:33:50 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:33:50 [INFO] uvicorn.error:83 - _serve(): Started server process [14918]
2025-06-16 03:33:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:33:50 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:33:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:33:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:34:04 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:34:04 [INFO] uvicorn.error:83 - _serve(): Started server process [14951]
2025-06-16 03:34:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:34:04 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:34:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:34:15 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:34:15 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:34:15 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:34:15 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:34:15 [INFO] uvicorn.error:93 - _serve(): Finished server process [14951]
2025-06-16 03:34:20 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:34:31 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:34:31 [INFO] uvicorn.error:83 - _serve(): Started server process [14971]
2025-06-16 03:34:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:34:31 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:34:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:34:31 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:34:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:34:31 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:34:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:34:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [14971]
2025-06-16 03:34:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:34:45 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:34:45 [INFO] uvicorn.error:83 - _serve(): Started server process [14986]
2025-06-16 03:34:45 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:34:45 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:34:45 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:34:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:35:00 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:35:00 [INFO] uvicorn.error:83 - _serve(): Started server process [15005]
2025-06-16 03:35:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:35:00 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:35:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:35:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:35:15 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:35:15 [INFO] uvicorn.error:83 - _serve(): Started server process [15024]
2025-06-16 03:35:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:35:15 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:35:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:35:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:35:30 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:35:30 [INFO] uvicorn.error:83 - _serve(): Started server process [15082]
2025-06-16 03:35:30 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:35:30 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:35:30 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:35:34 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:35:43 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:35:43 [INFO] uvicorn.error:83 - _serve(): Started server process [15098]
2025-06-16 03:35:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:35:43 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:35:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:35:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:35:57 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:35:57 [INFO] uvicorn.error:83 - _serve(): Started server process [15117]
2025-06-16 03:35:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:35:57 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:35:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:36:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:36:10 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:36:10 [INFO] uvicorn.error:83 - _serve(): Started server process [15174]
2025-06-16 03:36:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:36:10 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:36:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:39:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:39:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:39:32 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 03:39:32 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 03:39:32 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 03:39:32 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 03:39:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:39:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:39:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:39:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:39:32 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:39:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:39:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:39:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:39:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:39:32 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:39:32 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 03:39:33 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 03:39:33 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 03:39:33 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 03:39:33 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-16 03:39:33 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 11 validation errors for PeriodicTaxCalculationResponseDTO
employment_periods
  Input should be a valid integer [type=int_type, input_value=[], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/int_type
period_wise_income
  Input should be a valid list [type=list_type, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
surcharge_breakdown.applicable
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
surcharge_breakdown.rate
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
surcharge_breakdown.rate_description
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
surcharge_breakdown.base_amount
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
surcharge_breakdown.surcharge_amount
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
surcharge_breakdown.income_slab
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
surcharge_breakdown.marginal_relief_applicable
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
surcharge_breakdown.marginal_relief_amount
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
surcharge_breakdown.effective_surcharge
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-16 03:39:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65516 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 422
2025-06-16 03:40:02 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Not enough segments
2025-06-16 03:40:02 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Not enough segments
2025-06-16 03:40:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49333 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 401
2025-06-16 03:40:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49379 - "GET /health HTTP/1.1" 404
2025-06-16 03:40:15 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:40:15 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:40:15 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:40:15 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:40:15 [INFO] uvicorn.error:93 - _serve(): Finished server process [15174]
2025-06-16 03:41:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:41:03 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:45:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:45:24 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:45:24 [INFO] uvicorn.error:83 - _serve(): Started server process [15613]
2025-06-16 03:45:24 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:45:24 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:45:24 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:45:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51036 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 03:45:39 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:45:39 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:45:39 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 03:45:39 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 03:45:39 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 03:45:39 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 03:45:39 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:45:39 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:45:39 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:45:39 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:45:39 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:45:39 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:45:39 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:45:39 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:45:39 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:45:39 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:45:39 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 03:45:39 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 03:45:39 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 03:45:39 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 03:45:39 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-16 03:45:39 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: 11 validation errors for PeriodicTaxCalculationResponseDTO
employment_periods
  Input should be a valid integer [type=int_type, input_value=[], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/int_type
period_wise_income
  Input should be a valid list [type=list_type, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/list_type
surcharge_breakdown.applicable
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
surcharge_breakdown.rate
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
surcharge_breakdown.rate_description
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
surcharge_breakdown.base_amount
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
surcharge_breakdown.surcharge_amount
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
surcharge_breakdown.income_slab
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
surcharge_breakdown.marginal_relief_applicable
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
surcharge_breakdown.marginal_relief_amount
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
surcharge_breakdown.effective_surcharge
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-16 03:45:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51038 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 422
2025-06-16 03:56:33 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 03:56:33 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 03:56:33 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 03:56:33 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 03:56:33 [INFO] uvicorn.error:93 - _serve(): Finished server process [15613]
2025-06-16 03:56:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:56:48 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:56:48 [INFO] uvicorn.error:83 - _serve(): Started server process [15722]
2025-06-16 03:56:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:56:48 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:56:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:56:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:57:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:57:20 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:57:27 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:57:27 [INFO] uvicorn.error:83 - _serve(): Started server process [15772]
2025-06-16 03:57:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:57:27 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:57:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:57:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 03:57:40 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 03:57:40 [INFO] uvicorn.error:83 - _serve(): Started server process [15789]
2025-06-16 03:57:40 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 03:57:40 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 03:57:40 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 03:57:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54338 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 03:57:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 03:57:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 03:57:40 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 03:57:40 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 03:57:40 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 03:57:40 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 03:57:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:57:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:57:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:57:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:57:40 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:57:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 03:57:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 03:57:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 03:57:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 03:57:40 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 03:57:40 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 03:57:40 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 03:57:40 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 03:57:40 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 03:57:40 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-16 03:57:40 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-16 03:57:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54364 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 04:08:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57722 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 04:08:27 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 04:08:27 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 04:08:27 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 04:08:27 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 04:08:28 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 04:08:28 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 04:08:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 04:08:29 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 04:08:29 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-16 04:08:29 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 04:08:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57724 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 04:13:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59701 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 04:13:11 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 04:13:11 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 04:13:11 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-16 04:13:11 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-16 04:13:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59701 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 04:15:33 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 04:15:33 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 04:15:33 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 04:15:33 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 04:15:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 04:15:33 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 04:15:33 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 04:15:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60762 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 04:16:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 04:16:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 04:16:17 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-16 04:16:18 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-16 04:16:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61053 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 04:20:50 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 04:20:50 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 04:20:50 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-16 04:20:50 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-16 04:20:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62961 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 04:27:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49417 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 04:27:31 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 04:27:31 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 04:27:31 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 04:27:31 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 04:27:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 04:27:31 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 04:27:31 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 04:27:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49419 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 04:27:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49507 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 04:27:45 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 04:27:45 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 04:27:45 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-16 04:27:45 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-16 04:27:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49510 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 04:33:08 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 513, in _configured_socket_interface
    ssl_sock = ssl_context.wrap_socket(sock, server_hostname=host)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 455, in wrap_socket
    return self.sslsocket_class._create(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sock=sock,
        ^^^^^^^^^^
    ...<5 lines>...
        session=session
        ^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1076, in _create
    self.do_handshake()
    ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1372, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
TimeoutError: _ssl.c:1011: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 527, in _configured_socket_interface
    _raise_connection_failure(address, exc, "SSL handshake failed: ", timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: _ssl.c:1011: The handshake operation timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-16 04:35:50 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 04:35:50 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 04:35:50 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 04:35:50 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 04:35:50 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 04:35:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 04:35:51 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 04:35:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52935 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 04:36:07 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 04:36:07 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 04:36:07 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-16 04:36:07 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-16 04:36:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53055 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 04:42:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55548 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 04:42:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 04:42:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 04:42:36 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 04:42:36 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 04:42:36 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 04:42:37 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 04:42:37 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 04:42:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55548 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 04:45:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56648 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 04:45:26 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 04:45:26 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 04:45:26 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-16 04:45:26 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-16 04:45:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56648 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 05:02:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60985 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 05:02:34 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 05:02:34 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 05:02:34 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 05:02:34 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 05:02:34 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 05:02:34 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 05:02:34 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 05:02:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60989 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 05:02:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61067 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 05:02:52 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 05:02:52 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 05:02:52 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-16 05:02:52 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-16 05:02:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61067 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 05:03:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 05:03:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 05:03:19 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 05:03:19 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 05:03:19 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 05:03:19 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 05:03:19 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 05:03:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61069 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 05:04:12 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 05:04:12 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 05:04:12 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-16 05:04:12 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-16 05:04:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61544 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 05:09:18 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 05:09:18 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 05:09:18 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 05:09:18 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 05:09:18 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 05:09:18 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 05:09:18 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 05:09:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63611 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 05:09:25 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 513, in _configured_socket_interface
    ssl_sock = ssl_context.wrap_socket(sock, server_hostname=host)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 455, in wrap_socket
    return self.sslsocket_class._create(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sock=sock,
        ^^^^^^^^^^
    ...<5 lines>...
        session=session
        ^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1076, in _create
    self.do_handshake()
    ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1372, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
TimeoutError: _ssl.c:1011: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 527, in _configured_socket_interface
    _raise_connection_failure(address, exc, "SSL handshake failed: ", timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: _ssl.c:1011: The handshake operation timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-16 05:09:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 05:09:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 05:09:32 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-16 05:09:32 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-16 05:09:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63665 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 07:10:37 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
OSError: [Errno 50] Network is down

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 50] Network is down (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-16 11:10:48 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 513, in _configured_socket_interface
    ssl_sock = ssl_context.wrap_socket(sock, server_hostname=host)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 455, in wrap_socket
    return self.sslsocket_class._create(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sock=sock,
        ^^^^^^^^^^
    ...<5 lines>...
        session=session
        ^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1076, in _create
    self.do_handshake()
    ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1372, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
OSError: [Errno 50] Network is down

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 527, in _configured_socket_interface
    _raise_connection_failure(address, exc, "SSL handshake failed: ", timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 50] Network is down (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-16 11:10:50 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 135, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-16 12:28:22 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1051, in connect
    conn.authenticate()
    ~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 522, in authenticate
    auth.authenticate(creds, self, reauthenticate=reauthenticate)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 450, in authenticate
    auth_func(credentials, conn)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 355, in _authenticate_default
    return _authenticate_scram(credentials, conn, "SCRAM-SHA-1")
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/auth.py", line 135, in _authenticate_scram
    res = conn.command(source, cmd)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/helpers.py", line 47, in inner
    return func(*args, **kwargs)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 438, in command
    self._raise_connection_failure(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 410, in command
    return command(
        self,
    ...<20 lines>...
        write_concern=write_concern,
    )
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/network.py", line 198, in command
    reply = receive_message(conn, request_id)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 755, in receive_message
    length, _, response_to, op_code = _UNPACK_HEADER(receive_data(conn, 16, deadline))
                                                     ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/network_layer.py", line 363, in receive_data
    raise _OperationCancelled("operation cancelled") from None
pymongo.errors._OperationCancelled: operation cancelled
2025-06-16 12:28:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 12:29:00 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 12:29:00 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 12:29:00 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 12:29:00 [INFO] uvicorn.error:93 - _serve(): Finished server process [15789]
2025-06-16 12:29:34 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 12:29:49 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 12:29:49 [INFO] uvicorn.error:83 - _serve(): Started server process [18237]
2025-06-16 12:29:49 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 12:29:49 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 12:29:49 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 12:29:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64181 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 12:29:51 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-16 12:29:51 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-16 12:29:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64181 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-16 12:29:52 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-16 12:29:52 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-16 12:29:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64181 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-16 12:29:54 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-16 12:29:54 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-16 12:29:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64181 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-16 12:29:55 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-16 12:29:55 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-16 12:29:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64181 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-16 12:29:56 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-16 12:29:56 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-16 12:29:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64181 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-16 12:29:58 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-16 12:29:58 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-16 12:29:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64181 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-16 12:30:00 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-16 12:30:00 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-16 12:30:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64181 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-16 12:30:01 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-16 12:30:01 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-16 12:30:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64181 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-16 12:30:03 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-16 12:30:03 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-16 12:30:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64181 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-16 12:32:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64286 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-16 12:32:27 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-16 12:32:27 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-16 12:32:27 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-16 12:32:28 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 12:32:28 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 12:32:28 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-16 12:32:28 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-16 12:32:28 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-16 12:32:28 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-16 12:32:28 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-16 12:32:29 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-16 12:32:29 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-16 12:32:29 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-16T15:02:29.145496
2025-06-16 12:32:29 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-16 12:32:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64286 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-16 12:32:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64286 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-16 12:32:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64302 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-16 12:32:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 12:32:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 12:32:29 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 12:32:29 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 12:32:29 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 12:32:29 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 12:32:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 12:32:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 12:32:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 12:32:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 12:32:29 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 12:32:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 12:32:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 12:32:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 12:32:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 12:32:29 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 12:32:29 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 12:32:29 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 12:32:29 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 12:32:29 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 12:32:29 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-16 12:32:29 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-16 12:32:29 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-16 12:32:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-16 12:32:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-16 12:32:30 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 12:32:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-16 12:32:30 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 12:32:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 12:32:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-16 12:32:30 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-16 12:32:30 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-16 12:32:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 12:32:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-16 12:32:30 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-16 12:32:30 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-16 12:32:30 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-16 12:32:30 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-16 12:32:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64304 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-16 12:32:30 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 12:32:30 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 12:32:30 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-16 12:32:30 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-16 12:32:30 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-16 12:32:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 12:32:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-16 12:32:30 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-16 12:32:30 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-16 12:32:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 12:32:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-16 12:32:31 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-16 12:32:31 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-16 12:32:31 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-16 12:32:31 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-16 12:32:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64304 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-16 12:32:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64378 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 12:32:42 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 12:32:42 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 12:32:42 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-16 12:32:42 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-16 12:32:42 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 12:32:42 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-16 12:32:42 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-16 12:32:42 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-16 12:32:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64378 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 12:32:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64378 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 12:32:44 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 12:32:44 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 12:32:44 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 12:32:44 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 12:32:44 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 12:32:45 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 12:32:45 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-16 12:32:45 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 12:32:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64380 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 12:32:45 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 12:32:45 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 12:32:45 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 12:32:45 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 12:32:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 12:32:45 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 12:32:45 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 12:32:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64380 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 12:33:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64541 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 12:33:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 12:33:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 12:33:36 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-16 12:33:37 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-16 12:33:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64541 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 12:40:25 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 12:40:25 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 12:40:25 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-16 12:40:25 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-16 12:40:25 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50933 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 21:24:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 21:24:36 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 21:24:36 [INFO] uvicorn.error:83 - _serve(): Started server process [18617]
2025-06-16 21:24:36 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 21:24:36 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 21:24:36 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 21:24:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:24:54 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:24:54 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 21:24:54 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 21:24:54 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 21:24:54 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 21:24:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 21:24:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 21:24:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 21:24:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 21:24:54 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 21:24:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 21:24:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 21:24:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 21:24:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 21:24:54 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 21:24:54 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 21:24:54 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 21:24:54 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 21:24:54 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 21:24:54 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 21:24:54 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 21:24:57 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 21:24:57 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 21:24:58 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:24:58 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 21:24:58 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-16 21:24:58 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 21:24:58 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:208 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-16 21:24:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53644 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 21:26:17 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 21:26:17 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 21:26:17 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 21:26:17 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 21:26:17 [INFO] uvicorn.error:93 - _serve(): Finished server process [18617]
2025-06-16 21:27:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 21:27:25 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 21:27:25 [INFO] uvicorn.error:83 - _serve(): Started server process [18718]
2025-06-16 21:27:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 21:27:25 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 21:27:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 21:27:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54444 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-16 21:27:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:27:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:27:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54446 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-16 21:27:40 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 21:27:40 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 21:27:40 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 21:27:40 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 21:27:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 21:27:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 21:27:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 21:27:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 21:27:40 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 21:27:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 21:27:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 21:27:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 21:27:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 21:27:40 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 21:27:40 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 21:27:40 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 21:27:40 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 21:27:40 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 21:27:40 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-16 21:27:40 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-16 21:27:40 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-16 21:27:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-16 21:27:40 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-16 21:27:45 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 21:27:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-16 21:27:45 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 21:27:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:27:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-16 21:27:45 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-16 21:27:45 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-16 21:27:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:27:46 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-16 21:27:46 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-16 21:27:46 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-16 21:27:46 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-16 21:27:46 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-16 21:27:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54444 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-16 21:27:46 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:27:46 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:27:46 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-16 21:27:46 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-16 21:27:46 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-16 21:27:46 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:27:47 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-16 21:27:47 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-16 21:27:47 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-16 21:27:47 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:27:47 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-16 21:27:47 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-16 21:27:47 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-16 21:27:47 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-16 21:27:47 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-16 21:27:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54444 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-16 21:27:53 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:27:53 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:27:53 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-16 21:27:53 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-16 21:27:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:27:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-16 21:27:53 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-16 21:27:55 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-16 21:27:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54450 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 21:28:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:28:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:28:05 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 21:28:05 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 21:28:06 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:28:06 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 21:28:06 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-16 21:28:06 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 21:28:07 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:208 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-16 21:28:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54507 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 21:28:07 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:28:07 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:28:07 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 21:28:07 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 21:28:07 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:28:08 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 21:28:08 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 21:28:08 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:208 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-16 21:28:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54507 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 21:28:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54538 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-16 21:28:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:28:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:28:29 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 21:28:29 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 21:28:29 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 21:28:29 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 21:28:29 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 21:28:29 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 21:28:29 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 21:28:29 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:171 - handle(): ✅ TaxationRecord entity created successfully
2025-06-16 21:28:29 [INFO] app.application.commands.taxation_commands:178 - handle(): Saving taxation record to repository...
2025-06-16 21:28:29 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'RetrenchmentCompensation' object has no attribute 'compensation_amount'
2025-06-16 21:28:29 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-16 21:28:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54538 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-16 21:29:16 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-16 21:29:39 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 21:29:39 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 21:29:39 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 21:29:39 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 21:29:39 [INFO] uvicorn.error:93 - _serve(): Finished server process [18718]
2025-06-16 21:32:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 21:33:02 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 21:33:02 [INFO] uvicorn.error:83 - _serve(): Started server process [19163]
2025-06-16 21:33:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 21:33:02 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 21:33:02 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 21:33:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55072 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 21:33:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:33:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:33:03 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 21:33:03 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 21:33:03 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 21:33:03 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 21:33:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 21:33:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 21:33:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 21:33:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 21:33:03 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 21:33:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 21:33:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 21:33:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 21:33:03 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 21:33:03 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 21:33:03 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 21:33:03 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 21:33:03 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 21:33:03 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 21:33:03 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 21:33:03 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 21:33:09 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 21:33:09 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 21:33:10 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:33:10 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 21:33:10 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-16 21:33:10 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 21:33:10 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:208 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-16 21:33:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55072 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 21:35:52 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:35:52 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:35:52 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-16 21:35:52 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-16 21:35:52 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-16 21:35:52 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:35:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-16 21:35:53 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-16 21:35:53 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-16 21:35:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:35:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-16 21:35:53 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-16 21:35:54 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-16 21:35:54 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-16 21:35:54 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-16 21:35:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55300 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-16 21:35:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:35:54 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:35:54 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-16 21:35:54 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-16 21:35:54 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-16 21:35:54 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:35:54 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-16 21:35:54 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-16 21:35:55 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-16 21:35:55 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:35:55 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-16 21:35:55 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-16 21:35:55 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-16 21:35:55 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-16 21:35:55 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-16 21:35:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55300 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-16 21:35:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55300 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 21:35:59 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:35:59 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:35:59 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-16 21:35:59 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-16 21:35:59 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:35:59 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-16 21:35:59 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-16 21:36:00 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-16 21:36:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55300 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 21:36:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55300 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 21:36:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:36:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:36:05 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 21:36:05 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 21:36:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:36:05 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 21:36:05 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 21:36:05 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:208 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-16 21:36:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55315 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 21:36:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:36:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:36:36 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 21:36:36 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 21:36:36 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 21:36:36 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 21:36:36 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 21:36:36 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 21:36:36 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 21:36:36 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:171 - handle(): ✅ TaxationRecord entity created successfully
2025-06-16 21:36:36 [INFO] app.application.commands.taxation_commands:178 - handle(): Saving taxation record to repository...
2025-06-16 21:36:36 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'RetrenchmentCompensation' object has no attribute 'compensation_amount'
2025-06-16 21:36:36 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-16 21:36:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55385 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-16 21:48:35 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 21:48:35 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 21:48:35 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 21:48:35 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 21:48:35 [INFO] uvicorn.error:93 - _serve(): Finished server process [19163]
2025-06-16 21:48:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 21:48:49 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 21:48:49 [INFO] uvicorn.error:83 - _serve(): Started server process [19335]
2025-06-16 21:48:49 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 21:48:49 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 21:48:49 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 21:48:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 21:49:00 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 21:49:00 [INFO] uvicorn.error:83 - _serve(): Started server process [19360]
2025-06-16 21:49:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 21:49:00 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 21:49:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 21:49:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56995 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-16 21:49:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:49:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:49:13 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 21:49:13 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 21:49:13 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 21:49:13 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 21:49:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 21:49:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 21:49:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 21:49:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 21:49:13 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 21:49:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 21:49:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 21:49:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 21:49:13 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 21:49:13 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 21:49:13 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 21:49:13 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 21:49:13 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 21:49:13 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 21:49:13 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 21:49:13 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 21:49:13 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 21:49:13 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 21:49:13 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 21:49:13 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 21:49:13 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 21:49:13 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 21:49:13 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 21:49:13 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - user_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 21:49:18 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 21:49:18 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:171 - handle(): ✅ TaxationRecord entity created successfully
2025-06-16 21:49:18 [INFO] app.application.commands.taxation_commands:178 - handle(): Saving taxation record to repository...
2025-06-16 21:49:19 [INFO] app.application.commands.taxation_commands:180 - handle(): ✅ Taxation record saved successfully
2025-06-16 21:49:19 [INFO] app.api.controllers.taxation_controller:279 - create_taxation_record(): ✅ Command handler executed successfully
2025-06-16 21:49:19 [INFO] app.api.controllers.taxation_controller:285 - create_taxation_record(): Created taxation record with comprehensive income: EMP005_2025
2025-06-16 21:49:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56995 - "POST /api/v2/taxation/records HTTP/1.1" 201
2025-06-16 21:49:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56997 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 21:49:34 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:49:34 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:49:34 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-16 21:49:34 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-16 21:49:34 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:49:34 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-16 21:49:34 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-16 21:49:36 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-16 21:49:36 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56997 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 21:49:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56997 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 21:49:38 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:49:38 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:49:38 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 21:49:38 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 21:49:38 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:49:39 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 21:49:39 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-16 21:49:39 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 21:49:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57036 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 21:49:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57036 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 21:49:39 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:49:39 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:49:39 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 21:49:39 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 21:49:39 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 21:49:40 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 21:49:40 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 21:49:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56997 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 21:49:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57088 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 21:49:55 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 21:49:55 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 21:49:55 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-16 21:49:55 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-16 21:49:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57088 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-16 21:58:56 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 21:58:56 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 21:58:56 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 21:58:56 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 21:58:56 [INFO] uvicorn.error:93 - _serve(): Finished server process [19360]
2025-06-16 21:59:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 21:59:15 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 21:59:15 [INFO] uvicorn.error:83 - _serve(): Started server process [19465]
2025-06-16 21:59:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 21:59:15 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 21:59:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 21:59:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 21:59:27 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 21:59:27 [INFO] uvicorn.error:83 - _serve(): Started server process [19498]
2025-06-16 21:59:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 21:59:27 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 21:59:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:00:14 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 22:00:14 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 22:00:14 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 22:00:14 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 22:00:14 [INFO] uvicorn.error:93 - _serve(): Finished server process [19498]
2025-06-16 22:00:20 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:00:32 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:00:32 [INFO] uvicorn.error:83 - _serve(): Started server process [19516]
2025-06-16 22:00:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:00:32 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:00:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:00:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:00:49 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:00:49 [INFO] uvicorn.error:83 - _serve(): Started server process [19533]
2025-06-16 22:00:49 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:00:49 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:00:49 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:00:54 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:01:05 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:01:05 [INFO] uvicorn.error:83 - _serve(): Started server process [19560]
2025-06-16 22:01:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:01:05 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:01:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:06:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 22:06:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 22:06:59 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 22:06:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 22:06:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [19560]
2025-06-16 22:07:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:07:12 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:07:12 [INFO] uvicorn.error:83 - _serve(): Started server process [19651]
2025-06-16 22:07:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:07:12 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:07:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:07:25 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 22:07:25 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 22:07:25 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 22:07:25 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 22:07:25 [INFO] uvicorn.error:93 - _serve(): Finished server process [19651]
2025-06-16 22:07:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:07:38 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:07:38 [INFO] uvicorn.error:83 - _serve(): Started server process [19674]
2025-06-16 22:07:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:07:38 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:07:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:08:46 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 22:08:46 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 22:08:46 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 22:08:46 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 22:08:46 [INFO] uvicorn.error:93 - _serve(): Finished server process [19674]
2025-06-16 22:08:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:09:02 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:09:02 [INFO] uvicorn.error:83 - _serve(): Started server process [19701]
2025-06-16 22:09:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:09:02 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:09:02 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:09:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 22:09:21 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 22:09:21 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 22:09:21 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 22:09:21 [INFO] uvicorn.error:93 - _serve(): Finished server process [19701]
2025-06-16 22:09:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:09:34 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:09:34 [INFO] uvicorn.error:83 - _serve(): Started server process [19724]
2025-06-16 22:09:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:09:34 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:09:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:09:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:09:47 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:09:47 [INFO] uvicorn.error:83 - _serve(): Started server process [19743]
2025-06-16 22:09:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:09:47 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:09:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:09:48 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 22:09:48 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 22:09:48 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 22:09:48 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 22:09:48 [INFO] uvicorn.error:93 - _serve(): Finished server process [19743]
2025-06-16 22:09:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:10:01 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:10:01 [INFO] uvicorn.error:83 - _serve(): Started server process [19754]
2025-06-16 22:10:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:10:01 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:10:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:10:37 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 22:10:37 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 22:10:37 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 22:10:37 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 22:10:37 [INFO] uvicorn.error:93 - _serve(): Finished server process [19754]
2025-06-16 22:10:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:10:53 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:10:53 [INFO] uvicorn.error:83 - _serve(): Started server process [19774]
2025-06-16 22:10:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:10:53 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:10:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:10:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:11:08 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:11:08 [INFO] uvicorn.error:83 - _serve(): Started server process [19793]
2025-06-16 22:11:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:11:08 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:11:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:11:44 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 22:11:44 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 22:11:44 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 22:11:44 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 22:11:44 [INFO] uvicorn.error:93 - _serve(): Finished server process [19793]
2025-06-16 22:11:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:11:59 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:11:59 [INFO] uvicorn.error:83 - _serve(): Started server process [19806]
2025-06-16 22:11:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:11:59 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:11:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:12:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:12:15 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:12:15 [INFO] uvicorn.error:83 - _serve(): Started server process [19835]
2025-06-16 22:12:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:12:15 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:12:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:16:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59592 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 22:16:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:16:54 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:16:54 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 22:16:54 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 22:16:54 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 22:16:55 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 22:16:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 22:16:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 22:16:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 22:16:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 22:16:55 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 22:16:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 22:16:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 22:16:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 22:16:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 22:16:55 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 22:16:55 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 22:16:55 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 22:16:55 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 22:16:55 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 22:16:55 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-16 22:16:55 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-16 22:16:55 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-16 22:16:55 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-16 22:16:56 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 22:16:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-16 22:16:56 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 22:16:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 22:16:56 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-16 22:16:56 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-16 22:16:57 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-16 22:16:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59592 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 22:16:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59592 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 22:16:59 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:16:59 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:16:59 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:16:59 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:16:59 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() missing 2 required positional arguments: 'hra_city_type' and 'actual_rent_paid'
2025-06-16 22:16:59 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() missing 2 required positional arguments: 'hra_city_type' and 'actual_rent_paid'
2025-06-16 22:16:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59594 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:17:00 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:17:00 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:17:00 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:17:00 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:17:00 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() missing 2 required positional arguments: 'hra_city_type' and 'actual_rent_paid'
2025-06-16 22:17:00 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() missing 2 required positional arguments: 'hra_city_type' and 'actual_rent_paid'
2025-06-16 22:17:00 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59594 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:17:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:17:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:17:02 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:17:02 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:17:03 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() missing 2 required positional arguments: 'hra_city_type' and 'actual_rent_paid'
2025-06-16 22:17:03 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SalaryIncome.__init__() missing 2 required positional arguments: 'hra_city_type' and 'actual_rent_paid'
2025-06-16 22:17:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59594 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:20:52 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-16 22:22:31 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 22:22:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 22:22:31 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 22:22:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 22:22:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [19835]
2025-06-16 22:22:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:22:44 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:22:44 [INFO] uvicorn.error:83 - _serve(): Started server process [19977]
2025-06-16 22:22:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:22:44 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:22:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:22:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:22:57 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:22:57 [INFO] uvicorn.error:83 - _serve(): Started server process [19997]
2025-06-16 22:22:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:22:57 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:22:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:23:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:23:07 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:23:07 [INFO] uvicorn.error:83 - _serve(): Started server process [20015]
2025-06-16 22:23:07 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:23:07 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:23:07 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:23:30 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:23:30 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:23:30 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 22:23:30 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 22:23:30 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 22:23:30 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 22:23:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 22:23:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 22:23:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 22:23:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 22:23:30 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 22:23:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 22:23:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 22:23:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 22:23:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 22:23:30 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 22:23:30 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 22:23:30 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 22:23:30 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 22:23:30 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 22:23:30 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-16 22:23:30 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-16 22:23:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-16 22:23:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-16 22:23:32 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 22:23:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-16 22:23:32 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 22:23:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 22:23:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-16 22:23:33 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-16 22:23:33 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-16 22:23:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60513 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 22:24:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:24:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:24:03 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:24:03 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:24:03 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'user_id'
2025-06-16 22:24:03 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'user_id'
2025-06-16 22:24:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60599 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:24:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:24:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:24:04 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:24:04 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:24:04 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'user_id'
2025-06-16 22:24:04 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'user_id'
2025-06-16 22:24:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60599 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:24:06 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:24:06 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:24:06 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:24:06 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:24:06 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'user_id'
2025-06-16 22:24:06 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'user_id'
2025-06-16 22:24:06 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60599 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:25:12 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 22:25:12 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 22:25:12 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 22:25:12 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 22:25:12 [INFO] uvicorn.error:93 - _serve(): Finished server process [20015]
2025-06-16 22:25:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:25:25 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:25:25 [INFO] uvicorn.error:83 - _serve(): Started server process [20071]
2025-06-16 22:25:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:25:25 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:25:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:25:53 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 22:25:53 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 22:25:53 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 22:25:53 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 22:25:53 [INFO] uvicorn.error:93 - _serve(): Finished server process [20071]
2025-06-16 22:25:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:26:07 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:26:07 [INFO] uvicorn.error:83 - _serve(): Started server process [20094]
2025-06-16 22:26:07 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:26:07 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:26:07 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:26:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:26:17 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:26:17 [INFO] uvicorn.error:83 - _serve(): Started server process [20119]
2025-06-16 22:26:17 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:26:17 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:26:17 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:26:29 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 22:26:29 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 22:26:29 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 22:26:29 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 22:26:29 [INFO] uvicorn.error:93 - _serve(): Finished server process [20119]
2025-06-16 22:26:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:26:48 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:26:48 [INFO] uvicorn.error:83 - _serve(): Started server process [20143]
2025-06-16 22:26:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:26:48 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:26:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:26:56 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:27:07 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:27:07 [INFO] uvicorn.error:83 - _serve(): Started server process [20196]
2025-06-16 22:27:07 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:27:07 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:27:07 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:27:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:27:21 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:27:21 [INFO] uvicorn.error:83 - _serve(): Started server process [20236]
2025-06-16 22:27:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:27:21 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:27:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:27:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:27:58 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:27:58 [INFO] uvicorn.error:83 - _serve(): Started server process [20266]
2025-06-16 22:27:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:27:58 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:27:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:28:29 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60970 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 22:28:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:28:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:28:29 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 22:28:29 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 22:28:29 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 22:28:29 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 22:28:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 22:28:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 22:28:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 22:28:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 22:28:29 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 22:28:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 22:28:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 22:28:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 22:28:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 22:28:29 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 22:28:29 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 22:28:29 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 22:28:29 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 22:28:29 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 22:28:30 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-16 22:28:30 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-16 22:28:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-16 22:28:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-16 22:28:32 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 22:28:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-16 22:28:32 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 22:28:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 22:28:32 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-16 22:28:32 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-16 22:28:33 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-16 22:28:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60970 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 22:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60970 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 22:28:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:28:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:28:37 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:28:37 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:28:37 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:28:37 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:28:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60974 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:28:38 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:28:38 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:28:38 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:28:38 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:28:38 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:28:38 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:28:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60974 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:28:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:28:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:28:40 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:28:40 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:28:40 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:28:40 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:28:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60974 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:31:09 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:31:09 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:31:09 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:31:09 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:31:09 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:31:09 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:31:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61327 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:31:10 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:31:10 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:31:10 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:31:10 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:31:10 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:31:10 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:31:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61327 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:31:12 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:31:12 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:31:12 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:31:12 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:31:12 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:31:12 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:31:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61327 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:31:39 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:31:39 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:31:39 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:31:39 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:32:19 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:32:19 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:32:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61386 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:32:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:32:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:32:19 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:32:19 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:33:00 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:33:00 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:33:00 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:33:00 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:33:18 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:33:18 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:33:57 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:33:57 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'organization_id'
2025-06-16 22:35:57 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 22:35:57 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 22:35:57 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 22:35:57 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 22:35:57 [INFO] uvicorn.error:93 - _serve(): Finished server process [20266]
2025-06-16 22:36:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:36:08 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:36:08 [INFO] uvicorn.error:83 - _serve(): Started server process [20419]
2025-06-16 22:36:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:36:08 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:36:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:36:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:36:19 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:36:19 [INFO] uvicorn.error:83 - _serve(): Started server process [20436]
2025-06-16 22:36:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:36:19 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:36:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:38:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 22:38:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 22:38:59 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 22:38:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 22:38:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [20436]
2025-06-16 22:39:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:39:13 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:39:13 [INFO] uvicorn.error:83 - _serve(): Started server process [20505]
2025-06-16 22:39:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:39:13 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:39:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:39:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61959 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 22:39:49 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:39:49 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:39:49 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 22:39:49 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 22:39:49 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 22:39:49 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 22:39:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 22:39:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 22:39:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 22:39:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 22:39:49 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 22:39:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 22:39:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 22:39:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 22:39:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 22:39:49 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 22:39:49 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 22:39:49 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 22:39:49 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 22:39:49 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 22:39:49 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:39:49 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:39:56 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 22:39:56 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 22:39:56 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:39:56 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:39:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61959 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:39:57 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:39:57 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:39:57 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:39:57 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:40:22 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:40:22 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:40:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61959 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:40:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:40:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:40:24 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:40:24 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:40:26 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:40:26 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:40:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61959 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:52:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63645 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 22:52:49 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:52:49 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:52:49 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:52:49 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:53:19 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:53:19 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:53:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63647 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:53:22 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:53:22 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:53:22 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:53:22 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:53:35 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:53:35 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:53:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63670 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:53:35 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:53:35 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:53:35 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:53:35 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:53:40 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:53:40 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:53:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63670 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:53:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:53:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:53:40 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:53:40 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:53:43 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:53:43 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:53:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63670 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:53:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:53:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:53:43 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:53:43 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:53:48 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:53:48 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:53:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63670 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:53:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:53:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:53:48 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:53:48 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:53:55 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:53:55 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:53:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63670 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:53:55 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:53:55 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:53:55 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:53:55 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:54:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63690 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 22:54:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:54:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:54:03 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-16 22:54:03 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-16 22:54:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 22:54:03 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:54:03 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:54:03 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-16 22:54:03 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-16 22:54:03 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-16 22:54:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63694 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 22:54:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:54:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:54:24 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:54:24 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:55:15 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:55:15 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:55:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63754 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:55:15 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 22:55:15 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:55:15 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:55:15 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:55:15 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:55:18 [INFO] uvicorn.error:298 - _wait_tasks_to_complete(): Waiting for connections to close. (CTRL+C to force quit)
2025-06-16 22:55:19 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:55:19 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: 'tax_year'
2025-06-16 22:55:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63804 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:55:25 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 22:55:25 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 22:55:25 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 22:55:25 [INFO] uvicorn.error:93 - _serve(): Finished server process [20505]
2025-06-16 22:55:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 22:55:36 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 22:55:36 [INFO] uvicorn.error:83 - _serve(): Started server process [20652]
2025-06-16 22:55:36 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 22:55:36 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 22:55:36 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 22:55:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:55:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:55:36 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 22:55:36 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 22:55:36 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 22:55:36 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 22:55:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 22:55:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 22:55:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 22:55:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 22:55:36 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 22:55:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 22:55:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 22:55:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 22:55:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 22:55:36 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 22:55:36 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 22:55:36 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 22:55:36 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 22:55:36 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 22:55:36 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:55:36 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:55:53 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 22:55:53 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 22:55:53 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: fromisoformat: argument must be str
2025-06-16 22:55:53 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: fromisoformat: argument must be str
2025-06-16 22:55:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63862 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:57:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:57:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:57:28 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:57:28 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:57:46 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: fromisoformat: argument must be str
2025-06-16 22:57:46 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: fromisoformat: argument must be str
2025-06-16 22:57:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64110 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:57:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:57:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:57:48 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:57:48 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:57:57 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: fromisoformat: argument must be str
2025-06-16 22:57:57 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: fromisoformat: argument must be str
2025-06-16 22:57:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64110 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 22:58:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 22:58:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 22:58:02 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 22:58:02 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:00:19 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: fromisoformat: argument must be str
2025-06-16 23:00:19 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: fromisoformat: argument must be str
2025-06-16 23:00:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64134 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 23:00:19 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:00:19 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:00:19 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:00:19 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:00:19 [INFO] uvicorn.error:93 - _serve(): Finished server process [20652]
2025-06-16 23:00:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:00:29 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:00:29 [INFO] uvicorn.error:83 - _serve(): Started server process [20709]
2025-06-16 23:00:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:00:29 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:00:30 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:01:00 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:01:00 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:01:00 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 23:01:00 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 23:01:00 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 23:01:00 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 23:01:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:01:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:01:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:01:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:01:00 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:01:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:01:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:01:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:01:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:01:00 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:01:00 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 23:01:00 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 23:01:00 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 23:01:00 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 23:01:00 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-16 23:01:00 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-16 23:01:00 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-16 23:01:00 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-16 23:01:15 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 23:01:15 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-16 23:01:15 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 23:01:15 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 23:01:15 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-16 23:01:15 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-16 23:01:17 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-16 23:01:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64229 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 23:01:23 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:01:23 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:01:23 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:01:23 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:01:28 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'taxation_id'
2025-06-16 23:01:28 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'taxation_id'
2025-06-16 23:01:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64258 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 23:01:38 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:01:38 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:01:38 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:01:38 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:03:38 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'taxation_id'
2025-06-16 23:03:38 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 513, in _configured_socket_interface
    ssl_sock = ssl_context.wrap_socket(sock, server_hostname=host)
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 455, in wrap_socket
    return self.sslsocket_class._create(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        sock=sock,
        ^^^^^^^^^^
    ...<5 lines>...
        session=session
        ^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1076, in _create
    self.do_handshake()
    ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/ssl.py", line 1372, in do_handshake
    self._sslobj.do_handshake()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
TimeoutError: _ssl.c:1011: The handshake operation timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 527, in _configured_socket_interface
    _raise_connection_failure(address, exc, "SSL handshake failed: ", timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: _ssl.c:1011: The handshake operation timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-16 23:03:38 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'taxation_id'
2025-06-16 23:03:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64303 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 23:03:38 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:03:38 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:03:38 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:03:38 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:03:38 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:03:48 [INFO] uvicorn.error:305 - _wait_tasks_to_complete(): Waiting for background tasks to complete. (CTRL+C to force quit)
2025-06-16 23:03:51 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'taxation_id'
2025-06-16 23:03:51 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'taxation_id'
2025-06-16 23:03:51 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:03:51 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:03:51 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:03:51 [INFO] uvicorn.error:93 - _serve(): Finished server process [20709]
2025-06-16 23:03:56 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:04:02 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:04:02 [INFO] uvicorn.error:83 - _serve(): Started server process [20815]
2025-06-16 23:04:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:04:02 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:04:02 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:04:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64631 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 23:04:14 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:04:14 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:04:14 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 23:04:14 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 23:04:14 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 23:04:14 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 23:04:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:04:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:04:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:04:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:04:14 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:04:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:04:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:04:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:04:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:04:14 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:04:14 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 23:04:14 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 23:04:14 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 23:04:14 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 23:04:14 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:04:14 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:04:21 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 23:04:21 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 23:04:22 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'deductions'. Did you mean 'tax_deductions'?
2025-06-16 23:04:22 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'deductions'. Did you mean 'tax_deductions'?
2025-06-16 23:04:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64631 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 23:04:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:04:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:04:32 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:04:32 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:04:40 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'deductions'. Did you mean 'tax_deductions'?
2025-06-16 23:04:40 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'deductions'. Did you mean 'tax_deductions'?
2025-06-16 23:04:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64633 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 23:04:50 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:04:50 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:04:50 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:04:50 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:06:50 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'deductions'. Did you mean 'tax_deductions'?
2025-06-16 23:06:50 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'deductions'. Did you mean 'tax_deductions'?
2025-06-16 23:07:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64903 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 23:07:26 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:07:26 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:07:26 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-16 23:07:26 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-16 23:07:26 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 23:07:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-16 23:07:29 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-16 23:07:32 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-16 23:07:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64905 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 23:07:41 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:07:41 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:07:41 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:07:41 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:07:46 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'deductions'. Did you mean 'tax_deductions'?
2025-06-16 23:07:46 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'deductions'. Did you mean 'tax_deductions'?
2025-06-16 23:07:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64923 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 23:07:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:07:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:07:48 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:07:48 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:08:08 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'deductions'. Did you mean 'tax_deductions'?
2025-06-16 23:08:08 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'deductions'. Did you mean 'tax_deductions'?
2025-06-16 23:08:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64923 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 23:08:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:08:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:08:13 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:08:13 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:08:42 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:08:43 [INFO] uvicorn.error:298 - _wait_tasks_to_complete(): Waiting for connections to close. (CTRL+C to force quit)
2025-06-16 23:08:45 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'deductions'. Did you mean 'tax_deductions'?
2025-06-16 23:08:45 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'deductions'. Did you mean 'tax_deductions'?
2025-06-16 23:08:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64987 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 23:08:45 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:08:45 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:08:45 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:08:45 [INFO] uvicorn.error:93 - _serve(): Finished server process [20815]
2025-06-16 23:08:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:08:55 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:08:55 [INFO] uvicorn.error:83 - _serve(): Started server process [20942]
2025-06-16 23:08:55 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:08:55 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:08:55 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:09:42 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:09:42 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:09:42 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 23:09:42 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 23:09:42 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 23:09:42 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 23:09:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:09:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:09:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:09:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:09:42 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:09:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:09:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:09:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:09:42 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:09:42 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:09:42 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 23:09:42 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 23:09:42 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 23:09:42 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 23:09:42 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-16 23:09:42 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-16 23:09:42 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-16 23:09:42 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-16 23:09:47 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 23:09:47 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-16 23:09:47 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 23:09:47 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 23:09:48 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-16 23:09:48 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-16 23:09:50 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-16 23:09:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65137 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 23:09:52 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:09:52 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:09:52 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:09:52 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:09:56 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'monthly_payroll'
2025-06-16 23:09:56 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'monthly_payroll'
2025-06-16 23:09:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65137 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 23:10:08 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:10:08 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:10:08 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:10:08 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:13:00 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:13:00 [INFO] uvicorn.error:305 - _wait_tasks_to_complete(): Waiting for background tasks to complete. (CTRL+C to force quit)
2025-06-16 23:13:03 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'monthly_payroll'
2025-06-16 23:13:03 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'monthly_payroll'
2025-06-16 23:13:03 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:13:03 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:13:03 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:13:03 [INFO] uvicorn.error:93 - _serve(): Finished server process [20942]
2025-06-16 23:13:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:13:16 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:13:16 [INFO] uvicorn.error:83 - _serve(): Started server process [21010]
2025-06-16 23:13:16 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:13:16 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:13:16 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:13:16 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:13:16 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:13:16 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:13:16 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:13:16 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 23:13:16 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 23:13:16 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 23:13:16 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 23:13:16 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 23:13:16 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 23:13:16 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 23:13:16 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 23:13:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:13:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:13:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:13:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:13:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:13:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:13:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:13:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:13:16 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:13:16 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:13:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:13:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:13:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:13:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:13:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:13:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:13:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:13:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:13:16 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:13:16 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:13:16 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 23:13:16 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 23:13:16 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 23:13:16 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 23:13:16 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 23:13:16 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 23:13:16 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 23:13:16 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 23:13:16 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:13:16 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:13:33 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:13:33 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:13:33 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 23:13:35 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 23:13:44 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'calculation_result'
2025-06-16 23:13:44 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'calculation_result'
2025-06-16 23:13:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65415 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 23:15:57 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'calculation_result'
2025-06-16 23:15:57 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'calculation_result'
2025-06-16 23:15:57 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:15:57 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:15:57 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:15:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65474 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 23:15:57 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:15:57 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:15:58 [INFO] uvicorn.error:298 - _wait_tasks_to_complete(): Waiting for connections to close. (CTRL+C to force quit)
2025-06-16 23:16:05 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'calculation_result'
2025-06-16 23:16:05 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'calculation_result'
2025-06-16 23:16:05 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:16:05 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:16:05 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:16:05 [INFO] uvicorn.error:93 - _serve(): Finished server process [21010]
2025-06-16 23:16:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:17:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:17:17 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:18:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:18:25 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:18:25 [INFO] uvicorn.error:83 - _serve(): Started server process [21164]
2025-06-16 23:18:25 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:18:25 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:18:25 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:18:27 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:18:27 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:18:27 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:18:27 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:18:27 [INFO] uvicorn.error:93 - _serve(): Finished server process [21164]
2025-06-16 23:18:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:18:48 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:18:48 [INFO] uvicorn.error:83 - _serve(): Started server process [21202]
2025-06-16 23:18:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:18:48 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:18:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:19:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49591 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 23:19:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:19:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:19:24 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 23:19:24 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 23:19:24 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 23:19:24 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 23:19:24 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:19:24 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:19:24 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:19:24 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:19:24 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:19:24 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:19:24 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:19:24 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:19:24 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:19:24 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:19:24 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 23:19:24 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 23:19:24 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 23:19:24 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 23:19:24 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-16 23:19:24 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-16 23:19:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-16 23:19:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-16 23:19:26 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 23:19:26 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-16 23:19:26 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 23:19:26 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 23:19:26 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-16 23:19:26 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-16 23:19:26 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-16 23:19:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49595 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 23:19:29 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:19:29 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:19:29 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:19:29 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:19:32 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'tax_deductions'. Did you mean 'deductions'?
2025-06-16 23:19:32 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'tax_deductions'. Did you mean 'deductions'?
2025-06-16 23:19:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49595 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 23:19:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:19:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:19:43 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:19:43 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:19:51 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'tax_deductions'. Did you mean 'deductions'?
2025-06-16 23:19:51 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: TaxationRecord.__init__() got an unexpected keyword argument 'tax_deductions'. Did you mean 'deductions'?
2025-06-16 23:19:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49702 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 23:19:52 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:19:52 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:19:52 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:19:52 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:19:52 [INFO] uvicorn.error:93 - _serve(): Finished server process [21202]
2025-06-16 23:19:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:20:04 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:20:04 [INFO] uvicorn.error:83 - _serve(): Started server process [21230]
2025-06-16 23:20:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:20:04 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:20:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:20:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:20:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:20:04 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 23:20:04 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 23:20:04 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 23:20:04 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 23:20:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:20:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:20:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:20:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:20:04 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:20:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:20:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:20:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:20:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:20:04 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:20:04 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 23:20:04 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 23:20:04 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 23:20:04 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 23:20:04 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:20:04 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:20:06 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 23:20:06 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 23:20:22 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: name 'tax_deductions' is not defined
2025-06-16 23:20:22 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: name 'tax_deductions' is not defined
2025-06-16 23:20:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49726 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 500
2025-06-16 23:21:23 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:21:23 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:21:23 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-16 23:21:23 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-16 23:21:23 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 23:21:23 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-16 23:21:23 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-16 23:21:24 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-16 23:21:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49903 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-16 23:21:27 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:21:27 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:21:27 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:21:27 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-16 23:21:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 23:21:33 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 23:21:33 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-16 23:21:33 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 23:21:33 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:208 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-16 23:21:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49903 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-16 23:21:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49903 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 23:21:33 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:21:33 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:21:33 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 23:21:33 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 23:21:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 23:21:33 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 23:21:33 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 23:21:33 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:208 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-16 23:21:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49943 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 23:21:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50044 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-16 23:21:56 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:21:56 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:21:56 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 23:21:56 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 23:21:56 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 23:21:56 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 23:21:56 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 23:21:56 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 23:21:56 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 23:21:56 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 23:21:56 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 23:21:56 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 23:21:57 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-16 23:21:57 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 23:21:57 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-16 23:21:57 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-16 23:21:57 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-16 23:21:57 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-16 23:21:57 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-16 23:21:57 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-16 23:21:57 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-16 23:21:57 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-16 23:21:57 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-16 23:21:57 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-16 23:21:57 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-16 23:21:57 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-16 23:21:57 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-16 23:21:57 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-16 23:21:57 [ERROR] app.application.commands.taxation_commands:173 - handle(): ❌ Failed to create TaxationRecord entity: TaxationRecord.__init__() got an unexpected keyword argument 'financial_year'
2025-06-16 23:21:57 [ERROR] app.application.commands.taxation_commands:174 - handle(): Error type: <class 'TypeError'>
2025-06-16 23:21:57 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: TaxationRecord.__init__() got an unexpected keyword argument 'financial_year'
2025-06-16 23:21:57 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'TypeError'>
2025-06-16 23:21:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50044 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-16 23:22:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:22:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:22:37 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 23:22:37 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 23:22:37 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 23:22:37 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 23:22:37 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 23:22:37 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 23:22:37 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 23:22:37 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-16 23:22:37 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-16 23:22:37 [ERROR] app.application.commands.taxation_commands:173 - handle(): ❌ Failed to create TaxationRecord entity: TaxationRecord.__init__() got an unexpected keyword argument 'financial_year'
2025-06-16 23:22:37 [ERROR] app.application.commands.taxation_commands:174 - handle(): Error type: <class 'TypeError'>
2025-06-16 23:22:37 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: TaxationRecord.__init__() got an unexpected keyword argument 'financial_year'
2025-06-16 23:22:37 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'TypeError'>
2025-06-16 23:22:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50046 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-16 23:24:09 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:24:09 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:24:09 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:24:09 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:24:09 [INFO] uvicorn.error:93 - _serve(): Finished server process [21230]
2025-06-16 23:24:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:24:26 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:24:26 [INFO] uvicorn.error:83 - _serve(): Started server process [21311]
2025-06-16 23:24:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:24:26 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:24:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:24:27 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:24:28 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:24:28 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:24:28 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:24:28 [INFO] uvicorn.error:93 - _serve(): Finished server process [21311]
2025-06-16 23:24:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:24:40 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:24:40 [INFO] uvicorn.error:83 - _serve(): Started server process [21343]
2025-06-16 23:24:40 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:24:40 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:24:40 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:24:53 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:24:53 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:24:53 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:24:53 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:24:53 [INFO] uvicorn.error:93 - _serve(): Finished server process [21343]
2025-06-16 23:24:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:25:07 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:25:07 [INFO] uvicorn.error:83 - _serve(): Started server process [21358]
2025-06-16 23:25:07 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:25:07 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:25:07 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:25:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:25:20 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:25:20 [INFO] uvicorn.error:83 - _serve(): Started server process [21377]
2025-06-16 23:25:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:25:20 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:25:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:25:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:25:33 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:25:33 [INFO] uvicorn.error:83 - _serve(): Started server process [21396]
2025-06-16 23:25:33 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:25:33 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:25:33 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:25:38 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:25:47 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:25:47 [INFO] uvicorn.error:83 - _serve(): Started server process [21409]
2025-06-16 23:25:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:25:47 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:25:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:25:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:26:01 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:26:01 [INFO] uvicorn.error:83 - _serve(): Started server process [21424]
2025-06-16 23:26:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:26:01 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:26:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:26:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:26:13 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:26:13 [INFO] uvicorn.error:83 - _serve(): Started server process [21443]
2025-06-16 23:26:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:26:13 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:26:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:26:25 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:26:25 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:26:25 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:26:25 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:26:25 [INFO] uvicorn.error:93 - _serve(): Finished server process [21443]
2025-06-16 23:26:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:26:37 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:26:37 [INFO] uvicorn.error:83 - _serve(): Started server process [21463]
2025-06-16 23:26:37 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:26:37 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:26:37 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:26:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:26:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:26:48 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 23:26:48 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 23:26:48 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 23:26:48 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 23:26:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:26:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:26:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:26:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:26:48 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:26:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:26:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:26:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:26:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:26:48 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:26:48 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 23:26:48 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 23:26:48 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 23:26:48 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 23:26:48 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 23:26:48 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 23:26:48 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 23:26:48 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 23:26:48 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 23:26:48 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 23:26:48 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 23:26:48 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 23:26:48 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 23:26:48 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 23:26:49 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 23:26:49 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 23:26:49 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-16 23:26:49 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 23:26:49 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-16 23:26:49 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-16 23:26:49 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-16 23:26:49 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-16 23:26:49 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-16 23:26:49 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-16 23:26:49 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-16 23:26:49 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-16 23:26:49 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-16 23:26:49 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-16 23:26:49 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-16 23:26:49 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-16 23:26:49 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-16 23:26:49 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-16 23:26:49 [ERROR] app.application.commands.taxation_commands:172 - handle(): ❌ Failed to create TaxationRecord entity: TaxationRecord.__init__() missing 2 required positional arguments: 'taxation_id' and 'organization_id'
2025-06-16 23:26:49 [ERROR] app.application.commands.taxation_commands:173 - handle(): Error type: <class 'TypeError'>
2025-06-16 23:26:49 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: TaxationRecord.__init__() missing 2 required positional arguments: 'taxation_id' and 'organization_id'
2025-06-16 23:26:49 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'TypeError'>
2025-06-16 23:26:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:51705 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-16 23:27:51 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:27:52 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:27:52 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:27:52 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:27:52 [INFO] uvicorn.error:93 - _serve(): Finished server process [21463]
2025-06-16 23:27:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:29:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:29:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:29:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:30:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:30:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:30:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:30:44 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:30:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:31:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:32:10 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:32:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:32:30 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:32:30 [INFO] uvicorn.error:83 - _serve(): Started server process [21716]
2025-06-16 23:32:30 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:32:30 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:32:30 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:32:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53702 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-16 23:32:38 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:32:38 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:32:38 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 23:32:38 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 23:32:38 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 23:32:38 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 23:32:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:32:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:32:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:32:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:32:38 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:32:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:32:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:32:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:32:38 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:32:38 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:32:38 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 23:32:38 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 23:32:38 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 23:32:38 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 23:32:38 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 23:32:38 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 23:32:38 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 23:32:38 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 23:32:38 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 23:32:38 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 23:32:38 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 23:32:38 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 23:32:38 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 23:32:38 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 23:32:39 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 23:32:39 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-16 23:32:40 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-16 23:32:40 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'DeductionSection80C' object has no attribute 'calculate_total_80c_deduction'
2025-06-16 23:32:40 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-16 23:32:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53702 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-16 23:35:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:35:08 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:35:08 [INFO] uvicorn.error:83 - _serve(): Started server process [22265]
2025-06-16 23:35:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:35:08 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:35:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:35:10 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54710 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 23:35:10 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:35:10 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:35:10 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-16 23:35:10 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-16 23:35:10 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-16 23:35:10 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-16 23:35:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:35:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:35:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:35:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:35:11 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:35:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-16 23:35:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-16 23:35:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-16 23:35:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-16 23:35:11 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-16 23:35:11 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-16 23:35:11 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-16 23:35:11 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-16 23:35:11 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-16 23:35:11 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 23:35:11 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-16 23:35:11 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-16 23:35:11 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-16 23:35:12 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-16 23:35:12 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-16 23:35:12 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-16 23:35:12 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-16 23:35:12 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:208 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-16 23:35:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54710 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-16 23:36:00 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-16 23:36:00 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-16 23:36:00 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-16 23:36:00 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-16 23:36:00 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 23:36:00 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-16 23:36:00 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-16 23:36:00 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-16 23:36:00 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-16 23:36:00 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-16 23:36:00 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-16 23:36:00 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-16 23:36:01 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-16 23:36:01 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'DeductionSection80C' object has no attribute 'calculate_total_80c_deduction'
2025-06-16 23:36:01 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-16 23:36:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54746 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-16 23:45:53 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:45:53 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:45:53 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:45:53 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:45:53 [INFO] uvicorn.error:93 - _serve(): Finished server process [22265]
2025-06-16 23:45:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:46:06 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:46:06 [INFO] uvicorn.error:83 - _serve(): Started server process [22347]
2025-06-16 23:46:06 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:46:06 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:46:06 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:47:38 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:47:38 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:47:38 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:47:38 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:47:38 [INFO] uvicorn.error:93 - _serve(): Finished server process [22347]
2025-06-16 23:47:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:47:55 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:47:55 [INFO] uvicorn.error:83 - _serve(): Started server process [22404]
2025-06-16 23:47:55 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:47:56 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:47:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:47:57 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:47:57 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:47:57 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:47:57 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:47:57 [INFO] uvicorn.error:93 - _serve(): Finished server process [22404]
2025-06-16 23:48:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:48:09 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:48:09 [INFO] uvicorn.error:83 - _serve(): Started server process [22434]
2025-06-16 23:48:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:48:09 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:48:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:48:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:48:24 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:48:24 [INFO] uvicorn.error:83 - _serve(): Started server process [22454]
2025-06-16 23:48:24 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:48:24 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:48:24 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:48:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:48:39 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:48:39 [INFO] uvicorn.error:83 - _serve(): Started server process [22471]
2025-06-16 23:48:39 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:48:39 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:48:39 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:48:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:48:53 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:48:53 [INFO] uvicorn.error:83 - _serve(): Started server process [22495]
2025-06-16 23:48:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:48:53 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:48:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:49:28 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:49:28 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:49:28 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:49:28 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:49:28 [INFO] uvicorn.error:93 - _serve(): Finished server process [22495]
2025-06-16 23:49:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:49:41 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:49:41 [INFO] uvicorn.error:83 - _serve(): Started server process [22527]
2025-06-16 23:49:41 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:49:41 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:49:41 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:49:47 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:49:55 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:49:55 [INFO] uvicorn.error:83 - _serve(): Started server process [22552]
2025-06-16 23:49:55 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:49:55 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:49:55 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:50:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:50:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:50:16 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:50:16 [INFO] uvicorn.error:83 - _serve(): Started server process [22588]
2025-06-16 23:50:16 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:50:16 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:50:16 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:50:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:50:30 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:50:30 [INFO] uvicorn.error:83 - _serve(): Started server process [22603]
2025-06-16 23:50:30 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:50:30 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:50:30 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:50:35 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:50:35 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:50:35 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:50:35 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:50:35 [INFO] uvicorn.error:93 - _serve(): Finished server process [22603]
2025-06-16 23:50:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:50:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:50:58 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:51:07 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:51:07 [INFO] uvicorn.error:83 - _serve(): Started server process [22656]
2025-06-16 23:51:07 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:51:07 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:51:07 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:51:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:51:18 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:51:18 [INFO] uvicorn.error:83 - _serve(): Started server process [22680]
2025-06-16 23:51:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:51:18 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:51:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:51:49 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:51:49 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:51:49 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:51:49 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:51:49 [INFO] uvicorn.error:93 - _serve(): Finished server process [22680]
2025-06-16 23:51:54 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:52:03 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:52:03 [INFO] uvicorn.error:83 - _serve(): Started server process [22700]
2025-06-16 23:52:03 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:52:03 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:52:03 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:52:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:52:17 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:52:17 [INFO] uvicorn.error:83 - _serve(): Started server process [22719]
2025-06-16 23:52:17 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:52:17 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:52:17 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:52:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:52:29 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:52:29 [INFO] uvicorn.error:83 - _serve(): Started server process [22742]
2025-06-16 23:52:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:52:29 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:52:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:53:00 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:53:00 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:53:00 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:53:00 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:53:00 [INFO] uvicorn.error:93 - _serve(): Finished server process [22742]
2025-06-16 23:53:06 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:53:15 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:53:15 [INFO] uvicorn.error:83 - _serve(): Started server process [22770]
2025-06-16 23:53:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:53:15 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:53:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:54:50 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:54:50 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:54:50 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:54:50 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:54:50 [INFO] uvicorn.error:93 - _serve(): Finished server process [22770]
2025-06-16 23:54:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:55:03 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:55:03 [INFO] uvicorn.error:83 - _serve(): Started server process [22815]
2025-06-16 23:55:03 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:55:03 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:55:03 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:55:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:55:17 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:55:17 [INFO] uvicorn.error:83 - _serve(): Started server process [22836]
2025-06-16 23:55:17 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:55:17 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:55:17 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:55:24 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:55:35 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:55:35 [INFO] uvicorn.error:83 - _serve(): Started server process [22855]
2025-06-16 23:55:35 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:55:35 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:55:35 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:56:19 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:56:19 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:56:19 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:56:19 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:56:19 [INFO] uvicorn.error:93 - _serve(): Finished server process [22855]
2025-06-16 23:56:23 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:56:34 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:56:34 [INFO] uvicorn.error:83 - _serve(): Started server process [22885]
2025-06-16 23:56:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:56:34 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:56:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:56:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:56:50 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:56:50 [INFO] uvicorn.error:83 - _serve(): Started server process [22904]
2025-06-16 23:56:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:56:50 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:56:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-16 23:57:13 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-16 23:57:13 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-16 23:57:13 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-16 23:57:13 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-16 23:57:13 [INFO] uvicorn.error:93 - _serve(): Finished server process [22904]
2025-06-16 23:57:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-16 23:57:27 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-16 23:57:27 [INFO] uvicorn.error:83 - _serve(): Started server process [22930]
2025-06-16 23:57:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-16 23:57:27 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-16 23:57:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:00:05 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:00:05 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:00:05 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:00:05 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:00:05 [INFO] uvicorn.error:93 - _serve(): Finished server process [22930]
2025-06-17 00:00:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:00:21 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:00:21 [INFO] uvicorn.error:83 - _serve(): Started server process [22969]
2025-06-17 00:00:21 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:00:21 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:00:21 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:01:17 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:01:18 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:01:18 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:01:18 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:01:18 [INFO] uvicorn.error:93 - _serve(): Finished server process [22969]
2025-06-17 00:01:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:01:31 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:01:31 [INFO] uvicorn.error:83 - _serve(): Started server process [23163]
2025-06-17 00:01:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:01:31 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:01:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:02:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64417 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-17 00:02:01 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:02:01 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:02:01 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 00:02:01 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 00:02:01 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 00:02:01 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 00:02:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:02:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:02:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:02:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:02:01 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:02:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:02:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:02:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:02:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:02:01 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:02:01 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 00:02:01 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 00:02:01 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 00:02:01 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 00:02:01 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 00:02:01 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 00:02:01 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:02:01 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 00:02:01 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 00:02:01 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 00:02:01 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 00:02:01 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 00:02:01 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 00:02:01 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 00:02:02 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 00:02:02 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-17 00:02:02 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-17 00:02:02 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'TaxationRecord' object has no attribute 'tax_deductions'
2025-06-17 00:02:02 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-17 00:02:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64417 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-17 00:02:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:02:21 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:02:21 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:02:21 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:02:21 [INFO] uvicorn.error:93 - _serve(): Finished server process [23163]
2025-06-17 00:02:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:02:32 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:02:32 [INFO] uvicorn.error:83 - _serve(): Started server process [23192]
2025-06-17 00:02:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:02:32 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:02:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:02:36 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:02:36 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:02:36 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:02:36 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:02:36 [INFO] uvicorn.error:93 - _serve(): Finished server process [23192]
2025-06-17 00:02:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:02:47 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:02:47 [INFO] uvicorn.error:83 - _serve(): Started server process [23216]
2025-06-17 00:02:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:02:47 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:02:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:03:12 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:03:12 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:03:12 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 00:03:12 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 00:03:12 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 00:03:12 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 00:03:12 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:03:12 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:03:12 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:03:12 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:03:12 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:03:12 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:03:12 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:03:12 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:03:12 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:03:12 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:03:12 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 00:03:12 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 00:03:12 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 00:03:12 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 00:03:12 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 00:03:13 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 00:03:13 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:03:13 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 00:03:13 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 00:03:13 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 00:03:13 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 00:03:13 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 00:03:13 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 00:03:13 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 00:03:14 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 00:03:14 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-17 00:03:14 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-17 00:03:14 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'TaxationRecord' object has no attribute 'tax_deductions'
2025-06-17 00:03:14 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-17 00:03:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64821 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-17 00:04:24 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:04:24 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:04:24 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:04:24 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:04:24 [INFO] uvicorn.error:93 - _serve(): Finished server process [23216]
2025-06-17 00:04:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:04:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:04:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:05:06 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:05:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:05:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:05:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:05:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:05:57 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:05:57 [INFO] uvicorn.error:83 - _serve(): Started server process [23420]
2025-06-17 00:05:57 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:05:57 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:05:57 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:06:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:06:09 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:06:09 [INFO] uvicorn.error:83 - _serve(): Started server process [23454]
2025-06-17 00:06:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:06:09 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:06:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:06:32 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:06:32 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:06:32 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:06:32 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:06:32 [INFO] uvicorn.error:93 - _serve(): Finished server process [23454]
2025-06-17 00:06:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:06:49 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:06:49 [INFO] uvicorn.error:83 - _serve(): Started server process [23478]
2025-06-17 00:06:49 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:06:49 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:06:49 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:06:56 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:07:03 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:07:03 [INFO] uvicorn.error:83 - _serve(): Started server process [23508]
2025-06-17 00:07:03 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:07:03 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:07:03 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:07:10 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:07:18 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:07:18 [INFO] uvicorn.error:83 - _serve(): Started server process [23524]
2025-06-17 00:07:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:07:18 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:07:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:07:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:07:34 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:07:34 [INFO] uvicorn.error:83 - _serve(): Started server process [23547]
2025-06-17 00:07:34 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:07:34 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:07:34 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:07:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:07:51 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:07:51 [INFO] uvicorn.error:83 - _serve(): Started server process [23579]
2025-06-17 00:07:51 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:07:51 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:07:51 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:07:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:08:05 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:08:05 [INFO] uvicorn.error:83 - _serve(): Started server process [23609]
2025-06-17 00:08:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:08:05 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:08:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:08:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:08:18 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:08:18 [INFO] uvicorn.error:83 - _serve(): Started server process [23638]
2025-06-17 00:08:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:08:18 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:08:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:08:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:08:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:08:32 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 00:08:32 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 00:08:32 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 00:08:32 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 00:08:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:08:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:08:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:08:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:08:32 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:08:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:08:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:08:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:08:32 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:08:32 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:08:32 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 00:08:32 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 00:08:32 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 00:08:32 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 00:08:32 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 00:08:32 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 00:08:32 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:08:32 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 00:08:32 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 00:08:32 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 00:08:32 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 00:08:32 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 00:08:32 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 00:08:32 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 00:08:33 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 00:08:33 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-17 00:08:33 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-17 00:08:33 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'str' object has no attribute 'regime_type'
2025-06-17 00:08:33 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-17 00:08:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49258 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-17 00:10:31 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:10:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:10:31 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:10:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:10:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [23638]
2025-06-17 00:10:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:10:44 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:10:44 [INFO] uvicorn.error:83 - _serve(): Started server process [23686]
2025-06-17 00:10:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:10:44 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:10:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:10:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:10:59 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:10:59 [INFO] uvicorn.error:83 - _serve(): Started server process [23701]
2025-06-17 00:10:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:10:59 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:10:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:12:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49787 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-17 00:12:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:12:54 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:12:54 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 00:12:54 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 00:12:54 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 00:12:54 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 00:12:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:12:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:12:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:12:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:12:54 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:12:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:12:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:12:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:12:54 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:12:54 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:12:54 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 00:12:54 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 00:12:54 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 00:12:54 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 00:12:54 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 00:12:54 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 00:12:54 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:12:54 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 00:12:54 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 00:12:54 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 00:12:54 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 00:12:54 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 00:12:54 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 00:12:54 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 00:12:55 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 00:12:55 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-17 00:12:55 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-17 00:12:55 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: type object 'TaxRegime' has no attribute 'old_regime'
2025-06-17 00:12:55 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-17 00:12:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49787 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-17 00:15:15 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:15:15 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:15:15 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 00:15:15 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 00:15:15 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:15:15 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 00:15:15 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 00:15:15 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 00:15:15 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 00:15:15 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 00:15:15 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 00:15:15 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-17 00:15:16 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-17 00:15:16 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: type object 'TaxRegime' has no attribute 'old_regime'
2025-06-17 00:15:16 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-17 00:15:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50318 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-17 00:21:09 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:21:09 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:21:09 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:21:09 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:21:09 [INFO] uvicorn.error:93 - _serve(): Finished server process [23701]
2025-06-17 00:21:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:21:27 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:21:27 [INFO] uvicorn.error:83 - _serve(): Started server process [23819]
2025-06-17 00:21:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:21:27 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:21:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:21:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:21:41 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:21:41 [INFO] uvicorn.error:83 - _serve(): Started server process [23846]
2025-06-17 00:21:41 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:21:41 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:21:41 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:22:02 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:22:02 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:22:02 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:22:02 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:22:02 [INFO] uvicorn.error:93 - _serve(): Finished server process [23846]
2025-06-17 00:22:10 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:22:19 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:22:19 [INFO] uvicorn.error:83 - _serve(): Started server process [23868]
2025-06-17 00:22:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:22:19 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:22:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:22:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:22:37 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:22:37 [INFO] uvicorn.error:83 - _serve(): Started server process [23894]
2025-06-17 00:22:37 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:22:37 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:22:37 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:23:20 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:23:20 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:23:20 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:23:20 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:23:20 [INFO] uvicorn.error:93 - _serve(): Finished server process [23894]
2025-06-17 00:23:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:23:32 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:23:32 [INFO] uvicorn.error:83 - _serve(): Started server process [23943]
2025-06-17 00:23:32 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:23:32 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:23:32 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:23:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53814 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-17 00:23:45 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:23:45 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:23:45 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 00:23:45 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 00:23:45 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 00:23:45 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 00:23:45 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:23:45 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:23:45 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:23:45 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:23:45 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:23:45 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:23:45 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:23:45 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:23:45 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:23:45 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:23:45 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 00:23:45 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 00:23:45 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 00:23:45 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 00:23:45 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 00:23:45 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 00:23:45 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:23:45 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 00:23:45 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 00:23:45 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 00:23:45 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 00:23:45 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 00:23:45 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 00:23:45 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 00:23:46 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 00:23:46 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-17 00:23:46 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-17 00:23:46 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'InterestIncome' object has no attribute 'calculate_total_interest_income'
2025-06-17 00:23:46 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-17 00:23:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:53820 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-17 00:26:10 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:26:10 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:26:10 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:26:10 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:26:10 [INFO] uvicorn.error:93 - _serve(): Finished server process [23943]
2025-06-17 00:26:18 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:26:28 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:26:28 [INFO] uvicorn.error:83 - _serve(): Started server process [23992]
2025-06-17 00:26:28 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:26:28 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:26:28 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:26:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:26:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:26:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:27:04 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:27:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:27:28 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:27:34 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:27:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:27:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:28:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:28:27 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:28:27 [INFO] uvicorn.error:83 - _serve(): Started server process [24146]
2025-06-17 00:28:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:28:27 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:28:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:28:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:28:41 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:28:41 [INFO] uvicorn.error:83 - _serve(): Started server process [24166]
2025-06-17 00:28:41 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:28:41 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:28:41 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:28:47 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:28:54 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:28:54 [INFO] uvicorn.error:83 - _serve(): Started server process [24182]
2025-06-17 00:28:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:28:54 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:28:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:28:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:29:08 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:29:08 [INFO] uvicorn.error:83 - _serve(): Started server process [24195]
2025-06-17 00:29:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:29:08 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:29:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:31:14 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:31:14 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:31:14 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:31:14 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:31:14 [INFO] uvicorn.error:93 - _serve(): Finished server process [24195]
2025-06-17 00:31:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:31:30 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:31:30 [INFO] uvicorn.error:83 - _serve(): Started server process [24213]
2025-06-17 00:31:30 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:31:30 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:31:30 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:31:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:31:42 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:31:42 [INFO] uvicorn.error:83 - _serve(): Started server process [24236]
2025-06-17 00:31:42 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:31:42 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:31:42 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:31:47 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:31:56 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:31:56 [INFO] uvicorn.error:83 - _serve(): Started server process [24255]
2025-06-17 00:31:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:31:56 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:31:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:31:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:32:09 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:32:09 [INFO] uvicorn.error:83 - _serve(): Started server process [24268]
2025-06-17 00:32:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:32:09 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:32:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:32:45 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:32:45 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:32:45 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:32:45 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:32:45 [INFO] uvicorn.error:93 - _serve(): Finished server process [24268]
2025-06-17 00:32:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:32:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:33:07 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:33:07 [INFO] uvicorn.error:83 - _serve(): Started server process [24310]
2025-06-17 00:33:07 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:33:07 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:33:07 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:33:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:33:19 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:33:19 [INFO] uvicorn.error:83 - _serve(): Started server process [24329]
2025-06-17 00:33:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:33:19 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:33:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:33:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:33:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:33:43 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 00:33:43 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 00:33:43 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 00:33:43 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 00:33:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:33:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:33:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:33:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:33:43 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:33:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:33:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:33:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:33:43 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:33:43 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:33:43 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 00:33:43 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 00:33:43 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 00:33:43 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 00:33:43 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 00:33:43 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 00:33:43 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:33:43 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 00:33:43 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 00:33:43 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 00:33:43 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 00:33:43 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 00:33:43 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 00:33:43 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 00:33:44 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 00:33:44 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-17 00:33:44 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-17 00:33:44 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'TaxationRecord' object has no attribute 'financial_year'
2025-06-17 00:33:44 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-17 00:33:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57649 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-17 00:37:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59254 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-17 00:37:52 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:37:52 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:37:52 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 00:37:52 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 00:37:52 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:37:52 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 00:37:52 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 00:37:52 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 00:37:52 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 00:37:52 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-17 00:37:52 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-17 00:38:13 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'TaxationRecord' object has no attribute 'financial_year'
2025-06-17 00:38:13 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-17 00:38:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59256 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-17 00:38:40 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:38:40 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:38:40 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:38:40 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:38:40 [INFO] uvicorn.error:93 - _serve(): Finished server process [24329]
2025-06-17 00:38:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:38:52 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:38:52 [INFO] uvicorn.error:83 - _serve(): Started server process [24401]
2025-06-17 00:38:52 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:38:52 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:38:52 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:39:20 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:39:20 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:39:21 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 00:39:21 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 00:39:21 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 00:39:21 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 00:39:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:39:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:39:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:39:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:39:21 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:39:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:39:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:39:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:39:21 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:39:21 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:39:21 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 00:39:21 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 00:39:21 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 00:39:21 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 00:39:21 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 00:39:21 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 00:39:21 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:39:21 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 00:39:21 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 00:39:21 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 00:39:21 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 00:39:21 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 00:39:21 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 00:39:21 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 00:39:22 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 00:39:22 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-17 00:39:22 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-17 00:39:26 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: TaxationRecord.__init__() missing 1 required positional argument: 'tax_year'
2025-06-17 00:39:26 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'TypeError'>
2025-06-17 00:39:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59776 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-17 00:40:07 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:40:07 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:40:07 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 00:40:07 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 00:40:07 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:40:07 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 00:40:07 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 00:40:07 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 00:40:07 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 00:40:07 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-17 00:40:07 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-17 00:45:53 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: TaxationRecord.__init__() missing 1 required positional argument: 'tax_year'
2025-06-17 00:45:53 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'TypeError'>
2025-06-17 00:46:34 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:46:34 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:46:34 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 00:46:34 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 00:46:34 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:46:34 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 00:46:34 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 00:46:34 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 00:46:34 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 00:46:34 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-17 00:46:34 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-17 00:47:07 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: TaxationRecord.__init__() missing 1 required positional argument: 'tax_year'
2025-06-17 00:47:07 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'TypeError'>
2025-06-17 00:47:07 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62150 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-17 00:47:07 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:47:07 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:47:07 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:47:07 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:47:07 [INFO] uvicorn.error:93 - _serve(): Finished server process [24401]
2025-06-17 00:47:13 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:47:20 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:47:20 [INFO] uvicorn.error:83 - _serve(): Started server process [24509]
2025-06-17 00:47:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:47:20 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:47:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:47:36 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:47:36 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:47:36 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 00:47:36 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 00:47:36 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 00:47:36 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 00:47:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:47:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:47:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:47:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:47:36 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:47:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:47:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:47:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:47:36 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:47:36 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:47:36 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 00:47:36 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 00:47:36 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 00:47:36 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 00:47:37 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 00:47:37 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 00:47:37 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:47:37 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 00:47:37 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 00:47:37 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 00:47:37 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 00:47:37 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 00:47:37 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 00:47:37 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-17 00:47:37 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-17 00:47:38 [INFO] app.application.commands.taxation_commands:179 - handle(): ✅ Taxation record saved successfully
2025-06-17 00:47:38 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'TaxationRecord' object has no attribute 'financial_year'
2025-06-17 00:47:38 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-17 00:47:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62497 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-17 00:49:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63318 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-17 00:49:33 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:49:33 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:49:33 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 00:49:33 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 00:49:33 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:49:33 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 00:49:33 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 00:49:33 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 00:49:33 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 00:49:33 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-17 00:49:33 [INFO] app.application.commands.taxation_commands:179 - handle(): ✅ Taxation record saved successfully
2025-06-17 00:49:33 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'TaxationRecord' object has no attribute 'financial_year'
2025-06-17 00:49:33 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-17 00:49:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63320 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-17 00:50:27 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:50:27 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:50:27 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 00:50:27 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 00:50:27 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:50:27 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 00:50:27 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 00:50:27 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 00:50:27 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 00:50:27 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-17 00:50:27 [INFO] app.application.commands.taxation_commands:179 - handle(): ✅ Taxation record saved successfully
2025-06-17 00:50:27 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: 'TaxationRecord' object has no attribute 'financial_year'
2025-06-17 00:50:27 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'AttributeError'>
2025-06-17 00:50:27 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63657 - "POST /api/v2/taxation/records HTTP/1.1" 500
2025-06-17 00:51:19 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:51:19 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:51:19 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:51:19 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:51:19 [INFO] uvicorn.error:93 - _serve(): Finished server process [24509]
2025-06-17 00:51:28 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:51:35 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:51:35 [INFO] uvicorn.error:83 - _serve(): Started server process [24567]
2025-06-17 00:51:35 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:51:35 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:51:35 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:51:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:51:45 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:51:45 [INFO] uvicorn.error:83 - _serve(): Started server process [24595]
2025-06-17 00:51:45 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:51:45 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:51:45 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:52:00 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:52:00 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:52:00 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 00:52:00 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 00:52:00 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 00:52:00 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 00:52:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:52:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:52:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:52:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:52:00 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:52:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:52:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:52:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:52:00 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:52:00 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:52:00 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 00:52:00 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 00:52:00 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 00:52:00 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 00:52:00 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 00:52:00 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 00:52:00 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:52:00 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 00:52:00 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 00:52:00 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 00:52:00 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 00:52:00 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 00:52:00 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 00:52:00 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 00:52:01 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 00:52:01 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-17 00:52:01 [INFO] app.application.commands.taxation_commands:179 - handle(): ✅ Taxation record saved successfully
2025-06-17 00:52:01 [INFO] app.api.controllers.taxation_controller:279 - create_taxation_record(): ✅ Command handler executed successfully
2025-06-17 00:52:01 [INFO] app.api.controllers.taxation_controller:285 - create_taxation_record(): Created taxation record with comprehensive income: EMP005_2025
2025-06-17 00:52:01 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64194 - "POST /api/v2/taxation/records HTTP/1.1" 201
2025-06-17 00:52:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64328 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-17 00:52:15 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:52:15 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:52:15 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-17 00:52:15 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-17 00:52:15 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 00:52:15 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-17 00:52:15 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-17 00:52:16 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-17 00:52:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64328 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-17 00:52:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64330 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-17 00:52:53 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:52:53 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:52:53 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-17 00:52:53 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-17 00:52:53 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 00:52:53 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 00:52:53 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-17 00:52:53 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 00:52:54 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:208 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-17 00:52:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64330 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-17 00:52:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64330 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 00:52:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:52:54 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:52:54 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:52:54 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:52:54 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 00:52:54 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 00:52:54 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 00:52:54 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:208 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-17 00:52:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64424 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 00:55:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:55:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:55:28 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-17 00:55:28 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-17 00:55:28 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 00:55:28 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 00:55:28 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 00:55:28 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:208 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-17 00:55:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:65044 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-17 00:57:30 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:57:30 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:57:30 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:57:30 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:57:30 [INFO] uvicorn.error:93 - _serve(): Finished server process [24595]
2025-06-17 00:57:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:57:44 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:57:44 [INFO] uvicorn.error:83 - _serve(): Started server process [24674]
2025-06-17 00:57:44 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:57:44 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:57:44 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:57:49 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:57:56 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:57:56 [INFO] uvicorn.error:83 - _serve(): Started server process [24704]
2025-06-17 00:57:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:57:56 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:57:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:59:04 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 00:59:04 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 00:59:04 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 00:59:04 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 00:59:04 [INFO] uvicorn.error:93 - _serve(): Finished server process [24704]
2025-06-17 00:59:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:59:23 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:59:23 [INFO] uvicorn.error:83 - _serve(): Started server process [24727]
2025-06-17 00:59:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:59:23 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:59:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:59:28 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 00:59:36 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 00:59:36 [INFO] uvicorn.error:83 - _serve(): Started server process [24754]
2025-06-17 00:59:36 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 00:59:36 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 00:59:36 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 00:59:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:59:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:59:40 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 00:59:40 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 00:59:40 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 00:59:40 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 00:59:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:59:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:59:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:59:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:59:40 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:59:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 00:59:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 00:59:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 00:59:40 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 00:59:40 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 00:59:40 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 00:59:40 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 00:59:40 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 00:59:40 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 00:59:40 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:40 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:40 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:92 - execute(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:40 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50313 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 00:59:42 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:59:42 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:59:42 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:42 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:42 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:92 - execute(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:42 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:42 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50313 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 00:59:44 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:59:44 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:59:44 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:44 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:44 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:92 - execute(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:44 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50313 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 00:59:45 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:59:45 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:59:45 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:45 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:45 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:92 - execute(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:45 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50313 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 00:59:46 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:59:46 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:59:46 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:46 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:46 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:92 - execute(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:46 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50313 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 00:59:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:59:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:59:48 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:48 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:48 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:92 - execute(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:48 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50313 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 00:59:50 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:59:50 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:59:50 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:50 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:50 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:92 - execute(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:50 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:50 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50313 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 00:59:51 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:59:51 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:59:51 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:51 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:92 - execute(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:51 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50313 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 00:59:53 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 00:59:53 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 00:59:53 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:53 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 00:59:53 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:92 - execute(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:53 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: MongoDBTaxationRepository.get_taxation_record() got an unexpected keyword argument 'tax_year'
2025-06-17 00:59:53 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50313 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:03:05 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 01:03:05 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 01:03:05 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 01:03:05 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 01:03:05 [INFO] uvicorn.error:93 - _serve(): Finished server process [24754]
2025-06-17 01:03:10 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:03:18 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:03:18 [INFO] uvicorn.error:83 - _serve(): Started server process [24805]
2025-06-17 01:03:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:03:18 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:03:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:05:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52004 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 01:05:22 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:05:22 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:05:22 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 01:05:22 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 01:05:22 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 01:05:22 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 01:05:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:05:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:05:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:05:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:05:22 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:05:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:05:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:05:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:05:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:05:22 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:05:22 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 01:05:22 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 01:05:22 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 01:05:22 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 01:05:22 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:05:22 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:05:24 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 01:05:24 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 01:05:24 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:05:24 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:284 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:05:24 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-17 01:05:24 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:05:24 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:205 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-17 01:05:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52008 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 01:06:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 01:06:54 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 01:06:54 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 01:06:54 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 01:06:54 [INFO] uvicorn.error:93 - _serve(): Finished server process [24805]
2025-06-17 01:06:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:07:06 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:07:06 [INFO] uvicorn.error:83 - _serve(): Started server process [24878]
2025-06-17 01:07:06 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:07:06 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:07:06 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:07:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:07:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:07:37 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 01:07:37 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 01:07:37 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 01:07:37 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 01:07:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:07:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:07:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:07:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:07:37 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:07:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:07:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:07:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:07:37 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:07:37 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:07:37 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 01:07:37 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 01:07:37 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 01:07:37 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 01:07:37 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:07:37 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:07:39 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 01:07:39 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 01:07:39 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:07:39 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:284 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:07:39 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-17 01:07:39 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:07:39 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:205 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-17 01:07:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52813 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 01:09:54 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 01:09:55 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 01:09:55 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 01:09:55 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 01:09:55 [INFO] uvicorn.error:93 - _serve(): Finished server process [24878]
2025-06-17 01:09:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:10:08 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:10:08 [INFO] uvicorn.error:83 - _serve(): Started server process [24911]
2025-06-17 01:10:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:10:08 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:10:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:10:22 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 01:10:23 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 01:10:23 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 01:10:23 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 01:10:23 [INFO] uvicorn.error:93 - _serve(): Finished server process [24911]
2025-06-17 01:10:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:10:38 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:10:38 [INFO] uvicorn.error:83 - _serve(): Started server process [24945]
2025-06-17 01:10:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:10:38 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:10:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:10:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:10:51 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:10:51 [INFO] uvicorn.error:83 - _serve(): Started server process [24973]
2025-06-17 01:10:51 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:10:51 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:10:51 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:13:56 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 01:13:56 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 01:13:56 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 01:13:56 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 01:13:56 [INFO] uvicorn.error:93 - _serve(): Finished server process [24973]
2025-06-17 01:14:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:14:09 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:14:09 [INFO] uvicorn.error:83 - _serve(): Started server process [25007]
2025-06-17 01:14:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:14:09 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:14:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:14:14 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:14:14 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:14:14 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 01:14:14 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 01:14:14 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 01:14:14 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 01:14:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:14:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:14:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:14:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:14:14 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:14:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:14:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:14:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:14:14 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:14:14 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:14:14 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 01:14:14 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 01:14:14 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 01:14:14 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 01:14:14 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:14:15 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:14:16 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 01:14:16 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 01:14:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:14:16 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:284 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:14:16 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-17 01:14:16 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:14:16 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:205 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-17 01:14:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55384 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 01:14:57 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:14:57 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:14:57 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:14:57 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:15:12 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:15:12 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:284 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:15:12 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:15:12 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 01:15:12 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:205 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-17 01:15:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55718 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 01:15:12 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 01:15:12 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 01:15:12 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 01:15:12 [INFO] uvicorn.error:93 - _serve(): Finished server process [25007]
2025-06-17 01:15:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:15:29 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:15:29 [INFO] uvicorn.error:83 - _serve(): Started server process [25055]
2025-06-17 01:15:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:15:29 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:15:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:16:25 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 01:16:25 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 01:16:25 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 01:16:25 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 01:16:25 [INFO] uvicorn.error:93 - _serve(): Finished server process [25055]
2025-06-17 01:16:32 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:16:43 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:16:43 [INFO] uvicorn.error:83 - _serve(): Started server process [25098]
2025-06-17 01:16:43 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:16:43 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:16:43 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:16:47 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:16:55 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:16:55 [INFO] uvicorn.error:83 - _serve(): Started server process [25110]
2025-06-17 01:16:55 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:16:55 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:16:55 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:16:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:56201 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 01:16:55 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:16:55 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:16:55 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 01:16:55 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 01:16:55 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 01:16:55 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 01:16:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:16:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:16:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:16:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:16:55 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:16:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:16:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:16:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:16:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:16:55 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:16:55 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 01:16:55 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 01:16:55 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 01:16:55 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 01:16:55 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:16:55 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:17:18 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:17:18 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:17:18 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:17:18 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:17:43 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 01:17:43 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:17:43 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:19:58 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:19:58 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:19:59 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:19:59 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:19:59 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:19:59 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:19:59 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:19:59 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:19:59 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:19:59 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:20:10 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:20:10 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:20:18 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:20:18 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:20:23 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:20:23 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:20:29 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:20:29 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:20:31 [ERROR] app.infrastructure.database.mongodb_connector:72 - connect(): Failed to connect to MongoDB: No replica set members found yet, Timeout: 5.0s, Topology Description: <TopologyDescription id: 68507565616e728156ebabb6, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>]>
2025-06-17 01:20:33 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:92 - execute(): Error getting comprehensive taxation record for employee EMP005: Database connection failed: No replica set members found yet, Timeout: 5.0s, Topology Description: <TopologyDescription id: 68507565616e728156ebabb6, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>]>
2025-06-17 01:20:33 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: Database connection failed: No replica set members found yet, Timeout: 5.0s, Topology Description: <TopologyDescription id: 68507565616e728156ebabb6, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>]>
2025-06-17 01:20:37 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:92 - execute(): Error getting comprehensive taxation record for employee EMP005: No replica set members found yet, Timeout: 5.0s, Topology Description: <TopologyDescription id: 68507565616e728156ebabb6, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>]>
2025-06-17 01:20:37 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: No replica set members found yet, Timeout: 5.0s, Topology Description: <TopologyDescription id: 68507565616e728156ebabb6, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>]>
2025-06-17 01:20:40 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:92 - execute(): Error getting comprehensive taxation record for employee EMP005: No replica set members match selector "Primary()", Timeout: 5.0s, Topology Description: <TopologyDescription id: 68507565616e728156ebabb6, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.041272147005656734>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>]>
2025-06-17 01:20:40 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: No replica set members match selector "Primary()", Timeout: 5.0s, Topology Description: <TopologyDescription id: 68507565616e728156ebabb6, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.041272147005656734>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>]>
2025-06-17 01:20:44 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:92 - execute(): Error getting comprehensive taxation record for employee EMP005: No replica set members match selector "Primary()", Timeout: 5.0s, Topology Description: <TopologyDescription id: 68507565616e728156ebabb6, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.06797409699356649>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.041272147005656734>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>]>
2025-06-17 01:20:44 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: No replica set members match selector "Primary()", Timeout: 5.0s, Topology Description: <TopologyDescription id: 68507565616e728156ebabb6, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.06797409699356649>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.041272147005656734>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>]>
2025-06-17 01:20:45 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 01:20:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:20:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:20:45 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:20:45 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:20:45 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:20:47 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:20:47 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:20:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:284 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:20:51 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-17 01:20:51 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:20:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:284 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:20:51 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:20:51 [INFO] uvicorn.error:305 - _wait_tasks_to_complete(): Waiting for background tasks to complete. (CTRL+C to force quit)
2025-06-17 01:20:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:284 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:20:51 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:20:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:20:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:205 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-17 01:20:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:284 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:20:51 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:20:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:205 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-17 01:20:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:205 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-17 01:20:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:205 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-17 01:20:51 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 01:20:51 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 01:20:51 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 01:20:51 [INFO] uvicorn.error:93 - _serve(): Finished server process [25110]
2025-06-17 01:20:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:21:08 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:21:08 [INFO] uvicorn.error:83 - _serve(): Started server process [25262]
2025-06-17 01:21:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:21:08 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:21:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:21:08 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:21:08 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:21:08 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 01:21:08 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 01:21:08 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 01:21:08 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 01:21:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:21:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:21:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:21:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:21:08 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:21:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:21:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:21:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:21:08 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:21:08 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:21:08 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 01:21:08 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 01:21:08 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 01:21:08 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 01:21:28 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:21:28 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:21:29 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 01:21:29 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 01:21:29 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:21:29 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:21:29 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-17 01:21:29 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:21:41 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:21:41 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:21:41 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:21:41 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:21:41 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:21:41 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:21:41 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:21:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57910 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 01:22:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58033 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-17 01:22:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:22:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:22:04 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 01:22:04 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 01:22:04 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 01:22:04 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 01:22:04 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 01:22:05 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 01:22:05 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 01:22:05 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 01:22:05 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 01:22:05 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 01:22:05 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: Taxation record already exists for user EMP005 in 2025-26
2025-06-17 01:22:05 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'app.domain.exceptions.taxation_exceptions.TaxationValidationError'>
2025-06-17 01:22:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58035 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-17 01:23:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58471 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-17 01:23:12 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:23:12 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:23:12 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-17 01:23:12 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-17 01:23:12 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:23:12 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-17 01:23:12 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-17 01:23:12 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-17 01:23:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58471 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-17 01:23:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58471 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-17 01:23:16 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:23:16 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:23:16 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-17 01:23:16 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-17 01:23:16 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:23:16 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:23:16 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:23:16 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:208 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-17 01:23:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58473 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-17 01:24:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:24:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:24:37 [INFO] app.api.controllers.taxation_controller:190 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-17 01:24:37 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-17 01:24:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:24:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-17 01:24:37 [INFO] app.api.controllers.taxation_controller:198 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-17 01:24:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58849 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-17 01:24:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:24:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:24:41 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-17 01:24:41 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-17 01:24:41 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:24:41 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:24:41 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:24:41 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:208 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-17 01:24:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58849 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-17 01:24:41 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:24:41 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:24:41 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:24:41 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:24:41 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:24:41 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:24:41 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:24:41 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:208 - _create_default_comprehensive_record(): Creating default comprehensive record for employee EMP005, age: 43, is_govt_employee: False
2025-06-17 01:24:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58849 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 01:25:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:25:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:25:04 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 01:25:04 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 01:25:04 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 01:25:04 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 01:25:04 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 01:25:04 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 01:25:04 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 01:25:04 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:115 - handle(): No existing record found, proceeding with creation
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:116 - handle(): Salary income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:117 - handle(): Salary income basic_salary: ₹1,000,000.00
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:118 - handle(): Salary income hra_received: ₹400,000.00
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:119 - handle(): Salary income hra_city_type: non_metro
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:122 - handle(): Creating default Perquisites entity...
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:124 - handle(): ✅ Perquisites entity created successfully
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:126 - handle(): Creating default HousePropertyIncome entity...
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:134 - handle(): ✅ HousePropertyIncome entity created successfully
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:136 - handle(): Creating default CapitalGainsIncome entity...
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:144 - handle(): ✅ CapitalGainsIncome entity created successfully
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:146 - handle(): Creating default RetirementBenefits entity...
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:148 - handle(): ✅ RetirementBenefits entity created successfully
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:150 - handle(): Creating default OtherIncome entity...
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:152 - handle(): ✅ OtherIncome entity created successfully
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:155 - handle(): Creating TaxationRecord entity...
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:170 - handle(): ✅ TaxationRecord entity created successfully
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:177 - handle(): Saving taxation record to repository...
2025-06-17 01:25:04 [INFO] app.application.commands.taxation_commands:179 - handle(): ✅ Taxation record saved successfully
2025-06-17 01:25:04 [INFO] app.api.controllers.taxation_controller:279 - create_taxation_record(): ✅ Command handler executed successfully
2025-06-17 01:25:04 [INFO] app.api.controllers.taxation_controller:285 - create_taxation_record(): Created taxation record with comprehensive income: EMP005_2025
2025-06-17 01:25:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58906 - "POST /api/v2/taxation/records HTTP/1.1" 201
2025-06-17 01:25:30 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:25:30 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:25:30 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-17 01:25:30 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-17 01:25:30 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:25:30 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:25:30 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:25:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58968 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-17 01:26:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:26:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:26:17 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-17 01:26:17 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-17 01:26:17 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:26:17 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:26:17 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:26:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59092 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-17 01:26:27 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 01:26:32 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 01:26:32 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 01:26:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:26:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:26:40 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:26:40 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:26:45 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:26:45 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:26:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59160 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:26:46 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:26:46 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:26:46 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:26:46 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:26:51 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:26:51 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:26:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59160 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:26:53 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:26:53 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:26:53 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:26:53 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:26:58 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:26:58 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:26:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59160 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:26:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59160 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 01:26:59 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:26:59 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:26:59 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:26:59 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:27:05 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:27:05 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:27:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59160 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:27:06 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:27:06 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:27:06 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:27:06 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:27:11 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:27:11 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:27:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59160 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:27:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:27:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:27:13 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:27:13 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:27:18 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:27:18 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:27:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59160 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:27:20 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:27:20 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:27:20 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:27:20 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:27:26 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:27:26 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:27:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59160 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:27:27 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:27:27 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:27:27 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:27:27 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:27:32 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:27:32 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:27:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59354 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:27:34 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:27:34 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:27:34 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:27:34 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:27:39 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:27:39 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:27:39 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59354 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:28:27 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:28:27 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:28:27 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:28:27 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:28:32 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:28:32 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:28:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59719 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:28:33 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:28:33 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:28:33 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:28:33 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:28:38 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:28:38 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:28:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59719 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:28:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:28:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:28:40 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:28:40 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:28:45 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:28:45 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:28:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59719 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:28:46 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:28:46 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:28:46 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:28:46 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:28:52 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:28:52 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:28:52 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59719 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:28:53 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:28:53 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:28:53 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:28:53 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:28:58 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:28:58 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:28:58 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59719 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:29:00 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:29:00 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:29:00 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:29:00 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:29:05 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:29:05 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:29:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59719 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:29:07 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:29:07 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:29:07 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:29:07 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:29:12 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:29:12 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:29:12 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59719 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:29:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:29:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:29:13 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:29:13 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:29:18 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:29:18 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:29:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59719 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:29:20 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:29:20 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:29:20 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:29:20 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:29:26 [ERROR] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:95 - execute(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:29:26 [ERROR] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Error getting comprehensive taxation record for employee EMP005: SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms),SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms), Timeout: 5.0s, Topology Description: <TopologyDescription id: 685075c11d5f2c8d7e7bf205, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None, error=AutoReconnect('SSL handshake failed: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [SSL: TLSV1_ALERT_INTERNAL_ERROR] tlsv1 alert internal error (_ssl.c:1028) (configured timeouts: socketTimeoutMS: 10000.0ms, connectTimeoutMS: 10000.0ms)')>]>
2025-06-17 01:29:26 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59719 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 500
2025-06-17 01:31:15 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:31:15 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:31:15 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:31:15 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:31:15 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:31:15 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:31:15 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:31:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61045 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 01:31:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61218 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-17 01:31:40 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:31:40 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:31:40 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-17 01:31:40 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-17 01:31:40 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61220 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-17 01:34:06 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 01:34:06 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 01:34:06 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 01:34:06 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 01:34:06 [INFO] uvicorn.error:93 - _serve(): Finished server process [25262]
2025-06-17 01:34:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:34:23 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:34:23 [INFO] uvicorn.error:83 - _serve(): Started server process [25493]
2025-06-17 01:34:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:34:23 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:34:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:35:11 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:35:11 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:35:11 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 01:35:11 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 01:35:11 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 01:35:11 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 01:35:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:35:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:35:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:35:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:35:11 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:35:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:35:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:35:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:35:11 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:35:11 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:35:11 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 01:35:11 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 01:35:11 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 01:35:11 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 01:35:11 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:35:11 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:35:13 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 01:35:13 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 01:35:13 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:35:13 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:35:13 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-17 01:35:13 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:35:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62623 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 01:35:27 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:35:27 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:35:28 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-17 01:35:57 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-17 01:35:57 [INFO] uvicorn.access:473 - send(): 127.0.0.1:62746 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-17 01:36:41 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 01:36:41 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 01:36:41 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 01:36:41 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 01:36:41 [INFO] uvicorn.error:93 - _serve(): Finished server process [25493]
2025-06-17 01:36:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:36:54 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:36:54 [INFO] uvicorn.error:83 - _serve(): Started server process [25546]
2025-06-17 01:36:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:36:54 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:36:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:36:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:37:05 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:37:05 [INFO] uvicorn.error:83 - _serve(): Started server process [25573]
2025-06-17 01:37:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:37:05 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:37:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:37:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63516 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 01:37:47 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:37:47 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:37:47 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 01:37:47 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 01:37:47 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 01:37:47 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 01:37:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:37:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:37:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:37:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:37:47 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:37:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:37:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:37:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:37:47 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:37:47 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:37:47 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 01:37:47 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 01:37:47 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 01:37:47 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 01:37:47 [INFO] app.api.controllers.taxation_controller:310 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:37:47 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 01:37:50 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 01:37:50 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 01:37:50 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 01:37:50 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 01:37:51 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-17 01:37:51 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 01:37:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63518 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 01:38:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:38:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:38:04 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-17 01:38:04 [ERROR] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Error in comprehensive tax calculation for org localhost: TaxCalculationService.calculate_and_update_taxation_record() missing 1 required positional argument: 'organization_id'
2025-06-17 01:38:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:63660 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-17 01:38:40 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 01:38:40 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 01:38:40 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 01:38:40 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 01:38:40 [INFO] uvicorn.error:93 - _serve(): Finished server process [25573]
2025-06-17 01:38:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:38:58 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:38:58 [INFO] uvicorn.error:83 - _serve(): Started server process [25603]
2025-06-17 01:38:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:38:58 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:38:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:39:22 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:39:22 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:39:22 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 01:39:22 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 01:39:22 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 01:39:22 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 01:39:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:39:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:39:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:39:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:39:22 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:39:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:39:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:39:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:39:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:39:22 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:39:22 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 01:39:22 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 01:39:22 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 01:39:22 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 01:39:22 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-17 01:39:22 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-17 01:39:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64148 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-17 01:39:22 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dataclass_type', 'loc': ('response',), 'msg': 'Input should be a dictionary or an instance of TaxCalculationResult', 'input': <coroutine object TaxCalculationService.calculate_and_update_taxation_record at 0x106b1f100>, 'ctx': {'class_name': 'TaxCalculationResult'}}

2025-06-17 01:46:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49656 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-17 01:46:11 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:46:11 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:46:11 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-17 01:46:11 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-17 01:46:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49658 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-17 01:46:11 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'dataclass_type', 'loc': ('response',), 'msg': 'Input should be a dictionary or an instance of TaxCalculationResult', 'input': <coroutine object TaxCalculationService.calculate_and_update_taxation_record at 0x106c2e6b0>, 'ctx': {'class_name': 'TaxCalculationResult'}}

2025-06-17 01:46:27 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 01:46:27 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 01:46:27 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 01:46:27 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 01:46:27 [INFO] uvicorn.error:93 - _serve(): Finished server process [25603]
2025-06-17 01:46:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:46:40 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:46:40 [INFO] uvicorn.error:83 - _serve(): Started server process [25688]
2025-06-17 01:46:40 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:46:40 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:46:40 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:46:45 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:46:52 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:46:52 [INFO] uvicorn.error:83 - _serve(): Started server process [25703]
2025-06-17 01:46:52 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:46:52 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:46:52 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:46:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:47:04 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:47:04 [INFO] uvicorn.error:83 - _serve(): Started server process [25722]
2025-06-17 01:47:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:47:04 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:47:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:47:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:47:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:47:04 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 01:47:04 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 01:47:04 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 01:47:04 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 01:47:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:47:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:47:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:47:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:47:04 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:47:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 01:47:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 01:47:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 01:47:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 01:47:04 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 01:47:04 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 01:47:04 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 01:47:04 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 01:47:04 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 01:47:05 [INFO] app.api.controllers.taxation_controller:547 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for org localhost
2025-06-17 01:47:09 [INFO] app.api.controllers.taxation_controller:558 - calculate_comprehensive_tax(): Comprehensive tax calculation completed for org localhost
2025-06-17 01:47:09 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49863 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-17 01:47:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49989 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-17 01:47:21 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 01:47:21 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 01:47:21 [INFO] app.api.controllers.taxation_controller:214 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 01:47:21 [INFO] app.api.controllers.taxation_controller:247 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 01:47:21 [INFO] app.api.controllers.taxation_controller:248 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 01:47:21 [INFO] app.api.controllers.taxation_controller:249 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 01:47:21 [INFO] app.api.controllers.taxation_controller:250 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 01:47:21 [INFO] app.api.controllers.taxation_controller:251 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 01:47:21 [INFO] app.api.controllers.taxation_controller:269 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 01:47:21 [INFO] app.api.controllers.taxation_controller:276 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 01:47:21 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 01:47:21 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 01:47:23 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 01:47:23 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 01:47:23 [ERROR] app.api.controllers.taxation_controller:281 - create_taxation_record(): ❌ Command handler failed: Taxation record already exists for user EMP005 in 2025-26
2025-06-17 01:47:23 [ERROR] app.api.controllers.taxation_controller:282 - create_taxation_record(): ❌ Error type: <class 'app.domain.exceptions.taxation_exceptions.TaxationValidationError'>
2025-06-17 01:47:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:49989 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-17 01:48:40 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 01:48:41 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 01:48:41 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 01:48:41 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 01:48:41 [INFO] uvicorn.error:93 - _serve(): Finished server process [25722]
2025-06-17 01:48:47 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:48:54 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:48:54 [INFO] uvicorn.error:83 - _serve(): Started server process [25783]
2025-06-17 01:48:54 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:48:54 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:48:54 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:49:01 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:49:08 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:49:08 [INFO] uvicorn.error:83 - _serve(): Started server process [25810]
2025-06-17 01:49:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:49:08 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:49:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:49:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:49:19 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:49:19 [INFO] uvicorn.error:83 - _serve(): Started server process [25829]
2025-06-17 01:49:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:49:19 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:49:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:56:57 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 01:56:57 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 01:56:57 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 01:56:57 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 01:56:57 [INFO] uvicorn.error:93 - _serve(): Finished server process [25829]
2025-06-17 01:57:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 01:57:09 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 01:57:09 [INFO] uvicorn.error:83 - _serve(): Started server process [25885]
2025-06-17 01:57:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 01:57:09 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 01:57:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 01:59:59 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 01:59:59 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 01:59:59 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 01:59:59 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 01:59:59 [INFO] uvicorn.error:93 - _serve(): Finished server process [25885]
2025-06-17 02:00:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:00:14 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:00:14 [INFO] uvicorn.error:83 - _serve(): Started server process [25919]
2025-06-17 02:00:14 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:00:14 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:00:14 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:00:20 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:00:31 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:00:31 [INFO] uvicorn.error:83 - _serve(): Started server process [25939]
2025-06-17 02:00:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:00:31 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:00:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:00:50 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 02:00:50 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 02:00:50 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 02:00:50 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 02:00:50 [INFO] uvicorn.error:93 - _serve(): Finished server process [25939]
2025-06-17 02:00:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:01:06 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:01:06 [INFO] uvicorn.error:83 - _serve(): Started server process [25960]
2025-06-17 02:01:06 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:01:06 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:01:06 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:01:11 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:01:19 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:01:19 [INFO] uvicorn.error:83 - _serve(): Started server process [25979]
2025-06-17 02:01:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:01:19 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:01:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:01:43 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 02:01:44 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 02:01:44 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 02:01:44 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 02:01:44 [INFO] uvicorn.error:93 - _serve(): Finished server process [25979]
2025-06-17 02:01:51 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:01:58 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:01:58 [INFO] uvicorn.error:83 - _serve(): Started server process [25997]
2025-06-17 02:01:58 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:01:58 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:01:58 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:02:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:02:09 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:02:09 [INFO] uvicorn.error:83 - _serve(): Started server process [26013]
2025-06-17 02:02:09 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:02:09 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:02:09 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:03:46 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 02:03:46 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 02:03:46 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 02:03:46 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 02:03:46 [INFO] uvicorn.error:93 - _serve(): Finished server process [26013]
2025-06-17 02:03:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:04:00 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:04:00 [INFO] uvicorn.error:83 - _serve(): Started server process [26043]
2025-06-17 02:04:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:04:00 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:04:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:05:00 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 02:05:01 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 02:05:01 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 02:05:01 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 02:05:01 [INFO] uvicorn.error:93 - _serve(): Finished server process [26043]
2025-06-17 02:05:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:05:15 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:05:15 [INFO] uvicorn.error:83 - _serve(): Started server process [26095]
2025-06-17 02:05:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:05:15 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:05:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:05:19 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 02:05:19 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 02:05:19 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 02:05:19 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 02:05:19 [INFO] uvicorn.error:93 - _serve(): Finished server process [26095]
2025-06-17 02:05:25 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:05:35 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:05:35 [INFO] uvicorn.error:83 - _serve(): Started server process [26113]
2025-06-17 02:05:35 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:05:35 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:05:35 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:05:44 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 02:05:44 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 02:05:44 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 02:05:44 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 02:05:44 [INFO] uvicorn.error:93 - _serve(): Finished server process [26113]
2025-06-17 02:05:53 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:06:01 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:06:01 [INFO] uvicorn.error:83 - _serve(): Started server process [26134]
2025-06-17 02:06:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:06:01 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:06:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:06:07 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:06:18 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:06:18 [INFO] uvicorn.error:83 - _serve(): Started server process [26155]
2025-06-17 02:06:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:06:18 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:06:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:06:20 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 02:06:20 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 02:06:20 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 02:06:20 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 02:06:20 [INFO] uvicorn.error:93 - _serve(): Finished server process [26155]
2025-06-17 02:06:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:06:35 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:06:35 [INFO] uvicorn.error:83 - _serve(): Started server process [26171]
2025-06-17 02:06:35 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:06:35 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:06:35 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:06:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:06:48 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:06:48 [INFO] uvicorn.error:83 - _serve(): Started server process [26201]
2025-06-17 02:06:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:06:48 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:06:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:08:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57100 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 02:08:38 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-17 02:08:38 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-17 02:08:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57100 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-17 02:08:41 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-17 02:08:41 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-17 02:08:41 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57100 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-17 02:08:43 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-17 02:08:43 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-17 02:08:43 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57100 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-17 02:08:44 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-17 02:08:44 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-17 02:08:44 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57100 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-17 02:08:45 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-17 02:08:45 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-17 02:08:45 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57100 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-17 02:08:47 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-17 02:08:47 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-17 02:08:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57100 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-17 02:08:49 [WARNING] app.auth.jwt_handler:77 - decode_access_token(): Token has expired
2025-06-17 02:08:49 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Token has expired
2025-06-17 02:08:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57100 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 401
2025-06-17 02:08:59 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57102 - "OPTIONS /api/v2/auth/login HTTP/1.1" 200
2025-06-17 02:08:59 [INFO] app.api.routes.auth_routes_v2:73 - login(): Login request for user: superadmin @ localhost
2025-06-17 02:08:59 [INFO] app.api.controllers.auth_controller:84 - login(): Login attempt for user: superadmin @ localhost
2025-06-17 02:08:59 [INFO] app.api.controllers.auth_controller:93 - login(): Connection string: mongodb+srv://admin:test123@mongodbtest.jhfj7s3.mongodb.net/?appName=mongodbTest
2025-06-17 02:09:01 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 02:09:01 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 02:09:01 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-17 02:09:01 [INFO] app.infrastructure.database.mongodb_connector:90 - disconnect(): MongoDB connections closed
2025-06-17 02:09:01 [INFO] app.api.controllers.auth_controller:121 - login(): Verifying password for user: superadmin
2025-06-17 02:09:01 [INFO] app.auth.password_handler:19 - verify_password(): Verifying password: admin123 with hashed password: $2b$12$tHFlJsUzWyg1gntEL.JwRu6V1.VO/UdyyJxzLECfapAaMLw3BGZTW
2025-06-17 02:09:01 [WARNING] passlib.handlers.bcrypt:622 - _load_backend_mixin(): (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-06-17 02:09:02 [INFO] app.auth.password_handler:22 - verify_password(): Password verification succeeded.
2025-06-17 02:09:02 [INFO] app.auth.jwt_handler:37 - create_access_token(): Access token created for user: superadmin
2025-06-17 02:09:02 [INFO] app.auth.jwt_handler:38 - create_access_token(): Token expires at: 2025-06-17T04:39:02.346866
2025-06-17 02:09:02 [INFO] app.api.controllers.auth_controller:165 - login(): User superadmin logged in successfully
2025-06-17 02:09:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57102 - "POST /api/v2/auth/login HTTP/1.1" 200
2025-06-17 02:09:02 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57102 - "OPTIONS /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-17 02:09:02 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:09:02 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:09:02 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 02:09:02 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 02:09:02 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 02:09:02 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 02:09:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 02:09:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 02:09:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 02:09:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 02:09:02 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 02:09:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 02:09:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 02:09:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 02:09:02 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 02:09:02 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 02:09:02 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 02:09:02 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 02:09:02 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 02:09:02 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 02:09:02 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-17 02:09:02 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-17 02:09:02 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-17 02:09:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-17 02:09:02 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-17 02:09:04 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 02:09:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-17 02:09:04 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 02:09:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 02:09:04 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-17 02:09:05 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-17 02:09:05 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-17 02:09:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 02:09:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-17 02:09:05 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-17 02:09:05 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-17 02:09:05 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-17 02:09:05 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-17 02:09:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57200 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-17 02:09:05 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:09:05 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:09:05 [INFO] app.api.controllers.reporting_controller:256 - get_dashboard_analytics(): Getting dashboard analytics for user: superadmin
2025-06-17 02:09:05 [INFO] app.infrastructure.services.reporting_service_impl:261 - get_dashboard_analytics(): Getting dashboard analytics for organisation: localhost
2025-06-17 02:09:05 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:51 - execute(): Getting dashboard analytics for organisation: localhost
2025-06-17 02:09:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 02:09:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-17 02:09:05 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:104 - _get_collection(): Successfully retrieved collection: reimbursements from database: pms_localhost
2025-06-17 02:09:05 [INFO] app.infrastructure.repositories.mongodb_reimbursement_repository:367 - get_pending_reimbursements(): Found 0 pending reimbursements for organisation: localhost
2025-06-17 02:09:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 02:09:05 [INFO] app.infrastructure.repositories.mongodb_user_repository:1559 - find_with_filters(): Found 5 users with filters for organisation: localhost
2025-06-17 02:09:05 [INFO] app.infrastructure.repositories.mongodb_attendance_repository:100 - _get_collection(): Successfully retrieved collection: attendance_info from database: pms_localhost
2025-06-17 02:09:05 [INFO] app.application.use_cases.reporting.get_dashboard_analytics_use_case:98 - execute(): Successfully generated dashboard analytics for organisation: localhost
2025-06-17 02:09:05 [INFO] app.infrastructure.services.reporting_service_impl:266 - get_dashboard_analytics(): Successfully generated dashboard analytics for organisation: localhost
2025-06-17 02:09:05 [INFO] app.api.controllers.reporting_controller:260 - get_dashboard_analytics(): Successfully retrieved dashboard analytics
2025-06-17 02:09:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57200 - "GET /api/v2/reporting/dashboard/analytics/statistics HTTP/1.1" 200
2025-06-17 02:09:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57326 - "OPTIONS /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-17 02:09:11 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:09:11 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:09:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57328 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 500
2025-06-17 02:09:11 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1132, in get_taxation_controller
    return container.get_taxation_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 819, in get_taxation_controller
    self._controllers['taxation'] = UnifiedTaxationController(
                                    ~~~~~~~~~~~~~~~~~~~~~~~~~^
        create_handler=create_handler,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
        get_comprehensive_taxation_record_use_case=get_comprehensive_taxation_record_use_case
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: UnifiedTaxationController.__init__() missing 1 required positional argument: 'taxation_repository'
2025-06-17 02:09:13 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:09:13 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:09:13 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57326 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 500
2025-06-17 02:09:13 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1132, in get_taxation_controller
    return container.get_taxation_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 819, in get_taxation_controller
    self._controllers['taxation'] = UnifiedTaxationController(
                                    ~~~~~~~~~~~~~~~~~~~~~~~~~^
        create_handler=create_handler,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
        get_comprehensive_taxation_record_use_case=get_comprehensive_taxation_record_use_case
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: UnifiedTaxationController.__init__() missing 1 required positional argument: 'taxation_repository'
2025-06-17 02:09:15 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:09:15 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:09:15 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57352 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 500
2025-06-17 02:09:15 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1132, in get_taxation_controller
    return container.get_taxation_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 819, in get_taxation_controller
    self._controllers['taxation'] = UnifiedTaxationController(
                                    ~~~~~~~~~~~~~~~~~~~~~~~~~^
        create_handler=create_handler,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
        get_comprehensive_taxation_record_use_case=get_comprehensive_taxation_record_use_case
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: UnifiedTaxationController.__init__() missing 1 required positional argument: 'taxation_repository'
2025-06-17 02:09:16 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:09:16 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:09:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57362 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 500
2025-06-17 02:09:16 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1132, in get_taxation_controller
    return container.get_taxation_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 819, in get_taxation_controller
    self._controllers['taxation'] = UnifiedTaxationController(
                                    ~~~~~~~~~~~~~~~~~~~~~~~~~^
        create_handler=create_handler,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
        get_comprehensive_taxation_record_use_case=get_comprehensive_taxation_record_use_case
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: UnifiedTaxationController.__init__() missing 1 required positional argument: 'taxation_repository'
2025-06-17 02:09:17 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:09:17 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:09:17 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57368 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 500
2025-06-17 02:09:17 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1132, in get_taxation_controller
    return container.get_taxation_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 819, in get_taxation_controller
    self._controllers['taxation'] = UnifiedTaxationController(
                                    ~~~~~~~~~~~~~~~~~~~~~~~~~^
        create_handler=create_handler,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
        get_comprehensive_taxation_record_use_case=get_comprehensive_taxation_record_use_case
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: UnifiedTaxationController.__init__() missing 1 required positional argument: 'taxation_repository'
2025-06-17 02:09:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:09:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:09:19 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57378 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 500
2025-06-17 02:09:19 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1132, in get_taxation_controller
    return container.get_taxation_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 819, in get_taxation_controller
    self._controllers['taxation'] = UnifiedTaxationController(
                                    ~~~~~~~~~~~~~~~~~~~~~~~~~^
        create_handler=create_handler,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
        get_comprehensive_taxation_record_use_case=get_comprehensive_taxation_record_use_case
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: UnifiedTaxationController.__init__() missing 1 required positional argument: 'taxation_repository'
2025-06-17 02:09:21 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:09:21 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:09:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57388 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 500
2025-06-17 02:09:21 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1132, in get_taxation_controller
    return container.get_taxation_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 819, in get_taxation_controller
    self._controllers['taxation'] = UnifiedTaxationController(
                                    ~~~~~~~~~~~~~~~~~~~~~~~~~^
        create_handler=create_handler,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
        get_comprehensive_taxation_record_use_case=get_comprehensive_taxation_record_use_case
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: UnifiedTaxationController.__init__() missing 1 required positional argument: 'taxation_repository'
2025-06-17 02:09:22 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:09:22 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:09:22 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57394 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 500
2025-06-17 02:09:22 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1132, in get_taxation_controller
    return container.get_taxation_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 819, in get_taxation_controller
    self._controllers['taxation'] = UnifiedTaxationController(
                                    ~~~~~~~~~~~~~~~~~~~~~~~~~^
        create_handler=create_handler,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
        get_comprehensive_taxation_record_use_case=get_comprehensive_taxation_record_use_case
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: UnifiedTaxationController.__init__() missing 1 required positional argument: 'taxation_repository'
2025-06-17 02:09:24 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:09:24 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:09:24 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57404 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 500
2025-06-17 02:09:24 [ERROR] uvicorn.error:408 - run_asgi(): Exception in ASGI application
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/fastapi/dependencies/utils.py", line 640, in solve_dependencies
    solved = await run_in_threadpool(call, **solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2470, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 967, in run
    result = context.run(func, *args)
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 1132, in get_taxation_controller
    return container.get_taxation_controller()
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/backend/app/config/dependency_container.py", line 819, in get_taxation_controller
    self._controllers['taxation'] = UnifiedTaxationController(
                                    ~~~~~~~~~~~~~~~~~~~~~~~~~^
        create_handler=create_handler,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<10 lines>...
        get_comprehensive_taxation_record_use_case=get_comprehensive_taxation_record_use_case
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: UnifiedTaxationController.__init__() missing 1 required positional argument: 'taxation_repository'
2025-06-17 02:10:58 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 02:10:58 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 02:10:58 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 02:10:58 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 02:10:58 [INFO] uvicorn.error:93 - _serve(): Finished server process [26201]
2025-06-17 02:11:03 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:11:12 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:11:12 [INFO] uvicorn.error:83 - _serve(): Started server process [26274]
2025-06-17 02:11:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:11:12 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:11:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:11:34 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 02:11:34 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 02:11:34 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 02:11:34 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 02:11:34 [INFO] uvicorn.error:93 - _serve(): Finished server process [26274]
2025-06-17 02:11:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:11:50 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:11:50 [INFO] uvicorn.error:83 - _serve(): Started server process [26329]
2025-06-17 02:11:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:11:50 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:11:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:11:56 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:12:04 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:12:04 [INFO] uvicorn.error:83 - _serve(): Started server process [26361]
2025-06-17 02:12:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:12:04 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:12:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:13:30 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:13:30 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:13:30 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 02:13:30 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 02:13:30 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 02:13:30 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 02:13:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 02:13:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 02:13:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 02:13:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 02:13:30 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 02:13:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 02:13:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 02:13:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 02:13:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 02:13:30 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 02:13:30 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 02:13:30 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 02:13:30 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 02:13:31 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 02:13:31 [INFO] app.api.controllers.taxation_controller:201 - get_employees_for_selection(): Getting employees for selection with query: skip=0 limit=100 search=None department=None role=None status=None has_tax_record=None tax_year='2025-26'
2025-06-17 02:13:31 [INFO] app.infrastructure.services.user_service_impl:460 - search_users(): Searching users in organisation localhost
2025-06-17 02:13:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:75 - _get_collection(): Database not connected, establishing connection...
2025-06-17 02:13:31 [INFO] app.infrastructure.repositories.mongodb_user_repository:80 - _get_collection(): Using stored connection parameters from repository configuration
2025-06-17 02:13:33 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 02:13:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:90 - _get_collection(): MongoDB connection established successfully in current event loop
2025-06-17 02:13:33 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 02:13:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 02:13:33 [INFO] app.infrastructure.repositories.mongodb_user_repository:653 - search(): Search returned 5 users
2025-06-17 02:13:33 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_pms_global_database' cached
2025-06-17 02:13:33 [INFO] app.api.controllers.taxation_controller:209 - get_employees_for_selection(): Retrieved 5 employees for selection
2025-06-17 02:13:33 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59109 - "GET /api/v2/taxation/employee-selection?skip=0&limit=100&tax_year=2025-26 HTTP/1.1" 200
2025-06-17 02:13:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59109 - "OPTIONS /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-17 02:13:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:13:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:13:37 [INFO] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-17 02:13:37 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: 2025-26
2025-06-17 02:13:37 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 02:13:37 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 02:13:37 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-17 02:13:37 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 02:13:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59235 - "GET /api/v2/taxation/records/employee/EMP005?tax_year=2025-26 HTTP/1.1" 200
2025-06-17 02:13:38 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:13:38 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:13:38 [INFO] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 02:13:38 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 02:13:38 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 02:13:38 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 02:13:38 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 02:13:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59235 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 02:13:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59330 - "OPTIONS /api/v2/taxation/records HTTP/1.1" 200
2025-06-17 02:13:54 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:13:54 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:13:54 [INFO] app.api.controllers.taxation_controller:225 - create_taxation_record(): Creating taxation record for user EMP005, year 2025-26
2025-06-17 02:13:54 [INFO] app.api.controllers.taxation_controller:258 - create_taxation_record(): 🔍 Creating CreateTaxationRecordCommand...
2025-06-17 02:13:54 [INFO] app.api.controllers.taxation_controller:259 - create_taxation_record(): 🔍 salary_income type: <class 'app.domain.entities.taxation.salary_income.SalaryIncome'>
2025-06-17 02:13:54 [INFO] app.api.controllers.taxation_controller:260 - create_taxation_record(): 🔍 salary_income basic_salary: ₹1,000,000.00
2025-06-17 02:13:54 [INFO] app.api.controllers.taxation_controller:261 - create_taxation_record(): 🔍 salary_income hra_received: ₹400,000.00
2025-06-17 02:13:54 [INFO] app.api.controllers.taxation_controller:262 - create_taxation_record(): 🔍 salary_income hra_city_type: non_metro
2025-06-17 02:13:54 [INFO] app.api.controllers.taxation_controller:280 - create_taxation_record(): ✅ CreateTaxationRecordCommand created successfully
2025-06-17 02:13:54 [INFO] app.api.controllers.taxation_controller:287 - create_taxation_record(): 🔍 Executing command handler...
2025-06-17 02:13:54 [INFO] app.application.commands.taxation_commands:96 - handle(): Starting taxation record creation for user EMP005
2025-06-17 02:13:54 [INFO] app.application.commands.taxation_commands:103 - handle(): Parsed inputs - employee_id: EMP005, tax_year: 2025-26, regime: Old
2025-06-17 02:13:54 [ERROR] app.api.controllers.taxation_controller:292 - create_taxation_record(): ❌ Command handler failed: Taxation record already exists for user EMP005 in 2025-26
2025-06-17 02:13:54 [ERROR] app.api.controllers.taxation_controller:293 - create_taxation_record(): ❌ Error type: <class 'app.domain.exceptions.taxation_exceptions.TaxationValidationError'>
2025-06-17 02:13:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59330 - "POST /api/v2/taxation/records HTTP/1.1" 422
2025-06-17 02:14:03 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59332 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-17 02:14:03 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:14:03 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:14:04 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59332 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 500
2025-06-17 02:17:52 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 02:17:53 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 02:17:53 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 02:17:53 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 02:17:53 [INFO] uvicorn.error:93 - _serve(): Finished server process [26361]
2025-06-17 02:18:02 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:18:10 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:18:10 [INFO] uvicorn.error:83 - _serve(): Started server process [26467]
2025-06-17 02:18:10 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:18:10 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:18:10 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:18:15 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:18:24 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:18:24 [INFO] uvicorn.error:83 - _serve(): Started server process [26505]
2025-06-17 02:18:24 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:18:24 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:18:24 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:19:01 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:19:01 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:19:01 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 02:19:01 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 02:19:01 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 02:19:01 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 02:19:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 02:19:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 02:19:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 02:19:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 02:19:01 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 02:19:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 02:19:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 02:19:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 02:19:01 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 02:19:01 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 02:19:01 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 02:19:01 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 02:19:01 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 02:19:01 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 02:19:01 [INFO] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for year 2025-26
2025-06-17 02:19:01 [INFO] app.api.controllers.taxation_controller:568 - calculate_comprehensive_tax(): Calculating tax for regime old
2025-06-17 02:19:11 [INFO] app.api.controllers.taxation_controller:573 - calculate_comprehensive_tax(): Comprehensive tax calculation completed
2025-06-17 02:19:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61335 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-17 02:30:49 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64897 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 02:30:49 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:30:49 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:30:49 [INFO] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 02:30:49 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 02:30:51 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 02:30:51 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 02:30:51 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 02:30:51 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 02:30:51 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-17 02:30:51 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 02:30:51 [INFO] uvicorn.access:473 - send(): 127.0.0.1:64899 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 02:32:45 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:36:11 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:36:11 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:36:11 [INFO] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 02:36:11 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 02:36:11 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 02:36:11 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 02:36:11 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 02:36:11 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50766 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 02:36:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50920 - "OPTIONS /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-17 02:36:32 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:36:32 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:36:32 [INFO] app.api.controllers.taxation_controller:562 - calculate_comprehensive_tax(): Starting comprehensive tax calculation for year 2025-26
2025-06-17 02:36:32 [INFO] app.api.controllers.taxation_controller:568 - calculate_comprehensive_tax(): Calculating tax for regime old
2025-06-17 02:36:32 [INFO] app.api.controllers.taxation_controller:573 - calculate_comprehensive_tax(): Comprehensive tax calculation completed
2025-06-17 02:36:32 [INFO] uvicorn.access:473 - send(): 127.0.0.1:50927 - "POST /api/v2/taxation/calculate-comprehensive HTTP/1.1" 200
2025-06-17 02:37:12 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 02:37:12 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 02:37:12 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 02:37:12 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 02:37:12 [INFO] uvicorn.error:93 - _serve(): Finished server process [26505]
2025-06-17 02:37:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:37:30 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:37:30 [INFO] uvicorn.error:83 - _serve(): Started server process [26927]
2025-06-17 02:37:30 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:37:30 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:37:30 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:41:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52447 - "OPTIONS /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 02:41:16 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:41:16 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:41:16 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 02:41:16 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 02:41:16 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 02:41:16 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 02:41:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 02:41:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 02:41:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 02:41:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 02:41:16 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 02:41:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 02:41:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 02:41:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 02:41:16 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 02:41:16 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 02:41:16 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 02:41:16 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 02:41:16 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 02:41:16 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 02:41:16 [INFO] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 02:41:16 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 02:41:18 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 02:41:18 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 02:41:18 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 02:41:18 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 02:41:18 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-17 02:41:18 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 02:41:18 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52449 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 02:41:37 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52626 - "OPTIONS /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 200
2025-06-17 02:41:37 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:41:37 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:41:38 [INFO] app.api.controllers.taxation_controller:1657 - calculate_comprehensive_tax_for_employee(): Calculating comprehensive tax for employee EMP005, tax_year: 2025-26
2025-06-17 02:41:38 [ERROR] app.api.controllers.taxation_controller:1686 - calculate_comprehensive_tax_for_employee(): Error calculating comprehensive tax for employee EMP005: DeductionSection80CCD.calculate_80ccd_1b_deduction() takes 1 positional argument but 2 were given
2025-06-17 02:41:38 [INFO] uvicorn.access:473 - send(): 127.0.0.1:52626 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 500
2025-06-17 02:42:18 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:42:29 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:42:30 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:42:41 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:42:41 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:42:52 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:42:52 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:43:04 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:43:04 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:43:15 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:43:15 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:43:31 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:43:35 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:43:42 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:43:53 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:44:12 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:44:24 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 405, in _create_connection
    for res in socket.getaddrinfo(host, port, family=family, type=socket.SOCK_STREAM):  # type: ignore[attr-defined, unused-ignore]
               ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.13/3.13.3/Frameworks/Python.framework/Versions/3.13/lib/python3.13/socket.py", line 977, in getaddrinfo
    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):
               ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
socket.gaierror: [Errno 8] nodename nor servname provided, or not known

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 148, in _raise_connection_failure
    raise AutoReconnect(msg) from error
pymongo.errors.AutoReconnect: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: [Errno 8] nodename nor servname provided, or not known (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:44:36 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:44:47 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:44:47 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:44:58 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:44:58 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:45:09 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:45:09 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:45:21 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:45:32 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:45:41 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:45:43 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:45:52 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:45:54 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:46:03 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:46:05 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:46:11 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:46:11 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:46:11 [INFO] app.api.controllers.taxation_controller:1657 - calculate_comprehensive_tax_for_employee(): Calculating comprehensive tax for employee EMP005, tax_year: 2025-26
2025-06-17 02:46:14 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:46:14 [ERROR] app.api.controllers.taxation_controller:1686 - calculate_comprehensive_tax_for_employee(): Error calculating comprehensive tax for employee EMP005: DeductionSection80CCD.calculate_80ccd_1b_deduction() takes 1 positional argument but 2 were given
2025-06-17 02:46:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54332 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 500
2025-06-17 02:46:17 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:46:25 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:46:28 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:46:31 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 02:46:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 02:46:31 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 02:46:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 02:46:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [26927]
2025-06-17 02:46:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:46:53 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:46:53 [INFO] uvicorn.error:83 - _serve(): Started server process [27221]
2025-06-17 02:46:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:46:53 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:46:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:47:33 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:47:33 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:47:33 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 02:47:33 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 02:47:33 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 02:47:33 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 02:47:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 02:47:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 02:47:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 02:47:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 02:47:33 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 02:47:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 02:47:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 02:47:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 02:47:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 02:47:33 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 02:47:33 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 02:47:33 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 02:47:33 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 02:47:34 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 02:47:34 [INFO] app.api.controllers.taxation_controller:321 - get_taxation_record_by_employee(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 02:47:34 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:67 - execute(): Getting comprehensive taxation record for employee EMP005, tax_year: None
2025-06-17 02:47:35 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 02:47:35 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 02:47:35 [INFO] app.infrastructure.repositories.mongodb_user_repository:100 - _get_collection(): Successfully retrieved collection: users_info from database: pms_localhost
2025-06-17 02:47:35 [INFO] app.application.use_cases.taxation.get_comprehensive_taxation_record_use_case:287 - _compute_age_from_user(): Computed age 43 for user EMP005 from DOB 1982-03-04
2025-06-17 02:47:35 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_global_database' cached
2025-06-17 02:47:35 [INFO] app.infrastructure.repositories.mongodb_organisation_repository:108 - _get_collection(): Successfully retrieved collection: organisation from database: pms_global_database
2025-06-17 02:47:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:54743 - "GET /api/v2/taxation/records/employee/EMP005 HTTP/1.1" 200
2025-06-17 02:47:46 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:47:46 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:47:57 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:47:57 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:48:08 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:48:08 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:48:19 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:48:20 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:48:31 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:48:37 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:48:42 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:48:48 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:48:53 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:49:05 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:49:11 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:49:16 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:49:22 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:49:27 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:49:33 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:49:38 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:49:45 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:49:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:49:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:49:48 [INFO] app.api.controllers.taxation_controller:1657 - calculate_comprehensive_tax_for_employee(): Calculating comprehensive tax for employee EMP005, tax_year: 2025-26
2025-06-17 02:49:48 [ERROR] app.api.controllers.taxation_controller:1686 - calculate_comprehensive_tax_for_employee(): Error calculating comprehensive tax for employee EMP005: DeductionSection80CCD.calculate_80ccd_1b_deduction() takes 1 positional argument but 2 were given
2025-06-17 02:49:48 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55023 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 500
2025-06-17 02:49:49 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:49:56 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:50:00 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:50:07 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:50:12 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:50:18 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:50:24 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:50:29 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:50:35 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:50:40 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:50:46 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:50:51 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:50:59 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:51:01 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 02:51:01 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 02:51:01 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 02:51:01 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 02:51:01 [INFO] uvicorn.error:93 - _serve(): Finished server process [27221]
2025-06-17 02:52:08 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:52:18 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:52:18 [INFO] uvicorn.error:83 - _serve(): Started server process [27479]
2025-06-17 02:52:18 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:52:18 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:52:18 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:52:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55163 - "OPTIONS /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 200
2025-06-17 02:52:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:52:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:52:28 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 02:52:28 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 02:52:28 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 02:52:29 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 02:52:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 02:52:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 02:52:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 02:52:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 02:52:29 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 02:52:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 02:52:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 02:52:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 02:52:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 02:52:29 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 02:52:29 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 02:52:29 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 02:52:29 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 02:52:29 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 02:52:29 [INFO] app.api.controllers.taxation_controller:1657 - calculate_comprehensive_tax_for_employee(): Calculating comprehensive tax for employee EMP005, tax_year: 2025-26
2025-06-17 02:52:35 [ERROR] app.infrastructure.database.mongodb_connector:72 - connect(): Failed to connect to MongoDB: No replica set members match selector "Primary()", Timeout: 5.0s, Topology Description: <TopologyDescription id: 68508b16c4458f1a19f59f3d, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.04589233199658338>]>
2025-06-17 02:52:35 [ERROR] app.api.controllers.taxation_controller:1686 - calculate_comprehensive_tax_for_employee(): Error calculating comprehensive tax for employee EMP005: Database connection failed: No replica set members match selector "Primary()", Timeout: 5.0s, Topology Description: <TopologyDescription id: 68508b16c4458f1a19f59f3d, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.04589233199658338>]>
2025-06-17 02:52:35 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55163 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 500
2025-06-17 02:52:40 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:52:41 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:52:46 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 02:52:46 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 02:52:46 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 02:52:46 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 02:52:46 [INFO] uvicorn.error:93 - _serve(): Finished server process [27479]
2025-06-17 02:54:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 02:54:40 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 02:54:40 [INFO] uvicorn.error:83 - _serve(): Started server process [27602]
2025-06-17 02:54:40 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 02:54:40 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 02:54:40 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 02:54:48 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:54:48 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:54:48 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 02:54:48 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 02:54:48 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 02:54:48 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 02:54:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 02:54:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 02:54:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 02:54:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 02:54:48 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 02:54:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 02:54:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 02:54:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 02:54:48 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 02:54:48 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 02:54:48 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 02:54:48 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 02:54:48 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 02:54:48 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 02:54:49 [INFO] app.api.controllers.taxation_controller:1657 - calculate_comprehensive_tax_for_employee(): Calculating comprehensive tax for employee EMP005, tax_year: 2025-26
2025-06-17 02:54:54 [ERROR] app.infrastructure.database.mongodb_connector:72 - connect(): Failed to connect to MongoDB: No replica set members match selector "Primary()", Timeout: 5.0s, Topology Description: <TopologyDescription id: 68508ba1ebd36e29bf75c5a6, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.038116355004603975>]>
2025-06-17 02:54:54 [ERROR] app.api.controllers.taxation_controller:1686 - calculate_comprehensive_tax_for_employee(): Error calculating comprehensive tax for employee EMP005: Database connection failed: No replica set members match selector "Primary()", Timeout: 5.0s, Topology Description: <TopologyDescription id: 68508ba1ebd36e29bf75c5a6, topology_type: ReplicaSetNoPrimary, servers: [<ServerDescription ('ac-uqkr9ns-shard-00-00.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net', 27017) server_type: Unknown, rtt: None>, <ServerDescription ('ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net', 27017) server_type: RSSecondary, rtt: 0.038116355004603975>]>
2025-06-17 02:54:54 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55403 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 500
2025-06-17 02:55:00 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-02.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:55:00 [ERROR] pymongo.client:104 - _log_client_error(): MongoClient background task encountered an error:
Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1011, in connect
    networking_interface = _configured_socket_interface(self.address, self.opts)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 501, in _configured_socket_interface
    sock = _create_connection(address, options)
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 436, in _create_connection
    raise err
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 429, in _create_connection
    sock.connect(sa)
    ~~~~~~~~~~~~^^^^
TimeoutError: timed out

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/mongo_client.py", line 2206, in _process_periodic_tasks
    self._topology.update_pool()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/topology.py", line 689, in update_pool
    server.pool.remove_stale_sockets(generation)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 957, in remove_stale_sockets
    conn = self.connect()
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/synchronous/pool.py", line 1034, in connect
    _raise_connection_failure(self.address, error, timeout_details=details)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ankit/Downloads/code/pmssrc/.venv/lib/python3.13/site-packages/pymongo/pool_shared.py", line 140, in _raise_connection_failure
    raise NetworkTimeout(msg) from error
pymongo.errors.NetworkTimeout: ac-uqkr9ns-shard-00-01.jhfj7s3.mongodb.net:27017: timed out (configured timeouts: connectTimeoutMS: 10000.0ms)
2025-06-17 02:56:16 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 02:56:16 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 02:56:16 [INFO] app.api.controllers.taxation_controller:1657 - calculate_comprehensive_tax_for_employee(): Calculating comprehensive tax for employee EMP005, tax_year: 2025-26
2025-06-17 02:56:16 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 02:56:16 [ERROR] app.api.controllers.taxation_controller:1686 - calculate_comprehensive_tax_for_employee(): Error calculating comprehensive tax for employee EMP005: DeductionSection80CCD.calculate_80ccd_1b_deduction() takes 1 positional argument but 2 were given
2025-06-17 02:56:16 [INFO] uvicorn.access:473 - send(): 127.0.0.1:55828 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 500
2025-06-17 03:01:12 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:01:12 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:01:12 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:01:12 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:01:12 [INFO] uvicorn.error:93 - _serve(): Finished server process [27602]
2025-06-17 03:01:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:01:27 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:01:27 [INFO] uvicorn.error:83 - _serve(): Started server process [27688]
2025-06-17 03:01:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:01:27 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:01:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:01:48 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:01:48 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:01:48 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:01:48 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:01:48 [INFO] uvicorn.error:93 - _serve(): Finished server process [27688]
2025-06-17 03:01:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:02:01 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:02:01 [INFO] uvicorn.error:83 - _serve(): Started server process [27720]
2025-06-17 03:02:01 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:02:01 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:02:01 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:02:05 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:02:13 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:02:13 [INFO] uvicorn.error:83 - _serve(): Started server process [27739]
2025-06-17 03:02:13 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:02:13 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:02:13 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:02:29 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:02:29 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:02:29 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:02:29 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:02:29 [INFO] uvicorn.error:93 - _serve(): Finished server process [27739]
2025-06-17 03:02:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:02:47 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:02:47 [INFO] uvicorn.error:83 - _serve(): Started server process [27752]
2025-06-17 03:02:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:02:47 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:02:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:02:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:02:59 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:02:59 [INFO] uvicorn.error:83 - _serve(): Started server process [27778]
2025-06-17 03:02:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:02:59 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:02:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:03:06 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:03:06 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:03:06 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:03:06 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:03:06 [INFO] uvicorn.error:93 - _serve(): Finished server process [27778]
2025-06-17 03:03:12 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:03:20 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:03:20 [INFO] uvicorn.error:83 - _serve(): Started server process [27798]
2025-06-17 03:03:20 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:03:20 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:03:20 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:03:21 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:03:21 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:03:21 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:03:21 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:03:21 [INFO] uvicorn.error:93 - _serve(): Finished server process [27798]
2025-06-17 03:03:27 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:03:36 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:03:36 [INFO] uvicorn.error:83 - _serve(): Started server process [27813]
2025-06-17 03:03:36 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:03:36 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:03:36 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:03:47 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:03:47 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:03:47 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:03:47 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:03:47 [INFO] uvicorn.error:93 - _serve(): Finished server process [27813]
2025-06-17 03:03:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:04:04 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:04:04 [INFO] uvicorn.error:83 - _serve(): Started server process [27846]
2025-06-17 03:04:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:04:04 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:04:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:04:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:04:17 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:04:17 [INFO] uvicorn.error:83 - _serve(): Started server process [27867]
2025-06-17 03:04:17 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:04:17 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:04:17 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:04:20 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:04:31 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:04:31 [INFO] uvicorn.error:83 - _serve(): Started server process [27880]
2025-06-17 03:04:31 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:04:31 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:04:31 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:04:40 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:04:53 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:04:53 [INFO] uvicorn.error:83 - _serve(): Started server process [27901]
2025-06-17 03:04:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:04:53 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:04:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:05:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:05:08 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:05:08 [INFO] uvicorn.error:83 - _serve(): Started server process [27929]
2025-06-17 03:05:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:05:08 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:05:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:05:13 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:05:13 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:05:13 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:05:13 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:05:13 [INFO] uvicorn.error:93 - _serve(): Finished server process [27929]
2025-06-17 03:05:20 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:05:27 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:05:27 [INFO] uvicorn.error:83 - _serve(): Started server process [27946]
2025-06-17 03:05:27 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:05:27 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:05:27 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:05:31 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:05:37 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:05:37 [INFO] uvicorn.error:83 - _serve(): Started server process [27966]
2025-06-17 03:05:37 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:05:37 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:05:37 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:05:55 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57333 - "OPTIONS /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 200
2025-06-17 03:05:55 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 03:05:55 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 03:05:55 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 03:05:55 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 03:05:55 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 03:05:55 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 03:05:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:05:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:05:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:05:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:05:55 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:05:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:05:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:05:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:05:55 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:05:55 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:05:55 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 03:05:55 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 03:05:55 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 03:05:55 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 03:05:55 [INFO] app.api.controllers.taxation_controller:1657 - calculate_comprehensive_tax_for_employee(): Calculating comprehensive tax for employee EMP005, tax_year: 2025-26
2025-06-17 03:05:56 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 03:05:56 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 03:05:56 [ERROR] app.api.controllers.taxation_controller:1686 - calculate_comprehensive_tax_for_employee(): Error calculating comprehensive tax for employee EMP005: DeductionSection80CCD.calculate_80ccd_1b_deduction() takes 1 positional argument but 2 were given
2025-06-17 03:05:56 [INFO] uvicorn.access:473 - send(): 127.0.0.1:57335 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 500
2025-06-17 03:06:35 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:06:35 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:06:35 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:06:35 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:06:35 [INFO] uvicorn.error:93 - _serve(): Finished server process [27966]
2025-06-17 03:06:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:06:49 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:06:49 [INFO] uvicorn.error:83 - _serve(): Started server process [27989]
2025-06-17 03:06:49 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:06:49 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:06:49 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:07:09 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:07:09 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:07:09 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:07:09 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:07:09 [INFO] uvicorn.error:93 - _serve(): Finished server process [27989]
2025-06-17 03:07:16 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:07:26 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:07:26 [INFO] uvicorn.error:83 - _serve(): Started server process [28009]
2025-06-17 03:07:26 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:07:26 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:07:26 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:07:30 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:07:38 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:07:38 [INFO] uvicorn.error:83 - _serve(): Started server process [28029]
2025-06-17 03:07:38 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:07:38 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:07:38 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:07:52 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:07:52 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:07:52 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:07:52 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:07:52 [INFO] uvicorn.error:93 - _serve(): Finished server process [28029]
2025-06-17 03:08:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:08:12 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:08:12 [INFO] uvicorn.error:83 - _serve(): Started server process [28043]
2025-06-17 03:08:12 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:08:12 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:08:12 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:08:19 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:08:29 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:08:29 [INFO] uvicorn.error:83 - _serve(): Started server process [28070]
2025-06-17 03:08:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:08:29 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:08:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:08:37 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:08:48 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:08:48 [INFO] uvicorn.error:83 - _serve(): Started server process [28089]
2025-06-17 03:08:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:08:48 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:08:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:08:55 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:09:05 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:09:05 [INFO] uvicorn.error:83 - _serve(): Started server process [28116]
2025-06-17 03:09:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:09:05 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:09:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:09:14 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:09:23 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:09:23 [INFO] uvicorn.error:83 - _serve(): Started server process [28135]
2025-06-17 03:09:23 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:09:23 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:09:23 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:09:29 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:09:41 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:09:41 [INFO] uvicorn.error:83 - _serve(): Started server process [28157]
2025-06-17 03:09:41 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:09:41 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:09:41 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:09:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:10:02 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:10:02 [INFO] uvicorn.error:83 - _serve(): Started server process [28186]
2025-06-17 03:10:02 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:10:02 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:10:02 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:10:06 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:10:15 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:10:15 [INFO] uvicorn.error:83 - _serve(): Started server process [28209]
2025-06-17 03:10:15 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:10:15 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:10:15 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:11:21 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58714 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 403
2025-06-17 03:11:51 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:11:51 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:11:51 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:11:51 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:11:51 [INFO] uvicorn.error:93 - _serve(): Finished server process [28209]
2025-06-17 03:12:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:12:17 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:12:17 [INFO] uvicorn.error:83 - _serve(): Started server process [28503]
2025-06-17 03:12:17 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:12:17 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:12:17 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:14:19 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 03:14:19 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 03:14:19 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 03:14:19 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 03:14:19 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 03:14:19 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 03:14:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:14:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:14:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:14:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:14:19 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:14:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:14:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:14:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:14:19 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:14:19 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:14:19 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 03:14:19 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 03:14:19 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 03:14:19 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 03:14:19 [INFO] app.api.controllers.taxation_controller:1657 - calculate_comprehensive_tax_for_employee(): Calculating comprehensive tax for employee EMP005, tax_year: 2025-26
2025-06-17 03:14:20 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 03:14:20 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 03:14:20 [ERROR] app.api.controllers.taxation_controller:1686 - calculate_comprehensive_tax_for_employee(): Error calculating comprehensive tax for employee EMP005: 'RetirementBenefits' object has no attribute 'calculate_taxable_retirement_benefits'
2025-06-17 03:14:20 [INFO] uvicorn.access:473 - send(): 127.0.0.1:58894 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 500
2025-06-17 03:15:37 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:15:37 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:15:37 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:15:37 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:15:37 [INFO] uvicorn.error:93 - _serve(): Finished server process [28503]
2025-06-17 03:15:41 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:15:47 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:15:47 [INFO] uvicorn.error:83 - _serve(): Started server process [28598]
2025-06-17 03:15:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:15:47 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:15:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:20:31 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:20:31 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:20:31 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:20:31 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:20:31 [INFO] uvicorn.error:93 - _serve(): Finished server process [28598]
2025-06-17 03:20:43 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:20:50 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:20:50 [INFO] uvicorn.error:83 - _serve(): Started server process [28652]
2025-06-17 03:20:50 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:20:50 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:20:50 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:20:54 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:21:00 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:21:00 [INFO] uvicorn.error:83 - _serve(): Started server process [28684]
2025-06-17 03:21:00 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:21:00 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:21:00 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:21:46 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59648 - "OPTIONS /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 200
2025-06-17 03:21:46 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 03:21:46 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 03:21:46 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 03:21:46 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 03:21:46 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 03:21:46 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 03:21:46 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:21:46 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:21:46 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:21:46 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:21:46 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:21:46 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:21:46 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:21:46 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:21:46 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:21:46 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:21:46 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 03:21:46 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 03:21:46 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 03:21:46 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 03:21:46 [INFO] app.api.controllers.taxation_controller:1657 - calculate_comprehensive_tax_for_employee(): Calculating comprehensive tax for employee EMP005, tax_year: 2025-26
2025-06-17 03:21:47 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 03:21:47 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 03:21:47 [ERROR] app.api.controllers.taxation_controller:1686 - calculate_comprehensive_tax_for_employee(): Error calculating comprehensive tax for employee EMP005: RetirementBenefits.calculate_total_retirement_income() missing 1 required positional argument: 'regime'
2025-06-17 03:21:47 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59650 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 500
2025-06-17 03:22:25 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:22:25 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:22:25 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:22:25 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:22:25 [INFO] uvicorn.error:93 - _serve(): Finished server process [28684]
2025-06-17 03:22:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:22:48 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:22:48 [INFO] uvicorn.error:83 - _serve(): Started server process [28717]
2025-06-17 03:22:48 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:22:48 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:22:48 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:22:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:22:59 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:22:59 [INFO] uvicorn.error:83 - _serve(): Started server process [28751]
2025-06-17 03:22:59 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:22:59 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:22:59 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:23:22 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 03:23:22 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 03:23:22 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 03:23:22 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 03:23:22 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 03:23:22 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 03:23:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:23:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:23:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:23:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:23:22 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:23:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:23:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:23:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:23:22 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:23:22 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:23:22 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 03:23:22 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 03:23:22 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 03:23:22 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 03:23:22 [INFO] app.api.controllers.taxation_controller:1657 - calculate_comprehensive_tax_for_employee(): Calculating comprehensive tax for employee EMP005, tax_year: 2025-26
2025-06-17 03:23:23 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 03:23:23 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 03:23:23 [ERROR] app.api.controllers.taxation_controller:1686 - calculate_comprehensive_tax_for_employee(): Error calculating comprehensive tax for employee EMP005: 'OtherIncome' object has no attribute 'calculate_taxable_other_income'
2025-06-17 03:23:23 [INFO] uvicorn.access:473 - send(): 127.0.0.1:59822 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 500
2025-06-17 03:24:27 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:24:27 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:24:27 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:24:27 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:24:27 [INFO] uvicorn.error:93 - _serve(): Finished server process [28751]
2025-06-17 03:24:36 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:24:47 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:24:47 [INFO] uvicorn.error:83 - _serve(): Started server process [28794]
2025-06-17 03:24:47 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:24:47 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:24:47 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:24:52 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:25:04 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:25:04 [INFO] uvicorn.error:83 - _serve(): Started server process [28823]
2025-06-17 03:25:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:25:04 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:25:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:25:04 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 03:25:04 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 03:25:04 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 03:25:04 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 03:25:04 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 03:25:04 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 03:25:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:25:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:25:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:25:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:25:04 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:25:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:25:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:25:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:25:04 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:25:04 [INFO] app.config.dependency_container:525 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:25:04 [INFO] app.config.dependency_container:337 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 03:25:04 [INFO] app.config.dependency_container:288 - _setup_services(): Services initialized
2025-06-17 03:25:04 [INFO] app.config.dependency_container:359 - _setup_controllers(): Controllers setup deferred
2025-06-17 03:25:04 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 03:25:04 [INFO] app.api.controllers.taxation_controller:1657 - calculate_comprehensive_tax_for_employee(): Calculating comprehensive tax for employee EMP005, tax_year: 2025-26
2025-06-17 03:25:05 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 03:25:05 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 03:25:05 [ERROR] app.api.controllers.taxation_controller:1686 - calculate_comprehensive_tax_for_employee(): Error calculating comprehensive tax for employee EMP005: Taxation repository not configured for this service
2025-06-17 03:25:05 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60118 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 500
2025-06-17 03:25:34 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 03:25:34 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 03:25:34 [INFO] app.api.controllers.taxation_controller:1657 - calculate_comprehensive_tax_for_employee(): Calculating comprehensive tax for employee EMP005, tax_year: 2025-26
2025-06-17 03:25:34 [ERROR] app.api.controllers.taxation_controller:1686 - calculate_comprehensive_tax_for_employee(): Error calculating comprehensive tax for employee EMP005: Taxation repository not configured for this service
2025-06-17 03:25:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60248 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 500
2025-06-17 03:26:28 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:26:28 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:26:28 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:26:28 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:26:28 [INFO] uvicorn.error:93 - _serve(): Finished server process [28823]
2025-06-17 03:26:33 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:26:42 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:26:42 [INFO] uvicorn.error:83 - _serve(): Started server process [28852]
2025-06-17 03:26:42 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:26:42 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:26:42 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:26:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:26:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:26:49 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 03:26:49 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 03:26:49 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 03:26:49 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 03:26:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:26:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:26:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:26:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:26:49 [INFO] app.config.dependency_container:527 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:26:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:26:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:26:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:26:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:26:49 [INFO] app.config.dependency_container:527 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:26:49 [INFO] app.config.dependency_container:339 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 03:26:49 [INFO] app.config.dependency_container:290 - _setup_services(): Services initialized
2025-06-17 03:26:49 [INFO] app.config.dependency_container:361 - _setup_controllers(): Controllers setup deferred
2025-06-17 03:26:49 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 03:26:56 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:26:56 [INFO] uvicorn.error:83 - _serve(): Started server process [28878]
2025-06-17 03:26:56 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:26:56 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:26:56 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:26:57 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:26:58 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 03:26:58 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 03:26:58 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 03:26:58 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 03:26:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:26:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:26:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:26:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:26:58 [INFO] app.config.dependency_container:527 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:26:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:26:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:26:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:26:58 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:26:58 [INFO] app.config.dependency_container:527 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:26:58 [INFO] app.config.dependency_container:339 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 03:26:58 [INFO] app.config.dependency_container:290 - _setup_services(): Services initialized
2025-06-17 03:26:58 [INFO] app.config.dependency_container:361 - _setup_controllers(): Controllers setup deferred
2025-06-17 03:26:58 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 03:27:14 [WARNING] app.auth.jwt_handler:81 - decode_access_token(): Invalid token: Signature verification failed.
2025-06-17 03:27:14 [ERROR] app.auth.auth_dependencies:108 - get_current_user(): Authentication error: Invalid token: Signature verification failed.
2025-06-17 03:27:14 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60515 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 401
2025-06-17 03:27:33 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 03:27:33 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 03:27:33 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 03:27:33 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 03:27:33 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 03:27:33 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 03:27:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:27:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:27:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:27:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:27:33 [INFO] app.config.dependency_container:527 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:27:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:27:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:27:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:27:33 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:27:33 [INFO] app.config.dependency_container:527 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:27:33 [INFO] app.config.dependency_container:339 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 03:27:33 [INFO] app.config.dependency_container:290 - _setup_services(): Services initialized
2025-06-17 03:27:33 [INFO] app.config.dependency_container:361 - _setup_controllers(): Controllers setup deferred
2025-06-17 03:27:33 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 03:27:33 [INFO] app.api.controllers.taxation_controller:1657 - calculate_comprehensive_tax_for_employee(): Calculating comprehensive tax for employee EMP005, tax_year: 2025-26
2025-06-17 03:27:34 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 03:27:34 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 03:27:34 [ERROR] app.api.controllers.taxation_controller:1686 - calculate_comprehensive_tax_for_employee(): Error calculating comprehensive tax for employee EMP005: 'CapitalGainsIncome' object has no attribute 'calculate_ltcg_exemptions'
2025-06-17 03:27:34 [INFO] uvicorn.access:473 - send(): 127.0.0.1:60536 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 500
2025-06-17 03:27:40 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:27:40 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:27:40 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:27:40 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:27:40 [INFO] uvicorn.error:93 - _serve(): Finished server process [28878]
2025-06-17 03:27:48 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:27:49 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 03:27:49 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 03:27:49 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 03:27:49 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 03:27:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:27:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:27:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:27:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:27:49 [INFO] app.config.dependency_container:527 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:27:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:27:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:27:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:27:49 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:27:49 [INFO] app.config.dependency_container:527 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:27:49 [INFO] app.config.dependency_container:339 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 03:27:49 [INFO] app.config.dependency_container:290 - _setup_services(): Services initialized
2025-06-17 03:27:49 [INFO] app.config.dependency_container:361 - _setup_controllers(): Controllers setup deferred
2025-06-17 03:27:49 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 03:27:50 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:28:04 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:28:04 [INFO] uvicorn.error:83 - _serve(): Started server process [28952]
2025-06-17 03:28:04 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:28:04 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:28:04 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:31:02 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:31:02 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:31:02 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:31:02 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:31:02 [INFO] uvicorn.error:93 - _serve(): Finished server process [28952]
2025-06-17 03:31:09 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:31:19 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:31:19 [INFO] uvicorn.error:83 - _serve(): Started server process [29020]
2025-06-17 03:31:19 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:31:19 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:31:19 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:31:38 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:31:38 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:31:38 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:31:38 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:31:38 [INFO] uvicorn.error:93 - _serve(): Finished server process [29020]
2025-06-17 03:31:46 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:31:55 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:31:55 [INFO] uvicorn.error:83 - _serve(): Started server process [29056]
2025-06-17 03:31:55 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:31:55 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:31:55 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:32:00 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:32:08 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:32:08 [INFO] uvicorn.error:83 - _serve(): Started server process [29095]
2025-06-17 03:32:08 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:32:08 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:32:08 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:32:53 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:32:53 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:32:53 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:32:53 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:32:53 [INFO] uvicorn.error:93 - _serve(): Finished server process [29095]
2025-06-17 03:32:59 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:33:05 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:33:05 [INFO] uvicorn.error:83 - _serve(): Started server process [29118]
2025-06-17 03:33:05 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:33:05 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:33:05 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:33:28 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61223 - "OPTIONS /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 200
2025-06-17 03:33:28 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 03:33:28 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 03:33:28 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 03:33:28 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 03:33:28 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 03:33:28 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 03:33:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:33:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:33:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:33:28 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:33:28 [INFO] app.config.dependency_container:527 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:33:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:33:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:33:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:33:29 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:33:29 [INFO] app.config.dependency_container:527 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:33:29 [INFO] app.config.dependency_container:339 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 03:33:29 [INFO] app.config.dependency_container:290 - _setup_services(): Services initialized
2025-06-17 03:33:29 [INFO] app.config.dependency_container:361 - _setup_controllers(): Controllers setup deferred
2025-06-17 03:33:29 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 03:33:29 [INFO] app.api.controllers.taxation_controller:1657 - calculate_comprehensive_tax_for_employee(): Calculating comprehensive tax for employee EMP005, tax_year: 2025-26
2025-06-17 03:33:30 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 03:33:30 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 03:33:30 [ERROR] app.api.controllers.taxation_controller:1686 - calculate_comprehensive_tax_for_employee(): Error calculating comprehensive tax for employee EMP005: Failed to update taxation record in database: Invalid document {'find': 'taxation_records', 'filter': {'employee_id': EmployeeId('EMP005'), 'tax_year': TaxYear(start_year=2025, end_year=2026)}, 'limit': 1, 'singleBatch': True, 'lsid': {'id': Binary(b's[\xb5\xbd\xbbyHc\xa2\xb8E\xdf\xe0\xc8v\xbb', 4)}, '$clusterTime': {'clusterTime': Timestamp(1750111410, 4), 'signature': {'hash': b'\xb6B)\xaa\x7fh\xe1m\x1a\xf8\xcd 4\x82\x7fL\x99\xf6\xa6\xb1', 'keyId': 7454273826516369428}}, '$db': 'pms_localhost'} | cannot encode object: EmployeeId('EMP005'), of type: <class 'app.domain.value_objects.employee_id.EmployeeId'>
2025-06-17 03:33:30 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61223 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 500
2025-06-17 03:35:16 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:35:16 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:35:16 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:35:16 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:35:16 [INFO] uvicorn.error:93 - _serve(): Finished server process [29118]
2025-06-17 03:35:22 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:35:36 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:35:36 [INFO] uvicorn.error:83 - _serve(): Started server process [29199]
2025-06-17 03:35:36 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:35:36 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:35:36 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:35:42 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:35:51 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:35:51 [INFO] uvicorn.error:83 - _serve(): Started server process [29230]
2025-06-17 03:35:51 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:35:51 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:35:51 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:36:08 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61814 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 403
2025-06-17 03:36:33 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:36:34 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:36:34 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:36:34 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:36:34 [INFO] uvicorn.error:93 - _serve(): Finished server process [29230]
2025-06-17 03:36:39 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:36:53 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:36:53 [INFO] uvicorn.error:83 - _serve(): Started server process [29303]
2025-06-17 03:36:53 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:36:53 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:36:53 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:37:15 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:37:15 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:37:15 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:37:15 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:37:15 [INFO] uvicorn.error:93 - _serve(): Finished server process [29303]
2025-06-17 03:37:21 [INFO] app.logger_config:153 - configure_logging(): Logging configured - Level: INFO, Format: detailed, File: True
2025-06-17 03:37:29 [INFO] app.main:87 - <module>(): ✅ Critical routes registered: taxation, payout, user management, reimbursement, attendance, public holidays, employee leave, company leave, project attributes, reporting
2025-06-17 03:37:29 [INFO] uvicorn.error:83 - _serve(): Started server process [29339]
2025-06-17 03:37:29 [INFO] uvicorn.error:48 - startup(): Waiting for application startup.
2025-06-17 03:37:29 [INFO] app.main:40 - lifespan(): Running startup tasks...
2025-06-17 03:37:29 [INFO] uvicorn.error:62 - startup(): Application startup complete.
2025-06-17 03:37:30 [INFO] app.auth.jwt_handler:65 - decode_access_token(): Token decoded successfully for user: superadmin
2025-06-17 03:37:30 [INFO] app.auth.auth_dependencies:101 - get_current_user(): Authenticated user: superadmin from organisation: localhost
2025-06-17 03:37:30 [INFO] app.config.dependency_container:95 - initialize(): Initializing dependency container...
2025-06-17 03:37:30 [INFO] app.config.dependency_container:120 - _setup_infrastructure(): MongoDB connector configured with database: pms_global_database
2025-06-17 03:37:30 [INFO] app.config.dependency_container:121 - _setup_infrastructure(): MongoDB connection will be established lazily when first needed
2025-06-17 03:37:30 [INFO] app.config.dependency_container:209 - _setup_repositories(): Repositories initialized with centralized MongoDB configuration
2025-06-17 03:37:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:37:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:37:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:37:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:37:30 [INFO] app.config.dependency_container:527 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:37:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceNotificationHandler
2025-06-17 03:37:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAnalyticsHandler
2025-06-17 03:37:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceAuditHandler
2025-06-17 03:37:30 [INFO] app.infrastructure.services.enhanced_event_publisher:392 - register_handler(): Registered event handler: AttendanceIntegrationHandler
2025-06-17 03:37:30 [INFO] app.config.dependency_container:527 - _get_event_publisher(): Enhanced event publisher configured with attendance handlers
2025-06-17 03:37:30 [INFO] app.config.dependency_container:339 - _create_attendance_use_cases(): Attendance use cases created successfully
2025-06-17 03:37:30 [INFO] app.config.dependency_container:290 - _setup_services(): Services initialized
2025-06-17 03:37:30 [INFO] app.config.dependency_container:361 - _setup_controllers(): Controllers setup deferred
2025-06-17 03:37:30 [INFO] app.config.dependency_container:104 - initialize(): Dependency container initialized successfully
2025-06-17 03:37:30 [INFO] app.api.controllers.taxation_controller:1657 - calculate_comprehensive_tax_for_employee(): Calculating comprehensive tax for employee EMP005, tax_year: 2025-26
2025-06-17 03:37:31 [INFO] app.infrastructure.database.mongodb_connector:69 - connect(): MongoDB connection established successfully
2025-06-17 03:37:31 [INFO] app.infrastructure.database.mongodb_connector:113 - get_database(): Database 'pms_localhost' cached
2025-06-17 03:37:31 [INFO] app.api.controllers.taxation_controller:1682 - calculate_comprehensive_tax_for_employee(): Successfully calculated and updated tax for employee EMP005
2025-06-17 03:37:31 [INFO] uvicorn.access:473 - send(): 127.0.0.1:61947 - "POST /api/v2/taxation/records/employee/EMP005/calculate-comprehensive HTTP/1.1" 200
2025-06-17 03:39:36 [INFO] uvicorn.error:263 - shutdown(): Shutting down
2025-06-17 03:39:36 [INFO] uvicorn.error:67 - shutdown(): Waiting for application shutdown.
2025-06-17 03:39:36 [INFO] app.main:42 - lifespan(): Running shutdown tasks...
2025-06-17 03:39:36 [INFO] uvicorn.error:76 - shutdown(): Application shutdown complete.
2025-06-17 03:39:36 [INFO] uvicorn.error:93 - _serve(): Finished server process [29339]
