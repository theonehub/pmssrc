2025-05-15 23:44:52,337 INFO [auth.auth:85]: Checking role for user: superadmin
2025-05-15 23:44:52,418 INFO [services.taxation_service:392]: calculate_and_save_tax - Starting tax calculation and saving for employee ID: emp002
2025-05-15 23:44:52,419 INFO [services.taxation_service:393]: calculate_and_save_tax - Parameters - tax_year: 2025-2026, regime: old, salary provided: True, other_sources provided: True, capital_gains provided: True, deductions provided: True, leave_encashment provided: True
2025-05-15 23:44:52,419 INFO [services.taxation_service:416]: calculate_and_save_tax - Trying to fetch existing taxation data for employee: emp002
2025-05-15 23:44:52,509 INFO [services.taxation_service:420]: calculate_and_save_tax - Found existing taxation data for employee: emp002, age: 36, tax year: 2025-2026, regime: old
2025-05-15 23:44:52,509 INFO [services.taxation_service:424]: calculate_and_save_tax - Updating regime from old to old
2025-05-15 23:44:52,509 INFO [services.taxation_service:427]: calculate_and_save_tax - Updating tax year from 2025-2026 to 2025-2026
2025-05-15 23:44:52,510 INFO [services.taxation_service:430]: calculate_and_save_tax - Updating salary information
2025-05-15 23:44:52,510 INFO [services.taxation_service:433]: calculate_and_save_tax - Updating other sources information
2025-05-15 23:44:52,510 INFO [services.taxation_service:436]: calculate_and_save_tax - Updating house property information
2025-05-15 23:44:52,510 INFO [services.taxation_service:439]: calculate_and_save_tax - Updating capital gains information
2025-05-15 23:44:52,511 INFO [services.taxation_service:442]: calculate_and_save_tax - Updating deductions information
2025-05-15 23:44:52,511 INFO [services.taxation_service:445]: calculate_and_save_tax - Updating leave encashment information
2025-05-15 23:44:52,526 INFO [services.taxation_service:492]: calculate_and_save_tax - Saving taxation data to database
2025-05-15 23:44:52,860 INFO [services.taxation_service:502]: calculate_and_save_tax - Successfully saved taxation data
2025-05-15 23:44:52,860 INFO [services.taxation_service:509]: calculate_and_save_tax - Calculating total tax
2025-05-15 23:44:52,863 INFO [services.taxation_service:151]: calculate_total_tax() - Starting tax calculation for employee ID: emp002, hostname: localhost
2025-05-15 23:44:52,864 INFO [services.taxation_service:155]: calculate_total_tax() - Fetching taxation data from database
2025-05-15 23:44:52,911 INFO [services.taxation_service:159]: calculate_total_tax() - Successfully retrieved taxation data: ID=emp002, Age=36, Regime=old
2025-05-15 23:44:52,911 INFO [services.taxation_service:176]: calculate_total_tax() - Tax calculation parameters - Regime: old, Age: 36, Govt Employee: False
2025-05-15 23:44:52,912 INFO [services.taxation_service:179]: calculate_total_tax() - Calculating salary income with components - Basic: 1000000, DA: 100, HRA: 500050, HRA City: Delhi, HRA Percentage: 0.5, Special: 6000, Bonus: 9000
2025-05-15 23:44:52,915 INFO [models.taxation.salary:73]: Basic + DA: 1000100
2025-05-15 23:44:52,918 INFO [models.taxation.salary:81]: Rent paid: 500050
2025-05-15 23:44:52,921 INFO [models.taxation.salary:88]: Percent of salary: 500050.0
2025-05-15 23:44:52,927 INFO [models.taxation.salary:91]: Rent minus salary: 400040.0
2025-05-15 23:44:52,927 INFO [models.taxation.salary:95]: [Computed]HRA exemption calculated: 400040.0
2025-05-15 23:44:52,927 INFO [models.taxation.salary:121]: govt_employees_outside_india_allowance: 0
2025-05-15 23:44:52,928 INFO [models.taxation.salary:122]: supreme_high_court_judges_allowance: 0
2025-05-15 23:44:52,928 INFO [models.taxation.salary:123]: judge_compensatory_allowance: 0
2025-05-15 23:44:52,935 INFO [models.taxation.salary:124]: section_10_14_special_allowances: 0
2025-05-15 23:44:52,980 INFO [models.taxation.salary:125]: travel_on_tour_allowance: 900
2025-05-15 23:44:52,980 INFO [models.taxation.salary:126]: tour_daily_charge_allowance: 900
2025-05-15 23:44:52,981 INFO [models.taxation.salary:127]: conveyance_in_performace_of_duties: 900
2025-05-15 23:44:52,985 INFO [models.taxation.salary:128]: helper_in_performace_of_duties: 900
2025-05-15 23:44:52,988 INFO [models.taxation.salary:129]: [Computed] Section 10 and other exemptions: 5400
2025-05-15 23:44:52,993 INFO [models.taxation.salary:141]: hills_high_altd_allowance: 400, min with 7000: 400
2025-05-15 23:44:52,994 INFO [models.taxation.salary:142]: border_remote_allowance: 400, min with 3000: 400
2025-05-15 23:44:53,001 INFO [models.taxation.salary:143]: transport_employee_allowance: 400, min with 10000: 280.0
2025-05-15 23:44:53,001 INFO [models.taxation.salary:144]: children_education_allowance: 200, min with 2400: 200
2025-05-15 23:44:53,015 INFO [models.taxation.salary:145]: hostel_allowance: 200, min with 7200: 200
2025-05-15 23:44:53,016 INFO [models.taxation.salary:146]: transport_allowance: 200, min with 38400: 200
2025-05-15 23:44:53,017 INFO [models.taxation.salary:147]: underground_mines_allowance: 200, min with 9600: 200
2025-05-15 23:44:53,018 INFO [models.taxation.salary:148]: Other allowance exemptions: 1880.0
2025-05-15 23:44:53,019 INFO [models.taxation.salary:150]: Total salary exemptions - HRA: 400040.0, Section 10: 5400, Other: 1880.0
2025-05-15 23:44:53,020 INFO [models.taxation.perquisites:43]: Calculating total accommodation value for regime: old
2025-05-15 23:44:53,026 INFO [models.taxation.perquisites:44]: Gross salary: 1527951
2025-05-15 23:44:53,026 INFO [models.taxation.perquisites:45]: Furniture owned: True
2025-05-15 23:44:53,027 INFO [models.taxation.perquisites:46]: Furniture cost to employer: 8000
2025-05-15 23:44:53,027 INFO [models.taxation.perquisites:47]: Furniture cost paid by employee: 6000
2025-05-15 23:44:53,027 INFO [models.taxation.perquisites:48]: Accommodation provided: Govt
2025-05-15 23:44:53,029 INFO [models.taxation.perquisites:49]: Accommodation rent: 5000
2025-05-15 23:44:53,030 INFO [models.taxation.perquisites:50]: Accommodation city population: Below 15 lakhs in 2011 Census
2025-05-15 23:44:53,031 INFO [models.taxation.perquisites:51]: Accommodation gov lic fees: 3000
2025-05-15 23:44:53,031 INFO [models.taxation.perquisites:58]: Furniture value: -5200.0
2025-05-15 23:44:53,033 INFO [models.taxation.perquisites:60]: Govt accommodation value: -7200.0
2025-05-15 23:44:53,033 INFO [models.taxation.perquisites:98]: Calculating total car value for regime: old
2025-05-15 23:44:53,033 INFO [models.taxation.perquisites:99]: Car use: Mixed
2025-05-15 23:44:53,034 INFO [models.taxation.perquisites:100]: Car cost to employer: 2500
2025-05-15 23:44:53,034 INFO [models.taxation.perquisites:101]: Month counts: 12
2025-05-15 23:44:53,034 INFO [models.taxation.perquisites:102]: Other vehicle cost to employer: 2000
2025-05-15 23:44:53,034 INFO [models.taxation.perquisites:103]: Other vehicle month counts: 12
2025-05-15 23:44:53,034 INFO [models.taxation.perquisites:104]: Is expenses reimbursed: True
2025-05-15 23:44:53,035 INFO [models.taxation.perquisites:105]: Is car rating higher: True
2025-05-15 23:44:53,037 INFO [models.taxation.perquisites:106]: Is driver provided: True
2025-05-15 23:44:53,039 INFO [models.taxation.perquisites:136]: Calculating total medical reimbursement for regime: old
2025-05-15 23:44:53,040 INFO [models.taxation.perquisites:137]: Is treated in India: True
2025-05-15 23:44:53,041 INFO [models.taxation.perquisites:138]: Medical reimbursement by employer: 200000
2025-05-15 23:44:53,042 INFO [models.taxation.perquisites:139]: Travelling allowance for treatment: 100000
2025-05-15 23:44:53,043 INFO [models.taxation.perquisites:140]: RBI limit for illness: 150000
2025-05-15 23:44:53,044 INFO [models.taxation.perquisites:160]: Calculating total LTA value for regime: old
2025-05-15 23:44:53,044 INFO [models.taxation.perquisites:161]: LTA amount claimed: 150000
2025-05-15 23:44:53,044 INFO [models.taxation.perquisites:162]: LTA claimed count: 1
2025-05-15 23:44:53,046 INFO [models.taxation.perquisites:163]: Travel through: Public Transport
2025-05-15 23:44:53,046 INFO [models.taxation.perquisites:164]: Public transport travel amount for same distance: 80000
2025-05-15 23:44:53,047 INFO [models.taxation.perquisites:217]: Calculating total free education value for regime: old
2025-05-15 23:44:53,049 INFO [models.taxation.perquisites:218]: Employer maintained 1st child: True
2025-05-15 23:44:53,050 INFO [models.taxation.perquisites:219]: Monthly count 1st child: 10
2025-05-15 23:44:53,050 INFO [models.taxation.perquisites:220]: Employer monthly expenses 1st child: 3500
2025-05-15 23:44:53,051 INFO [models.taxation.perquisites:221]: Employer maintained 2nd child: False
2025-05-15 23:44:53,052 INFO [models.taxation.perquisites:222]: Monthly count 2nd child: 12
2025-05-15 23:44:53,053 INFO [models.taxation.perquisites:223]: Employer monthly expenses 2nd child: 2000
2025-05-15 23:44:53,054 INFO [models.taxation.perquisites:189]: Calculating total gas, electricity, and water value for regime: old
2025-05-15 23:44:53,057 INFO [models.taxation.perquisites:190]: Is gas manufactured by employer: True
2025-05-15 23:44:53,058 INFO [models.taxation.perquisites:191]: Gas amount paid by employer: 6000
2025-05-15 23:44:53,059 INFO [models.taxation.perquisites:192]: Gas amount paid by employee: 5000
2025-05-15 23:44:53,060 INFO [models.taxation.perquisites:193]: Is electricity manufactured by employer: True
2025-05-15 23:44:53,060 INFO [models.taxation.perquisites:194]: Electricity amount paid by employer: 24000
2025-05-15 23:44:53,061 INFO [models.taxation.perquisites:195]: Electricity amount paid by employee: 18000
2025-05-15 23:44:53,061 INFO [models.taxation.perquisites:196]: Is water manufactured by employer: False
2025-05-15 23:44:53,063 INFO [models.taxation.perquisites:197]: Water amount paid by employer: 5000
2025-05-15 23:44:53,064 INFO [models.taxation.perquisites:198]: Water amount paid by employee: 5000
2025-05-15 23:44:53,065 INFO [models.taxation.perquisites:409]: Calculating total domestic help value for regime: old
2025-05-15 23:44:53,066 INFO [models.taxation.perquisites:410]: Domestic help amount paid by employer: 7000
2025-05-15 23:44:53,066 INFO [models.taxation.perquisites:411]: Domestic help amount paid by employee: 50000
2025-05-15 23:44:53,066 INFO [models.taxation.perquisites:246]: Calculating total interest amount for regime: old
2025-05-15 23:44:53,067 INFO [models.taxation.perquisites:247]: Loan type: Housing
2025-05-15 23:44:53,068 INFO [models.taxation.perquisites:248]: Loan amount: 1000000
2025-05-15 23:44:53,070 INFO [models.taxation.perquisites:249]: Loan interest rate company: 4
2025-05-15 23:44:53,071 INFO [models.taxation.perquisites:250]: Loan interest rate SBI: 8
2025-05-15 23:44:53,072 INFO [models.taxation.perquisites:251]: Loan month count: 0
2025-05-15 23:44:53,075 INFO [models.taxation.perquisites:252]: Loan start date: 2025-04-01
2025-05-15 23:44:53,076 INFO [models.taxation.perquisites:253]: Loan end date: 
2025-05-15 23:44:53,076 INFO [models.taxation.perquisites:344]: Calculating total lunch value for regime: old
2025-05-15 23:44:53,077 INFO [models.taxation.perquisites:345]: Lunch amount paid by employer: 4000
2025-05-15 23:44:53,077 INFO [models.taxation.perquisites:346]: Lunch amount paid by employee: 500
2025-05-15 23:44:53,078 INFO [models.taxation.perquisites:277]: Calculating allocation gain for regime: old
2025-05-15 23:44:53,078 INFO [models.taxation.perquisites:278]: ESOP allotment price per share: 80
2025-05-15 23:44:53,079 INFO [models.taxation.perquisites:279]: ESOP exercise price per share: 88
2025-05-15 23:44:53,079 INFO [models.taxation.perquisites:280]: Number of ESOP shares awarded: 50
2025-05-15 23:44:53,080 INFO [models.taxation.perquisites:281]: Grant date: 2025-04-01
2025-05-15 23:44:53,082 INFO [models.taxation.perquisites:282]: Vesting date: 2025-05-15
2025-05-15 23:44:53,083 INFO [models.taxation.perquisites:283]: Exercise date: 2025-05-15
2025-05-15 23:44:53,084 INFO [models.taxation.perquisites:284]: Vesting period: 0
2025-05-15 23:44:53,110 INFO [models.taxation.perquisites:285]: Exercise period: 0
2025-05-15 23:44:53,125 INFO [models.taxation.perquisites:286]: Exercise price per share: 0
2025-05-15 23:44:53,130 INFO [models.taxation.perquisites:299]: Calculating total MAU value for regime: old
2025-05-15 23:44:53,133 INFO [models.taxation.perquisites:300]: MAU ownership: Employer-Owned
2025-05-15 23:44:53,185 INFO [models.taxation.perquisites:301]: MAU value to employer: 50000
2025-05-15 23:44:53,187 INFO [models.taxation.perquisites:302]: MAU value to employee: 20000
2025-05-15 23:44:53,191 INFO [models.taxation.perquisites:321]: Calculating total MAT value for regime: old
2025-05-15 23:44:53,195 INFO [models.taxation.perquisites:322]: MAT type: Electronics
2025-05-15 23:44:53,200 INFO [models.taxation.perquisites:323]: MAT value to employer: 125000
2025-05-15 23:44:53,200 INFO [models.taxation.perquisites:324]: MAT value to employee: 0
2025-05-15 23:44:53,202 INFO [models.taxation.perquisites:325]: MAT number of completed years of use: 1
2025-05-15 23:44:53,205 INFO [models.taxation.perquisites:364]: Calculating total monetary benefits value for regime: old
2025-05-15 23:44:53,219 INFO [models.taxation.perquisites:365]: Monetary amount paid by employer: 5000
2025-05-15 23:44:53,221 INFO [models.taxation.perquisites:366]: Expenditure for offical purpose: 4000
2025-05-15 23:44:53,224 INFO [models.taxation.perquisites:367]: Monetary benefits amount paid by employee: 1000
2025-05-15 23:44:53,231 INFO [models.taxation.perquisites:379]: Calculating total gift vouchers value for regime: old
2025-05-15 23:44:53,233 INFO [models.taxation.perquisites:380]: Gift vouchers amount paid by employer: 1200
2025-05-15 23:44:53,234 INFO [models.taxation.perquisites:393]: Calculating total club expenses value for regime: old
2025-05-15 23:44:53,234 INFO [models.taxation.perquisites:394]: Club expenses amount paid by employer: 4000
2025-05-15 23:44:53,236 INFO [models.taxation.perquisites:395]: Club expenses amount paid by employee: 100
2025-05-15 23:44:53,248 INFO [models.taxation.perquisites:396]: Club expenses amount paid for offical purpose: 3000
2025-05-15 23:44:53,257 INFO [models.taxation.salary:192]: Perquisites total: 400800.0
2025-05-15 23:44:53,259 INFO [models.taxation.salary:196]: Salary calculation - Gross: 1527951, Exemptions: 407620.0, Perquisites: 400800.0, Taxable: 1521131.0
2025-05-15 23:44:53,266 INFO [services.taxation_service:184]: calculate_total_tax() - Total salary income: 1521131.0
2025-05-15 23:44:53,285 INFO [services.taxation_service:187]: calculate_total_tax() - Calculating other sources income
2025-05-15 23:44:53,290 INFO [services.taxation_service:188]: Savings Interest: 7000
2025-05-15 23:44:53,292 INFO [services.taxation_service:189]: FD Interest: 700
2025-05-15 23:44:53,293 INFO [services.taxation_service:190]: RD Interest: 700
2025-05-15 23:44:53,294 INFO [services.taxation_service:191]: Dividend: 700
2025-05-15 23:44:53,296 INFO [services.taxation_service:192]: Gifts: 700
2025-05-15 23:44:53,300 INFO [services.taxation_service:193]: Other Interest: 700
2025-05-15 23:44:53,306 INFO [services.taxation_service:194]: Business&Professional Income: 700
2025-05-15 23:44:53,308 INFO [services.taxation_service:195]: Other Income: 700
2025-05-15 23:44:53,309 INFO [services.taxation_service:199]: calculate_total_tax() - Other sources taxable income: 1900
2025-05-15 23:44:53,310 INFO [models.taxation.income_sources:208]: STCG at special rate (under section 111A): 600
2025-05-15 23:44:53,311 INFO [services.taxation_service:203]: calculate_total_tax() - STCG at special rates: 600
2025-05-15 23:44:53,315 INFO [models.taxation.income_sources:214]: STCG at slab rates: 1000
2025-05-15 23:44:53,316 INFO [services.taxation_service:208]: calculate_total_tax() - STCG at slab rates: 1000
2025-05-15 23:44:53,317 INFO [models.taxation.income_sources:220]: LTCG at special rates: 800
2025-05-15 23:44:53,320 INFO [services.taxation_service:212]: calculate_total_tax() - LTCG at special rates: 800
2025-05-15 23:44:53,323 INFO [services.taxation_service:214]: calculate_total_tax() - Gross income before deductions: 1524031.0
2025-05-15 23:44:53,324 INFO [services.taxation_service:219]: calculate_total_tax() - Calculating deductions for old regime
2025-05-15 23:44:53,327 INFO [services.taxation_service:230]: calculate_total_tax() - EV purchase date: 2025-05-15
2025-05-15 23:44:53,331 INFO [services.taxation_service:250]: calculate_total_tax() - Section 80C components:
2025-05-15 23:44:53,333 INFO [services.taxation_service:251]: LIC: 90
2025-05-15 23:44:53,335 INFO [services.taxation_service:252]: EPF: 90
2025-05-15 23:44:53,336 INFO [services.taxation_service:253]: SSP: 90
2025-05-15 23:44:53,341 INFO [services.taxation_service:254]: NSC: 90
2025-05-15 23:44:53,342 INFO [services.taxation_service:255]: ULIP: 90
2025-05-15 23:44:53,342 INFO [services.taxation_service:256]: TSMF: 90
2025-05-15 23:44:53,344 INFO [services.taxation_service:257]: TFFTE2C: 90
2025-05-15 23:44:53,347 INFO [services.taxation_service:258]: Loan Principal: 90
2025-05-15 23:44:53,353 INFO [services.taxation_service:259]: Stamp Duty: 90
2025-05-15 23:44:53,356 INFO [services.taxation_service:260]: FD: 90
2025-05-15 23:44:53,358 INFO [services.taxation_service:261]: SCSS: 90
2025-05-15 23:44:53,359 INFO [services.taxation_service:262]: Others: 90
2025-05-15 23:44:53,361 INFO [services.taxation_service:267]: calculate_total_tax() - Section 80D components:
2025-05-15 23:44:53,364 INFO [services.taxation_service:268]: Self/Family: 90000
2025-05-15 23:44:53,365 INFO [services.taxation_service:269]: Preventive: 9000
2025-05-15 23:44:53,368 INFO [services.taxation_service:270]: Parents: 90000
2025-05-15 23:44:53,370 INFO [services.taxation_service:271]: Total: 189000
2025-05-15 23:44:53,373 INFO [models.taxation.deductions:63]: Section 80C components: Life Insurance Premium :90
2025-05-15 23:44:53,374 INFO [models.taxation.deductions:64]: Employee Provident Fund :90
2025-05-15 23:44:53,375 INFO [models.taxation.deductions:65]: Sukanya Samridhi Account :90
2025-05-15 23:44:53,376 INFO [models.taxation.deductions:66]: National Savings Certificate :90
2025-05-15 23:44:53,380 INFO [models.taxation.deductions:67]: Unit Linked Insurance Plan :90
2025-05-15 23:44:53,381 INFO [models.taxation.deductions:68]: Tax Saving Mutual Fund :90
2025-05-15 23:44:53,384 INFO [models.taxation.deductions:69]: Tuition Fees for full time education of upto 2 kids :90
2025-05-15 23:44:53,386 INFO [models.taxation.deductions:70]: Principal amount paid for housing loan installments :90
2025-05-15 23:44:53,512 INFO [models.taxation.deductions:71]: Stamp duty paid for purchase of residental property :90
2025-05-15 23:44:53,516 INFO [models.taxation.deductions:72]: Tax saving fixed deposit in a scheduled bank :90
2025-05-15 23:44:53,517 INFO [models.taxation.deductions:73]: Senior citizen savings scheme :90
2025-05-15 23:44:53,518 INFO [models.taxation.deductions:74]: Others :90
2025-05-15 23:44:53,519 INFO [models.taxation.deductions:75]: Pension Payment under section 80CCC :90
2025-05-15 23:44:53,519 INFO [models.taxation.deductions:76]: NPS :90
2025-05-15 23:44:53,520 INFO [models.taxation.deductions:77]: Additional contribution to NPS by self-employed or employee :90
2025-05-15 23:44:53,521 INFO [models.taxation.deductions:96]: Section 80C total: 1350
2025-05-15 23:44:53,523 INFO [models.taxation.deductions:115]: Calculating Section 80CCD(2) total for private employee 1524031.0 * 10% = 152403.1
2025-05-15 23:44:53,523 INFO [models.taxation.deductions:117]: Section 80CCD(2) Employer's contribution to NPS: 90
2025-05-15 23:44:53,528 INFO [models.taxation.deductions:118]: Deduction: 90
2025-05-15 23:44:53,530 INFO [models.taxation.deductions:139]: health insurance for self and family for age below 60:
2025-05-15 23:44:53,531 INFO [models.taxation.deductions:140]: min(90000 + min(9000, 5000), 25000) = 25000
2025-05-15 23:44:53,532 INFO [models.taxation.deductions:159]: health insurance for parents for age below 60:
2025-05-15 23:44:53,532 INFO [models.taxation.deductions:160]: min(90000, 25000) = 25000
2025-05-15 23:44:53,533 INFO [models.taxation.deductions:174]: Calculating Section 80DD total for Child                             with disability percentage More than 80%
2025-05-15 23:44:53,534 INFO [models.taxation.deductions:182]: Section 80DD min (Child, 125000) = 90
2025-05-15 23:44:53,534 INFO [models.taxation.deductions:198]: Calculating Section 80DDB total for Spouse                             with age 36
2025-05-15 23:44:53,535 INFO [models.taxation.deductions:202]: Section 80DDB min (80, 40000) = 80
2025-05-15 23:44:53,562 INFO [models.taxation.deductions:234]: Calculating Section 80EEB total for 2025-05-15
2025-05-15 23:44:53,562 INFO [models.taxation.deductions:252]: Section 80G 100% deduction for donations without qualifying limit:
2025-05-15 23:44:53,563 INFO [models.taxation.deductions:253]: Section 80G Prime Minister national relief fund
2025-05-15 23:44:53,563 INFO [models.taxation.deductions:254]: 20000
2025-05-15 23:44:53,564 INFO [models.taxation.deductions:283]: Section 80G 100% deduction for donations with qualifying limit:
2025-05-15 23:44:53,566 INFO [models.taxation.deductions:284]: Section 80G Any other fund that satisfies the conditions
2025-05-15 23:44:53,566 INFO [models.taxation.deductions:285]: 80000
2025-05-15 23:44:53,567 INFO [models.taxation.deductions:298]: Section 80G 50% deduction for donations with qualifying limit:
2025-05-15 23:44:53,567 INFO [models.taxation.deductions:299]: Section 80G For repair or renovation of any notified temple, mosque, gurudwara, church or other places of worship
2025-05-15 23:44:53,576 INFO [models.taxation.deductions:300]: 200000
2025-05-15 23:44:53,576 INFO [models.taxation.deductions:324]: Calculating Section 80U total for More than 80%
2025-05-15 23:44:53,577 INFO [models.taxation.deductions:329]: Section 80U min (80, 125000) = 80
2025-05-15 23:44:53,578 INFO [services.taxation_service:281]: calculate_total_tax() - Total deductions: 394093.1
2025-05-15 23:44:53,579 INFO [services.taxation_service:286]: calculate_total_tax() - Net taxable income: 1129937.9
2025-05-15 23:44:53,584 INFO [services.taxation_service:16]: compute_regular_tax - Starting regular tax computation with income: 1129937.9 and regime: old
2025-05-15 23:44:53,585 INFO [services.taxation_service:35]: compute_regular_tax - Using old regime tax slabs: [(0, 250000, 0.0), (250001, 500000, 0.05), (500001, 1000000, 0.2), (1000001, inf, 0.3)]
2025-05-15 23:44:53,585 INFO [services.taxation_service:51]: compute_regular_tax - Slab 0-250000 at rate 0.0%: Taxable amount 250001, Tax on slab: 0.0
2025-05-15 23:44:53,585 INFO [services.taxation_service:51]: compute_regular_tax - Slab 250001-500000 at rate 5.0%: Taxable amount 250000, Tax on slab: 12500.0
2025-05-15 23:44:53,586 INFO [services.taxation_service:51]: compute_regular_tax - Slab 500001-1000000 at rate 20.0%: Taxable amount 500000, Tax on slab: 100000.0
2025-05-15 23:44:53,587 INFO [services.taxation_service:51]: compute_regular_tax - Slab 1000001-inf at rate 30.0%: Taxable amount 129937.8999999999, Tax on slab: 38981.36999999997
2025-05-15 23:44:53,589 INFO [services.taxation_service:53]: compute_regular_tax - Total regular tax calculated: 151481.36999999997
2025-05-15 23:44:53,623 INFO [services.taxation_service:54]: compute_regular_tax - Full breakdown by slabs: [
  {
    "slab": "0-250000",
    "rate": "0.0%",
    "taxable_amount": 250001,
    "tax_on_slab": 0.0
  },
  {
    "slab": "250001-500000",
    "rate": "5.0%",
    "taxable_amount": 250000,
    "tax_on_slab": 12500.0
  },
  {
    "slab": "500001-1000000",
    "rate": "20.0%",
    "taxable_amount": 500000,
    "tax_on_slab": 100000.0
  },
  {
    "slab": "1000001-inf",
    "rate": "30.0%",
    "taxable_amount": 129937.9,
    "tax_on_slab": 38981.37
  }
]
2025-05-15 23:44:53,624 INFO [services.taxation_service:290]: calculate_total_tax() - Tax on regular income: 151481.36999999997
2025-05-15 23:44:53,625 INFO [services.taxation_service:294]: calculate_total_tax() - Tax on STCG at special rate (15%): 120.0
2025-05-15 23:44:53,627 INFO [services.taxation_service:303]: calculate_total_tax() - LTCG below 1L exemption limit, no tax
2025-05-15 23:44:53,628 INFO [services.taxation_service:307]: calculate_total_tax() - Base tax (before rebate/surcharge/cess): 151601.36999999997
2025-05-15 23:44:53,637 INFO [services.taxation_service:90]: apply_87a_rebate - Applying section 87A rebate with tax: 151601.36999999997, income: 1129937.9, regime: old
2025-05-15 23:44:53,637 INFO [services.taxation_service:102]: apply_87a_rebate - No rebate applicable: Income or regime not eligible
2025-05-15 23:44:53,638 INFO [services.taxation_service:105]: apply_87a_rebate - Tax before rebate: 151601.36999999997, Rebate applied: 0, Tax after rebate: 151601.36999999997
2025-05-15 23:44:53,639 INFO [services.taxation_service:311]: calculate_total_tax() - Tax after Section 87A rebate: 151601.36999999997
2025-05-15 23:44:53,640 INFO [services.taxation_service:109]: compute_surcharge - Computing surcharge with base tax: 151601.36999999997, net income: 1129937.9
2025-05-15 23:44:53,642 INFO [services.taxation_service:131]: compute_surcharge - Income <= 50L, no surcharge applicable
2025-05-15 23:44:53,642 INFO [services.taxation_service:135]: compute_surcharge - Regular income tax: 151601.36999999997, Surcharge on regular income: 0.0
2025-05-15 23:44:53,643 INFO [services.taxation_service:137]: compute_surcharge - Income above threshold: 1129937.9
2025-05-15 23:44:53,644 INFO [services.taxation_service:141]: compute_surcharge - Relief amount: 0
2025-05-15 23:44:53,645 INFO [services.taxation_service:144]: compute_surcharge - Surcharge: 0.0
2025-05-15 23:44:53,645 INFO [services.taxation_service:146]: compute_surcharge - Total tax: 151601.36999999997
2025-05-15 23:44:53,646 INFO [services.taxation_service:317]: calculate_total_tax() - Surcharge on tax: 0.0
2025-05-15 23:44:53,647 INFO [services.taxation_service:321]: calculate_total_tax() - Health and Education Cess (4%): 6064.054799999999
2025-05-15 23:44:53,647 INFO [services.taxation_service:324]: calculate_total_tax() - Final tax amount: 157665.42479999998
2025-05-15 23:44:53,648 INFO [services.taxation_service:342]: calculate_total_tax() - Tax breakdown: {
  "base_tax": 151601,
  "tax_after_rebate": 151601,
  "surcharge": 0,
  "cess": 6064,
  "total_tax": 157665,
  "details": {
    "regular_income": 1129938,
    "stcg_flat_rate": 120,
    "ltcg_112a": 0,
    "gross_income": 1524031,
    "total_deductions": 394093,
    "net_income": 1129938
  }
}
2025-05-15 23:44:53,649 INFO [services.taxation_service:352]: calculate_total_tax() - Updated taxation object: Tax payable: 157665, Tax paid: 0, Tax due: 157665, Tax refundable: 0, Tax pending: 157665
2025-05-15 23:44:53,650 INFO [services.taxation_service:358]: calculate_total_tax() - Saving updated taxation details to database
2025-05-15 23:44:53,850 INFO [services.taxation_service:369]: calculate_total_tax() - Successfully saved taxation details
2025-05-15 23:44:53,851 INFO [services.taxation_service:374]: calculate_total_tax() - Completed tax calculation for emp002, Final Tax: 157665
2025-05-15 23:44:53,851 INFO [services.taxation_service:511]: calculate_and_save_tax - Tax calculation completed successfully, total tax: 157665
2025-05-15 23:44:53,851 INFO [services.taxation_service:518]: calculate_and_save_tax - Retrieving updated taxation data with calculated tax
2025-05-15 23:44:53,898 INFO [services.taxation_service:521]: calculate_and_save_tax - Successfully retrieved updated taxation data with tax: 157665
INFO:     127.0.0.1:51942 - "POST /save-taxation-data HTTP/1.1" 200 OK
2025-05-15 23:44:54,028 INFO [auth.auth:85]: Checking role for user: superadmin
2025-05-15 23:44:54,052 INFO [services.taxation_service:151]: calculate_total_tax() - Starting tax calculation for employee ID: emp002, hostname: localhost
2025-05-15 23:44:54,053 INFO [services.taxation_service:155]: calculate_total_tax() - Fetching taxation data from database
2025-05-15 23:44:54,141 INFO [services.taxation_service:159]: calculate_total_tax() - Successfully retrieved taxation data: ID=emp002, Age=36, Regime=old
2025-05-15 23:44:54,141 INFO [services.taxation_service:176]: calculate_total_tax() - Tax calculation parameters - Regime: old, Age: 36, Govt Employee: False
2025-05-15 23:44:54,142 INFO [services.taxation_service:179]: calculate_total_tax() - Calculating salary income with components - Basic: 1000000, DA: 100, HRA: 500050, HRA City: Delhi, HRA Percentage: 0.5, Special: 6000, Bonus: 9000
2025-05-15 23:44:54,143 INFO [models.taxation.salary:73]: Basic + DA: 1000100
2025-05-15 23:44:54,143 INFO [models.taxation.salary:81]: Rent paid: 500050
2025-05-15 23:44:54,143 INFO [models.taxation.salary:88]: Percent of salary: 500050.0
2025-05-15 23:44:54,143 INFO [models.taxation.salary:91]: Rent minus salary: 400040.0
2025-05-15 23:44:54,144 INFO [models.taxation.salary:95]: [Computed]HRA exemption calculated: 400040.0
2025-05-15 23:44:54,144 INFO [models.taxation.salary:121]: govt_employees_outside_india_allowance: 0
2025-05-15 23:44:54,144 INFO [models.taxation.salary:122]: supreme_high_court_judges_allowance: 0
2025-05-15 23:44:54,144 INFO [models.taxation.salary:123]: judge_compensatory_allowance: 0
2025-05-15 23:44:54,145 INFO [models.taxation.salary:124]: section_10_14_special_allowances: 0
2025-05-15 23:44:54,145 INFO [models.taxation.salary:125]: travel_on_tour_allowance: 900
2025-05-15 23:44:54,150 INFO [models.taxation.salary:126]: tour_daily_charge_allowance: 900
2025-05-15 23:44:54,150 INFO [models.taxation.salary:127]: conveyance_in_performace_of_duties: 900
2025-05-15 23:44:54,151 INFO [models.taxation.salary:128]: helper_in_performace_of_duties: 900
2025-05-15 23:44:54,151 INFO [models.taxation.salary:129]: [Computed] Section 10 and other exemptions: 5400
2025-05-15 23:44:54,165 INFO [models.taxation.salary:141]: hills_high_altd_allowance: 400, min with 7000: 400
2025-05-15 23:44:54,177 INFO [models.taxation.salary:142]: border_remote_allowance: 400, min with 3000: 400
2025-05-15 23:44:54,178 INFO [models.taxation.salary:143]: transport_employee_allowance: 400, min with 10000: 280.0
2025-05-15 23:44:54,181 INFO [models.taxation.salary:144]: children_education_allowance: 200, min with 2400: 200
2025-05-15 23:44:54,182 INFO [models.taxation.salary:145]: hostel_allowance: 200, min with 7200: 200
2025-05-15 23:44:54,203 INFO [models.taxation.salary:146]: transport_allowance: 200, min with 38400: 200
2025-05-15 23:44:54,204 INFO [models.taxation.salary:147]: underground_mines_allowance: 200, min with 9600: 200
2025-05-15 23:44:54,218 INFO [models.taxation.salary:148]: Other allowance exemptions: 1880.0
2025-05-15 23:44:54,224 INFO [models.taxation.salary:150]: Total salary exemptions - HRA: 400040.0, Section 10: 5400, Other: 1880.0
2025-05-15 23:44:54,226 INFO [models.taxation.perquisites:43]: Calculating total accommodation value for regime: old
2025-05-15 23:44:54,227 INFO [models.taxation.perquisites:44]: Gross salary: 1527951
2025-05-15 23:44:54,229 INFO [models.taxation.perquisites:45]: Furniture owned: True
2025-05-15 23:44:54,231 INFO [models.taxation.perquisites:46]: Furniture cost to employer: 8000
2025-05-15 23:44:54,234 INFO [models.taxation.perquisites:47]: Furniture cost paid by employee: 6000
2025-05-15 23:44:54,243 INFO [models.taxation.perquisites:48]: Accommodation provided: Govt
2025-05-15 23:44:54,244 INFO [models.taxation.perquisites:49]: Accommodation rent: 5000
2025-05-15 23:44:54,327 INFO [models.taxation.perquisites:50]: Accommodation city population: Below 15 lakhs in 2011 Census
2025-05-15 23:44:54,328 INFO [models.taxation.perquisites:51]: Accommodation gov lic fees: 3000
2025-05-15 23:44:54,328 INFO [models.taxation.perquisites:58]: Furniture value: -5200.0
2025-05-15 23:44:54,329 INFO [models.taxation.perquisites:60]: Govt accommodation value: -7200.0
2025-05-15 23:44:54,329 INFO [models.taxation.perquisites:98]: Calculating total car value for regime: old
2025-05-15 23:44:54,329 INFO [models.taxation.perquisites:99]: Car use: Mixed
2025-05-15 23:44:54,329 INFO [models.taxation.perquisites:100]: Car cost to employer: 2500
2025-05-15 23:44:54,344 INFO [models.taxation.perquisites:101]: Month counts: 12
2025-05-15 23:44:54,350 INFO [models.taxation.perquisites:102]: Other vehicle cost to employer: 2000
2025-05-15 23:44:54,351 INFO [models.taxation.perquisites:103]: Other vehicle month counts: 12
2025-05-15 23:44:54,352 INFO [models.taxation.perquisites:104]: Is expenses reimbursed: True
2025-05-15 23:44:54,367 INFO [models.taxation.perquisites:105]: Is car rating higher: True
2025-05-15 23:44:54,368 INFO [models.taxation.perquisites:106]: Is driver provided: True
2025-05-15 23:44:54,368 INFO [models.taxation.perquisites:136]: Calculating total medical reimbursement for regime: old
2025-05-15 23:44:54,368 INFO [models.taxation.perquisites:137]: Is treated in India: True
2025-05-15 23:44:54,371 INFO [models.taxation.perquisites:138]: Medical reimbursement by employer: 200000
2025-05-15 23:44:54,372 INFO [models.taxation.perquisites:139]: Travelling allowance for treatment: 100000
2025-05-15 23:44:54,373 INFO [models.taxation.perquisites:140]: RBI limit for illness: 150000
2025-05-15 23:44:54,375 INFO [models.taxation.perquisites:160]: Calculating total LTA value for regime: old
2025-05-15 23:44:54,376 INFO [models.taxation.perquisites:161]: LTA amount claimed: 150000
2025-05-15 23:44:54,377 INFO [models.taxation.perquisites:162]: LTA claimed count: 1
2025-05-15 23:44:54,377 INFO [models.taxation.perquisites:163]: Travel through: Public Transport
2025-05-15 23:44:54,377 INFO [models.taxation.perquisites:164]: Public transport travel amount for same distance: 80000
2025-05-15 23:44:54,378 INFO [models.taxation.perquisites:217]: Calculating total free education value for regime: old
2025-05-15 23:44:54,378 INFO [models.taxation.perquisites:218]: Employer maintained 1st child: True
2025-05-15 23:44:54,381 INFO [models.taxation.perquisites:219]: Monthly count 1st child: 10
2025-05-15 23:44:54,382 INFO [models.taxation.perquisites:220]: Employer monthly expenses 1st child: 3500
2025-05-15 23:44:54,386 INFO [models.taxation.perquisites:221]: Employer maintained 2nd child: False
2025-05-15 23:44:54,387 INFO [models.taxation.perquisites:222]: Monthly count 2nd child: 12
2025-05-15 23:44:54,387 INFO [models.taxation.perquisites:223]: Employer monthly expenses 2nd child: 2000
2025-05-15 23:44:54,388 INFO [models.taxation.perquisites:189]: Calculating total gas, electricity, and water value for regime: old
2025-05-15 23:44:54,389 INFO [models.taxation.perquisites:190]: Is gas manufactured by employer: True
2025-05-15 23:44:54,390 INFO [models.taxation.perquisites:191]: Gas amount paid by employer: 6000
2025-05-15 23:44:54,391 INFO [models.taxation.perquisites:192]: Gas amount paid by employee: 5000
2025-05-15 23:44:54,393 INFO [models.taxation.perquisites:193]: Is electricity manufactured by employer: True
2025-05-15 23:44:54,395 INFO [models.taxation.perquisites:194]: Electricity amount paid by employer: 24000
2025-05-15 23:44:54,395 INFO [models.taxation.perquisites:195]: Electricity amount paid by employee: 18000
2025-05-15 23:44:54,397 INFO [models.taxation.perquisites:196]: Is water manufactured by employer: False
2025-05-15 23:44:54,397 INFO [models.taxation.perquisites:197]: Water amount paid by employer: 5000
2025-05-15 23:44:54,398 INFO [models.taxation.perquisites:198]: Water amount paid by employee: 5000
2025-05-15 23:44:54,398 INFO [models.taxation.perquisites:409]: Calculating total domestic help value for regime: old
2025-05-15 23:44:54,398 INFO [models.taxation.perquisites:410]: Domestic help amount paid by employer: 7000
2025-05-15 23:44:54,398 INFO [models.taxation.perquisites:411]: Domestic help amount paid by employee: 50000
2025-05-15 23:44:54,398 INFO [models.taxation.perquisites:246]: Calculating total interest amount for regime: old
2025-05-15 23:44:54,399 INFO [models.taxation.perquisites:247]: Loan type: Housing
2025-05-15 23:44:54,399 INFO [models.taxation.perquisites:248]: Loan amount: 1000000
2025-05-15 23:44:54,399 INFO [models.taxation.perquisites:249]: Loan interest rate company: 4
2025-05-15 23:44:54,400 INFO [models.taxation.perquisites:250]: Loan interest rate SBI: 8
2025-05-15 23:44:54,401 INFO [models.taxation.perquisites:251]: Loan month count: 0
2025-05-15 23:44:54,402 INFO [models.taxation.perquisites:252]: Loan start date: 2025-04-01
2025-05-15 23:44:54,406 INFO [models.taxation.perquisites:253]: Loan end date: 
2025-05-15 23:44:54,408 INFO [models.taxation.perquisites:344]: Calculating total lunch value for regime: old
2025-05-15 23:44:54,410 INFO [models.taxation.perquisites:345]: Lunch amount paid by employer: 4000
2025-05-15 23:44:54,414 INFO [models.taxation.perquisites:346]: Lunch amount paid by employee: 500
2025-05-15 23:44:54,414 INFO [models.taxation.perquisites:277]: Calculating allocation gain for regime: old
2025-05-15 23:44:54,415 INFO [models.taxation.perquisites:278]: ESOP allotment price per share: 80
2025-05-15 23:44:54,417 INFO [models.taxation.perquisites:279]: ESOP exercise price per share: 88
2025-05-15 23:44:54,418 INFO [models.taxation.perquisites:280]: Number of ESOP shares awarded: 50
2025-05-15 23:44:54,420 INFO [models.taxation.perquisites:281]: Grant date: 2025-04-01
2025-05-15 23:44:54,422 INFO [models.taxation.perquisites:282]: Vesting date: 2025-05-15
2025-05-15 23:44:54,423 INFO [models.taxation.perquisites:283]: Exercise date: 2025-05-15
2025-05-15 23:44:54,425 INFO [models.taxation.perquisites:284]: Vesting period: 0
2025-05-15 23:44:54,427 INFO [models.taxation.perquisites:285]: Exercise period: 0
2025-05-15 23:44:54,431 INFO [models.taxation.perquisites:286]: Exercise price per share: 0
2025-05-15 23:44:54,432 INFO [models.taxation.perquisites:299]: Calculating total MAU value for regime: old
2025-05-15 23:44:54,433 INFO [models.taxation.perquisites:300]: MAU ownership: Employer-Owned
2025-05-15 23:44:54,435 INFO [models.taxation.perquisites:301]: MAU value to employer: 50000
2025-05-15 23:44:54,437 INFO [models.taxation.perquisites:302]: MAU value to employee: 20000
2025-05-15 23:44:54,439 INFO [models.taxation.perquisites:321]: Calculating total MAT value for regime: old
2025-05-15 23:44:54,441 INFO [models.taxation.perquisites:322]: MAT type: Electronics
2025-05-15 23:44:54,443 INFO [models.taxation.perquisites:323]: MAT value to employer: 125000
2025-05-15 23:44:54,444 INFO [models.taxation.perquisites:324]: MAT value to employee: 0
2025-05-15 23:44:54,446 INFO [models.taxation.perquisites:325]: MAT number of completed years of use: 1
2025-05-15 23:44:54,447 INFO [models.taxation.perquisites:364]: Calculating total monetary benefits value for regime: old
2025-05-15 23:44:54,450 INFO [models.taxation.perquisites:365]: Monetary amount paid by employer: 5000
2025-05-15 23:44:54,451 INFO [models.taxation.perquisites:366]: Expenditure for offical purpose: 4000
2025-05-15 23:44:54,455 INFO [models.taxation.perquisites:367]: Monetary benefits amount paid by employee: 1000
2025-05-15 23:44:54,457 INFO [models.taxation.perquisites:379]: Calculating total gift vouchers value for regime: old
2025-05-15 23:44:54,458 INFO [models.taxation.perquisites:380]: Gift vouchers amount paid by employer: 1200
2025-05-15 23:44:54,459 INFO [models.taxation.perquisites:393]: Calculating total club expenses value for regime: old
2025-05-15 23:44:54,460 INFO [models.taxation.perquisites:394]: Club expenses amount paid by employer: 4000
2025-05-15 23:44:54,461 INFO [models.taxation.perquisites:395]: Club expenses amount paid by employee: 100
2025-05-15 23:44:54,461 INFO [models.taxation.perquisites:396]: Club expenses amount paid for offical purpose: 3000
2025-05-15 23:44:54,464 INFO [models.taxation.salary:192]: Perquisites total: 400800.0
2025-05-15 23:44:54,464 INFO [models.taxation.salary:196]: Salary calculation - Gross: 1527951, Exemptions: 407620.0, Perquisites: 400800.0, Taxable: 1521131.0
2025-05-15 23:44:54,465 INFO [services.taxation_service:184]: calculate_total_tax() - Total salary income: 1521131.0
2025-05-15 23:44:54,467 INFO [services.taxation_service:187]: calculate_total_tax() - Calculating other sources income
2025-05-15 23:44:54,468 INFO [services.taxation_service:188]: Savings Interest: 7000
2025-05-15 23:44:54,469 INFO [services.taxation_service:189]: FD Interest: 700
2025-05-15 23:44:54,470 INFO [services.taxation_service:190]: RD Interest: 700
2025-05-15 23:44:54,471 INFO [services.taxation_service:191]: Dividend: 700
2025-05-15 23:44:54,473 INFO [services.taxation_service:192]: Gifts: 700
2025-05-15 23:44:54,474 INFO [services.taxation_service:193]: Other Interest: 700
2025-05-15 23:44:54,474 INFO [services.taxation_service:194]: Business&Professional Income: 700
2025-05-15 23:44:54,479 INFO [services.taxation_service:195]: Other Income: 700
2025-05-15 23:44:54,480 INFO [services.taxation_service:199]: calculate_total_tax() - Other sources taxable income: 1900
2025-05-15 23:44:54,481 INFO [models.taxation.income_sources:208]: STCG at special rate (under section 111A): 600
2025-05-15 23:44:54,482 INFO [services.taxation_service:203]: calculate_total_tax() - STCG at special rates: 600
2025-05-15 23:44:54,484 INFO [models.taxation.income_sources:214]: STCG at slab rates: 1000
2025-05-15 23:44:54,485 INFO [services.taxation_service:208]: calculate_total_tax() - STCG at slab rates: 1000
2025-05-15 23:44:54,487 INFO [models.taxation.income_sources:220]: LTCG at special rates: 800
2025-05-15 23:44:54,489 INFO [services.taxation_service:212]: calculate_total_tax() - LTCG at special rates: 800
2025-05-15 23:44:54,490 INFO [services.taxation_service:214]: calculate_total_tax() - Gross income before deductions: 1524031.0
2025-05-15 23:44:54,491 INFO [services.taxation_service:219]: calculate_total_tax() - Calculating deductions for old regime
2025-05-15 23:44:54,493 INFO [services.taxation_service:230]: calculate_total_tax() - EV purchase date: 2025-05-15
2025-05-15 23:44:54,494 INFO [services.taxation_service:250]: calculate_total_tax() - Section 80C components:
2025-05-15 23:44:54,496 INFO [services.taxation_service:251]: LIC: 90
2025-05-15 23:44:54,497 INFO [services.taxation_service:252]: EPF: 90
2025-05-15 23:44:54,499 INFO [services.taxation_service:253]: SSP: 90
2025-05-15 23:44:54,500 INFO [services.taxation_service:254]: NSC: 90
2025-05-15 23:44:54,501 INFO [services.taxation_service:255]: ULIP: 90
2025-05-15 23:44:54,502 INFO [services.taxation_service:256]: TSMF: 90
2025-05-15 23:44:54,504 INFO [services.taxation_service:257]: TFFTE2C: 90
2025-05-15 23:44:54,505 INFO [services.taxation_service:258]: Loan Principal: 90
2025-05-15 23:44:54,507 INFO [services.taxation_service:259]: Stamp Duty: 90
2025-05-15 23:44:54,508 INFO [services.taxation_service:260]: FD: 90
2025-05-15 23:44:54,509 INFO [services.taxation_service:261]: SCSS: 90
2025-05-15 23:44:54,510 INFO [services.taxation_service:262]: Others: 90
2025-05-15 23:44:54,511 INFO [services.taxation_service:267]: calculate_total_tax() - Section 80D components:
2025-05-15 23:44:54,513 INFO [services.taxation_service:268]: Self/Family: 90000
2025-05-15 23:44:54,578 INFO [services.taxation_service:269]: Preventive: 9000
2025-05-15 23:44:54,578 INFO [services.taxation_service:270]: Parents: 90000
2025-05-15 23:44:54,578 INFO [services.taxation_service:271]: Total: 189000
2025-05-15 23:44:54,579 INFO [models.taxation.deductions:63]: Section 80C components: Life Insurance Premium :90
2025-05-15 23:44:54,581 INFO [models.taxation.deductions:64]: Employee Provident Fund :90
2025-05-15 23:44:54,582 INFO [models.taxation.deductions:65]: Sukanya Samridhi Account :90
2025-05-15 23:44:54,582 INFO [models.taxation.deductions:66]: National Savings Certificate :90
2025-05-15 23:44:54,583 INFO [models.taxation.deductions:67]: Unit Linked Insurance Plan :90
2025-05-15 23:44:54,584 INFO [models.taxation.deductions:68]: Tax Saving Mutual Fund :90
2025-05-15 23:44:54,584 INFO [models.taxation.deductions:69]: Tuition Fees for full time education of upto 2 kids :90
2025-05-15 23:44:54,584 INFO [models.taxation.deductions:70]: Principal amount paid for housing loan installments :90
2025-05-15 23:44:54,589 INFO [models.taxation.deductions:71]: Stamp duty paid for purchase of residental property :90
2025-05-15 23:44:54,594 INFO [models.taxation.deductions:72]: Tax saving fixed deposit in a scheduled bank :90
2025-05-15 23:44:54,599 INFO [models.taxation.deductions:73]: Senior citizen savings scheme :90
2025-05-15 23:44:54,600 INFO [models.taxation.deductions:74]: Others :90
2025-05-15 23:44:54,603 INFO [models.taxation.deductions:75]: Pension Payment under section 80CCC :90
2025-05-15 23:44:54,610 INFO [models.taxation.deductions:76]: NPS :90
2025-05-15 23:44:54,611 INFO [models.taxation.deductions:77]: Additional contribution to NPS by self-employed or employee :90
2025-05-15 23:44:54,611 INFO [models.taxation.deductions:96]: Section 80C total: 1350
2025-05-15 23:44:54,616 INFO [models.taxation.deductions:115]: Calculating Section 80CCD(2) total for private employee 1524031.0 * 10% = 152403.1
2025-05-15 23:44:54,619 INFO [models.taxation.deductions:117]: Section 80CCD(2) Employer's contribution to NPS: 90
2025-05-15 23:44:54,620 INFO [models.taxation.deductions:118]: Deduction: 90
2025-05-15 23:44:54,621 INFO [models.taxation.deductions:139]: health insurance for self and family for age below 60:
2025-05-15 23:44:54,621 INFO [models.taxation.deductions:140]: min(90000 + min(9000, 5000), 25000) = 25000
2025-05-15 23:44:54,622 INFO [models.taxation.deductions:159]: health insurance for parents for age below 60:
2025-05-15 23:44:54,622 INFO [models.taxation.deductions:160]: min(90000, 25000) = 25000
2025-05-15 23:44:54,624 INFO [models.taxation.deductions:174]: Calculating Section 80DD total for Child                             with disability percentage More than 80%
2025-05-15 23:44:54,625 INFO [models.taxation.deductions:182]: Section 80DD min (Child, 125000) = 90
2025-05-15 23:44:54,626 INFO [models.taxation.deductions:198]: Calculating Section 80DDB total for Spouse                             with age 36
2025-05-15 23:44:54,626 INFO [models.taxation.deductions:202]: Section 80DDB min (80, 40000) = 80
2025-05-15 23:44:54,627 INFO [models.taxation.deductions:234]: Calculating Section 80EEB total for 2025-05-15
2025-05-15 23:44:54,627 INFO [models.taxation.deductions:252]: Section 80G 100% deduction for donations without qualifying limit:
2025-05-15 23:44:54,627 INFO [models.taxation.deductions:253]: Section 80G Prime Minister national relief fund
2025-05-15 23:44:54,627 INFO [models.taxation.deductions:254]: 20000
2025-05-15 23:44:54,627 INFO [models.taxation.deductions:283]: Section 80G 100% deduction for donations with qualifying limit:
2025-05-15 23:44:54,628 INFO [models.taxation.deductions:284]: Section 80G Any other fund that satisfies the conditions
2025-05-15 23:44:54,628 INFO [models.taxation.deductions:285]: 80000
2025-05-15 23:44:54,628 INFO [models.taxation.deductions:298]: Section 80G 50% deduction for donations with qualifying limit:
2025-05-15 23:44:54,629 INFO [models.taxation.deductions:299]: Section 80G For repair or renovation of any notified temple, mosque, gurudwara, church or other places of worship
2025-05-15 23:44:54,630 INFO [models.taxation.deductions:300]: 200000
2025-05-15 23:44:54,632 INFO [models.taxation.deductions:324]: Calculating Section 80U total for More than 80%
2025-05-15 23:44:54,633 INFO [models.taxation.deductions:329]: Section 80U min (80, 125000) = 80
2025-05-15 23:44:54,634 INFO [services.taxation_service:281]: calculate_total_tax() - Total deductions: 394093.1
2025-05-15 23:44:54,635 INFO [services.taxation_service:286]: calculate_total_tax() - Net taxable income: 1129937.9
2025-05-15 23:44:54,638 INFO [services.taxation_service:16]: compute_regular_tax - Starting regular tax computation with income: 1129937.9 and regime: old
2025-05-15 23:44:54,667 INFO [services.taxation_service:35]: compute_regular_tax - Using old regime tax slabs: [(0, 250000, 0.0), (250001, 500000, 0.05), (500001, 1000000, 0.2), (1000001, inf, 0.3)]
2025-05-15 23:44:54,668 INFO [services.taxation_service:51]: compute_regular_tax - Slab 0-250000 at rate 0.0%: Taxable amount 250001, Tax on slab: 0.0
2025-05-15 23:44:54,668 INFO [services.taxation_service:51]: compute_regular_tax - Slab 250001-500000 at rate 5.0%: Taxable amount 250000, Tax on slab: 12500.0
2025-05-15 23:44:54,668 INFO [services.taxation_service:51]: compute_regular_tax - Slab 500001-1000000 at rate 20.0%: Taxable amount 500000, Tax on slab: 100000.0
2025-05-15 23:44:54,669 INFO [services.taxation_service:51]: compute_regular_tax - Slab 1000001-inf at rate 30.0%: Taxable amount 129937.8999999999, Tax on slab: 38981.36999999997
2025-05-15 23:44:54,669 INFO [services.taxation_service:53]: compute_regular_tax - Total regular tax calculated: 151481.36999999997
2025-05-15 23:44:54,670 INFO [services.taxation_service:54]: compute_regular_tax - Full breakdown by slabs: [
  {
    "slab": "0-250000",
    "rate": "0.0%",
    "taxable_amount": 250001,
    "tax_on_slab": 0.0
  },
  {
    "slab": "250001-500000",
    "rate": "5.0%",
    "taxable_amount": 250000,
    "tax_on_slab": 12500.0
  },
  {
    "slab": "500001-1000000",
    "rate": "20.0%",
    "taxable_amount": 500000,
    "tax_on_slab": 100000.0
  },
  {
    "slab": "1000001-inf",
    "rate": "30.0%",
    "taxable_amount": 129937.9,
    "tax_on_slab": 38981.37
  }
]
2025-05-15 23:44:54,675 INFO [services.taxation_service:290]: calculate_total_tax() - Tax on regular income: 151481.36999999997
2025-05-15 23:44:54,676 INFO [services.taxation_service:294]: calculate_total_tax() - Tax on STCG at special rate (15%): 120.0
2025-05-15 23:44:54,677 INFO [services.taxation_service:303]: calculate_total_tax() - LTCG below 1L exemption limit, no tax
2025-05-15 23:44:54,678 INFO [services.taxation_service:307]: calculate_total_tax() - Base tax (before rebate/surcharge/cess): 151601.36999999997
2025-05-15 23:44:54,679 INFO [services.taxation_service:90]: apply_87a_rebate - Applying section 87A rebate with tax: 151601.36999999997, income: 1129937.9, regime: old
2025-05-15 23:44:54,680 INFO [services.taxation_service:102]: apply_87a_rebate - No rebate applicable: Income or regime not eligible
2025-05-15 23:44:54,681 INFO [services.taxation_service:105]: apply_87a_rebate - Tax before rebate: 151601.36999999997, Rebate applied: 0, Tax after rebate: 151601.36999999997
2025-05-15 23:44:54,684 INFO [services.taxation_service:311]: calculate_total_tax() - Tax after Section 87A rebate: 151601.36999999997
2025-05-15 23:44:54,686 INFO [services.taxation_service:109]: compute_surcharge - Computing surcharge with base tax: 151601.36999999997, net income: 1129937.9
2025-05-15 23:44:54,687 INFO [services.taxation_service:131]: compute_surcharge - Income <= 50L, no surcharge applicable
2025-05-15 23:44:54,687 INFO [services.taxation_service:135]: compute_surcharge - Regular income tax: 151601.36999999997, Surcharge on regular income: 0.0
2025-05-15 23:44:54,687 INFO [services.taxation_service:137]: compute_surcharge - Income above threshold: 1129937.9
2025-05-15 23:44:54,687 INFO [services.taxation_service:141]: compute_surcharge - Relief amount: 0
2025-05-15 23:44:54,688 INFO [services.taxation_service:144]: compute_surcharge - Surcharge: 0.0
2025-05-15 23:44:54,688 INFO [services.taxation_service:146]: compute_surcharge - Total tax: 151601.36999999997
2025-05-15 23:44:54,688 INFO [services.taxation_service:317]: calculate_total_tax() - Surcharge on tax: 0.0
2025-05-15 23:44:54,688 INFO [services.taxation_service:321]: calculate_total_tax() - Health and Education Cess (4%): 6064.054799999999
2025-05-15 23:44:54,689 INFO [services.taxation_service:324]: calculate_total_tax() - Final tax amount: 157665.42479999998
2025-05-15 23:44:54,689 INFO [services.taxation_service:342]: calculate_total_tax() - Tax breakdown: {
  "base_tax": 151601,
  "tax_after_rebate": 151601,
  "surcharge": 0,
  "cess": 6064,
  "total_tax": 157665,
  "details": {
    "regular_income": 1129938,
    "stcg_flat_rate": 120,
    "ltcg_112a": 0,
    "gross_income": 1524031,
    "total_deductions": 394093,
    "net_income": 1129938
  }
}
2025-05-15 23:44:54,694 INFO [services.taxation_service:352]: calculate_total_tax() - Updated taxation object: Tax payable: 157665, Tax paid: 0, Tax due: 157665, Tax refundable: 0, Tax pending: 157665
2025-05-15 23:44:54,696 INFO [services.taxation_service:358]: calculate_total_tax() - Saving updated taxation details to database
2025-05-15 23:44:54,910 INFO [services.taxation_service:369]: calculate_total_tax() - Successfully saved taxation details
2025-05-15 23:44:54,911 INFO [services.taxation_service:374]: calculate_total_tax() - Completed tax calculation for emp002, Final Tax: 157665
INFO:     127.0.0.1:51942 - "POST /calculate-tax HTTP/1.1" 200 OK
